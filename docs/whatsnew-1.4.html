
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What&#39;s New in Pyramid 1.4 &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="copyright" title="著作権" href="copyright.html" />
    <link rel="next" title="What&#39;s New in Pyramid 1.3" href="whatsnew-1.3.html" />
    <link rel="prev" title="What&#39;s New in Pyramid 1.5" href="whatsnew-1.5.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.3.html" title="What&#39;s New in Pyramid 1.3"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.5.html" title="What&#39;s New in Pyramid 1.5"
             accesskey="P">前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-pyramid-1-4">
<h1>What's New in Pyramid 1.4<a class="headerlink" href="#what-s-new-in-pyramid-1-4" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>This article explains the new features in <span>Pyramid</span> version 1.4 as
compared to its predecessor, <span>Pyramid</span> 1.3.  It also documents backwards
incompatibilities between the two versions and deprecations added to
<span>Pyramid</span> 1.4, as well as software dependency changes and notable
documentation additions.</p>
<div class="section" id="major-feature-additions">
<h2>Major Feature Additions<a class="headerlink" href="#major-feature-additions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The major feature additions in Pyramid 1.4 follow.</p>
<div class="section" id="third-party-predicates">
<h3>Third-Party Predicates<a class="headerlink" href="#third-party-predicates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Third-party custom view, route, and subscriber predicates can now be added
for use by view authors via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></code></a>,
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route_predicate" title="pyramid.config.Configurator.add_route_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route_predicate()</span></code></a> and
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_subscriber_predicate" title="pyramid.config.Configurator.add_subscriber_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate()</span></code></a>.  So, for
example, doing this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_view_predicate</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="n">my</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">ABCPredicate</span><span class="p">)</span>
</pre></div>
</div>
<p>Might allow a view author to do this in an application that configured that
predicate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="n">abc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar features exist for <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a>,
and <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></code></a>.  See
<a class="reference internal" href="narr/hooks.html#registering-thirdparty-predicates"><span class="std std-ref">Adding a Third Party View, Route, or Subscriber Predicate</span></a> for more information.</p>
</li>
</ul>
</div>
<div class="section" id="easy-custom-json-serialization">
<h3>Easy Custom JSON Serialization<a class="headerlink" href="#easy-custom-json-serialization" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Views can now return custom objects which will be serialized to JSON by a
JSON renderer by defining a <code class="docutils literal notranslate"><span class="pre">__json__</span></code> method on the object's class. This
method should return values natively serializable by <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code> (such
as ints, lists, dictionaries, strings, and so forth).  See
<a class="reference internal" href="narr/renderers.html#json-serializing-custom-objects"><span class="std std-ref">Serializing Custom Objects</span></a> for more information.  The JSON
renderer now also allows for the definition of custom type adapters to
convert unknown objects to JSON serializations, in case you can't add a
<code class="docutils literal notranslate"><span class="pre">__json__</span></code> method to returned objects.</li>
</ul>
</div>
<div class="section" id="partial-mako-and-chameleon-template-renderings">
<h3>Partial Mako and Chameleon Template Renderings<a class="headerlink" href="#partial-mako-and-chameleon-template-renderings" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Mako renderer now supports using a def name in an asset spec.  When the
def name is present in the asset spec, the system will render the template
named def within the template instead of rendering the entire template. An
example asset spec which names a def is
<code class="docutils literal notranslate"><span class="pre">package:path/to/template#defname.mako</span></code>. This will render the def named
<code class="docutils literal notranslate"><span class="pre">defname</span></code> inside the <code class="docutils literal notranslate"><span class="pre">template.mako</span></code> template instead of rendering the
entire template.  The old way of returning a tuple in the form
<code class="docutils literal notranslate"><span class="pre">('defname',</span> <span class="pre">{})</span></code> from the view is supported for backward compatibility.</li>
<li>The Chameleon ZPT renderer now supports using a macro name in an asset
spec.  When the macro name is present in the asset spec, the system will
render the macro listed as a <code class="docutils literal notranslate"><span class="pre">define-macro</span></code> and return the result instead
of rendering the entire template.  An example asset spec:
<code class="docutils literal notranslate"><span class="pre">package:path/to/template#macroname.pt</span></code>.  This will render the macro
defined as <code class="docutils literal notranslate"><span class="pre">macroname</span></code> within the <code class="docutils literal notranslate"><span class="pre">template.pt</span></code> template instead of the
entire template.</li>
</ul>
</div>
<div class="section" id="subrequest-support">
<h3>Subrequest Support<a class="headerlink" href="#subrequest-support" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Developers may invoke a subrequest by using the
<a class="reference internal" href="api/request.html#pyramid.request.Request.invoke_subrequest" title="pyramid.request.Request.invoke_subrequest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.invoke_subrequest()</span></code></a> API.  This allows a
developer to obtain a response from one view callable by issuing a subrequest
from within a different view callable.  See <a class="reference internal" href="narr/subrequest.html#subrequest-chapter"><span class="std std-ref">Invoking a Subrequest</span></a> for
more information.</li>
</ul>
</div>
</div>
<div class="section" id="minor-feature-additions">
<h2>Minor Feature Additions<a class="headerlink" href="#minor-feature-additions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul>
<li><p class="first"><a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code></a> has been updated
to support newer hashing algorithms such as <code class="docutils literal notranslate"><span class="pre">sha512</span></code>. Existing applications
should consider updating if possible for improved security over the default
md5 hashing.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_directive()</span></code></a> now accepts arbitrary
callables like partials or objects implementing <code class="docutils literal notranslate"><span class="pre">__call__</span></code> which don't
have <code class="docutils literal notranslate"><span class="pre">__name__</span></code> and <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> attributes.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/621">https://github.com/Pylons/pyramid/issues/621</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/647">https://github.com/Pylons/pyramid/pull/647</a>.</p>
</li>
<li><p class="first">As of this release, the <code class="docutils literal notranslate"><span class="pre">request_method</span></code> view/route predicate, when used,
will also imply that <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> is implied when you use <code class="docutils literal notranslate"><span class="pre">GET</span></code>.  For
example, using <code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method='GET')</span></code> is equivalent to
using <code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD'))</span></code>.  Using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'POST')</span></code> is equivalent to using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD',</span> <span class="pre">'POST')</span></code>.  This is because
HEAD is a variant of GET that omits the body, and WebOb has special support
to return an empty body when a HEAD is used.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a> has been introduced
to support extending request objects with arbitrary callables. This method
expands on the now documentation-deprecated
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property()</span></code></a> by supporting
methods as well as properties. This method also causes less code to be
executed at request construction time than
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_request_property()</span></code></a>.</p>
</li>
<li><p class="first">The static view machinery now raises rather than returns
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPNotFound" title="pyramid.httpexceptions.HTTPNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPNotFound</span></code></a> and
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPMovedPermanently" title="pyramid.httpexceptions.HTTPMovedPermanently"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPMovedPermanently</span></code></a> exceptions, so these can
be caught by the Not Found View (and other exception views).</p>
</li>
<li><p class="first">When there is a predicate mismatch exception (seen when no view matches for
a given request due to predicates not working), the exception now contains
a textual description of the predicate which didn't match.</p>
</li>
<li><p class="first">An <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_permission" title="pyramid.config.Configurator.add_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_permission()</span></code></a> directive method was
added to the Configurator.  This directive registers a free-standing
permission introspectable into the Pyramid introspection system.
Frameworks built atop Pyramid can thus use the <code class="docutils literal notranslate"><span class="pre">permissions</span></code>
introspectable category data to build a comprehensive list of permissions
supported by a running system.  Before this method was added, permissions
were already registered in this introspectable category as a side effect of
naming them in an <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> call, this
method just makes it possible to arrange for a permission to be put into
the <code class="docutils literal notranslate"><span class="pre">permissions</span></code> introspectable category without naming it along with an
associated view.  Here's an example of usage of <code class="docutils literal notranslate"><span class="pre">add_permission</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <a class="reference internal" href="api/session.html#pyramid.session.UnencryptedCookieSessionFactoryConfig" title="pyramid.session.UnencryptedCookieSessionFactoryConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.session.UnencryptedCookieSessionFactoryConfig()</span></code></a> function
now accepts <code class="docutils literal notranslate"><span class="pre">signed_serialize</span></code> and <code class="docutils literal notranslate"><span class="pre">signed_deserialize</span></code> hooks which may
be used to influence how the sessions are marshalled (by default this is
done with HMAC+pickle).</p>
</li>
<li><p class="first"><a class="reference internal" href="api/testing.html#pyramid.testing.DummyRequest" title="pyramid.testing.DummyRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code></a> now supports methods supplied by the
<code class="docutils literal notranslate"><span class="pre">pyramid.util.InstancePropertyMixin</span></code> class such as <code class="docutils literal notranslate"><span class="pre">set_property</span></code>.</p>
</li>
<li><p class="first">Request properties and methods added via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a> or
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property()</span></code></a> are now available to
tweens.</p>
</li>
<li><p class="first">Request properties and methods added via
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a> or
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property()</span></code></a> are now available
in the request object returned from <a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap()</span></code></a>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">request.context</span></code> of environment request during
<a class="reference internal" href="api/paster.html#pyramid.paster.bootstrap" title="pyramid.paster.bootstrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap()</span></code></a> is now the root object if a context isn't
already set on a provided request.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/decorator.html#pyramid.decorator.reify" title="pyramid.decorator.reify"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.decorator.reify</span></code></a>  is now an API, and was added to
the API documentation.</p>
</li>
<li><p class="first">Added the <a class="reference internal" href="api/testing.html#pyramid.testing.testConfig" title="pyramid.testing.testConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.testing.testConfig()</span></code></a> context manager, which can be
used to generate a configurator in a test, e.g. <code class="docutils literal notranslate"><span class="pre">with</span>
<span class="pre">testing.testConfig(...):</span></code>.</p>
</li>
<li><p class="first">A new <code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.session.check_csrf_token()</span></code> convenience API function was
added.</p>
</li>
<li><p class="first">A <code class="docutils literal notranslate"><span class="pre">check_csrf</span></code> view predicate was added.  For example, you can now do
<code class="docutils literal notranslate"><span class="pre">config.add_view(someview,</span> <span class="pre">check_csrf=True)</span></code>.  When the predicate is
checked, if the <code class="docutils literal notranslate"><span class="pre">csrf_token</span></code> value in <code class="docutils literal notranslate"><span class="pre">request.params</span></code> matches the csrf
token in the request's session, the view will be permitted to execute.
Otherwise, it will not be permitted to execute.</p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></code> to <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold, so that tables
defined imperatively will work.</p>
</li>
<li><p class="first">Comments with references to documentation sections placed in scaffold
<code class="docutils literal notranslate"><span class="pre">.ini</span></code> files.</p>
</li>
<li><p class="first">Allow multiple values to be specified to the <code class="docutils literal notranslate"><span class="pre">request_param</span></code> view/route
predicate as a sequence.  Previously only a single string value was allowed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></p>
</li>
<li><p class="first">Added an HTTP Basic authentication policy
at <a class="reference internal" href="api/authentication.html#pyramid.authentication.BasicAuthAuthenticationPolicy" title="pyramid.authentication.BasicAuthAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.authentication.BasicAuthAuthenticationPolicy</span></code></a>.</p>
</li>
<li><p class="first">The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></code></a> method now
returns the policy object it creates.</p>
</li>
<li><p class="first">The DummySecurityPolicy created by
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></code></a> now sets a
<code class="docutils literal notranslate"><span class="pre">forgotten</span></code> value  on the policy (the value <code class="docutils literal notranslate"><span class="pre">True</span></code>) when its <code class="docutils literal notranslate"><span class="pre">forget</span></code>
method is called.</p>
</li>
<li><p class="first">The DummySecurityPolicy created by
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></code></a> now sets a
<code class="docutils literal notranslate"><span class="pre">remembered</span></code> value on the policy, which is the value of the <code class="docutils literal notranslate"><span class="pre">principal</span></code>
argument it's called with when its <code class="docutils literal notranslate"><span class="pre">remember</span></code> method is called.</p>
</li>
<li><p class="first">New <code class="docutils literal notranslate"><span class="pre">physical_path</span></code> view predicate.  If specified, this value should be a
string or a tuple representing the physical traversal path of the context
found via traversal for this predicate to match as true.  For example:
<code class="docutils literal notranslate"><span class="pre">physical_path='/'</span></code> or <code class="docutils literal notranslate"><span class="pre">physical_path='/a/b/c'</span></code> or <code class="docutils literal notranslate"><span class="pre">physical_path=('',</span>
<span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></code>.  It's useful when you want to always potentially show a
view when some object is traversed to, but you can't be sure about what kind
of object it will be, so you can't use the <code class="docutils literal notranslate"><span class="pre">context</span></code> predicate.</p>
</li>
<li><p class="first">Added an <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> route and view predicate.</p>
</li>
<li><p class="first">Do not allow the userid returned from the
<a class="reference internal" href="api/security.html#pyramid.security.authenticated_userid" title="pyramid.security.authenticated_userid"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.security.authenticated_userid()</span></code></a> or the userid that is one of the
list of principals returned by <a class="reference internal" href="api/security.html#pyramid.security.effective_principals" title="pyramid.security.effective_principals"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.security.effective_principals()</span></code></a>
to be either of the strings <code class="docutils literal notranslate"><span class="pre">system.Everyone</span></code> or <code class="docutils literal notranslate"><span class="pre">system.Authenticated</span></code>
when any of the built-in authorization policies that live in
<a class="reference internal" href="api/authentication.html#module-pyramid.authentication" title="pyramid.authentication"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.authentication</span></code></a> are in use.  These two strings are reserved for
internal usage by Pyramid and they will no longer be accepted as valid
userids.</p>
</li>
<li><p class="first">Allow a <code class="docutils literal notranslate"><span class="pre">_depth</span></code> argument to <a class="reference internal" href="api/view.html#pyramid.view.view_config" title="pyramid.view.view_config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code></a>, which will
permit limited composition reuse of the decorator by other software that
wants to provide custom decorators that are much like view_config.</p>
</li>
<li><p class="first">Allow an iterable of decorators to be passed to
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a>. This allows views to be wrapped
by more than one decorator without requiring combining the decorators
yourself.</p>
</li>
<li><p class="first"><a class="reference internal" href="api/security.html#pyramid.security.view_execution_permitted" title="pyramid.security.view_execution_permitted"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.security.view_execution_permitted()</span></code></a> used to return <cite>True</cite> if no
view could be found. It now raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> exception in that case,
as it doesn't make sense to assert that a nonexistent view is
execution-permitted. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/299">https://github.com/Pylons/pyramid/issues/299</a>.</p>
</li>
<li><p class="first">Small microspeed enhancement which anticipates that a
<a class="reference internal" href="api/response.html#pyramid.response.Response" title="pyramid.response.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code></a> object is likely to be returned from a
view.  Some code is shortcut if the class of the object returned by a view is
this class.  A similar microoptimization was done to
<a class="reference internal" href="api/request.html#pyramid.request.Request.is_response" title="pyramid.request.Request.is_response"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.request.Request.is_response()</span></code></a>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments on all <code class="docutils literal notranslate"><span class="pre">p*</span></code> commands
(<code class="docutils literal notranslate"><span class="pre">pserve</span></code>, <code class="docutils literal notranslate"><span class="pre">pshell</span></code>, <code class="docutils literal notranslate"><span class="pre">pviews</span></code>, etc) in the form <code class="docutils literal notranslate"><span class="pre">a=1</span> <span class="pre">b=2</span></code> so you can
fill in values in parameterized <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file, e.g. <code class="docutils literal notranslate"><span class="pre">pshell</span>
<span class="pre">etc/development.ini</span> <span class="pre">http_port=8080</span></code>.</p>
</li>
<li><p class="first">In order to allow people to ignore unused arguments to subscriber callables
and to normalize the relationship between event subscribers and subscriber
predicates, we now allow both subscribers and subscriber predicates to accept
only a single <code class="docutils literal notranslate"><span class="pre">event</span></code> argument even if they've been subscribed for
notifications that involve multiple interfaces.</p>
</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h2>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>The Pyramid router no longer adds the values <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code> or
<code class="docutils literal notranslate"><span class="pre">bfg.routes.matchdict</span></code> to the request's WSGI environment dictionary.
These values were docs-deprecated in <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 1.0 (effectively seven
minor releases ago).  If your code depended on these values, use
<code class="docutils literal notranslate"><span class="pre">request.matched_route</span></code> and <code class="docutils literal notranslate"><span class="pre">request.matchdict</span></code> instead.</li>
<li>It is no longer possible to pass an environ dictionary directly to
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.ResourceTreeTraverser.__call__</span></code> (aka
<code class="docutils literal notranslate"><span class="pre">ModelGraphTraverser.__call__</span></code>).  Instead, you must pass a request
object.  Passing an environment instead of a request has generated a
deprecation warning since Pyramid 1.1.</li>
<li>Pyramid will no longer work properly if you use the
<code class="docutils literal notranslate"><span class="pre">webob.request.LegacyRequest</span></code> as a request factory.  Instances of the
LegacyRequest class have a <code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> which return a string.
This Pyramid release assumes that <code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> will
unconditionally be Unicode.</li>
<li>The functions from <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_zpt</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_text</span></code>
named <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code>, <code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>, and
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code> have been removed.  These have issued a
deprecation warning upon import since Pyramid 1.0.  Use
<a class="reference internal" href="api/renderers.html#pyramid.renderers.get_renderer" title="pyramid.renderers.get_renderer"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.renderers.get_renderer()</span></code></a>,
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.get_renderer().implementation()</span></code>,
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code></a> or
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.renderers.render_to_response()</span></code></a> respectively instead of these
functions.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.configuration</span></code> module was removed.  It had been deprecated
since Pyramid 1.0 and printed a deprecation warning upon its use.  Use
<a class="reference internal" href="api/config.html#module-pyramid.config" title="pyramid.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.config</span></code></a> instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.paster.PyramidTemplate</span></code> API was removed.  It had been
deprecated since Pyramid 1.1 and issued a warning on import.  If your code
depended on this, adjust your code to import
<a class="reference internal" href="api/scaffolds.html#pyramid.scaffolds.PyramidTemplate" title="pyramid.scaffolds.PyramidTemplate"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.scaffolds.PyramidTemplate</span></code></a> instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.settings.get_settings()</span></code> API was removed.  It had been
printing a deprecation warning since Pyramid 1.0.  If your code depended on
this API, use <code class="docutils literal notranslate"><span class="pre">pyramid.threadlocal.get_current_registry().settings</span></code>
instead or use the <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute of the registry available from
the request (<code class="docutils literal notranslate"><span class="pre">request.registry.settings</span></code>).</li>
<li>These APIs from the <code class="docutils literal notranslate"><span class="pre">pyramid.testing</span></code> module were removed.  They have
been printing deprecation warnings since Pyramid 1.0:<ul>
<li><code class="docutils literal notranslate"><span class="pre">registerDummySecurityPolicy</span></code>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_securitypolicy" title="pyramid.config.Configurator.testing_securitypolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerResources</span></code> (aka <code class="docutils literal notranslate"><span class="pre">registerModels</span></code>), use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_resources" title="pyramid.config.Configurator.testing_resources"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_resources()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerEventListener</span></code>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_add_subscriber" title="pyramid.config.Configurator.testing_add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_add_subscriber()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code> (aka <code class="docutils literal notranslate"><span class="pre">registerDummyRenderer</span></code>), use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.testing_add_renderer" title="pyramid.config.Configurator.testing_add_renderer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_add_renderer()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerView</span></code>, use <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerUtility</span></code>, use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.registry.registerUtility()</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerAdapter</span></code>, use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.registry.registerAdapter()</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerSubscriber</span></code>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerRoute</span></code>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerSettings</span></code>, use
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_settings" title="pyramid.config.Configurator.add_settings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_settings()</span></code></a> instead.</li>
</ul>
</li>
<li>In Pyramid 1.3 and previous, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of a Response object
returned by a view was invoked before any finished callbacks were executed.
As of this release, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of a Response object is invoked
<em>after</em> finished callbacks are executed.  This is in support of the
<a class="reference internal" href="api/request.html#pyramid.request.Request.invoke_subrequest" title="pyramid.request.Request.invoke_subrequest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.invoke_subrequest()</span></code></a> feature.</li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>The <a class="reference internal" href="api/config.html#pyramid.config.Configurator.set_request_property" title="pyramid.config.Configurator.set_request_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property()</span></code></a> directive has
been documentation-deprecated.  The method remains usable but the more
featureful <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a> should be
used in its place (it has all of the same capabilities but can also extend
the request object with methods).</li>
<li><a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code></a> will emit a
deprecation warning if an application is using the policy without explicitly
passing a <code class="docutils literal notranslate"><span class="pre">hashalg</span></code> argument. This is because the default is &quot;md5&quot; which is
considered theoretically subject to collision attacks. If you really want
&quot;md5&quot; then you must specify it explicitly to get rid of the warning.</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>Documentation Enhancements<a class="headerlink" href="#documentation-enhancements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Added an <a class="reference internal" href="narr/upgrading.html#upgrading-chapter"><span class="std std-ref">Upgrading Pyramid</span></a> chapter to the narrative documentation.
It describes how to cope with deprecations and removals of Pyramid APIs and
how to show Pyramid-generated deprecation warnings while running tests and
while running a server.</li>
<li>Added a <a class="reference internal" href="narr/subrequest.html#subrequest-chapter"><span class="std std-ref">Invoking a Subrequest</span></a> chapter to the narrative documentation.</li>
<li>All of the tutorials that use
<a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code></a> now explicitly
pass <code class="docutils literal notranslate"><span class="pre">sha512</span></code> as a <code class="docutils literal notranslate"><span class="pre">hashalg</span></code> argument.</li>
<li>Many cleanups and improvements to narrative and API docs.</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h2>Dependency Changes<a class="headerlink" href="#dependency-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Pyramid now requires WebOb 1.2b3+ (the prior Pyramid release only relied on
1.2dev+).  This is to ensure that we obtain a version of WebOb that returns
<code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> as text.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">What's New in Pyramid 1.4</a><ul>
<li><a class="reference internal" href="#major-feature-additions">Major Feature Additions</a><ul>
<li><a class="reference internal" href="#third-party-predicates">Third-Party Predicates</a></li>
<li><a class="reference internal" href="#easy-custom-json-serialization">Easy Custom JSON Serialization</a></li>
<li><a class="reference internal" href="#partial-mako-and-chameleon-template-renderings">Partial Mako and Chameleon Template Renderings</a></li>
<li><a class="reference internal" href="#subrequest-support">Subrequest Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#minor-feature-additions">Minor Feature Additions</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#documentation-enhancements">Documentation Enhancements</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.5.html"
                        title="前の章へ">What's New in Pyramid 1.5</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.3.html"
                        title="次の章へ">What's New in Pyramid 1.3</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/whatsnew-1.4.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.3.html" title="What&#39;s New in Pyramid 1.3"
             >次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.5.html" title="What&#39;s New in Pyramid 1.5"
             >前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 8月 07, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4 で生成しました。
    </div>
  </body>
</html>