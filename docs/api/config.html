
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyramid.config &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="pyramid.csrf" href="csrf.html" />
    <link rel="prev" title="pyramid.compat" href="compat.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="csrf.html" title="pyramid.csrf"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="compat.html" title="pyramid.compat"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API Documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pyramid.config">
<span id="pyramid-config"></span><h1><a class="reference internal" href="#module-pyramid.config" title="pyramid.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.config</span></code></a><a class="headerlink" href="#module-pyramid.config" title="このヘッドラインへのパーマリンク">¶</a></h1>
<dl class="class">
<dt id="pyramid.config.Configurator">
<em class="property">class </em><code class="descname">Configurator</code><span class="sig-paren">(</span><em>registry=None</em>, <em>package=None</em>, <em>settings=None</em>, <em>root_factory=None</em>, <em>authentication_policy=None</em>, <em>authorization_policy=None</em>, <em>renderers=None</em>, <em>debug_logger=None</em>, <em>locale_negotiator=None</em>, <em>request_factory=None</em>, <em>response_factory=None</em>, <em>default_permission=None</em>, <em>session_factory=None</em>, <em>default_view_mapper=None</em>, <em>autocommit=False</em>, <em>exceptionresponse_view=&lt;function default_exceptionresponse_view&gt;</em>, <em>route_prefix=None</em>, <em>introspection=True</em>, <em>root_package=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A Configurator is used to configure a <span>Pyramid</span>
<a class="reference internal" href="../glossary.html#term-application-registry"><span class="xref std std-term">application registry</span></a>.</p>
<p>The Configurator lifecycle can be managed by using a context manager to
automatically handle calling <a class="reference internal" href="#pyramid.config.Configurator.begin" title="pyramid.config.Configurator.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.begin()</span></code></a> and
<a class="reference internal" href="#pyramid.config.Configurator.end" title="pyramid.config.Configurator.end"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.end()</span></code></a> as well as
<a class="reference internal" href="#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span> <span class="k">as</span> <span class="n">config</span><span class="p">:</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">registry</span></code> argument is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, it must
be an instance of the <a class="reference internal" href="registry.html#pyramid.registry.Registry" title="pyramid.registry.Registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.registry.Registry</span></code></a> class
representing the registry to configure.  If <code class="docutils literal notranslate"><span class="pre">registry</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the
configurator will create a <a class="reference internal" href="registry.html#pyramid.registry.Registry" title="pyramid.registry.Registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.registry.Registry</span></code></a> instance
itself; it will also perform some default configuration that would not
otherwise be done.  After its construction, the configurator may be used
to add further configuration to the registry.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">registry</span></code> is assigned the above-mentioned class
instance, all other constructor arguments are ignored,
with the exception of <code class="docutils literal notranslate"><span class="pre">package</span></code>.</p>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">package</span></code> argument is passed, it must be a reference to a Python
<a class="reference internal" href="../glossary.html#term-package"><span class="xref std std-term">package</span></a> (e.g. <code class="docutils literal notranslate"><span class="pre">sys.modules['thepackage']</span></code>) or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> to the same.  This value is used as a basis to convert
relative paths passed to various configuration methods, such as methods
which accept a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument, into absolute paths.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>
is passed (the default), the package is assumed to be the Python package
in which the <em>caller</em> of the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> constructor lives.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">root_package</span></code> is passed, it will propagate through the
configuration hierarchy as a way for included packages to locate
resources relative to the package in which the main <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> was
created. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is passed (the default), the <code class="docutils literal notranslate"><span class="pre">root_package</span></code> will
be derived from the <code class="docutils literal notranslate"><span class="pre">package</span></code> argument. The <code class="docutils literal notranslate"><span class="pre">package</span></code> attribute is
always pointing at the package being included when using <a class="reference internal" href="#pyramid.config.Configurator.include" title="pyramid.config.Configurator.include"><code class="xref py py-meth docutils literal notranslate"><span class="pre">include()</span></code></a>,
whereas the <code class="docutils literal notranslate"><span class="pre">root_package</span></code> does not change.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">settings</span></code> argument is passed, it should be a Python dictionary
representing the <a class="reference internal" href="../glossary.html#term-deployment-settings"><span class="xref std std-term">deployment settings</span></a> for this application.  These
are later retrievable using the
<a class="reference internal" href="registry.html#pyramid.registry.Registry.settings" title="pyramid.registry.Registry.settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.registry.Registry.settings</span></code></a> attribute (aka
<code class="docutils literal notranslate"><span class="pre">request.registry.settings</span></code>).</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">root_factory</span></code> argument is passed, it should be an object
representing the default <a class="reference internal" href="../glossary.html#term-root-factory"><span class="xref std std-term">root factory</span></a> for your application or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to the same.  If it is <code class="docutils literal notranslate"><span class="pre">None</span></code>, a default
root factory will be used.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> is passed, it should be an instance
of an <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a> or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python
name</span></a> to the same.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> is passed, it should be an instance of
an <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a> or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to
the same.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">A <code class="docutils literal notranslate"><span class="pre">ConfigurationError</span></code> will be raised when an
authorization policy is supplied without also supplying an
authentication policy (authorization requires authentication).</p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">renderers</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default), a default set of
<a class="reference internal" href="../glossary.html#term-renderer"><span class="xref std std-term">renderer</span></a> factories is used. Else, it should be a list of
tuples representing a set of renderer factories which should be
configured into this application, and each tuple representing a set of
positional values that should be passed to
<a class="reference internal" href="#pyramid.config.Configurator.add_renderer" title="pyramid.config.Configurator.add_renderer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_renderer()</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">debug_logger</span></code> is not passed, a default debug logger that logs to a
logger will be used (the logger name will be the package name of the
<em>caller</em> of this configurator).  If it is passed, it should be an
instance of the <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a> (PEP 282) standard library class
or a Python logger name.  The debug logger is used by <span>Pyramid</span>
itself to log warnings and authorization debugging information.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">locale_negotiator</span></code> is passed, it should be a <a class="reference internal" href="../glossary.html#term-locale-negotiator"><span class="xref std std-term">locale
negotiator</span></a> implementation or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to
same.  See <a class="reference internal" href="../narr/i18n.html#custom-locale-negotiator"><span class="std std-ref">Using a Custom Locale Negotiator</span></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">request_factory</span></code> is passed, it should be a <a class="reference internal" href="../glossary.html#term-request-factory"><span class="xref std std-term">request
factory</span></a> implementation or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to the same.
See <a class="reference internal" href="../narr/hooks.html#changing-the-request-factory"><span class="std std-ref">Changing the Request Factory</span></a>.  By default it is <code class="docutils literal notranslate"><span class="pre">None</span></code>,
which means use the default request factory.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">response_factory</span></code> is passed, it should be a <a class="reference internal" href="../glossary.html#term-response-factory"><span class="xref std std-term">response
factory</span></a> implementation or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to the same.
See <a class="reference internal" href="../narr/hooks.html#changing-the-response-factory"><span class="std std-ref">Changing the Response Factory</span></a>.  By default it is <code class="docutils literal notranslate"><span class="pre">None</span></code>,
which means use the default response factory.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">default_permission</span></code> is passed, it should be a
<a class="reference internal" href="../glossary.html#term-permission"><span class="xref std std-term">permission</span></a> string to be used as the default permission for
all view configuration registrations performed against this
Configurator.  An example of a permission string:<code class="docutils literal notranslate"><span class="pre">'view'</span></code>.
Adding a default permission makes it unnecessary to protect each
view configuration with an explicit permission, unless your
application policy requires some exception for a particular view.
By default, <code class="docutils literal notranslate"><span class="pre">default_permission</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, meaning that view
configurations which do not explicitly declare a permission will
always be executable by entirely anonymous users (any
authorization policy in effect is ignored).</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">See also <a class="reference internal" href="../narr/security.html#setting-a-default-permission"><span class="std std-ref">Setting a Default Permission</span></a>.</p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">session_factory</span></code> is passed, it should be an object which
implements the <a class="reference internal" href="../glossary.html#term-session-factory"><span class="xref std std-term">session factory</span></a> interface.  If a nondefault
value is passed, the <code class="docutils literal notranslate"><span class="pre">session_factory</span></code> will be used to create a
session object when <code class="docutils literal notranslate"><span class="pre">request.session</span></code> is accessed.  Note that
the same outcome can be achieved by calling
<a class="reference internal" href="#pyramid.config.Configurator.set_session_factory" title="pyramid.config.Configurator.set_session_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_session_factory()</span></code></a>.  By
default, this argument is <code class="docutils literal notranslate"><span class="pre">None</span></code>, indicating that no session
factory will be configured (and thus accessing <code class="docutils literal notranslate"><span class="pre">request.session</span></code>
will throw an error) unless <code class="docutils literal notranslate"><span class="pre">set_session_factory</span></code> is called later
during configuration.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">autocommit</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, every method called on the configurator
will cause an immediate action, and no configuration conflict detection
will be used. If <code class="docutils literal notranslate"><span class="pre">autocommit</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, most methods of the
configurator will defer their action until
<a class="reference internal" href="#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> is called.  When
<a class="reference internal" href="#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> is called, the actions implied
by the called methods will be checked for configuration conflicts unless
<code class="docutils literal notranslate"><span class="pre">autocommit</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.  If a conflict is detected, a
<code class="docutils literal notranslate"><span class="pre">ConfigurationConflictError</span></code> will be raised.  Calling
<a class="reference internal" href="#pyramid.config.Configurator.make_wsgi_app" title="pyramid.config.Configurator.make_wsgi_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.make_wsgi_app()</span></code></a> always implies a final
commit.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code> is passed, it will be used as the default
<a class="reference internal" href="../glossary.html#term-view-mapper"><span class="xref std std-term">view mapper</span></a> factory for view configurations that don't otherwise
specify one (see <a class="reference internal" href="interfaces.html#pyramid.interfaces.IViewMapperFactory" title="pyramid.interfaces.IViewMapperFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IViewMapperFactory</span></code></a>).  If
<code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code> is not passed, a superdefault view mapper will be
used.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">exceptionresponse_view</span></code> is passed, it must be a <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view
callable</span></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code>.  If it is a view callable, it will be used as an
exception view callable when an <a class="reference internal" href="../glossary.html#term-exception-response"><span class="xref std std-term">exception response</span></a> is raised. If
<code class="docutils literal notranslate"><span class="pre">exceptionresponse_view</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, no exception response view will
be registered, and all raised exception responses will be bubbled up to
Pyramid's caller.  By
default, the <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.default_exceptionresponse_view</span></code>
function is used as the <code class="docutils literal notranslate"><span class="pre">exceptionresponse_view</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> is passed, all routes added with
<a class="reference internal" href="#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> will have the specified path
prepended to their pattern.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">introspection</span></code> is passed, it must be a boolean value.  If it's
<code class="docutils literal notranslate"><span class="pre">True</span></code>, introspection values during actions will be kept for use
for tools like the debug toolbar.  If it's <code class="docutils literal notranslate"><span class="pre">False</span></code>, introspection
values provided by registrations will be ignored.  By default, it is
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">exceptionresponse_view</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">introspection</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.6 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">root_package</span></code> argument.
The <code class="docutils literal notranslate"><span class="pre">response_factory</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.9 で追加: </span>The ability to use the configurator as a context manager with the
<code class="docutils literal notranslate"><span class="pre">with</span></code>-statement to make threadlocal configuration available for
further configuration with an implicit commit.</p>
</div>
<p><span class="methodcategory">Controlling Configuration State</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.commit"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.commit" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Commit any pending configuration actions. If a configuration
conflict is detected in the pending configuration actions, this method
will raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">ConfigurationConflictError</span></code>; within the traceback
of this error will be information about the source of the conflict,
usually including file names and line numbers of the cause of the
configuration conflicts.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">You should think very carefully before manually invoking
<code class="docutils literal notranslate"><span class="pre">commit()</span></code>. Especially not as part of any reusable configuration
methods. Normally it should only be done by an application author at
the end of configuration in order to override certain aspects of an
addon.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><em>request=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.begin"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.begin" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Indicate that application or test configuration has begun.
This pushes a dictionary containing the <a class="reference internal" href="../glossary.html#term-application-registry"><span class="xref std std-term">application
registry</span></a> implied by <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute of this
configurator and the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> implied by the
<code class="docutils literal notranslate"><span class="pre">request</span></code> argument onto the <a class="reference internal" href="../glossary.html#term-thread-local"><span class="xref std std-term">thread local</span></a> stack
consulted by various <a class="reference internal" href="threadlocal.html#module-pyramid.threadlocal" title="pyramid.threadlocal"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.threadlocal</span></code></a> API
functions.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">request</span></code> is not specified and the registry owned by the
configurator is already pushed as the current threadlocal registry
then this method will keep the current threadlocal request unchanged.</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.8 で変更: </span>The current threadlocal request is propagated if the current
threadlocal registry remains unchanged.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.end">
<code class="descname">end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.end"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.end" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Indicate that application or test configuration has ended.
This pops the last value pushed onto the <a class="reference internal" href="../glossary.html#term-thread-local"><span class="xref std std-term">thread local</span></a>
stack (usually by the <code class="docutils literal notranslate"><span class="pre">begin</span></code> method) and returns that
value.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.include">
<code class="descname">include</code><span class="sig-paren">(</span><em>callable</em>, <em>route_prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.include"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.include" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Include a configuration callable, to support imperative
application extensibility.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">In versions of <span>Pyramid</span> prior to 1.2, this
function accepted <code class="docutils literal notranslate"><span class="pre">*callables</span></code>, but this has been changed
to support only a single callable.</p>
</div>
<p>A configuration callable should be a callable that accepts a single
argument named <code class="docutils literal notranslate"><span class="pre">config</span></code>, which will be an instance of a
<a class="reference internal" href="../glossary.html#term-configurator"><span class="xref std std-term">Configurator</span></a>.  However, be warned that it will not be the same
configurator instance on which you call this method.  The
code which runs as a result of calling the callable should invoke
methods on the configurator passed to it which add configuration
state.  The return value of a callable will be ignored.</p>
<p>Values allowed to be presented via the <code class="docutils literal notranslate"><span class="pre">callable</span></code> argument to
this method: any callable Python object or any <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python
name</span></a> which resolves to a callable Python object.  It may also be a
Python <a class="reference internal" href="../glossary.html#term-module"><span class="xref std std-term">module</span></a>, in which case, the module will be searched for
a callable named <code class="docutils literal notranslate"><span class="pre">includeme</span></code>, which will be treated as the
configuration callable.</p>
<p>For example, if the <code class="docutils literal notranslate"><span class="pre">includeme</span></code> function below lives in a module
named <code class="docutils literal notranslate"><span class="pre">myapp.myconfig</span></code>:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># myapp.myconfig module</span>

<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">my_view</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>You might cause it to be included within your Pyramid application like
so:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;myapp.myconfig.includeme&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Because the function is named <code class="docutils literal notranslate"><span class="pre">includeme</span></code>, the function name can
also be omitted from the dotted name reference:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;myapp.myconfig&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Included configuration statements will be overridden by local
configuration statements if an included callable causes a
configuration conflict by registering something with the same
configuration parameters.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> is supplied, it must be a string.  Any calls
to <a class="reference internal" href="#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> within the included
callable will have their pattern prefixed with the value of
<code class="docutils literal notranslate"><span class="pre">route_prefix</span></code>. This can be used to help mount a set of routes at a
different location than the included callable's author intended, while
still maintaining the same route names.  For example:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">included</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;show_users&#39;</span><span class="p">,</span> <span class="s1">&#39;/show&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="n">included</span><span class="p">,</span> <span class="n">route_prefix</span><span class="o">=</span><span class="s1">&#39;/users&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the above configuration, the <code class="docutils literal notranslate"><span class="pre">show_users</span></code> route will have an
effective route pattern of <code class="docutils literal notranslate"><span class="pre">/users/show</span></code>, instead of <code class="docutils literal notranslate"><span class="pre">/show</span></code>
because the <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> argument will be prepended to the
pattern.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> parameter.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.9 で変更: </span>The included function is wrapped with a call to
<a class="reference internal" href="#pyramid.config.Configurator.begin" title="pyramid.config.Configurator.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.begin()</span></code></a> and
<a class="reference internal" href="#pyramid.config.Configurator.end" title="pyramid.config.Configurator.end"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.end()</span></code></a> while it is executed.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.make_wsgi_app">
<code class="descname">make_wsgi_app</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.make_wsgi_app"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.make_wsgi_app" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Commits any pending configuration statements, sends a
<a class="reference internal" href="events.html#pyramid.events.ApplicationCreated" title="pyramid.events.ApplicationCreated"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.events.ApplicationCreated</span></code></a> event to all listeners,
adds this configuration's registry to
<a class="reference internal" href="#pyramid.config.global_registries" title="pyramid.config.global_registries"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.config.global_registries</span></code></a>, and returns a
<span>Pyramid</span> WSGI application representing the committed
configuration state.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.scan">
<code class="descname">scan</code><span class="sig-paren">(</span><em>package=None</em>, <em>categories=None</em>, <em>onerror=None</em>, <em>ignore=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.scan"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.scan" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Scan a Python package and any of its subpackages for objects
marked with <a class="reference internal" href="../glossary.html#term-configuration-decoration"><span class="xref std std-term">configuration decoration</span></a> such as
<a class="reference internal" href="view.html#pyramid.view.view_config" title="pyramid.view.view_config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code></a>.  Any decorated object found will
influence the current configuration state.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">package</span></code> argument should be a Python <a class="reference internal" href="../glossary.html#term-package"><span class="xref std std-term">package</span></a> or module
object (or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which refers to such a
package or module).  If <code class="docutils literal notranslate"><span class="pre">package</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the package of the
<em>caller</em> is used.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">categories</span></code> argument, if provided, should be the
<a class="reference internal" href="../glossary.html#term-venusian"><span class="xref std std-term">Venusian</span></a> 'scan categories' to use during scanning.  Providing
this argument is not often necessary; specifying scan categories is
an extremely advanced usage.  By default, <code class="docutils literal notranslate"><span class="pre">categories</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>
which will execute <em>all</em> Venusian decorator callbacks including
<span>Pyramid</span>-related decorators such as
<a class="reference internal" href="view.html#pyramid.view.view_config" title="pyramid.view.view_config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code></a>.  See the <a class="reference internal" href="../glossary.html#term-venusian"><span class="xref std std-term">Venusian</span></a>
documentation for more information about limiting a scan by using an
explicit set of categories.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">onerror</span></code> argument, if provided, should be a Venusian
<code class="docutils literal notranslate"><span class="pre">onerror</span></code> callback function.  The onerror function is passed to
<a class="reference external" href="https://docs.pylonsproject.org/projects/venusian/en/latest/api.html#venusian.Scanner.scan" title="(in venusian v1.1.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">venusian.Scanner.scan()</span></code></a> to influence error behavior when an
exception is raised during the scanning process.  See the
<a class="reference internal" href="../glossary.html#term-venusian"><span class="xref std std-term">Venusian</span></a> documentation for more information about <code class="docutils literal notranslate"><span class="pre">onerror</span></code>
callbacks.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument, if provided, should be a Venusian <code class="docutils literal notranslate"><span class="pre">ignore</span></code>
value.  Providing an <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument allows the scan to ignore
particular modules, packages, or global objects during a scan.
<code class="docutils literal notranslate"><span class="pre">ignore</span></code> can be a string or a callable, or a list containing
strings or callables.  The simplest usage of <code class="docutils literal notranslate"><span class="pre">ignore</span></code> is to provide
a module or package by providing a full path to its dotted name.  For
example: <code class="docutils literal notranslate"><span class="pre">config.scan(ignore='my.module.subpackage')</span></code> would ignore
the <code class="docutils literal notranslate"><span class="pre">my.module.subpackage</span></code> package during a scan, which would
prevent the subpackage and any of its submodules from being imported
and scanned.  See the <a class="reference internal" href="../glossary.html#term-venusian"><span class="xref std std-term">Venusian</span></a> documentation for more
information about the <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument.</p>
<p>To perform a <code class="docutils literal notranslate"><span class="pre">scan</span></code>, Pyramid creates a Venusian <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> object.
The <code class="docutils literal notranslate"><span class="pre">kw</span></code> argument represents a set of keyword arguments to pass to
the Venusian <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> object's constructor.  See the
<a class="reference internal" href="../glossary.html#term-venusian"><span class="xref std std-term">venusian</span></a> documentation (its <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> class) for more
information about the constructor.  By default, the only keyword
arguments passed to the Scanner constructor are <code class="docutils literal notranslate"><span class="pre">{'config':self}</span></code>
where <code class="docutils literal notranslate"><span class="pre">self</span></code> is this configurator object.  This services the
requirement of all built-in Pyramid decorators, but extension systems
may require additional arguments.  Providing this argument is not
often necessary; it's an advanced usage.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">**kw</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Adding Routes and Views</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_route">
<code class="descname">add_route</code><span class="sig-paren">(</span><em>name</em>, <em>pattern=None</em>, <em>permission=None</em>, <em>factory=None</em>, <em>for_=None</em>, <em>header=None</em>, <em>xhr=None</em>, <em>accept=None</em>, <em>path_info=None</em>, <em>request_method=None</em>, <em>request_param=None</em>, <em>traverse=None</em>, <em>custom_predicates=()</em>, <em>use_global_views=False</em>, <em>path=None</em>, <em>pregenerator=None</em>, <em>static=False</em>, <em>**predicates</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_route" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="../glossary.html#term-route-configuration"><span class="xref std std-term">route configuration</span></a> to the current
configuration state, as well as possibly a <a class="reference internal" href="../glossary.html#term-view-configuration"><span class="xref std std-term">view
configuration</span></a> to be used to specify a <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a>
that will be invoked when this route matches.  The arguments
to this method are divided into <em>predicate</em>, <em>non-predicate</em>,
and <em>view-related</em> types.  <a class="reference internal" href="../glossary.html#term-route-predicate"><span class="xref std std-term">Route predicate</span></a> arguments
narrow the circumstances in which a route will be match a
request; non-predicate arguments are informational.</p>
<p>Non-Predicate Arguments</p>
<p>name</p>
<blockquote>
<div>The name of the route, e.g. <code class="docutils literal notranslate"><span class="pre">myroute</span></code>.  This attribute is
required.  It must be unique among all defined routes in a given
application.</div></blockquote>
<p>factory</p>
<blockquote>
<div>A Python object (often a function or a class) or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> which refers to the same object that will generate a
<span>Pyramid</span> root resource object when this route matches. For
example, <code class="docutils literal notranslate"><span class="pre">mypackage.resources.MyFactory</span></code>.  If this argument is
not specified, a default root factory will be used.  See
<a class="reference internal" href="../narr/traversal.html#the-resource-tree"><span class="std std-ref">The Resource Tree</span></a> for more information about root factories.</div></blockquote>
<p>traverse</p>
<blockquote>
<div><p>If you would like to cause the <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> to be
something other than the <a class="reference internal" href="../glossary.html#term-root"><span class="xref std std-term">root</span></a> object when this route
matches, you can spell a traversal pattern as the
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument.  This traversal pattern will be used
as the traversal path: traversal will begin at the root
object implied by this route (either the global root, or the
object returned by the <code class="docutils literal notranslate"><span class="pre">factory</span></code> associated with this
route).</p>
<p>The syntax of the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument is the same as it is
for <code class="docutils literal notranslate"><span class="pre">pattern</span></code>. For example, if the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> provided to
<code class="docutils literal notranslate"><span class="pre">add_route</span></code> is <code class="docutils literal notranslate"><span class="pre">articles/{article}/edit</span></code>, and the
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument provided to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> is
<code class="docutils literal notranslate"><span class="pre">/{article}</span></code>, when a request comes in that causes the route
to match in such a way that the <code class="docutils literal notranslate"><span class="pre">article</span></code> match value is
<code class="docutils literal notranslate"><span class="pre">'1'</span></code> (when the request URI is <code class="docutils literal notranslate"><span class="pre">/articles/1/edit</span></code>), the
traversal path will be generated as <code class="docutils literal notranslate"><span class="pre">/1</span></code>.  This means that
the root object's <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> will be called with the
name <code class="docutils literal notranslate"><span class="pre">'1'</span></code> during the traversal phase.  If the <code class="docutils literal notranslate"><span class="pre">'1'</span></code> object
exists, it will become the <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> of the request.
<a class="reference internal" href="../narr/traversal.html#traversal-chapter"><span class="std std-ref">Traversal</span></a> has more information about
traversal.</p>
<p>If the traversal path contains segment marker names which
are not present in the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> argument, a runtime error
will occur.  The <code class="docutils literal notranslate"><span class="pre">traverse</span></code> pattern should not contain
segment markers that do not exist in the <code class="docutils literal notranslate"><span class="pre">pattern</span></code>
argument.</p>
<p>A similar combining of routing and traversal is available
when a route is matched which contains a <code class="docutils literal notranslate"><span class="pre">*traverse</span></code>
remainder marker in its pattern (see
<a class="reference internal" href="../narr/hybrid.html#using-traverse-in-a-route-pattern"><span class="std std-ref">Using *traverse in a Route Pattern</span></a>).  The <code class="docutils literal notranslate"><span class="pre">traverse</span></code>
argument to add_route allows you to associate route patterns
with an arbitrary traversal path without using a
<code class="docutils literal notranslate"><span class="pre">*traverse</span></code> remainder marker; instead you can use other
match information.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> is
ignored when attached to a route that has a <code class="docutils literal notranslate"><span class="pre">*traverse</span></code>
remainder marker in its pattern.</p>
</div></blockquote>
<p>pregenerator</p>
<blockquote>
<div>This option should be a callable object that implements the
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IRoutePregenerator" title="pyramid.interfaces.IRoutePregenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IRoutePregenerator</span></code></a> interface.  A
<a class="reference internal" href="../glossary.html#term-pregenerator"><span class="xref std std-term">pregenerator</span></a> is a callable called by the
<a class="reference internal" href="request.html#pyramid.request.Request.route_url" title="pyramid.request.Request.route_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.route_url()</span></code></a> function to augment or
replace the arguments it is passed when generating a URL for the
route.  This is a feature not often used directly by applications,
it is meant to be hooked by frameworks that use <span>Pyramid</span> as
a base.</div></blockquote>
<p>use_global_views</p>
<blockquote>
<div>When a request matches this route, and view lookup cannot
find a view which has a <code class="docutils literal notranslate"><span class="pre">route_name</span></code> predicate argument
that matches the route, try to fall back to using a view
that otherwise matches the context, request, and view name
(but which does not match the route_name predicate).</div></blockquote>
<p>static</p>
<blockquote>
<div><p>If <code class="docutils literal notranslate"><span class="pre">static</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, this route will never match an incoming
request; it will only be useful for URL generation.  By default,
<code class="docutils literal notranslate"><span class="pre">static</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.  See <a class="reference internal" href="../narr/urldispatch.html#static-route-narr"><span class="std std-ref">Static Routes</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
</div></blockquote>
<p>accept</p>
<blockquote>
<div>This value represents a match query for one or more mimetypes in the
<code class="docutils literal notranslate"><span class="pre">Accept</span></code> HTTP request header.  If this value is specified, it must
be in one of the following forms: a mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">text/plain</span></code>, a wildcard mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">text/*</span></code> or a match-all wildcard mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">*/*</span></code>.  If any of the forms matches the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header of the
request, or if the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header isn't set at all in the request,
this will match the current route. If this does not match the
<code class="docutils literal notranslate"><span class="pre">Accept</span></code> header of the request, route matching continues.</div></blockquote>
<p>Predicate Arguments</p>
<p>pattern</p>
<blockquote>
<div><p>The pattern of the route e.g. <code class="docutils literal notranslate"><span class="pre">ideas/{idea}</span></code>.  This
argument is required.  See <a class="reference internal" href="../narr/urldispatch.html#route-pattern-syntax"><span class="std std-ref">Route Pattern Syntax</span></a>
for information about the syntax of route patterns.  If the
pattern doesn't match the current URL, route matching
continues.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">For backwards compatibility purposes (as of <span>Pyramid</span> 1.0), a
<code class="docutils literal notranslate"><span class="pre">path</span></code> keyword argument passed to this function will be used to
represent the pattern value if the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> argument is
<code class="docutils literal notranslate"><span class="pre">None</span></code>.  If both <code class="docutils literal notranslate"><span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">pattern</span></code> are passed, <code class="docutils literal notranslate"><span class="pre">pattern</span></code>
wins.</p>
</div>
</div></blockquote>
<p>xhr</p>
<blockquote>
<div>This value should be either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If this
value is specified and is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> must
possess an <code class="docutils literal notranslate"><span class="pre">HTTP_X_REQUESTED_WITH</span></code> (aka
<code class="docutils literal notranslate"><span class="pre">X-Requested-With</span></code>) header for this route to match.  This
is useful for detecting AJAX requests issued from jQuery,
Prototype and other Javascript libraries.  If this predicate
returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route matching continues.</div></blockquote>
<p>request_method</p>
<blockquote>
<div><p>A string representing an HTTP method name, e.g. <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code>,
<code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code> or a tuple of elements containing
HTTP method names.  If this argument is not specified, this route
will match if the request has <em>any</em> request method.  If this
predicate returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route matching continues.</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.2 で変更: </span>The ability to pass a tuple of items as <code class="docutils literal notranslate"><span class="pre">request_method</span></code>.
Previous versions allowed only a string.</p>
</div>
</div></blockquote>
<p>path_info</p>
<blockquote>
<div>This value represents a regular expression pattern that will
be tested against the <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> WSGI environment
variable.  If the regex matches, this predicate will return
<code class="docutils literal notranslate"><span class="pre">True</span></code>.  If this predicate returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route
matching continues.</div></blockquote>
<p>request_param</p>
<blockquote>
<div>This value can be any string.  A view declaration with this
argument ensures that the associated route will only match
when the request has a key in the <code class="docutils literal notranslate"><span class="pre">request.params</span></code>
dictionary (an HTTP <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">POST</span></code> variable) that has a
name which matches the supplied value.  If the value
supplied as the argument has a <code class="docutils literal notranslate"><span class="pre">=</span></code> sign in it,
e.g. <code class="docutils literal notranslate"><span class="pre">request_param=&quot;foo=123&quot;</span></code>, then the key
(<code class="docutils literal notranslate"><span class="pre">foo</span></code>) must both exist in the <code class="docutils literal notranslate"><span class="pre">request.params</span></code> dictionary, and
the value must match the right hand side of the expression (<code class="docutils literal notranslate"><span class="pre">123</span></code>)
for the route to &quot;match&quot; the current request.  If this predicate
returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route matching continues.</div></blockquote>
<p>header</p>
<blockquote>
<div>This argument represents an HTTP header name or a header
name/value pair.  If the argument contains a <code class="docutils literal notranslate"><span class="pre">:</span></code> (colon),
it will be considered a name/value pair
(e.g. <code class="docutils literal notranslate"><span class="pre">User-Agent:Mozilla/.*</span></code> or <code class="docutils literal notranslate"><span class="pre">Host:localhost</span></code>).  If
the value contains a colon, the value portion should be a
regular expression.  If the value does not contain a colon,
the entire value will be considered to be the header name
(e.g. <code class="docutils literal notranslate"><span class="pre">If-Modified-Since</span></code>).  If the value evaluates to a
header name only without a value, the header specified by
the name must be present in the request for this predicate
to be true.  If the value evaluates to a header name/value
pair, the header specified by the name must be present in
the request <em>and</em> the regular expression specified as the
value must match the header value.  Whether or not the value
represents a header name or a header name/value pair, the
case of the header name is not significant.  If this
predicate returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route matching continues.</div></blockquote>
<p>effective_principals</p>
<blockquote>
<div><p>If specified, this value should be a <a class="reference internal" href="../glossary.html#term-principal"><span class="xref std std-term">principal</span></a> identifier or
a sequence of principal identifiers.  If the
<a class="reference internal" href="request.html#pyramid.request.Request.effective_principals" title="pyramid.request.Request.effective_principals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.effective_principals</span></code></a> property
indicates that every principal named in the argument list is present
in the current request, this predicate will return True; otherwise it
will return False.  For example:
<code class="docutils literal notranslate"><span class="pre">effective_principals=pyramid.security.Authenticated</span></code> or
<code class="docutils literal notranslate"><span class="pre">effective_principals=('fred',</span> <span class="pre">'group:admins')</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4a4 で追加.</span></p>
</div>
</div></blockquote>
<p>custom_predicates</p>
<blockquote>
<div><div class="deprecated">
<p><span class="versionmodified">バージョン 1.5 で非推奨: </span>This value should be a sequence of references to custom
predicate callables.  Use custom predicates when no set of
predefined predicates does what you need.  Custom predicates
can be combined with predefined predicates as necessary.
Each custom predicate callable should accept two arguments:
<code class="docutils literal notranslate"><span class="pre">info</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code> and should return either <code class="docutils literal notranslate"><span class="pre">True</span></code>
or <code class="docutils literal notranslate"><span class="pre">False</span></code> after doing arbitrary evaluation of the info
and/or the request.  If all custom and non-custom predicate
callables return <code class="docutils literal notranslate"><span class="pre">True</span></code> the associated route will be
considered viable for a given request.  If any predicate
callable returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, route matching continues.  Note
that the value <code class="docutils literal notranslate"><span class="pre">info</span></code> passed to a custom route predicate
is a dictionary containing matching information; see
<a class="reference internal" href="../narr/urldispatch.html#custom-route-predicates"><span class="std std-ref">Custom Route Predicates</span></a> for more information about
<code class="docutils literal notranslate"><span class="pre">info</span></code>.</p>
</div>
</div></blockquote>
<p>predicates</p>
<blockquote>
<div><p>Pass a key/value pair here to use a third-party predicate
registered via
<a class="reference internal" href="#pyramid.config.Configurator.add_route_predicate" title="pyramid.config.Configurator.add_route_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route_predicate()</span></code></a>.  More than
one key/value pair can be used at the same time.  See
<a class="reference internal" href="../narr/hooks.html#view-and-route-predicates"><span class="std std-ref">View and Route Predicates</span></a> for more information about
third-party predicates.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加.</span></p>
</div>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_static_view">
<code class="descname">add_static_view</code><span class="sig-paren">(</span><em>name</em>, <em>path</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_static_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a view used to render static assets such as images
and CSS files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument is a string representing an
application-relative local URL prefix.  It may alternately be a full
URL.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> argument is the path on disk where the static files
reside.  This can be an absolute path, a package-relative path, or a
<a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cache_max_age</span></code> keyword argument is input to set the
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> and <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers for static assets served.
Note that this argument has no effect when the <code class="docutils literal notranslate"><span class="pre">name</span></code> is a <em>url
prefix</em>.  By default, this argument is <code class="docutils literal notranslate"><span class="pre">None</span></code>, meaning that no
particular Expires or Cache-Control headers are set in the response.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">permission</span></code> keyword argument is used to specify the
<a class="reference internal" href="../glossary.html#term-permission"><span class="xref std std-term">permission</span></a> required by a user to execute the static view.  By
default, it is the string
<a class="reference internal" href="security.html#pyramid.security.NO_PERMISSION_REQUIRED" title="pyramid.security.NO_PERMISSION_REQUIRED"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.NO_PERMISSION_REQUIRED</span></code></a>, a special sentinel
which indicates that, even if a <a class="reference internal" href="../glossary.html#term-default-permission"><span class="xref std std-term">default permission</span></a> exists for
the current application, the static view should be renderered to
completely anonymous users.  This default value is permissive
because, in most web apps, static assets seldom need protection from
viewing.  If <code class="docutils literal notranslate"><span class="pre">permission</span></code> is specified, the security checking will
be performed against the default root factory ACL.</p>
<p>Any other keyword arguments sent to <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> are passed on
to <a class="reference internal" href="#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> (e.g. <code class="docutils literal notranslate"><span class="pre">factory</span></code>,
perhaps to define a custom factory with a custom ACL for this static
view).</p>
<p><em>Usage</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> function is typically used in conjunction
with the <a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a> method.
<code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> adds a view which renders a static asset when
some URL is visited; <a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a>
generates a URL to that asset.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument to <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> is usually a simple URL
prefix (e.g. <code class="docutils literal notranslate"><span class="pre">'images'</span></code>).  When this is the case, the
<a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a> API will generate a URL
which points to a Pyramid view, which will serve up a set of assets
that live in the package itself. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_static_view</span><span class="p">(</span><span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;mypackage:images/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Code that registers such a view can generate URLs to the view via
<a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">static_url</span><span class="p">(</span><span class="s1">&#39;mypackage:images/logo.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> is called with a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument that
represents a URL prefix, as it is above, subsequent calls to
<a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a> with paths that start with
the <code class="docutils literal notranslate"><span class="pre">path</span></code> argument passed to <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> will generate a
URL something like <code class="docutils literal notranslate"><span class="pre">http://&lt;Pyramid</span> <span class="pre">app</span> <span class="pre">URL&gt;/images/logo.png</span></code>,
which will cause the <code class="docutils literal notranslate"><span class="pre">logo.png</span></code> file in the <code class="docutils literal notranslate"><span class="pre">images</span></code> subdirectory
of the <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> package to be served.</p>
<p><code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> can alternately be used with a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument
which is a <em>URL</em>, causing static assets to be served from an external
webserver.  This happens when the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument is a fully
qualified URL (e.g. starts with <code class="docutils literal notranslate"><span class="pre">http://</span></code> or similar).  In this
mode, the <code class="docutils literal notranslate"><span class="pre">name</span></code> is used as the prefix of the full URL when
generating a URL using <a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a>.
Furthermore, if a protocol-relative URL (e.g. <code class="docutils literal notranslate"><span class="pre">//example.com/images</span></code>)
is used as the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument, the generated URL will use the
protocol of the request (http or https, respectively).</p>
<p>For example, if <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> is called like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_static_view</span><span class="p">(</span><span class="s1">&#39;http://example.com/images&#39;</span><span class="p">,</span> <span class="s1">&#39;mypackage:images/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Subsequently, the URLs generated by
<a class="reference internal" href="request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url()</span></code></a> for that static view will
be prefixed with <code class="docutils literal notranslate"><span class="pre">http://example.com/images</span></code> (the external webserver
listening on <code class="docutils literal notranslate"><span class="pre">example.com</span></code> must be itself configured to respond
properly to such a request.):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">static_url</span><span class="p">(</span><span class="s1">&#39;mypackage:images/logo.png&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../narr/assets.html#static-assets-section"><span class="std std-ref">Serving Static Assets</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_view">
<code class="descname">add_view</code><span class="sig-paren">(</span><em>view=None</em>, <em>name=''</em>, <em>for_=None</em>, <em>permission=None</em>, <em>request_type=None</em>, <em>route_name=None</em>, <em>request_method=None</em>, <em>request_param=None</em>, <em>containment=None</em>, <em>attr=None</em>, <em>renderer=None</em>, <em>wrapper=None</em>, <em>xhr=None</em>, <em>accept=None</em>, <em>header=None</em>, <em>path_info=None</em>, <em>custom_predicates=()</em>, <em>context=None</em>, <em>decorator=None</em>, <em>mapper=None</em>, <em>http_cache=None</em>, <em>match_param=None</em>, <em>check_csrf=None</em>, <em>require_csrf=None</em>, <em>exception_only=False</em>, <em>**view_options</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="../glossary.html#term-view-configuration"><span class="xref std std-term">view configuration</span></a> to the current
configuration state.  Arguments to <code class="docutils literal notranslate"><span class="pre">add_view</span></code> are broken
down below into <em>predicate</em> arguments and <em>non-predicate</em>
arguments.  Predicate arguments narrow the circumstances in
which the view callable will be invoked when a request is
presented to <span>Pyramid</span>; non-predicate arguments are
informational.</p>
<p>Non-Predicate Arguments</p>
<p>view</p>
<blockquote>
<div>A <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a> or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a>
which refers to a view callable.  This argument is required
unless a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument also exists.  If a
<code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument is passed, and a <code class="docutils literal notranslate"><span class="pre">view</span></code> argument is
not provided, the view callable defaults to a callable that
returns an empty dictionary (see
<a class="reference internal" href="../narr/renderers.html#views-which-use-a-renderer"><span class="std std-ref">Writing View Callables Which Use a Renderer</span></a>).</div></blockquote>
<p>permission</p>
<blockquote>
<div><p>A <a class="reference internal" href="../glossary.html#term-permission"><span class="xref std std-term">permission</span></a> that the user must possess in order to invoke
the <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a>.  See <a class="reference internal" href="../narr/viewconfig.html#view-security-section"><span class="std std-ref">Configuring View Security</span></a> for
more information about view security and permissions.  This is
often a string like <code class="docutils literal notranslate"><span class="pre">view</span></code> or <code class="docutils literal notranslate"><span class="pre">edit</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">permission</span></code> is omitted, a <em>default</em> permission may be used
for this view registration if one was named as the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor's
<code class="docutils literal notranslate"><span class="pre">default_permission</span></code> argument, or if
<a class="reference internal" href="#pyramid.config.Configurator.set_default_permission" title="pyramid.config.Configurator.set_default_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_default_permission()</span></code></a> was used
prior to this view registration.  Pass the value
<a class="reference internal" href="security.html#pyramid.security.NO_PERMISSION_REQUIRED" title="pyramid.security.NO_PERMISSION_REQUIRED"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.NO_PERMISSION_REQUIRED</span></code></a> as the permission
argument to explicitly indicate that the view should always be
executable by entirely anonymous users, regardless of the default
permission, bypassing any <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a> that may be
in effect.</p>
</div></blockquote>
<p>attr</p>
<blockquote>
<div><p>This knob is most useful when the view definition is a class.</p>
<p>The view machinery defaults to using the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method
of the <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a> (or the function itself, if the
view callable is a function) to obtain a response.  The
<code class="docutils literal notranslate"><span class="pre">attr</span></code> value allows you to vary the method attribute used
to obtain the response.  For example, if your view was a
class, and the class has a method named <code class="docutils literal notranslate"><span class="pre">index</span></code> and you
wanted to use this method instead of the class' <code class="docutils literal notranslate"><span class="pre">__call__</span></code>
method to return the response, you'd say <code class="docutils literal notranslate"><span class="pre">attr=&quot;index&quot;</span></code> in the
view configuration for the view.</p>
</div></blockquote>
<p>renderer</p>
<blockquote>
<div><p>This is either a single string term (e.g. <code class="docutils literal notranslate"><span class="pre">json</span></code>) or a
string implying a path or <a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a>
(e.g. <code class="docutils literal notranslate"><span class="pre">templates/views.pt</span></code>) naming a <a class="reference internal" href="../glossary.html#term-renderer"><span class="xref std std-term">renderer</span></a>
implementation.  If the <code class="docutils literal notranslate"><span class="pre">renderer</span></code> value does not contain
a dot <code class="docutils literal notranslate"><span class="pre">.</span></code>, the specified string will be used to look up a
renderer implementation, and that renderer implementation
will be used to construct a response from the view return
value.  If the <code class="docutils literal notranslate"><span class="pre">renderer</span></code> value contains a dot (<code class="docutils literal notranslate"><span class="pre">.</span></code>),
the specified term will be treated as a path, and the
filename extension of the last element in the path will be
used to look up the renderer implementation, which will be
passed the full path.  The renderer implementation will be
used to construct a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> from the view return
value.</p>
<p>Note that if the view itself returns a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> (see
<a class="reference internal" href="../narr/views.html#the-response"><span class="std std-ref">View Callable Responses</span></a>), the specified renderer implementation
is never called.</p>
<p>When the renderer is a path, although a path is usually just
a simple relative pathname (e.g. <code class="docutils literal notranslate"><span class="pre">templates/foo.pt</span></code>,
implying that a template named &quot;foo.pt&quot; is in the
&quot;templates&quot; directory relative to the directory of the
current <a class="reference internal" href="../glossary.html#term-package"><span class="xref std std-term">package</span></a> of the Configurator), a path can be
absolute, starting with a slash on UNIX or a drive letter
prefix on Windows.  The path can alternately be a
<a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a> in the form
<code class="docutils literal notranslate"><span class="pre">some.dotted.package_name:relative/path</span></code>, making it
possible to address template assets which live in a
separate package.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attribute is optional.  If it is not
defined, the &quot;null&quot; renderer is assumed (no rendering is
performed and the value is passed back to the upstream
<span>Pyramid</span> machinery unmodified).</p>
</div></blockquote>
<p>http_cache</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<p>When you supply an <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> value to a view configuration,
the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> and <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers of a response
generated by the associated view callable are modified.  The value
for <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> may be one of the following:</p>
<ul class="simple">
<li>A nonzero integer.  If it's a nonzero integer, it's treated as a
number of seconds.  This number of seconds will be used to
compute the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> header and the <code class="docutils literal notranslate"><span class="pre">Cache-Control:</span>
<span class="pre">max-age</span></code> parameter of responses to requests which call this view.
For example: <code class="docutils literal notranslate"><span class="pre">http_cache=3600</span></code> instructs the requesting browser
to 'cache this response for an hour, please'.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> instance.  If it's a
<code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> instance, it will be converted into a
number of seconds, and that number of seconds will be used to
compute the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> header and the <code class="docutils literal notranslate"><span class="pre">Cache-Control:</span>
<span class="pre">max-age</span></code> parameter of responses to requests which call this view.
For example: <code class="docutils literal notranslate"><span class="pre">http_cache=datetime.timedelta(days=1)</span></code> instructs
the requesting browser to 'cache this response for a day, please'.</li>
<li>Zero (<code class="docutils literal notranslate"><span class="pre">0</span></code>).  If the value is zero, the <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> and
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> headers present in all responses from this view will
be composed such that client browser cache (and any intermediate
caches) are instructed to never cache the response.</li>
<li>A two-tuple.  If it's a two tuple (e.g. <code class="docutils literal notranslate"><span class="pre">http_cache=(1,</span>
<span class="pre">{'public':True})</span></code>), the first value in the tuple may be a
nonzero integer or a <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> instance; in either
case this value will be used as the number of seconds to cache
the response.  The second value in the tuple must be a
dictionary.  The values present in the dictionary will be used as
input to the <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> response header.  For example:
<code class="docutils literal notranslate"><span class="pre">http_cache=(3600,</span> <span class="pre">{'public':True})</span></code> means 'cache for an hour,
and add <code class="docutils literal notranslate"><span class="pre">public</span></code> to the Cache-Control header of the response'.
All keys and values supported by the
<code class="docutils literal notranslate"><span class="pre">webob.cachecontrol.CacheControl</span></code> interface may be added to the
dictionary.  Supplying <code class="docutils literal notranslate"><span class="pre">{'public':True}</span></code> is equivalent to
calling <code class="docutils literal notranslate"><span class="pre">response.cache_control.public</span> <span class="pre">=</span> <span class="pre">True</span></code>.</li>
</ul>
<p>Providing a non-tuple value as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> is equivalent to
calling <code class="docutils literal notranslate"><span class="pre">response.cache_expires(value)</span></code> within your view's body.</p>
<p>Providing a two-tuple value as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> is equivalent to
calling <code class="docutils literal notranslate"><span class="pre">response.cache_expires(value[0],</span> <span class="pre">**value[1])</span></code> within your
view's body.</p>
<p>If you wish to avoid influencing, the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> header, and
instead wish to only influence <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers, pass a
tuple as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> with the first element of <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g.:
<code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">{'public':True})</span></code>.</p>
<p>If you wish to prevent a view that uses <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> in its
configuration from having its caching response headers changed by
this machinery, set <code class="docutils literal notranslate"><span class="pre">response.cache_control.prevent_auto</span> <span class="pre">=</span> <span class="pre">True</span></code>
before returning the response from the view.  This effectively
disables any HTTP caching done by <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> for that response.</p>
</div></blockquote>
<p>require_csrf</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">バージョン 1.7 で追加.</span></p>
</div>
<p>A boolean option or <code class="docutils literal notranslate"><span class="pre">None</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If this option is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> then CSRF checks will be enabled
for requests to this view. The required token or header default to
<code class="docutils literal notranslate"><span class="pre">csrf_token</span></code> and <code class="docutils literal notranslate"><span class="pre">X-CSRF-Token</span></code>, respectively.</p>
<p>CSRF checks only affect &quot;unsafe&quot; methods as defined by RFC2616. By
default, these methods are anything except
<code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>, and <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>.</p>
<p>The defaults here may be overridden by
<a class="reference internal" href="#pyramid.config.Configurator.set_default_csrf_options" title="pyramid.config.Configurator.set_default_csrf_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_default_csrf_options()</span></code></a>.</p>
<p>This feature requires a configured <a class="reference internal" href="../glossary.html#term-session-factory"><span class="xref std std-term">session factory</span></a>.</p>
<p>If this option is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> then CSRF checks will be disabled
regardless of the default <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> setting passed
to <code class="docutils literal notranslate"><span class="pre">set_default_csrf_options</span></code>.</p>
<p>See <a class="reference internal" href="../narr/security.html#auto-csrf-checking"><span class="std std-ref">Checking CSRF Tokens Automatically</span></a> for more information.</p>
</div></blockquote>
<p>wrapper</p>
<blockquote>
<div>The <a class="reference internal" href="../glossary.html#term-view-name"><span class="xref std std-term">view name</span></a> of a different <a class="reference internal" href="../glossary.html#term-view-configuration"><span class="xref std std-term">view
configuration</span></a> which will receive the response body of this
view as the <code class="docutils literal notranslate"><span class="pre">request.wrapped_body</span></code> attribute of its own
<a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a>, and the <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> returned by this
view as the <code class="docutils literal notranslate"><span class="pre">request.wrapped_response</span></code> attribute of its
own request.  Using a wrapper makes it possible to &quot;chain&quot;
views together to form a composite response.  The response
of the outermost wrapper view will be returned to the user.
The wrapper view will be found as any view is found: see
<a class="reference internal" href="../narr/viewconfig.html#view-lookup"><span class="std std-ref">View Configuration</span></a>.  The &quot;best&quot; wrapper view will be found
based on the lookup ordering: &quot;under the hood&quot; this wrapper
view is looked up via
<code class="docutils literal notranslate"><span class="pre">pyramid.view.render_view_to_response(context,</span> <span class="pre">request,</span>
<span class="pre">'wrapper_viewname')</span></code>. The context and request of a wrapper
view is the same context and request of the inner view.  If
this attribute is unspecified, no view wrapping is done.</div></blockquote>
<p>decorator</p>
<blockquote>
<div><p>A <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to function (or the function itself,
or an iterable of the aforementioned) which will be used to
decorate the registered <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a>.  The decorator
function(s) will be called with the view callable as a single
argument.  The view callable it is passed will accept
<code class="docutils literal notranslate"><span class="pre">(context,</span> <span class="pre">request)</span></code>.  The decorator(s) must return a
replacement view callable which also accepts <code class="docutils literal notranslate"><span class="pre">(context,</span>
<span class="pre">request)</span></code>.</p>
<p>If decorator is an iterable, the callables will be combined and
used in the order provided as a decorator.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">,</span>
    <span class="n">decorator</span><span class="o">=</span><span class="p">(</span><span class="n">decorator2</span><span class="p">,</span>
               <span class="n">decorator1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">....</span>
</pre></div>
</div>
<p>Is similar to doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="nd">@decorator2</span>
<span class="nd">@decorator1</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Except with the existing benefits of <code class="docutils literal notranslate"><span class="pre">decorator=</span></code> (having a common
decorator syntax for all view calling conventions and not having to
think about preserving function attributes such as <code class="docutils literal notranslate"><span class="pre">__name__</span></code> and
<code class="docutils literal notranslate"><span class="pre">__module__</span></code> within decorator logic).</p>
<p>An important distinction is that each decorator will receive a
response object implementing <a class="reference internal" href="interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code></a>
instead of the raw value returned from the view callable. All
decorators in the chain must return a response object or raise an
exception:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">log_timer</span><span class="p">(</span><span class="n">wrapped</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-View-Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">duration</span><span class="p">,)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;view took </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.4a4 で変更: </span>Passing an iterable.</p>
</div>
</div></blockquote>
<p>mapper</p>
<blockquote>
<div>A Python object or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which refers to a
<a class="reference internal" href="../glossary.html#term-view-mapper"><span class="xref std std-term">view mapper</span></a>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.  By default it is <code class="docutils literal notranslate"><span class="pre">None</span></code>, which
indicates that the view should use the default view mapper.  This
plug-point is useful for Pyramid extension developers, but it's not
very useful for 'civilians' who are just developing stock Pyramid
applications. Pay no attention to the man behind the curtain.</div></blockquote>
<p>accept</p>
<blockquote>
<div>This value represents a match query for one or more mimetypes in the
<code class="docutils literal notranslate"><span class="pre">Accept</span></code> HTTP request header.  If this value is specified, it must
be in one of the following forms: a mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">text/plain</span></code>, a wildcard mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">text/*</span></code> or a match-all wildcard mimetype match token in the form
<code class="docutils literal notranslate"><span class="pre">*/*</span></code>.  If any of the forms matches the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header of the
request, or if the <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header isn't set at all in the request,
this will match the current view. If this does not match the
<code class="docutils literal notranslate"><span class="pre">Accept</span></code> header of the request, view matching continues.</div></blockquote>
<p>Predicate Arguments</p>
<p>name</p>
<blockquote>
<div>The <a class="reference internal" href="../glossary.html#term-view-name"><span class="xref std std-term">view name</span></a>.  Read <a class="reference internal" href="../narr/traversal.html#traversal-chapter"><span class="std std-ref">Traversal</span></a> to
understand the concept of a view name.</div></blockquote>
<p>context</p>
<blockquote>
<div>An object or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> referring to an
interface or class object that the <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> must be
an instance of, <em>or</em> the <a class="reference internal" href="../glossary.html#term-interface"><span class="xref std std-term">interface</span></a> that the
<a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> must provide in order for this view to be
found and called.  This predicate is true when the
<a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> is an instance of the represented class or
if the <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> provides the represented interface;
it is otherwise false.  This argument may also be provided
to <code class="docutils literal notranslate"><span class="pre">add_view</span></code> as <code class="docutils literal notranslate"><span class="pre">for_</span></code> (an older, still-supported
spelling). If the view should <em>only</em> match when handling
exceptions, then set the <code class="docutils literal notranslate"><span class="pre">exception_only</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</div></blockquote>
<p>exception_only</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">バージョン 1.8 で追加.</span></p>
</div>
<p>When this value is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">context</span></code> argument must be
a subclass of <code class="docutils literal notranslate"><span class="pre">Exception</span></code>. This flag indicates that only an
<a class="reference internal" href="../glossary.html#term-exception-view"><span class="xref std std-term">exception view</span></a> should be created, and that this view should
not match if the traversal <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> matches the <code class="docutils literal notranslate"><span class="pre">context</span></code>
argument. If the <code class="docutils literal notranslate"><span class="pre">context</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Exception</span></code> and
this value is <code class="docutils literal notranslate"><span class="pre">False</span></code> (the default), then a view will be
registered to match the traversal <a class="reference internal" href="../glossary.html#term-context"><span class="xref std std-term">context</span></a> as well.</p>
</div></blockquote>
<p>route_name</p>
<blockquote>
<div>This value must match the <code class="docutils literal notranslate"><span class="pre">name</span></code> of a <a class="reference internal" href="../glossary.html#term-route-configuration"><span class="xref std std-term">route
configuration</span></a> declaration (see <a class="reference internal" href="../narr/urldispatch.html#urldispatch-chapter"><span class="std std-ref">URL Dispatch</span></a>)
that must match before this view will be called.</div></blockquote>
<p>request_type</p>
<blockquote>
<div>This value should be an <a class="reference internal" href="../glossary.html#term-interface"><span class="xref std std-term">interface</span></a> that the
<a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> must provide in order for this view to be
found and called.  This value exists only for backwards
compatibility purposes.</div></blockquote>
<p>request_method</p>
<blockquote>
<div><p>This value can be either a string (such as <code class="docutils literal notranslate"><span class="pre">&quot;GET&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;POST&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;PUT&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;DELETE&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;HEAD&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;OPTIONS&quot;</span></code>) representing
an HTTP <code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code>, or a tuple containing one or more of
these strings.  A view declaration with this argument ensures that
the view will only be called when the <code class="docutils literal notranslate"><span class="pre">method</span></code> attribute of the
request (aka the <code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code> of the WSGI environment) matches
a supplied value.  Note that use of <code class="docutils literal notranslate"><span class="pre">GET</span></code> also implies that the
view will respond to <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> as of Pyramid 1.4.</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.2 で変更: </span>The ability to pass a tuple of items as <code class="docutils literal notranslate"><span class="pre">request_method</span></code>.
Previous versions allowed only a string.</p>
</div>
</div></blockquote>
<p>request_param</p>
<blockquote>
<div>This value can be any string or any sequence of strings.  A view
declaration with this argument ensures that the view will only be
called when the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> has a key in the <code class="docutils literal notranslate"><span class="pre">request.params</span></code>
dictionary (an HTTP <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">POST</span></code> variable) that has a
name which matches the supplied value (if the value is a string)
or values (if the value is a tuple).  If any value
supplied has a <code class="docutils literal notranslate"><span class="pre">=</span></code> sign in it,
e.g. <code class="docutils literal notranslate"><span class="pre">request_param=&quot;foo=123&quot;</span></code>, then the key (<code class="docutils literal notranslate"><span class="pre">foo</span></code>)
must both exist in the <code class="docutils literal notranslate"><span class="pre">request.params</span></code> dictionary, <em>and</em>
the value must match the right hand side of the expression
(<code class="docutils literal notranslate"><span class="pre">123</span></code>) for the view to &quot;match&quot; the current request.</div></blockquote>
<p>match_param</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
<p>This value can be a string of the format &quot;key=value&quot; or a tuple
containing one or more of these strings.</p>
<p>A view declaration with this argument ensures that the view will
only be called when the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> has key/value pairs in its
<a class="reference internal" href="../glossary.html#term-matchdict"><span class="xref std std-term">matchdict</span></a> that equal those supplied in the predicate.
e.g. <code class="docutils literal notranslate"><span class="pre">match_param=&quot;action=edit&quot;</span></code> would require the <code class="docutils literal notranslate"><span class="pre">action</span></code>
parameter in the <a class="reference internal" href="../glossary.html#term-matchdict"><span class="xref std std-term">matchdict</span></a> match the right hand side of
the expression (<code class="docutils literal notranslate"><span class="pre">edit</span></code>) for the view to &quot;match&quot; the current
request.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">match_param</span></code> is a tuple, every key/value pair must match
for the predicate to pass.</p>
</div></blockquote>
<p>containment</p>
<blockquote>
<div>This value should be a Python class or <a class="reference internal" href="../glossary.html#term-interface"><span class="xref std std-term">interface</span></a> (or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a>) that an object in the
<a class="reference internal" href="../glossary.html#term-lineage"><span class="xref std std-term">lineage</span></a> of the context must provide in order for this view
to be found and called.  The nodes in your object graph must be
&quot;location-aware&quot; to use this feature.  See
<a class="reference internal" href="../narr/resources.html#location-aware"><span class="std std-ref">Location-Aware Resources</span></a> for more information about
location-awareness.</div></blockquote>
<p>xhr</p>
<blockquote>
<div>This value should be either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If this
value is specified and is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a>
must possess an <code class="docutils literal notranslate"><span class="pre">HTTP_X_REQUESTED_WITH</span></code> (aka
<code class="docutils literal notranslate"><span class="pre">X-Requested-With</span></code>) header that has the value
<code class="docutils literal notranslate"><span class="pre">XMLHttpRequest</span></code> for this view to be found and called.
This is useful for detecting AJAX requests issued from
jQuery, Prototype and other Javascript libraries.</div></blockquote>
<p>header</p>
<blockquote>
<div>This value represents an HTTP header name or a header
name/value pair.  If the value contains a <code class="docutils literal notranslate"><span class="pre">:</span></code> (colon), it
will be considered a name/value pair
(e.g. <code class="docutils literal notranslate"><span class="pre">User-Agent:Mozilla/.*</span></code> or <code class="docutils literal notranslate"><span class="pre">Host:localhost</span></code>).  The
value portion should be a regular expression.  If the value
does not contain a colon, the entire value will be
considered to be the header name
(e.g. <code class="docutils literal notranslate"><span class="pre">If-Modified-Since</span></code>).  If the value evaluates to a
header name only without a value, the header specified by
the name must be present in the request for this predicate
to be true.  If the value evaluates to a header name/value
pair, the header specified by the name must be present in
the request <em>and</em> the regular expression specified as the
value must match the header value.  Whether or not the value
represents a header name or a header name/value pair, the
case of the header name is not significant.</div></blockquote>
<p>path_info</p>
<blockquote>
<div>This value represents a regular expression pattern that will
be tested against the <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> WSGI environment
variable.  If the regex matches, this predicate will be
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</div></blockquote>
<p>check_csrf</p>
<blockquote>
<div><div class="deprecated">
<p><span class="versionmodified">バージョン 1.7 で非推奨: </span>Use the <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> option or see <a class="reference internal" href="../narr/security.html#auto-csrf-checking"><span class="std std-ref">Checking CSRF Tokens Automatically</span></a>
instead to have <a class="reference internal" href="exceptions.html#pyramid.exceptions.BadCSRFToken" title="pyramid.exceptions.BadCSRFToken"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.exceptions.BadCSRFToken</span></code></a>
exceptions raised.</p>
</div>
<p>If specified, this value should be one of <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>,
<code class="docutils literal notranslate"><span class="pre">False</span></code>, or a string representing the 'check name'.  If the value
is <code class="docutils literal notranslate"><span class="pre">True</span></code> or a string, CSRF checking will be performed.  If the
value is <code class="docutils literal notranslate"><span class="pre">False</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code>, CSRF checking will not be performed.</p>
<p>If the value provided is a string, that string will be used as the
'check name'.  If the value provided is <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">csrf_token</span></code> will
be used as the check name.</p>
<p>If CSRF checking is performed, the checked value will be the value of
<code class="docutils literal notranslate"><span class="pre">request.params[check_name]</span></code>. This value will be compared against
the value of <code class="docutils literal notranslate"><span class="pre">policy.get_csrf_token()</span></code> (where <code class="docutils literal notranslate"><span class="pre">policy</span></code> is an
implementation of <a class="reference internal" href="interfaces.html#pyramid.interfaces.ICSRFStoragePolicy" title="pyramid.interfaces.ICSRFStoragePolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.interfaces.ICSRFStoragePolicy()</span></code></a>), and the
check will pass if these two values are the same. If the check
passes, the associated view will be permitted to execute. If the
check fails, the associated view will not be permitted to execute.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4a2 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.9 で変更: </span>This feature requires either a <a class="reference internal" href="../glossary.html#term-session-factory"><span class="xref std std-term">session factory</span></a> to have been
configured, or a <a class="reference internal" href="../glossary.html#term-csrf-storage-policy"><span class="xref std std-term">CSRF storage policy</span></a> other than the default
to be in use.</p>
</div>
</div></blockquote>
<p>physical_path</p>
<blockquote>
<div><p>If specified, this value should be a string or a tuple representing
the <a class="reference internal" href="../glossary.html#term-physical-path"><span class="xref std std-term">physical path</span></a> of the context found via traversal for this
predicate to match as true.  For example: <code class="docutils literal notranslate"><span class="pre">physical_path='/'</span></code> or
<code class="docutils literal notranslate"><span class="pre">physical_path='/a/b/c'</span></code> or <code class="docutils literal notranslate"><span class="pre">physical_path=('',</span> <span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></code>.
This is not a path prefix match or a regex, it's a whole-path match.
It's useful when you want to always potentially show a view when some
object is traversed to, but you can't be sure about what kind of
object it will be, so you can't use the <code class="docutils literal notranslate"><span class="pre">context</span></code> predicate.  The
individual path elements inbetween slash characters or in tuple
elements should be the Unicode representation of the name of the
resource and should not be encoded in any way.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4a3 で追加.</span></p>
</div>
</div></blockquote>
<p>effective_principals</p>
<blockquote>
<div><p>If specified, this value should be a <a class="reference internal" href="../glossary.html#term-principal"><span class="xref std std-term">principal</span></a> identifier or
a sequence of principal identifiers.  If the
<a class="reference internal" href="request.html#pyramid.request.Request.effective_principals" title="pyramid.request.Request.effective_principals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.effective_principals</span></code></a> property
indicates that every principal named in the argument list is present
in the current request, this predicate will return True; otherwise it
will return False.  For example:
<code class="docutils literal notranslate"><span class="pre">effective_principals=pyramid.security.Authenticated</span></code> or
<code class="docutils literal notranslate"><span class="pre">effective_principals=('fred',</span> <span class="pre">'group:admins')</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4a4 で追加.</span></p>
</div>
</div></blockquote>
<p>custom_predicates</p>
<blockquote>
<div><div class="deprecated">
<p><span class="versionmodified">バージョン 1.5 で非推奨: </span>This value should be a sequence of references to custom
predicate callables.  Use custom predicates when no set of
predefined predicates do what you need.  Custom predicates
can be combined with predefined predicates as necessary.
Each custom predicate callable should accept two arguments:
<code class="docutils literal notranslate"><span class="pre">context</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code> and should return either
<code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> after doing arbitrary evaluation of
the context and/or the request.  The <code class="docutils literal notranslate"><span class="pre">predicates</span></code> argument
to this method and the ability to register third-party view
predicates via
<a class="reference internal" href="#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></code></a>
obsoletes this argument, but it is kept around for backwards
compatibility.</p>
</div>
</div></blockquote>
<p>view_options</p>
<blockquote>
<div>Pass a key/value pair here to use a third-party predicate or set a
value for a view deriver. See
<a class="reference internal" href="#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></code></a> and
<a class="reference internal" href="#pyramid.config.Configurator.add_view_deriver" title="pyramid.config.Configurator.add_view_deriver"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_deriver()</span></code></a>. See
<a class="reference internal" href="../narr/hooks.html#view-and-route-predicates"><span class="std std-ref">View and Route Predicates</span></a> for more information about
third-party predicates and <a class="reference internal" href="../narr/hooks.html#view-derivers"><span class="std std-ref">View Derivers</span></a> for information
about view derivers.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_notfound_view">
<code class="descname">add_notfound_view</code><span class="sig-paren">(</span><em>view=None</em>, <em>attr=None</em>, <em>renderer=None</em>, <em>wrapper=None</em>, <em>route_name=None</em>, <em>request_type=None</em>, <em>request_method=None</em>, <em>request_param=None</em>, <em>containment=None</em>, <em>xhr=None</em>, <em>accept=None</em>, <em>header=None</em>, <em>path_info=None</em>, <em>custom_predicates=()</em>, <em>decorator=None</em>, <em>mapper=None</em>, <em>match_param=None</em>, <em>append_slash=False</em>, <em>**view_options</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_notfound_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a default <a class="reference internal" href="../glossary.html#term-not-found-view"><span class="xref std std-term">Not Found View</span></a> to the current configuration
state. The view will be called when Pyramid or application code raises
an <a class="reference internal" href="httpexceptions.html#pyramid.httpexceptions.HTTPNotFound" title="pyramid.httpexceptions.HTTPNotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPNotFound</span></code></a> exception (e.g., when a
view cannot be found for the request).  The simplest example is:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">notfound</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;Not Found&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s1">&#39;404 Not Found&#39;</span><span class="p">)</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_notfound_view</span><span class="p">(</span><span class="n">notfound</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">view</span></code> argument is not provided, the view callable defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">default_exceptionresponse_view()</span></code>.</p>
<p>All arguments except <code class="docutils literal notranslate"><span class="pre">append_slash</span></code> have the same meaning as
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> and each predicate
argument restricts the set of circumstances under which this notfound
view will be invoked.  Unlike
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a>, this method will raise
an exception if passed <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">permission</span></code>, <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code>,
<code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">for_</span></code>, or <code class="docutils literal notranslate"><span class="pre">exception_only</span></code> keyword arguments. These
argument values make no sense in the context of a Not Found View.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">append_slash</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, when this Not Found View is invoked,
and the current path info does not end in a slash, the notfound logic
will attempt to find a <a class="reference internal" href="../glossary.html#term-route"><span class="xref std std-term">route</span></a> that matches the request's path
info suffixed with a slash.  If such a route exists, Pyramid will
issue a redirect to the URL implied by the route; if it does not,
Pyramid will return the result of the view callable provided as
<code class="docutils literal notranslate"><span class="pre">view</span></code>, as normal.</p>
<p>If the argument provided as <code class="docutils literal notranslate"><span class="pre">append_slash</span></code> is not a boolean but
instead implements <a class="reference internal" href="interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">IResponse</span></code></a>, the
append_slash logic will behave as if <code class="docutils literal notranslate"><span class="pre">append_slash=True</span></code> was passed,
but the provided class will be used as the response class instead of
the default <a class="reference internal" href="httpexceptions.html#pyramid.httpexceptions.HTTPFound" title="pyramid.httpexceptions.HTTPFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPFound</span></code></a> response class
when a redirect is performed.  For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.httpexceptions</span> <span class="kn">import</span> <span class="n">HTTPMovedPermanently</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_notfound_view</span><span class="p">(</span><span class="n">append_slash</span><span class="o">=</span><span class="n">HTTPMovedPermanently</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The above means that a redirect to a slash-appended route will be
attempted, but instead of <a class="reference internal" href="httpexceptions.html#pyramid.httpexceptions.HTTPFound" title="pyramid.httpexceptions.HTTPFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPFound</span></code></a>
being used, <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPMovedPermanently</span> <span class="pre">will</span>
<span class="pre">be</span> <span class="pre">used</span></code> for the redirect response if a slash-appended route is found.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.6 で変更: </span>The <code class="docutils literal notranslate"><span class="pre">append_slash</span></code> argument was modified to allow any object that
implements the <code class="docutils literal notranslate"><span class="pre">IResponse</span></code> interface to specify the response class
used when a redirect is performed.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.8 で変更: </span>The view is created using <code class="docutils literal notranslate"><span class="pre">exception_only=True</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_forbidden_view">
<code class="descname">add_forbidden_view</code><span class="sig-paren">(</span><em>view=None</em>, <em>attr=None</em>, <em>renderer=None</em>, <em>wrapper=None</em>, <em>route_name=None</em>, <em>request_type=None</em>, <em>request_method=None</em>, <em>request_param=None</em>, <em>containment=None</em>, <em>xhr=None</em>, <em>accept=None</em>, <em>header=None</em>, <em>path_info=None</em>, <em>custom_predicates=()</em>, <em>decorator=None</em>, <em>mapper=None</em>, <em>match_param=None</em>, <em>**view_options</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_forbidden_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a forbidden view to the current configuration state.  The
view will be called when Pyramid or application code raises a
<a class="reference internal" href="httpexceptions.html#pyramid.httpexceptions.HTTPForbidden" title="pyramid.httpexceptions.HTTPForbidden"><code class="xref py py-exc docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPForbidden</span></code></a> exception and the set of
circumstances implied by the predicates provided are matched.  The
simplest example is:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">forbidden</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;Forbidden&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s1">&#39;403 Forbidden&#39;</span><span class="p">)</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_forbidden_view</span><span class="p">(</span><span class="n">forbidden</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">view</span></code> argument is not provided, the view callable defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">default_exceptionresponse_view()</span></code>.</p>
<p>All arguments have the same meaning as
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> and each predicate
argument restricts the set of circumstances under which this forbidden
view will be invoked.  Unlike
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a>, this method will raise
an exception if passed <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">permission</span></code>, <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code>,
<code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">for_</span></code>, or <code class="docutils literal notranslate"><span class="pre">exception_only</span></code> keyword arguments. These
argument values make no sense in the context of a forbidden
<a class="reference internal" href="../glossary.html#term-exception-view"><span class="xref std std-term">exception view</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.8 で変更: </span>The view is created using <code class="docutils literal notranslate"><span class="pre">exception_only=True</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_exception_view">
<code class="descname">add_exception_view</code><span class="sig-paren">(</span><em>view=None</em>, <em>context=None</em>, <em>**view_options</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_exception_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add an <a class="reference internal" href="../glossary.html#term-exception-view"><span class="xref std std-term">exception view</span></a> for the specified <code class="docutils literal notranslate"><span class="pre">exception</span></code> to
the current configuration state. The view will be called when Pyramid
or application code raises the given exception.</p>
<p>This method accepts almost all of the same arguments as
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> except for <code class="docutils literal notranslate"><span class="pre">name</span></code>,
<code class="docutils literal notranslate"><span class="pre">permission</span></code>, <code class="docutils literal notranslate"><span class="pre">for_</span></code>, <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code>, and <code class="docutils literal notranslate"><span class="pre">exception_only</span></code>.</p>
<p>By default, this method will set <code class="docutils literal notranslate"><span class="pre">context=Exception</span></code>, thus
registering for most default Python exceptions. Any subclass of
<code class="docutils literal notranslate"><span class="pre">Exception</span></code> may be specified.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.8 で追加.</span></p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Adding an Event Subscriber</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_subscriber">
<code class="descname">add_subscriber</code><span class="sig-paren">(</span><em>subscriber</em>, <em>iface=None</em>, <em>**predicates</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_subscriber" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add an event <a class="reference internal" href="../glossary.html#term-subscriber"><span class="xref std std-term">subscriber</span></a> for the event stream
implied by the supplied <code class="docutils literal notranslate"><span class="pre">iface</span></code> interface.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> argument represents a callable object (or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which identifies a callable); it will be
called with a single object <code class="docutils literal notranslate"><span class="pre">event</span></code> whenever <span>Pyramid</span> emits
an <a class="reference internal" href="../glossary.html#term-event"><span class="xref std std-term">event</span></a> associated with the <code class="docutils literal notranslate"><span class="pre">iface</span></code>, which may be an
<a class="reference internal" href="../glossary.html#term-interface"><span class="xref std std-term">interface</span></a> or a class or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to a
global object representing an interface or a class.</p>
<p>Using the default <code class="docutils literal notranslate"><span class="pre">iface</span></code> value, <code class="docutils literal notranslate"><span class="pre">None</span></code> will cause the subscriber
to be registered for all event types. See <a class="reference internal" href="../narr/events.html#events-chapter"><span class="std std-ref">Using Events</span></a> for
more information about events and subscribers.</p>
<p>Any number of predicate keyword arguments may be passed in
<code class="docutils literal notranslate"><span class="pre">**predicates</span></code>.  Each predicate named will narrow the set of
circumstances in which the subscriber will be invoked.  Each named
predicate must have been registered via
<a class="reference internal" href="#pyramid.config.Configurator.add_subscriber_predicate" title="pyramid.config.Configurator.add_subscriber_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate()</span></code></a> before it
can be used.  See <a class="reference internal" href="../narr/hooks.html#subscriber-predicates"><span class="std std-ref">Subscriber Predicates</span></a> for more information.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">**predicates</span></code> argument.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Using Security</span></p>
<blockquote>
<div><blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.set_authentication_policy">
<code class="descname">set_authentication_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_authentication_policy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Override the <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a> in the
current configuration.  The <code class="docutils literal notranslate"><span class="pre">policy</span></code> argument must be an instance
of an authentication policy or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a>
that points at an instance of an authentication policy.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_authorization_policy">
<code class="descname">set_authorization_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_authorization_policy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Override the <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a> in the
current configuration.  The <code class="docutils literal notranslate"><span class="pre">policy</span></code> argument must be an instance
of an authorization policy or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> that points
at an instance of an authorization policy.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_default_csrf_options">
<code class="descname">set_default_csrf_options</code><span class="sig-paren">(</span><em>require_csrf=True</em>, <em>token='csrf_token'</em>, <em>header='X-CSRF-Token'</em>, <em>safe_methods=('GET'</em>, <em>'HEAD'</em>, <em>'OPTIONS'</em>, <em>'TRACE')</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_default_csrf_options" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Set the default CSRF options used by subsequent view registrations.</p>
<p><code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> controls whether CSRF checks will be automatically
enabled on each view in the application. This value is used as the
fallback when <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> is left at the default of <code class="docutils literal notranslate"><span class="pre">None</span></code> on
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">token</span></code> is the name of the CSRF token used in the body of the
request, accessed via <code class="docutils literal notranslate"><span class="pre">request.POST[token]</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">csrf_token</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">header</span></code> is the name of the header containing the CSRF token,
accessed via <code class="docutils literal notranslate"><span class="pre">request.headers[header]</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">X-CSRF-Token</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">token</span></code> or <code class="docutils literal notranslate"><span class="pre">header</span></code> are set to <code class="docutils literal notranslate"><span class="pre">None</span></code> they will not be used
for checking CSRF tokens.</p>
<p><code class="docutils literal notranslate"><span class="pre">safe_methods</span></code> is an iterable of HTTP methods which are expected to
not contain side-effects as defined by RFC2616. Safe methods will
never be automatically checked for CSRF tokens.
Default: <code class="docutils literal notranslate"><span class="pre">('GET',</span> <span class="pre">'HEAD',</span> <span class="pre">'OPTIONS',</span> <span class="pre">TRACE')</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">callback</span></code> is set, it must be a callable accepting <code class="docutils literal notranslate"><span class="pre">(request)</span></code>
and returning <code class="docutils literal notranslate"><span class="pre">True</span></code> if the request should be checked for a valid
CSRF token. This callback allows an application to support
alternate authentication methods that do not rely on cookies which
are not subject to CSRF attacks. For example, if a request is
authenticated using the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header instead of a cookie,
this may return <code class="docutils literal notranslate"><span class="pre">False</span></code> for that request so that clients do not
need to send the <code class="docutils literal notranslate"><span class="pre">X-CSRF-Token</span></code> header. The callback is only tested
for non-safe methods as defined by <code class="docutils literal notranslate"><span class="pre">safe_methods</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.7 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.8 で変更: </span>Added the <code class="docutils literal notranslate"><span class="pre">callback</span></code> option.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_csrf_storage_policy">
<code class="descname">set_csrf_storage_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_csrf_storage_policy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="../glossary.html#term-csrf-storage-policy"><span class="xref std std-term">CSRF storage policy</span></a> used by subsequent view
registrations.</p>
<p><code class="docutils literal notranslate"><span class="pre">policy</span></code> is a class that implements the
<a class="reference internal" href="interfaces.html#pyramid.interfaces.ICSRFStoragePolicy" title="pyramid.interfaces.ICSRFStoragePolicy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.interfaces.ICSRFStoragePolicy()</span></code></a> interface and defines
how to generate and persist CSRF tokens.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_default_permission">
<code class="descname">set_default_permission</code><span class="sig-paren">(</span><em>permission</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_default_permission" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Set the default permission to be used by all subsequent
<a class="reference internal" href="../glossary.html#term-view-configuration"><span class="xref std std-term">view configuration</span></a> registrations.  <code class="docutils literal notranslate"><span class="pre">permission</span></code>
should be a <a class="reference internal" href="../glossary.html#term-permission"><span class="xref std std-term">permission</span></a> string to be used as the
default permission.  An example of a permission
string:<code class="docutils literal notranslate"><span class="pre">'view'</span></code>.  Adding a default permission makes it
unnecessary to protect each view configuration with an
explicit permission, unless your application policy requires
some exception for a particular view.</p>
<p>If a default permission is <em>not</em> set, views represented by
view configuration registrations which do not explicitly
declare a permission will be executable by entirely anonymous
users (any authorization policy is ignored).</p>
<p>Later calls to this method override will conflict with earlier calls;
there can be only one default permission active at a time within an
application.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">If a default permission is in effect, view configurations meant to
create a truly anonymously accessible view (even <a class="reference internal" href="../glossary.html#term-exception-view"><span class="xref std std-term">exception
view</span></a> views) <em>must</em> use the value of the permission importable as
<a class="reference internal" href="security.html#pyramid.security.NO_PERMISSION_REQUIRED" title="pyramid.security.NO_PERMISSION_REQUIRED"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.NO_PERMISSION_REQUIRED</span></code></a>.  When this string
is used as the <code class="docutils literal notranslate"><span class="pre">permission</span></code> for a view configuration, the default
permission is ignored, and the view is registered, making it
available to all callers regardless of their credentials.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">See also <a class="reference internal" href="../narr/security.html#setting-a-default-permission"><span class="std std-ref">Setting a Default Permission</span></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">default_permission</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_permission">
<code class="descname">add_permission</code><span class="sig-paren">(</span><em>permission_name</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_permission" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A configurator directive which registers a free-standing
permission without associating it with a view callable.  This can be
used so that the permission shows up in the introspectable data under
the <code class="docutils literal notranslate"><span class="pre">permissions</span></code> category (permissions mentioned via <code class="docutils literal notranslate"><span class="pre">add_view</span></code>
already end up in there).  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Extending the Request Object</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_request_method">
<code class="descname">add_request_method</code><span class="sig-paren">(</span><em>callable=None</em>, <em>name=None</em>, <em>property=False</em>, <em>reify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_request_method" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a property or method to the request object.</p>
<p>When adding a method to the request, <code class="docutils literal notranslate"><span class="pre">callable</span></code> may be any
function that receives the request object as the first
parameter. If <code class="docutils literal notranslate"><span class="pre">name</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> then it will be computed
from the name of the <code class="docutils literal notranslate"><span class="pre">callable</span></code>.</p>
<p>When adding a property to the request, <code class="docutils literal notranslate"><span class="pre">callable</span></code> can either
be a callable that accepts the request as its single positional
parameter, or it can be a property descriptor. If <code class="docutils literal notranslate"><span class="pre">name</span></code> is
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the name of the property will be computed from the
name of the <code class="docutils literal notranslate"><span class="pre">callable</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">callable</span></code> is a property descriptor a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
will be raised if <code class="docutils literal notranslate"><span class="pre">name</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">reify</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>See <a class="reference internal" href="request.html#pyramid.request.Request.set_property" title="pyramid.request.Request.set_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.set_property()</span></code></a> for more
details on <code class="docutils literal notranslate"><span class="pre">property</span></code> vs <code class="docutils literal notranslate"><span class="pre">reify</span></code>. When <code class="docutils literal notranslate"><span class="pre">reify</span></code> is
<code class="docutils literal notranslate"><span class="pre">True</span></code>, the value of <code class="docutils literal notranslate"><span class="pre">property</span></code> is assumed to also be
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>In all cases, <code class="docutils literal notranslate"><span class="pre">callable</span></code> may also be a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which refers to either a callable or
a property descriptor.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">callable</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> then the method is only used to
assist in conflict detection between different addons requesting
the same attribute on the request object.</p>
<p>This is the recommended method for extending the request object
and should be used in favor of providing a custom request
factory via
<a class="reference internal" href="#pyramid.config.Configurator.set_request_factory" title="pyramid.config.Configurator.set_request_factory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_factory()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_request_property">
<code class="descname">set_request_property</code><span class="sig-paren">(</span><em>callable</em>, <em>name=None</em>, <em>reify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_request_property" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a property to the request object.</p>
<div class="deprecated">
<p><span class="versionmodified">バージョン 1.5 で非推奨: </span><a class="reference internal" href="#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a> should be
used instead.  (This method was docs-deprecated in 1.4 and
issues a real deprecation warning in 1.5).</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Using I18N</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_translation_dirs">
<code class="descname">add_translation_dirs</code><span class="sig-paren">(</span><em>*specs</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_translation_dirs" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add one or more <a class="reference internal" href="../glossary.html#term-translation-directory"><span class="xref std std-term">translation directory</span></a> paths to the
current configuration state.  The <code class="docutils literal notranslate"><span class="pre">specs</span></code> argument is a
sequence that may contain absolute directory paths
(e.g. <code class="docutils literal notranslate"><span class="pre">/usr/share/locale</span></code>) or <a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a>
names naming a directory path (e.g. <code class="docutils literal notranslate"><span class="pre">some.package:locale</span></code>)
or a combination of the two.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_translation_dirs</span><span class="p">(</span><span class="s1">&#39;/usr/share/locale&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;some.package:locale&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The translation directories are defined as a list in which
translations defined later have precedence over translations defined
earlier.</p>
<p>By default, consecutive calls to <code class="docutils literal notranslate"><span class="pre">add_translation_dirs</span></code> will add
directories to the start of the list. This means later calls to
<code class="docutils literal notranslate"><span class="pre">add_translation_dirs</span></code> will have their translations trumped by
earlier calls. If you explicitly need this call to trump an earlier
call then you may set <code class="docutils literal notranslate"><span class="pre">override</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>If multiple specs are provided in a single call to
<code class="docutils literal notranslate"><span class="pre">add_translation_dirs</span></code>, the directories will be inserted in the
order they're provided (earlier items are trumped by later items).</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.8 で変更: </span>The <code class="docutils literal notranslate"><span class="pre">override</span></code> parameter was added to allow a later call
to <code class="docutils literal notranslate"><span class="pre">add_translation_dirs</span></code> to override an earlier call, inserting
folders at the beginning of the translation directory list.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_locale_negotiator">
<code class="descname">set_locale_negotiator</code><span class="sig-paren">(</span><em>negotiator</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_locale_negotiator" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="../glossary.html#term-locale-negotiator"><span class="xref std std-term">locale negotiator</span></a> for this application.  The
<a class="reference internal" href="../glossary.html#term-locale-negotiator"><span class="xref std std-term">locale negotiator</span></a> is a callable which accepts a
<a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> object and which returns a <a class="reference internal" href="../glossary.html#term-locale-name"><span class="xref std std-term">locale
name</span></a>.  The <code class="docutils literal notranslate"><span class="pre">negotiator</span></code> argument should be the locale
negotiator implementation or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a>
which refers to such an implementation.</p>
<p>Later calls to this method override earlier calls; there can
be only one locale negotiator active at a time within an
application.  See <a class="reference internal" href="../narr/i18n.html#activating-translation"><span class="std std-ref">Activating Translation</span></a> for more
information.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">locale_negotiator</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Overriding Assets</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.override_asset">
<code class="descname">override_asset</code><span class="sig-paren">(</span><em>to_override</em>, <em>override_with</em>, <em>_override=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.override_asset" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a <span>Pyramid</span> asset override to the current
configuration state.</p>
<p><code class="docutils literal notranslate"><span class="pre">to_override</span></code> is an <a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a> to the
asset being overridden.</p>
<p><code class="docutils literal notranslate"><span class="pre">override_with</span></code> is an <a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset specification</span></a> to the
asset that is performing the override. This may also be an absolute
path.</p>
<p>See <a class="reference internal" href="../narr/assets.html#assets-chapter"><span class="std std-ref">Static Assets</span></a> for more
information about asset overrides.</p>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Getting and Adding Settings</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_settings">
<code class="descname">add_settings</code><span class="sig-paren">(</span><em>settings=None</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_settings" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Augment the <a class="reference internal" href="../glossary.html#term-deployment-settings"><span class="xref std std-term">deployment settings</span></a> with one or more
key/value pairs.</p>
<p>You may pass a dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_settings</span><span class="p">({</span><span class="s1">&#39;external_uri&#39;</span><span class="p">:</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Or a set of key/value pairs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_settings</span><span class="p">(</span><span class="n">external_uri</span><span class="o">=</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is useful when you need to test code that accesses the
<a class="reference internal" href="registry.html#pyramid.registry.Registry.settings" title="pyramid.registry.Registry.settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.registry.Registry.settings</span></code></a> API (or the
<a class="reference internal" href="#pyramid.config.Configurator.get_settings" title="pyramid.config.Configurator.get_settings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.get_settings()</span></code></a> API) and
which uses values from that API.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.get_settings">
<code class="descname">get_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.get_settings" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../glossary.html#term-deployment-settings"><span class="xref std std-term">deployment settings</span></a> object for the current
application.  A deployment settings object is a dictionary-like
object that contains key/value pairs based on the dictionary passed
as the <code class="docutils literal notranslate"><span class="pre">settings</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">the <a class="reference internal" href="registry.html#pyramid.registry.Registry.settings" title="pyramid.registry.Registry.settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.registry.Registry.settings</span></code></a> API
performs the same duty.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Hooking Pyramid Behavior</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.add_renderer">
<code class="descname">add_renderer</code><span class="sig-paren">(</span><em>name</em>, <em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_renderer" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-renderer"><span class="xref std std-term">renderer</span></a> factory to the
current configuration state.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument is the renderer name.  Use <code class="docutils literal notranslate"><span class="pre">None</span></code> to
represent the default renderer (a renderer which will be used for all
views unless they name another renderer specifically).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">factory</span></code> argument is Python reference to an
implementation of a <a class="reference internal" href="../glossary.html#term-renderer"><span class="xref std std-term">renderer</span></a> factory or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to same.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_resource_url_adapter">
<code class="descname">add_resource_url_adapter</code><span class="sig-paren">(</span><em>adapter</em>, <em>resource_iface=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_resource_url_adapter" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
<p>When you add a traverser as described in
<a class="reference internal" href="../narr/hooks.html#changing-the-traverser"><span class="std std-ref">Changing the Traverser</span></a>, it's convenient to continue to use the
<a class="reference internal" href="request.html#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.resource_url()</span></code></a> API.  However, since the
way traversal is done may have been modified, the URLs that
<code class="docutils literal notranslate"><span class="pre">resource_url</span></code> generates by default may be incorrect when resources
are returned by a custom traverser.</p>
<p>If you've added a traverser, you can change how
<a class="reference internal" href="request.html#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resource_url()</span></code></a> generates a URL for a
specific type of resource by calling this method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">adapter</span></code> argument represents a class that implements the
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IResourceURL" title="pyramid.interfaces.IResourceURL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IResourceURL</span></code></a> interface.  The class
constructor should accept two arguments in its constructor (the
resource and the request) and the resulting instance should provide
the attributes detailed in that interface (<code class="docutils literal notranslate"><span class="pre">virtual_path</span></code> and
<code class="docutils literal notranslate"><span class="pre">physical_path</span></code>, in particular).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">resource_iface</span></code> argument represents a class or interface that
the resource should possess for this url adapter to be used when
<a class="reference internal" href="request.html#pyramid.request.Request.resource_url" title="pyramid.request.Request.resource_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.resource_url()</span></code></a> looks up a resource url
adapter.  If <code class="docutils literal notranslate"><span class="pre">resource_iface</span></code> is not passed, or it is passed as
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the url adapter will be used for every type of resource.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#changing-resource-url"><span class="std std-ref">Changing How pyramid.request.Request.resource_url() Generates a URL</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_response_adapter">
<code class="descname">add_response_adapter</code><span class="sig-paren">(</span><em>adapter</em>, <em>type_or_iface</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_response_adapter" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>When an object of type (or interface) <code class="docutils literal notranslate"><span class="pre">type_or_iface</span></code> is
returned from a view callable, Pyramid will use the adapter
<code class="docutils literal notranslate"><span class="pre">adapter</span></code> to convert it into an object which implements the
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code></a> interface.  If <code class="docutils literal notranslate"><span class="pre">adapter</span></code> is
None, an object returned of type (or interface) <code class="docutils literal notranslate"><span class="pre">type_or_iface</span></code>
will itself be used as a response object.</p>
<p><code class="docutils literal notranslate"><span class="pre">adapter</span></code> and <code class="docutils literal notranslate"><span class="pre">type_or_interface</span></code> may be Python objects or
strings representing dotted names to importable Python global
objects.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#using-iresponse"><span class="std std-ref">Changing How Pyramid Treats View Responses</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_traverser">
<code class="descname">add_traverser</code><span class="sig-paren">(</span><em>adapter</em>, <em>iface=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_traverser" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The superdefault <a class="reference internal" href="../glossary.html#term-traversal"><span class="xref std std-term">traversal</span></a> algorithm that <span>Pyramid</span> uses
is explained in <a class="reference internal" href="../narr/traversal.html#traversal-algorithm"><span class="std std-ref">The Traversal Algorithm</span></a>.  Though it is rarely
necessary, this default algorithm can be swapped out selectively for
a different traversal pattern via configuration.  The section
entitled <a class="reference internal" href="../narr/hooks.html#changing-the-traverser"><span class="std std-ref">Changing the Traverser</span></a> details how to create a
traverser class.</p>
<p>For example, to override the superdefault traverser used by Pyramid,
you might do something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">myapp.traversal</span> <span class="kn">import</span> <span class="n">MyCustomTraverser</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_traverser</span><span class="p">(</span><span class="n">MyCustomTraverser</span><span class="p">)</span>
</pre></div>
</div>
<p>This would cause the Pyramid superdefault traverser to never be used;
instead all traversal would be done using your <code class="docutils literal notranslate"><span class="pre">MyCustomTraverser</span></code>
class, no matter which object was returned by the <a class="reference internal" href="../glossary.html#term-root-factory"><span class="xref std std-term">root
factory</span></a> of this application.  Note that we passed no arguments to
the <code class="docutils literal notranslate"><span class="pre">iface</span></code> keyword parameter.  The default value of <code class="docutils literal notranslate"><span class="pre">iface</span></code>,
<code class="docutils literal notranslate"><span class="pre">None</span></code> represents that the registered traverser should be used when
no other more specific traverser is available for the object returned
by the root factory.</p>
<p>However, more than one traversal algorithm can be active at the same
time.  The traverser used can depend on the result of the <a class="reference internal" href="../glossary.html#term-root-factory"><span class="xref std std-term">root
factory</span></a>.  For instance, if your root factory returns more than one
type of object conditionally, you could claim that an alternate
traverser adapter should be used against one particular class or
interface returned by that root factory.  When the root factory
returned an object that implemented that class or interface, a custom
traverser would be used.  Otherwise, the default traverser would be
used.  The <code class="docutils literal notranslate"><span class="pre">iface</span></code> argument represents the class of the object that
the root factory might return or an <a class="reference internal" href="../glossary.html#term-interface"><span class="xref std std-term">interface</span></a> that the object
might implement.</p>
<p>To use a particular traverser only when the root factory returns a
particular class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_traverser</span><span class="p">(</span><span class="n">MyCustomTraverser</span><span class="p">,</span> <span class="n">MyRootClass</span><span class="p">)</span>
</pre></div>
</div>
<p>When more than one traverser is active, the &quot;most specific&quot; traverser
will be used (the one that matches the class or interface of the
value returned by the root factory most closely).</p>
<p>Note that either <code class="docutils literal notranslate"><span class="pre">adapter</span></code> or <code class="docutils literal notranslate"><span class="pre">iface</span></code> can be a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> or a Python object.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#changing-the-traverser"><span class="std std-ref">Changing the Traverser</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_tween">
<code class="descname">add_tween</code><span class="sig-paren">(</span><em>tween_factory</em>, <em>under=None</em>, <em>over=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_tween" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
<p>Add a 'tween factory'.  A <a class="reference internal" href="../glossary.html#term-tween"><span class="xref std std-term">tween</span></a> (a contraction of 'between')
is a bit of code that sits between the Pyramid router's main request
handling function and the upstream WSGI component that uses
<span>Pyramid</span> as its 'app'.  Tweens are a feature that may be used
by Pyramid framework extensions, to provide, for example,
Pyramid-specific view timing support, bookkeeping code that examines
exceptions before they are returned to the upstream WSGI application,
or a variety of other features.  Tweens behave a bit like
<a class="reference internal" href="../glossary.html#term-wsgi"><span class="xref std std-term">WSGI</span></a> 'middleware' but they have the benefit of running in a
context in which they have access to the Pyramid <a class="reference internal" href="../glossary.html#term-application-registry"><span class="xref std std-term">application
registry</span></a> as well as the Pyramid rendering machinery.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">You can view the tween ordering configured into a given
Pyramid application by using the <code class="docutils literal notranslate"><span class="pre">ptweens</span></code>
command.  See <a class="reference internal" href="../narr/commandline.html#displaying-tweens"><span class="std std-ref">Displaying &quot;Tweens&quot;</span></a>.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tween_factory</span></code> argument must be a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a>
to a global object representing the tween factory.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">under</span></code> and <code class="docutils literal notranslate"><span class="pre">over</span></code> arguments allow the caller of
<code class="docutils literal notranslate"><span class="pre">add_tween</span></code> to provide a hint about where in the tween chain this
tween factory should be placed when an implicit tween chain is used.
These hints are only used when an explicit tween chain is not used
(when the <code class="docutils literal notranslate"><span class="pre">pyramid.tweens</span></code> configuration value is not set).
Allowable values for <code class="docutils literal notranslate"><span class="pre">under</span></code> or <code class="docutils literal notranslate"><span class="pre">over</span></code> (or both) are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">None</span></code> (the default).</li>
<li>A <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to a tween factory: a string
representing the dotted name of a tween factory added in a call to
<code class="docutils literal notranslate"><span class="pre">add_tween</span></code> in the same configuration session.</li>
<li>One of the constants <a class="reference internal" href="tweens.html#pyramid.tweens.MAIN" title="pyramid.tweens.MAIN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.tweens.MAIN</span></code></a>,
<a class="reference internal" href="tweens.html#pyramid.tweens.INGRESS" title="pyramid.tweens.INGRESS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.tweens.INGRESS</span></code></a>, or <a class="reference internal" href="tweens.html#pyramid.tweens.EXCVIEW" title="pyramid.tweens.EXCVIEW"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.tweens.EXCVIEW</span></code></a>.</li>
<li>An iterable of any combination of the above. This allows the user
to specify fallbacks if the desired tween is not included, as well
as compatibility with multiple other tweens.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">under</span></code> means 'closer to the main Pyramid application than',
<code class="docutils literal notranslate"><span class="pre">over</span></code> means 'closer to the request ingress than'.</p>
<p>For example, calling <code class="docutils literal notranslate"><span class="pre">add_tween('myapp.tfactory',</span>
<span class="pre">over=pyramid.tweens.MAIN)</span></code> will attempt to place the tween factory
represented by the dotted name <code class="docutils literal notranslate"><span class="pre">myapp.tfactory</span></code> directly 'above'
(in <code class="docutils literal notranslate"><span class="pre">ptweens</span></code> order) the main Pyramid request handler.
Likewise, calling <code class="docutils literal notranslate"><span class="pre">add_tween('myapp.tfactory',</span>
<span class="pre">over=pyramid.tweens.MAIN,</span> <span class="pre">under='mypkg.someothertween')</span></code> will
attempt to place this tween factory 'above' the main handler but
'below' (a fictional) 'mypkg.someothertween' tween factory.</p>
<p>If all options for <code class="docutils literal notranslate"><span class="pre">under</span></code> (or <code class="docutils literal notranslate"><span class="pre">over</span></code>) cannot be found in the
current configuration, it is an error. If some options are specified
purely for compatibilty with other tweens, just add a fallback of
MAIN or INGRESS. For example, <code class="docutils literal notranslate"><span class="pre">under=('mypkg.someothertween',</span>
<span class="pre">'mypkg.someothertween2',</span> <span class="pre">INGRESS)</span></code>.  This constraint will require
the tween to be located under both the 'mypkg.someothertween' tween,
the 'mypkg.someothertween2' tween, and INGRESS. If any of these is
not in the current configuration, this constraint will only organize
itself based on the tweens that are present.</p>
<p>Specifying neither <code class="docutils literal notranslate"><span class="pre">over</span></code> nor <code class="docutils literal notranslate"><span class="pre">under</span></code> is equivalent to specifying
<code class="docutils literal notranslate"><span class="pre">under=INGRESS</span></code>.</p>
<p>Implicit tween ordering is obviously only best-effort.  Pyramid will
attempt to present an implicit order of tweens as best it can, but
the only surefire way to get any particular ordering is to use an
explicit tween order.  A user may always override the implicit tween
ordering by using an explicit <code class="docutils literal notranslate"><span class="pre">pyramid.tweens</span></code> configuration value
setting.</p>
<p><code class="docutils literal notranslate"><span class="pre">under</span></code>, and <code class="docutils literal notranslate"><span class="pre">over</span></code> arguments are ignored when an explicit tween
chain is specified using the <code class="docutils literal notranslate"><span class="pre">pyramid.tweens</span></code> configuration value.</p>
<p>For more information, see <a class="reference internal" href="../narr/hooks.html#registering-tweens"><span class="std std-ref">Registering Tweens</span></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_route_predicate">
<code class="descname">add_route_predicate</code><span class="sig-paren">(</span><em>name</em>, <em>factory</em>, <em>weighs_more_than=None</em>, <em>weighs_less_than=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_route_predicate" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Adds a route predicate factory.  The view predicate can later be
named as a keyword argument to
<a class="reference internal" href="#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> should be the name of the predicate.  It must be a valid
Python identifier (it will be used as a keyword argument to
<code class="docutils literal notranslate"><span class="pre">add_route</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">factory</span></code> should be a <a class="reference internal" href="../glossary.html#term-predicate-factory"><span class="xref std std-term">predicate factory</span></a> or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> which refers to a predicate factory.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#view-and-route-predicates"><span class="std std-ref">View and Route Predicates</span></a> for more information.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_subscriber_predicate">
<code class="descname">add_subscriber_predicate</code><span class="sig-paren">(</span><em>name</em>, <em>factory</em>, <em>weighs_more_than=None</em>, <em>weighs_less_than=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_subscriber_predicate" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加.</span></p>
</div>
<p>Adds a subscriber predicate factory.  The associated subscriber
predicate can later be named as a keyword argument to
<a class="reference internal" href="#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></code></a> in the
<code class="docutils literal notranslate"><span class="pre">**predicates</span></code> anonymous keyword argument dictionary.</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> should be the name of the predicate.  It must be a valid
Python identifier (it will be used as a <code class="docutils literal notranslate"><span class="pre">**predicates</span></code> keyword
argument to <a class="reference internal" href="#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_subscriber()</span></code></a>).</p>
<p><code class="docutils literal notranslate"><span class="pre">factory</span></code> should be a <a class="reference internal" href="../glossary.html#term-predicate-factory"><span class="xref std std-term">predicate factory</span></a> or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> which refers to a predicate factory.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#subscriber-predicates"><span class="std std-ref">Subscriber Predicates</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_view_predicate">
<code class="descname">add_view_predicate</code><span class="sig-paren">(</span><em>name</em>, <em>factory</em>, <em>weighs_more_than=None</em>, <em>weighs_less_than=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_view_predicate" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加.</span></p>
</div>
<p>Adds a view predicate factory.  The associated view predicate can
later be named as a keyword argument to
<a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> in the
<code class="docutils literal notranslate"><span class="pre">predicates</span></code> anonyous keyword argument dictionary.</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> should be the name of the predicate.  It must be a valid
Python identifier (it will be used as a keyword argument to
<code class="docutils literal notranslate"><span class="pre">add_view</span></code> by others).</p>
<p><code class="docutils literal notranslate"><span class="pre">factory</span></code> should be a <a class="reference internal" href="../glossary.html#term-predicate-factory"><span class="xref std std-term">predicate factory</span></a> or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> which refers to a predicate factory.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#view-and-route-predicates"><span class="std std-ref">View and Route Predicates</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_view_deriver">
<code class="descname">add_view_deriver</code><span class="sig-paren">(</span><em>deriver</em>, <em>name=None</em>, <em>under=None</em>, <em>over=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.add_view_deriver" title="この定義へのパーマリンク">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">バージョン 1.7 で追加.</span></p>
</div>
<p>Add a <a class="reference internal" href="../glossary.html#term-view-deriver"><span class="xref std std-term">view deriver</span></a> to the view pipeline. View derivers are
a feature used by extension authors to wrap views in custom code
controllable by view-specific options.</p>
<p><code class="docutils literal notranslate"><span class="pre">deriver</span></code> should be a callable conforming to the
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IViewDeriver" title="pyramid.interfaces.IViewDeriver"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IViewDeriver</span></code></a> interface.</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> should be the name of the view deriver.  There are no
restrictions on the name of a view deriver. If left unspecified, the
name will be constructed from the name of the <code class="docutils literal notranslate"><span class="pre">deriver</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">under</span></code> and <code class="docutils literal notranslate"><span class="pre">over</span></code> options can be used to control the ordering
of view derivers by providing hints about where in the view pipeline
the deriver is used. Each option may be a string or a list of strings.
At least one view deriver in each, the over and under directions, must
exist to fully satisfy the constraints.</p>
<p><code class="docutils literal notranslate"><span class="pre">under</span></code> means closer to the user-defined <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a>,
and <code class="docutils literal notranslate"><span class="pre">over</span></code> means closer to view pipeline ingress.</p>
<p>The default value for <code class="docutils literal notranslate"><span class="pre">over</span></code> is <code class="docutils literal notranslate"><span class="pre">rendered_view</span></code> and <code class="docutils literal notranslate"><span class="pre">under</span></code> is
<code class="docutils literal notranslate"><span class="pre">decorated_view</span></code>. This places the deriver somewhere between the two
in the view pipeline. If the deriver should be placed elsewhere in the
pipeline, such as above <code class="docutils literal notranslate"><span class="pre">decorated_view</span></code>, then you MUST also specify
<code class="docutils literal notranslate"><span class="pre">under</span></code> to something earlier in the order, or a
<code class="docutils literal notranslate"><span class="pre">CyclicDependencyError</span></code> will be raised when trying to sort the
derivers.</p>
<p>See <a class="reference internal" href="../narr/hooks.html#view-derivers"><span class="std std-ref">View Derivers</span></a> for more information.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_execution_policy">
<code class="descname">set_execution_policy</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_execution_policy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Override the <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-execution-policy"><span class="xref std std-term">execution policy</span></a> in the
current configuration.  The <code class="docutils literal notranslate"><span class="pre">policy</span></code> argument must be an instance
of an <code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IExecutionPolicy</span></code> or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> that points at an instance of an
execution policy.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_request_factory">
<code class="descname">set_request_factory</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_request_factory" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The object passed as <code class="docutils literal notranslate"><span class="pre">factory</span></code> should be an object (or a
<a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which refers to an object) which
will be used by the <span>Pyramid</span> router to create all
request objects.  This factory object must have the same
methods and attributes as the
<a class="reference internal" href="request.html#pyramid.request.Request" title="pyramid.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code></a> class (particularly
<code class="docutils literal notranslate"><span class="pre">__call__</span></code>, and <code class="docutils literal notranslate"><span class="pre">blank</span></code>).</p>
<p>See <a class="reference internal" href="#pyramid.config.Configurator.add_request_method" title="pyramid.config.Configurator.add_request_method"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method()</span></code></a>
for a less intrusive way to extend the request objects with
custom methods and properties.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">request_factory</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor
can be used to achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_root_factory">
<code class="descname">set_root_factory</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_root_factory" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="../glossary.html#term-root-factory"><span class="xref std std-term">root factory</span></a> to the current configuration
state.  If the <code class="docutils literal notranslate"><span class="pre">factory</span></code> argument is <code class="docutils literal notranslate"><span class="pre">None</span></code> a default root
factory will be registered.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">root_factory</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_session_factory">
<code class="descname">set_session_factory</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_session_factory" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Configure the application with a <a class="reference internal" href="../glossary.html#term-session-factory"><span class="xref std std-term">session factory</span></a>.  If this
method is called, the <code class="docutils literal notranslate"><span class="pre">factory</span></code> argument must be a session
factory callable or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> to that factory.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">session_factory</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor can be used to
achieve the same purpose.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.set_view_mapper">
<code class="descname">set_view_mapper</code><span class="sig-paren">(</span><em>mapper</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.set_view_mapper" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Setting a <a class="reference internal" href="../glossary.html#term-view-mapper"><span class="xref std std-term">view mapper</span></a> makes it possible to make use of
<a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a> objects which implement different call
signatures than the ones supported by <span>Pyramid</span> as described in
its narrative documentation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mapper</span></code> argument should be an object implementing
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IViewMapperFactory" title="pyramid.interfaces.IViewMapperFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IViewMapperFactory</span></code></a> or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted
Python name</span></a> to such an object.  The provided <code class="docutils literal notranslate"><span class="pre">mapper</span></code> will become
the default view mapper to be used by all subsequent <a class="reference internal" href="../glossary.html#term-view-configuration"><span class="xref std std-term">view
configuration</span></a> registrations.</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">See also <a class="reference internal" href="../narr/hooks.html#using-a-view-mapper"><span class="std std-ref">Using a View Mapper</span></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Using the <code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code> argument to the
<a class="reference internal" href="#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code></a> constructor
can be used to achieve the same purpose.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Extension Author APIs</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.action">
<code class="descname">action</code><span class="sig-paren">(</span><em>discriminator</em>, <em>callable=None</em>, <em>args=()</em>, <em>kw=None</em>, <em>order=0</em>, <em>introspectables=()</em>, <em>**extra</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.action"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.action" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Register an action which will be executed when
<a class="reference internal" href="#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> is called (or executed
immediately if <code class="docutils literal notranslate"><span class="pre">autocommit</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">This method is typically only used by <span>Pyramid</span>
framework extension authors, not by <span>Pyramid</span> application
developers.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> uniquely identifies the action.  It must be
given, but it can be <code class="docutils literal notranslate"><span class="pre">None</span></code>, to indicate that the action never
conflicts.  It must be a hashable value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">callable</span></code> is a callable object which performs the task
associated with the action when the action is executed.  It is
optional.</p>
<p><code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kw</span></code> are tuple and dict objects respectively, which
are passed to <code class="docutils literal notranslate"><span class="pre">callable</span></code> when this action is executed.  Both are
optional.</p>
<p><code class="docutils literal notranslate"><span class="pre">order</span></code> is a grouping mechanism; an action with a lower order will
be executed before an action with a higher order (has no effect when
autocommit is <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">introspectables</span></code> is a sequence of <a class="reference internal" href="../glossary.html#term-introspectable"><span class="xref std std-term">introspectable</span></a> objects
(or the empty sequence if no introspectable objects are associated
with this action).  If this configurator's <code class="docutils literal notranslate"><span class="pre">introspection</span></code>
attribute is <code class="docutils literal notranslate"><span class="pre">False</span></code>, these introspectables will be ignored.</p>
<p><code class="docutils literal notranslate"><span class="pre">extra</span></code> provides a facility for inserting extra keys and values
into an action dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.add_directive">
<code class="descname">add_directive</code><span class="sig-paren">(</span><em>name</em>, <em>directive</em>, <em>action_wrap=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.add_directive"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.add_directive" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Add a directive method to the configurator.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">This method is typically only used by <span>Pyramid</span>
framework extension authors, not by <span>Pyramid</span> application
developers.</p>
</div>
<p>Framework extenders can add directive methods to a configurator by
instructing their users to call <code class="docutils literal notranslate"><span class="pre">config.add_directive('somename',</span>
<span class="pre">'some.callable')</span></code>.  This will make <code class="docutils literal notranslate"><span class="pre">some.callable</span></code> accessible as
<code class="docutils literal notranslate"><span class="pre">config.somename</span></code>.  <code class="docutils literal notranslate"><span class="pre">some.callable</span></code> should be a function which
accepts <code class="docutils literal notranslate"><span class="pre">config</span></code> as a first argument, and arbitrary positional and
keyword arguments following.  It should use config.action as
necessary to perform actions.  Directive methods can then be invoked
like 'built-in' directives such as <code class="docutils literal notranslate"><span class="pre">add_view</span></code>, <code class="docutils literal notranslate"><span class="pre">add_route</span></code>, etc.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">action_wrap</span></code> argument should be <code class="docutils literal notranslate"><span class="pre">True</span></code> for directives which
perform <code class="docutils literal notranslate"><span class="pre">config.action</span></code> with potentially conflicting
discriminators.  <code class="docutils literal notranslate"><span class="pre">action_wrap</span></code> will cause the directive to be
wrapped in a decorator which provides more accurate conflict
cause information.</p>
<p><code class="docutils literal notranslate"><span class="pre">add_directive</span></code> does not participate in conflict detection, and
later calls to <code class="docutils literal notranslate"><span class="pre">add_directive</span></code> will override earlier calls.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.with_package">
<code class="descname">with_package</code><span class="sig-paren">(</span><em>package</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.with_package"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.with_package" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a new Configurator instance with the same registry
as this configurator. <code class="docutils literal notranslate"><span class="pre">package</span></code> may be an actual Python package
object or a <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> representing a package.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.derive_view">
<code class="descname">derive_view</code><span class="sig-paren">(</span><em>view</em>, <em>attr=None</em>, <em>renderer=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.derive_view" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="../glossary.html#term-view-callable"><span class="xref std std-term">view callable</span></a> using the function, instance,
or class (or <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> referring to the same)
provided as <code class="docutils literal notranslate"><span class="pre">view</span></code> object.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">This method is typically only used by <span>Pyramid</span> framework
extension authors, not by <span>Pyramid</span> application developers.</p>
</div>
<p>This is API is useful to framework extenders who create
pluggable systems which need to register 'proxy' view
callables for functions, instances, or classes which meet the
requirements of being a <span>Pyramid</span> view callable.  For
example, a <code class="docutils literal notranslate"><span class="pre">some_other_framework</span></code> function in another
framework may want to allow a user to supply a view callable,
but he may want to wrap the view callable in his own before
registering the wrapper as a <span>Pyramid</span> view callable.
Because a <span>Pyramid</span> view callable can be any of a
number of valid objects, the framework extender will not know
how to call the user-supplied object.  Running it through
<code class="docutils literal notranslate"><span class="pre">derive_view</span></code> normalizes it to a callable which accepts two
arguments: <code class="docutils literal notranslate"><span class="pre">context</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_other_framework</span><span class="p">(</span><span class="n">user_supplied_view</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>
    <span class="n">proxy_view</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">derive_view</span><span class="p">(</span><span class="n">user_supplied_view</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">my_wrapper</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">do_something_that_mutates</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">proxy_view</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">my_wrapper</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">view</span></code> object provided should be one of the following:</p>
<ul class="simple">
<li>A function or another non-class callable object that accepts
a <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a> as a single positional argument and which
returns a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> object.</li>
<li>A function or other non-class callable object that accepts
two positional arguments, <code class="docutils literal notranslate"><span class="pre">context,</span> <span class="pre">request</span></code> and which
returns a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> object.</li>
<li>A class which accepts a single positional argument in its
constructor named <code class="docutils literal notranslate"><span class="pre">request</span></code>, and which has a <code class="docutils literal notranslate"><span class="pre">__call__</span></code>
method that accepts no arguments that returns a
<a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> object.</li>
<li>A class which accepts two positional arguments named
<code class="docutils literal notranslate"><span class="pre">context,</span> <span class="pre">request</span></code>, and which has a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method
that accepts no arguments that returns a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a>
object.</li>
<li>A <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> which refers to any of the
kinds of objects above.</li>
</ul>
<p>This API returns a callable which accepts the arguments
<code class="docutils literal notranslate"><span class="pre">context,</span> <span class="pre">request</span></code> and which returns the result of calling
the provided <code class="docutils literal notranslate"><span class="pre">view</span></code> object.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">attr</span></code> keyword argument is most useful when the view
object is a class.  It names the method that should be used as
the callable.  If <code class="docutils literal notranslate"><span class="pre">attr</span></code> is not provided, the attribute
effectively defaults to <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.  See
<a class="reference internal" href="../narr/views.html#class-as-view"><span class="std std-ref">Defining a View Callable as a Class</span></a> for more information.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">renderer</span></code> keyword argument should be a renderer
name. If supplied, it will cause the returned callable to use
a <a class="reference internal" href="../glossary.html#term-renderer"><span class="xref std std-term">renderer</span></a> to convert the user-supplied view result to
a <a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> object.  If a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument is not
supplied, the user-supplied view must itself return a
<a class="reference internal" href="../glossary.html#term-response"><span class="xref std std-term">response</span></a> object.</p>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Utility Methods</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.absolute_asset_spec">
<code class="descname">absolute_asset_spec</code><span class="sig-paren">(</span><em>relative_spec</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.absolute_asset_spec"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.absolute_asset_spec" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Resolve the potentially relative <a class="reference internal" href="../glossary.html#term-asset-specification"><span class="xref std std-term">asset
specification</span></a> string passed as <code class="docutils literal notranslate"><span class="pre">relative_spec</span></code> into an
absolute asset specification string and return the string.
Use the <code class="docutils literal notranslate"><span class="pre">package</span></code> of this configurator as the package to
which the asset specification will be considered relative
when generating an absolute asset specification.  If the
provided <code class="docutils literal notranslate"><span class="pre">relative_spec</span></code> argument is already absolute, or if
the <code class="docutils literal notranslate"><span class="pre">relative_spec</span></code> is not a string, it is simply returned.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.maybe_dotted">
<code class="descname">maybe_dotted</code><span class="sig-paren">(</span><em>dotted</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.maybe_dotted"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.maybe_dotted" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Resolve the <a class="reference internal" href="../glossary.html#term-dotted-python-name"><span class="xref std std-term">dotted Python name</span></a> <code class="docutils literal notranslate"><span class="pre">dotted</span></code> to a
global Python object.  If <code class="docutils literal notranslate"><span class="pre">dotted</span></code> is not a string, return
it without attempting to do any name resolution.  If
<code class="docutils literal notranslate"><span class="pre">dotted</span></code> is a relative dotted name (e.g. <code class="docutils literal notranslate"><span class="pre">.foo.bar</span></code>,
consider it relative to the <code class="docutils literal notranslate"><span class="pre">package</span></code> argument supplied to
this Configurator's constructor.</p>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">ZCA-Related APIs</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.hook_zca">
<code class="descname">hook_zca</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.hook_zca" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Call <code class="xref py py-func docutils literal notranslate"><span class="pre">zope.component.getSiteManager.sethook()</span></code> with the
argument <a class="reference internal" href="threadlocal.html#pyramid.threadlocal.get_current_registry" title="pyramid.threadlocal.get_current_registry"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.threadlocal.get_current_registry</span></code></a>, causing
the <a class="reference internal" href="../glossary.html#term-zope-component-architecture"><span class="xref std std-term">Zope Component Architecture</span></a> 'global' APIs such as
<a class="reference external" href="http://zopecomponent.readthedocs.io/en/latest/api/sitemanager.html#zope.component.getSiteManager" title="(in zope.component v4.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">zope.component.getSiteManager()</span></code></a>,
<a class="reference external" href="http://zopecomponent.readthedocs.io/en/latest/api/adapter.html#zope.component.getAdapter" title="(in zope.component v4.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">zope.component.getAdapter()</span></code></a> and others to use the
<span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-application-registry"><span class="xref std std-term">application registry</span></a> rather than the Zope
'global' registry.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.unhook_zca">
<code class="descname">unhook_zca</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.unhook_zca" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Call <code class="xref py py-func docutils literal notranslate"><span class="pre">zope.component.getSiteManager.reset()</span></code> to undo the
action of <a class="reference internal" href="#pyramid.config.Configurator.hook_zca" title="pyramid.config.Configurator.hook_zca"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.hook_zca()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.setup_registry">
<code class="descname">setup_registry</code><span class="sig-paren">(</span><em>settings=None</em>, <em>root_factory=None</em>, <em>authentication_policy=None</em>, <em>authorization_policy=None</em>, <em>renderers=None</em>, <em>debug_logger=None</em>, <em>locale_negotiator=None</em>, <em>request_factory=None</em>, <em>response_factory=None</em>, <em>default_permission=None</em>, <em>session_factory=None</em>, <em>default_view_mapper=None</em>, <em>exceptionresponse_view=&lt;function default_exceptionresponse_view&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config.html#Configurator.setup_registry"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.Configurator.setup_registry" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>When you pass a non-<code class="docutils literal notranslate"><span class="pre">None</span></code> <code class="docutils literal notranslate"><span class="pre">registry</span></code> argument to the
<a class="reference internal" href="../glossary.html#term-configurator"><span class="xref std std-term">Configurator</span></a> constructor, no initial setup is performed
against the registry.  This is because the registry you pass in may
have already been initialized for use under <span>Pyramid</span> via a
different configurator.  However, in some circumstances (such as when
you want to use a global registry instead of a registry created as a
result of the Configurator constructor), or when you want to reset
the initial setup of a registry, you <em>do</em> want to explicitly
initialize the registry associated with a Configurator for use under
<span>Pyramid</span>.  Use <code class="docutils literal notranslate"><span class="pre">setup_registry</span></code> to do this initialization.</p>
<p><code class="docutils literal notranslate"><span class="pre">setup_registry</span></code> configures settings, a root factory, security
policies, renderers, a debug logger, a locale negotiator, and various
other settings using the configurator's current registry, as per the
descriptions in the Configurator constructor.</p>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Testing Helper APIs</span></p>
<blockquote>
<div><dl class="method">
<dt id="pyramid.config.Configurator.testing_add_renderer">
<code class="descname">testing_add_renderer</code><span class="sig-paren">(</span><em>path</em>, <em>renderer=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.testing_add_renderer" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Unit/integration testing helper: register a renderer at
<code class="docutils literal notranslate"><span class="pre">path</span></code> (usually a relative filename ala <code class="docutils literal notranslate"><span class="pre">templates/foo.pt</span></code>
or an asset specification) and return the renderer object.
If the <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument is None, a 'dummy' renderer will
be used.  This function is useful when testing code that calls
the <a class="reference internal" href="renderers.html#pyramid.renderers.render" title="pyramid.renderers.render"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code></a> function or
<a class="reference internal" href="renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.renderers.render_to_response()</span></code></a> function or
any other <code class="docutils literal notranslate"><span class="pre">render_*</span></code> or <code class="docutils literal notranslate"><span class="pre">get_*</span></code> API of the
<a class="reference internal" href="renderers.html#module-pyramid.renderers" title="pyramid.renderers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.renderers</span></code></a> module.</p>
<p>Note that calling this method for with a <code class="docutils literal notranslate"><span class="pre">path</span></code> argument
representing a renderer factory type (e.g. for <code class="docutils literal notranslate"><span class="pre">foo.pt</span></code>
usually implies the <code class="docutils literal notranslate"><span class="pre">chameleon_zpt</span></code> renderer factory)
clobbers any existing renderer factory registered for that
type.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">This method is also available under the alias
<code class="docutils literal notranslate"><span class="pre">testing_add_template</span></code> (an older name for it).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.testing_add_subscriber">
<code class="descname">testing_add_subscriber</code><span class="sig-paren">(</span><em>event_iface=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.testing_add_subscriber" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Unit/integration testing helper: Registers a
<a class="reference internal" href="../glossary.html#term-subscriber"><span class="xref std std-term">subscriber</span></a> which listens for events of the type
<code class="docutils literal notranslate"><span class="pre">event_iface</span></code>.  This method returns a list object which is
appended to by the subscriber whenever an event is captured.</p>
<p>When an event is dispatched that matches the value implied by
the <code class="docutils literal notranslate"><span class="pre">event_iface</span></code> argument, that event will be appended to
the list.  You can then compare the values in the list to
expected event notifications.  This method is useful when
testing code that wants to call
<a class="reference internal" href="registry.html#pyramid.registry.Registry.notify" title="pyramid.registry.Registry.notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.registry.Registry.notify()</span></code></a>,
or <code class="xref py py-func docutils literal notranslate"><span class="pre">zope.component.event.dispatch()</span></code>.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">event_iface</span></code> (<code class="docutils literal notranslate"><span class="pre">None</span></code>) implies a
subscriber registered for <em>any</em> kind of event.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.testing_resources">
<code class="descname">testing_resources</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.testing_resources" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Unit/integration testing helper: registers a dictionary of
<a class="reference internal" href="../glossary.html#term-resource"><span class="xref std std-term">resource</span></a> objects that can be resolved via the
<a class="reference internal" href="traversal.html#pyramid.traversal.find_resource" title="pyramid.traversal.find_resource"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.traversal.find_resource()</span></code></a> API.</p>
<p>The <a class="reference internal" href="traversal.html#pyramid.traversal.find_resource" title="pyramid.traversal.find_resource"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.traversal.find_resource()</span></code></a> API is called with
a path as one of its arguments.  If the dictionary you
register when calling this method contains that path as a
string key (e.g. <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> or <code class="docutils literal notranslate"><span class="pre">foo/bar</span></code>), the
corresponding value will be returned to <code class="docutils literal notranslate"><span class="pre">find_resource</span></code> (and
thus to your code) when
<a class="reference internal" href="traversal.html#pyramid.traversal.find_resource" title="pyramid.traversal.find_resource"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.traversal.find_resource()</span></code></a> is called with an
equivalent path string or tuple.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.config.Configurator.testing_securitypolicy">
<code class="descname">testing_securitypolicy</code><span class="sig-paren">(</span><em>userid=None</em>, <em>groupids=()</em>, <em>permissive=True</em>, <em>remember_result=None</em>, <em>forget_result=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.config.Configurator.testing_securitypolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Unit/integration testing helper: Registers a pair of faux
<span>Pyramid</span> security policies: a <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication
policy</span></a> and a <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a>.</p>
<p>The behavior of the registered <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a>
depends on the <code class="docutils literal notranslate"><span class="pre">permissive</span></code> argument.  If <code class="docutils literal notranslate"><span class="pre">permissive</span></code> is
true, a permissive <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a> is registered;
this policy allows all access.  If <code class="docutils literal notranslate"><span class="pre">permissive</span></code> is false, a
nonpermissive <a class="reference internal" href="../glossary.html#term-authorization-policy"><span class="xref std std-term">authorization policy</span></a> is registered; this
policy denies all access.</p>
<p><code class="docutils literal notranslate"><span class="pre">remember_result</span></code>, if provided, should be the result returned by
the <code class="docutils literal notranslate"><span class="pre">remember</span></code> method of the faux authentication policy.  If it is
not provided (or it is provided, and is <code class="docutils literal notranslate"><span class="pre">None</span></code>), the default value
<code class="docutils literal notranslate"><span class="pre">[]</span></code> (the empty list) will be returned by <code class="docutils literal notranslate"><span class="pre">remember</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">forget_result</span></code>, if provided, should be the result returned by
the <code class="docutils literal notranslate"><span class="pre">forget</span></code> method of the faux authentication policy.  If it is
not provided (or it is provided, and is <code class="docutils literal notranslate"><span class="pre">None</span></code>), the default value
<code class="docutils literal notranslate"><span class="pre">[]</span></code> (the empty list) will be returned by <code class="docutils literal notranslate"><span class="pre">forget</span></code>.</p>
<p>The behavior of the registered <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a>
depends on the values provided for the <code class="docutils literal notranslate"><span class="pre">userid</span></code> and
<code class="docutils literal notranslate"><span class="pre">groupids</span></code> argument.  The authentication policy will return
the userid identifier implied by the <code class="docutils literal notranslate"><span class="pre">userid</span></code> argument and
the group ids implied by the <code class="docutils literal notranslate"><span class="pre">groupids</span></code> argument when the
<a class="reference internal" href="request.html#pyramid.request.Request.authenticated_userid" title="pyramid.request.Request.authenticated_userid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.authenticated_userid</span></code></a> or
<a class="reference internal" href="request.html#pyramid.request.Request.effective_principals" title="pyramid.request.Request.effective_principals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.effective_principals</span></code></a> APIs are
used.</p>
<p>This function is most useful when testing code that uses
the APIs named <a class="reference internal" href="request.html#pyramid.request.Request.has_permission" title="pyramid.request.Request.has_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.request.Request.has_permission()</span></code></a>,
<a class="reference internal" href="request.html#pyramid.request.Request.authenticated_userid" title="pyramid.request.Request.authenticated_userid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.authenticated_userid</span></code></a>,
<a class="reference internal" href="request.html#pyramid.request.Request.effective_principals" title="pyramid.request.Request.effective_principals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.request.Request.effective_principals</span></code></a>, and
<a class="reference internal" href="security.html#pyramid.security.principals_allowed_by_permission" title="pyramid.security.principals_allowed_by_permission"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyramid.security.principals_allowed_by_permission()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">remember_result</span></code> argument.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.4 で追加: </span>The <code class="docutils literal notranslate"><span class="pre">forget_result</span></code> argument.</p>
</div>
</dd></dl>

</div></blockquote>
<p><span class="methodcategory">Attributes</span></p>
<blockquote>
<div><dl class="attribute">
<dt id="pyramid.config.Configurator.introspectable">
<code class="descname">introspectable</code><a class="headerlink" href="#pyramid.config.Configurator.introspectable" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A shortcut attribute which points to the
<a class="reference internal" href="registry.html#pyramid.registry.Introspectable" title="pyramid.registry.Introspectable"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.registry.Introspectable</span></code></a> class (used during
directives to provide introspection to actions).</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyramid.config.Configurator.introspector">
<code class="descname">introspector</code><a class="headerlink" href="#pyramid.config.Configurator.introspector" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-introspector"><span class="xref std std-term">introspector</span></a> related to this configuration.  It is an
instance implementing the <a class="reference internal" href="interfaces.html#pyramid.interfaces.IIntrospector" title="pyramid.interfaces.IIntrospector"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IIntrospector</span></code></a>
interface.</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyramid.config.Configurator.registry">
<code class="descname">registry</code><a class="headerlink" href="#pyramid.config.Configurator.registry" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The <a class="reference internal" href="../glossary.html#term-application-registry"><span class="xref std std-term">application registry</span></a> which holds the configuration
associated with this configurator.</p>
</dd></dl>

</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="pyramid.config.global_registries">
<code class="descname">global_registries</code><a class="headerlink" href="#pyramid.config.global_registries" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The set of registries that have been created for <span>Pyramid</span>
applications, one for each call to
<a class="reference internal" href="#pyramid.config.Configurator.make_wsgi_app" title="pyramid.config.Configurator.make_wsgi_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.make_wsgi_app()</span></code></a> in the current
process. The object itself supports iteration and has a <code class="docutils literal notranslate"><span class="pre">last</span></code> property
containing the last registry loaded.</p>
<p>The registries contained in this object are stored as weakrefs, thus they
will only exist for the lifetime of the actual applications for which they
are being used.</p>
</dd></dl>

<dl class="class">
<dt id="pyramid.config.not_">
<em class="property">class </em><code class="descname">not_</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/config/util.html#not_"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.config.not_" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>You can invert the meaning of any predicate value by wrapping it in a call
to <a class="reference internal" href="#pyramid.config.not_" title="pyramid.config.not_"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.config.not_</span></code></a>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">not_</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="s1">&#39;mypackage.views.my_view&#39;</span><span class="p">,</span>
    <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;ok&#39;</span><span class="p">,</span>
    <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The above example will ensure that the view is called if the request method
is <em>not</em> <code class="docutils literal notranslate"><span class="pre">POST</span></code>, at least if no other view is more specific.</p>
<p>This technique of wrapping a predicate value in <code class="docutils literal notranslate"><span class="pre">not_</span></code> can be used
anywhere predicate values are accepted:</p>
<ul class="simple">
<li><a class="reference internal" href="#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a></li>
<li><a class="reference internal" href="#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a></li>
<li><a class="reference internal" href="#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></code></a></li>
<li><a class="reference internal" href="view.html#pyramid.view.view_config" title="pyramid.view.view_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.view.view_config()</span></code></a></li>
<li><a class="reference internal" href="events.html#pyramid.events.subscriber" title="pyramid.events.subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.events.subscriber()</span></code></a></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.5 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyramid.config.PHASE0_CONFIG">
<code class="descname">PHASE0_CONFIG</code><a class="headerlink" href="#pyramid.config.PHASE0_CONFIG" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyramid.config.PHASE1_CONFIG">
<code class="descname">PHASE1_CONFIG</code><a class="headerlink" href="#pyramid.config.PHASE1_CONFIG" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyramid.config.PHASE2_CONFIG">
<code class="descname">PHASE2_CONFIG</code><a class="headerlink" href="#pyramid.config.PHASE2_CONFIG" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyramid.config.PHASE3_CONFIG">
<code class="descname">PHASE3_CONFIG</code><a class="headerlink" href="#pyramid.config.PHASE3_CONFIG" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>前のトピックへ</h4>
  <p class="topless"><a href="compat.html"
                        title="前の章へ"><code class="docutils literal notranslate"><span class="pre">pyramid.compat</span></code></a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="csrf.html"
                        title="次の章へ"><code class="docutils literal notranslate"><span class="pre">pyramid.csrf</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/config.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="csrf.html" title="pyramid.csrf"
             >次へ</a> |</li>
        <li class="right" >
          <a href="compat.html" title="pyramid.compat"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 8月 05, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4 で生成しました。
    </div>
  </body>
</html>