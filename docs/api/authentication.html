
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyramid.authentication &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="pyramid.authorization" href="authorization.html" />
    <link rel="prev" title="API Documentation" href="index.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="authorization.html" title="pyramid.authorization"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Documentation"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API Documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyramid-authentication">
<span id="authentication-module"></span><h1><a class="reference internal" href="#module-pyramid.authentication" title="pyramid.authentication"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyramid.authentication</span></code></a><a class="headerlink" href="#pyramid-authentication" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="module-pyramid.authentication">
<span id="authentication-policies"></span><h2>Authentication Policies<a class="headerlink" href="#module-pyramid.authentication" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="class">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy">
<em class="property">class </em><code class="descname">AuthTktAuthenticationPolicy</code><span class="sig-paren">(</span><em>secret</em>, <em>callback=None</em>, <em>cookie_name='auth_tkt'</em>, <em>secure=False</em>, <em>include_ip=False</em>, <em>timeout=None</em>, <em>reissue_time=None</em>, <em>max_age=None</em>, <em>path='/'</em>, <em>http_only=False</em>, <em>wild_domain=True</em>, <em>debug=False</em>, <em>hashalg='sha512'</em>, <em>parent_domain=False</em>, <em>domain=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktAuthenticationPolicy"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a> which
obtains data from a Pyramid &quot;auth ticket&quot; cookie.</p>
<p>Constructor Arguments</p>
<p><code class="docutils literal notranslate"><span class="pre">secret</span></code></p>
<blockquote>
<div>The secret (a string) used for auth_tkt cookie signing.  This value
should be unique across all values provided to Pyramid for various
subsystem secrets (see <a class="reference internal" href="../narr/security.html#admonishment-against-secret-sharing"><span class="std std-ref">Admonishment Against Secret-Sharing</span></a>).
Required.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">callback</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A callback passed the userid and the
request, expected to return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the userid doesn't
exist or a sequence of principal identifiers (possibly empty) if
the user does exist.  If <code class="docutils literal notranslate"><span class="pre">callback</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the userid
will be assumed to exist with no principals.  Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">cookie_name</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">auth_tkt</span></code>.  The cookie name used
(string).  Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">secure</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  Only send the cookie back over a secure
conn.  Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">include_ip</span></code></p>
<blockquote>
<div><p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  Make the requesting IP address part of
the authentication data in the cookie.  Optional.</p>
<p>For IPv6 this option is not recommended. The <code class="docutils literal notranslate"><span class="pre">mod_auth_tkt</span></code>
specification does not specify how to handle IPv6 addresses, so using
this option in combination with IPv6 addresses may cause an
incompatible cookie. It ties the authentication ticket to that
individual's IPv6 address.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">timeout</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Maximum number of seconds which a newly
issued ticket will be considered valid.  After this amount of
time, the ticket will expire (effectively logging the user
out).  If this value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the ticket never expires.
Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">reissue_time</span></code></p>
<blockquote>
<div><p>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  If this parameter is set, it represents the number
of seconds that must pass before an authentication token cookie is
automatically reissued as the result of a request which requires
authentication.  The duration is measured as the number of seconds
since the last auth_tkt cookie was issued and 'now'.  If this value is
<code class="docutils literal notranslate"><span class="pre">0</span></code>, a new ticket cookie will be reissued on every request which
requires authentication.</p>
<p>A good rule of thumb: if you want auto-expired cookies based on
inactivity: set the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> value to 1200 (20 mins) and set the
<code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> value to perhaps a tenth of the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> value
(120 or 2 mins).  It's nonsensical to set the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> value lower
than the <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> value, as the ticket will never be reissued
if so.  However, such a configuration is not explicitly prevented.</p>
<p>Optional.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">max_age</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  The max age of the auth_tkt cookie, in
seconds.  This differs from <code class="docutils literal notranslate"><span class="pre">timeout</span></code> inasmuch as <code class="docutils literal notranslate"><span class="pre">timeout</span></code>
represents the lifetime of the ticket contained in the cookie,
while this value represents the lifetime of the cookie itself.
When this value is set, the cookie's <code class="docutils literal notranslate"><span class="pre">Max-Age</span></code> and
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> settings will be set, allowing the auth_tkt cookie
to last between browser sessions.  It is typically nonsensical
to set this to a value that is lower than <code class="docutils literal notranslate"><span class="pre">timeout</span></code> or
<code class="docutils literal notranslate"><span class="pre">reissue_time</span></code>, although it is not explicitly prevented.
Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">/</span></code>. The path for which the auth_tkt cookie is valid.
May be desirable if the application only serves part of a domain.
Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">http_only</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>. Hide cookie from JavaScript by setting the
HttpOnly flag. Not honored by all browsers.
Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">wild_domain</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>. An auth_tkt cookie will be generated for the
wildcard domain. If your site is hosted as <code class="docutils literal notranslate"><span class="pre">example.com</span></code> this
will make the cookie available for sites underneath <code class="docutils literal notranslate"><span class="pre">example.com</span></code>
such as <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code>.
Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">parent_domain</span></code></p>
<blockquote>
<div><p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>. An auth_tkt cookie will be generated for the
parent domain of the current site. For example if your site is
hosted under <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> a cookie will be generated for
<code class="docutils literal notranslate"><span class="pre">.example.com</span></code>. This can be useful if you have multiple sites
sharing the same domain. This option supercedes the <code class="docutils literal notranslate"><span class="pre">wild_domain</span></code>
option.
Optional.</p>
<p>This option is available as of <span>Pyramid</span> 1.5.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">domain</span></code></p>
<blockquote>
<div><p>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>. If provided the auth_tkt cookie will only be
set for this domain. This option is not compatible with <code class="docutils literal notranslate"><span class="pre">wild_domain</span></code>
and <code class="docutils literal notranslate"><span class="pre">parent_domain</span></code>.
Optional.</p>
<p>This option is available as of <span>Pyramid</span> 1.5.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">hashalg</span></code></p>
<blockquote>
<div><p>Default: <code class="docutils literal notranslate"><span class="pre">sha512</span></code> (the literal string).</p>
<p>Any hash algorithm supported by Python's <code class="docutils literal notranslate"><span class="pre">hashlib.new()</span></code> function
can be used as the <code class="docutils literal notranslate"><span class="pre">hashalg</span></code>.</p>
<p>Cookies generated by different instances of AuthTktAuthenticationPolicy
using different <code class="docutils literal notranslate"><span class="pre">hashalg</span></code> options are not compatible. Switching the
<code class="docutils literal notranslate"><span class="pre">hashalg</span></code> will imply that all existing users with a valid cookie will
be required to re-login.</p>
<p>This option is available as of <span>Pyramid</span> 1.4.</p>
<p>Optional.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If <code class="docutils literal notranslate"><span class="pre">debug</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, log messages to the
Pyramid debug logger about the results of various authentication
steps.  The output from debugging is useful for reporting to maillist
or IRC channels when asking for support.</div></blockquote>
<p>Objects of this class implement the interface described by
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IAuthenticationPolicy" title="pyramid.interfaces.IAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code></a>.</p>
<dl class="method">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy.authenticated_userid">
<code class="descname">authenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy.authenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the authenticated userid or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If no callback is registered, this will be the same as
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is registered, this will return the userid if
and only if the callback returns a value that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy.effective_principals">
<code class="descname">effective_principals</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy.effective_principals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of effective principals derived from request.</p>
<p>This will return a list of principals including, at least,
<a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Everyone</span></code></a>. If there is no authenticated
userid, or the <code class="docutils literal notranslate"><span class="pre">callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this will be the
only principal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">]</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">callback</span></code> does not return <code class="docutils literal notranslate"><span class="pre">None</span></code> and an authenticated
userid is found, then the principals will include
<a class="reference internal" href="security.html#pyramid.security.Authenticated" title="pyramid.security.Authenticated"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Authenticated</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
and the list of principals returned by the <code class="docutils literal notranslate"><span class="pre">callback</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extra_principals</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
<span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">,</span> <span class="n">Authenticated</span><span class="p">,</span> <span class="n">userid</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_principals</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktAuthenticationPolicy.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of headers which will delete appropriate cookies.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktAuthenticationPolicy.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Accepts the following kw args: <code class="docutils literal notranslate"><span class="pre">max_age=&lt;int-seconds&gt;,</span>
<span class="pre">``tokens=&lt;sequence-of-ascii-strings&gt;</span></code>.</p>
<p>Return a list of headers which will set appropriate cookies on
the response.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktAuthenticationPolicy.unauthenticated_userid">
<code class="descname">unauthenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktAuthenticationPolicy.unauthenticated_userid"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktAuthenticationPolicy.unauthenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The userid key within the auth_tkt cookie.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy">
<em class="property">class </em><code class="descname">RemoteUserAuthenticationPolicy</code><span class="sig-paren">(</span><em>environ_key='REMOTE_USER'</em>, <em>callback=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RemoteUserAuthenticationPolicy"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a> which
obtains data from the <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> WSGI environment variable.</p>
<p>Constructor Arguments</p>
<p><code class="docutils literal notranslate"><span class="pre">environ_key</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code>.  The key in the WSGI environ which
provides the userid.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">callback</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A callback passed the userid and the request,
expected to return None if the userid doesn't exist or a sequence of
principal identifiers (possibly empty) representing groups if the
user does exist.  If <code class="docutils literal notranslate"><span class="pre">callback</span></code> is None, the userid will be assumed
to exist with no group principals.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If <code class="docutils literal notranslate"><span class="pre">debug</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, log messages to the
Pyramid debug logger about the results of various authentication
steps.  The output from debugging is useful for reporting to maillist
or IRC channels when asking for support.</div></blockquote>
<p>Objects of this class implement the interface described by
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IAuthenticationPolicy" title="pyramid.interfaces.IAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code></a>.</p>
<dl class="method">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy.authenticated_userid">
<code class="descname">authenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy.authenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the authenticated userid or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If no callback is registered, this will be the same as
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is registered, this will return the userid if
and only if the callback returns a value that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy.effective_principals">
<code class="descname">effective_principals</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy.effective_principals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of effective principals derived from request.</p>
<p>This will return a list of principals including, at least,
<a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Everyone</span></code></a>. If there is no authenticated
userid, or the <code class="docutils literal notranslate"><span class="pre">callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this will be the
only principal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">]</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">callback</span></code> does not return <code class="docutils literal notranslate"><span class="pre">None</span></code> and an authenticated
userid is found, then the principals will include
<a class="reference internal" href="security.html#pyramid.security.Authenticated" title="pyramid.security.Authenticated"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Authenticated</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
and the list of principals returned by the <code class="docutils literal notranslate"><span class="pre">callback</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extra_principals</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
<span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">,</span> <span class="n">Authenticated</span><span class="p">,</span> <span class="n">userid</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_principals</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RemoteUserAuthenticationPolicy.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A no-op. The <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> does not provide a protocol for
forgetting the user. This will be application-specific and can
be done somewhere else or in a subclass.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RemoteUserAuthenticationPolicy.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A no-op. The <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> does not provide a protocol for
remembering the user. This will be application-specific and can
be done somewhere else or in a subclass.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RemoteUserAuthenticationPolicy.unauthenticated_userid">
<code class="descname">unauthenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RemoteUserAuthenticationPolicy.unauthenticated_userid"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RemoteUserAuthenticationPolicy.unauthenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> value found within the <code class="docutils literal notranslate"><span class="pre">environ</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid.authentication.SessionAuthenticationPolicy">
<em class="property">class </em><code class="descname">SessionAuthenticationPolicy</code><span class="sig-paren">(</span><em>prefix='auth.'</em>, <em>callback=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#SessionAuthenticationPolicy"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.SessionAuthenticationPolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A <span>Pyramid</span> authentication policy which gets its data from the
configured <a class="reference internal" href="../glossary.html#term-session"><span class="xref std std-term">session</span></a>.  For this authentication policy to work, you
will have to follow the instructions in the <a class="reference internal" href="../narr/sessions.html#sessions-chapter"><span class="std std-ref">Sessions</span></a> to
configure a <a class="reference internal" href="../glossary.html#term-session-factory"><span class="xref std std-term">session factory</span></a>.</p>
<p>Constructor Arguments</p>
<p><code class="docutils literal notranslate"><span class="pre">prefix</span></code></p>
<blockquote>
<div>A prefix used when storing the authentication parameters in the
session. Defaults to 'auth.'. Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">callback</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A callback passed the userid and the
request, expected to return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the userid doesn't
exist or a sequence of principal identifiers (possibly empty) if
the user does exist.  If <code class="docutils literal notranslate"><span class="pre">callback</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the userid
will be assumed to exist with no principals.  Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If <code class="docutils literal notranslate"><span class="pre">debug</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, log messages to the
Pyramid debug logger about the results of various authentication
steps.  The output from debugging is useful for reporting to maillist
or IRC channels when asking for support.</div></blockquote>
<dl class="method">
<dt id="pyramid.authentication.SessionAuthenticationPolicy.authenticated_userid">
<code class="descname">authenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.SessionAuthenticationPolicy.authenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the authenticated userid or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If no callback is registered, this will be the same as
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is registered, this will return the userid if
and only if the callback returns a value that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.SessionAuthenticationPolicy.effective_principals">
<code class="descname">effective_principals</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.SessionAuthenticationPolicy.effective_principals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of effective principals derived from request.</p>
<p>This will return a list of principals including, at least,
<a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Everyone</span></code></a>. If there is no authenticated
userid, or the <code class="docutils literal notranslate"><span class="pre">callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this will be the
only principal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">]</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">callback</span></code> does not return <code class="docutils literal notranslate"><span class="pre">None</span></code> and an authenticated
userid is found, then the principals will include
<a class="reference internal" href="security.html#pyramid.security.Authenticated" title="pyramid.security.Authenticated"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Authenticated</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
and the list of principals returned by the <code class="docutils literal notranslate"><span class="pre">callback</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extra_principals</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
<span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">,</span> <span class="n">Authenticated</span><span class="p">,</span> <span class="n">userid</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_principals</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.SessionAuthenticationPolicy.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#SessionAuthenticationPolicy.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.SessionAuthenticationPolicy.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Remove the stored userid from the session.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.SessionAuthenticationPolicy.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#SessionAuthenticationPolicy.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.SessionAuthenticationPolicy.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Store a userid in the session.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy">
<em class="property">class </em><code class="descname">BasicAuthAuthenticationPolicy</code><span class="sig-paren">(</span><em>check</em>, <em>realm='Realm'</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#BasicAuthAuthenticationPolicy"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A <span>Pyramid</span> authentication policy which uses HTTP standard basic
authentication protocol to authenticate users.  To use this policy you will
need to provide a callback which checks the supplied user credentials
against your source of login data.</p>
<p>Constructor Arguments</p>
<p><code class="docutils literal notranslate"><span class="pre">check</span></code></p>
<blockquote>
<div>A callback function passed a username, password and request, in that
order as positional arguments.  Expected to return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the
userid doesn't exist or a sequence of principal identifiers (possibly
empty) if the user does exist.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">realm</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">&quot;Realm&quot;</span></code>.  The Basic Auth Realm string.  Usually displayed to
the user by the browser in the login dialog.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If <code class="docutils literal notranslate"><span class="pre">debug</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, log messages to the
Pyramid debug logger about the results of various authentication
steps.  The output from debugging is useful for reporting to maillist
or IRC channels when asking for support.</div></blockquote>
<p><strong>Issuing a challenge</strong></p>
<p>Regular browsers will not send username/password credentials unless they
first receive a challenge from the server.  The following recipe will
register a view that will send a Basic Auth challenge to the user whenever
there is an attempt to call a view which results in a Forbidden response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.httpexceptions</span> <span class="k">import</span> <span class="n">HTTPUnauthorized</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="k">import</span> <span class="n">forget</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="k">import</span> <span class="n">forbidden_view_config</span>

<span class="nd">@forbidden_view_config</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">forbidden_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">authenticated_userid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HTTPUnauthorized</span><span class="p">()</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">forget</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">return</span> <span class="n">HTTPForbidden</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy.authenticated_userid">
<code class="descname">authenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy.authenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the authenticated userid or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If no callback is registered, this will be the same as
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is registered, this will return the userid if
and only if the callback returns a value that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy.effective_principals">
<code class="descname">effective_principals</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy.effective_principals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of effective principals derived from request.</p>
<p>This will return a list of principals including, at least,
<a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Everyone</span></code></a>. If there is no authenticated
userid, or the <code class="docutils literal notranslate"><span class="pre">callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this will be the
only principal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">]</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">callback</span></code> does not return <code class="docutils literal notranslate"><span class="pre">None</span></code> and an authenticated
userid is found, then the principals will include
<a class="reference internal" href="security.html#pyramid.security.Authenticated" title="pyramid.security.Authenticated"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Authenticated</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
and the list of principals returned by the <code class="docutils literal notranslate"><span class="pre">callback</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extra_principals</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
<span class="k">return</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">,</span> <span class="n">Authenticated</span><span class="p">,</span> <span class="n">userid</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra_principals</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#BasicAuthAuthenticationPolicy.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Returns challenge headers. This should be attached to a response
to indicate that credentials are required.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#BasicAuthAuthenticationPolicy.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A no-op. Basic authentication does not provide a protocol for
remembering the user. Credentials are sent on every request.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.BasicAuthAuthenticationPolicy.unauthenticated_userid">
<code class="descname">unauthenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#BasicAuthAuthenticationPolicy.unauthenticated_userid"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.BasicAuthAuthenticationPolicy.unauthenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>The userid parsed from the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> request header.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy">
<em class="property">class </em><code class="descname">RepozeWho1AuthenticationPolicy</code><span class="sig-paren">(</span><em>identifier_name='auth_tkt'</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A <span>Pyramid</span> <a class="reference internal" href="../glossary.html#term-authentication-policy"><span class="xref std std-term">authentication policy</span></a> which
obtains data from the <a class="reference external" href="http://repozewho.readthedocs.io/en/latest/index.html#module-repoze.who" title="(in repoze.who v2.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">repoze.who</span></code></a> 1.X WSGI 'API' (the
<code class="docutils literal notranslate"><span class="pre">repoze.who.identity</span></code> key in the WSGI environment).</p>
<p>Constructor Arguments</p>
<p><code class="docutils literal notranslate"><span class="pre">identifier_name</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">auth_tkt</span></code>.  The <a class="reference external" href="http://repozewho.readthedocs.io/en/latest/index.html#module-repoze.who" title="(in repoze.who v2.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">repoze.who</span></code></a> plugin name that
performs remember/forget.  Optional.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">callback</span></code></p>
<blockquote>
<div>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  A callback passed the <a class="reference external" href="http://repozewho.readthedocs.io/en/latest/index.html#module-repoze.who" title="(in repoze.who v2.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">repoze.who</span></code></a> identity
and the <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a>, expected to return <code class="docutils literal notranslate"><span class="pre">None</span></code> if the user
represented by the identity doesn't exist or a sequence of principal
identifiers (possibly empty) representing groups if the user does
exist.  If <code class="docutils literal notranslate"><span class="pre">callback</span></code> is None, the userid will be assumed to exist
with no group principals.</div></blockquote>
<p>Objects of this class implement the interface described by
<a class="reference internal" href="interfaces.html#pyramid.interfaces.IAuthenticationPolicy" title="pyramid.interfaces.IAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code></a>.</p>
<dl class="method">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy.authenticated_userid">
<code class="descname">authenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy.authenticated_userid"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy.authenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the authenticated userid or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If no callback is registered, this will be the same as
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is registered, this will return the userid if
and only if the callback returns a value that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy.effective_principals">
<code class="descname">effective_principals</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy.effective_principals"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy.effective_principals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A list of effective principals derived from the identity.</p>
<p>This will return a list of principals including, at least,
<a class="reference internal" href="security.html#pyramid.security.Everyone" title="pyramid.security.Everyone"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Everyone</span></code></a>. If there is no identity, or
the <code class="docutils literal notranslate"><span class="pre">callback</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this will be the only principal.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">callback</span></code> does not return <code class="docutils literal notranslate"><span class="pre">None</span></code> and an identity is
found, then the principals will include
<a class="reference internal" href="security.html#pyramid.security.Authenticated" title="pyramid.security.Authenticated"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyramid.security.Authenticated</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
and the list of principals returned by the <code class="docutils literal notranslate"><span class="pre">callback</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Forget the current authenticated user.</p>
<p>Return headers that, if included in a response, will delete the
cookie responsible for tracking the current user.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Store the <code class="docutils literal notranslate"><span class="pre">userid</span></code> as <code class="docutils literal notranslate"><span class="pre">repoze.who.userid</span></code>.</p>
<p>The identity to authenticated to <a class="reference external" href="http://repozewho.readthedocs.io/en/latest/index.html#module-repoze.who" title="(in repoze.who v2.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">repoze.who</span></code></a>
will contain the given userid as <code class="docutils literal notranslate"><span class="pre">userid</span></code>, and
provide all keyword arguments as additional identity
keys. Useful keys could be <code class="docutils literal notranslate"><span class="pre">max_age</span></code> or <code class="docutils literal notranslate"><span class="pre">userdata</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.RepozeWho1AuthenticationPolicy.unauthenticated_userid">
<code class="descname">unauthenticated_userid</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#RepozeWho1AuthenticationPolicy.unauthenticated_userid"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.RepozeWho1AuthenticationPolicy.unauthenticated_userid" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return the <code class="docutils literal notranslate"><span class="pre">repoze.who.userid</span></code> key from the detected identity.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="helper-classes">
<h2>Helper Classes<a class="headerlink" href="#helper-classes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="pyramid.authentication.AuthTktCookieHelper">
<em class="property">class </em><code class="descname">AuthTktCookieHelper</code><span class="sig-paren">(</span><em>secret</em>, <em>cookie_name='auth_tkt'</em>, <em>secure=False</em>, <em>include_ip=False</em>, <em>timeout=None</em>, <em>reissue_time=None</em>, <em>max_age=None</em>, <em>http_only=False</em>, <em>path='/'</em>, <em>wild_domain=True</em>, <em>hashalg='md5'</em>, <em>parent_domain=False</em>, <em>domain=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktCookieHelper"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A helper class for use in third-party authentication policy
implementations.  See
<a class="reference internal" href="#pyramid.authentication.AuthTktAuthenticationPolicy" title="pyramid.authentication.AuthTktAuthenticationPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code></a> for the
meanings of the constructor arguments.</p>
<dl class="class">
<dt id="pyramid.authentication.AuthTktCookieHelper.AuthTicket">
<em class="property">class </em><code class="descname">AuthTicket</code><span class="sig-paren">(</span><em>secret</em>, <em>userid</em>, <em>ip</em>, <em>tokens=()</em>, <em>user_data=''</em>, <em>time=None</em>, <em>cookie_name='auth_tkt'</em>, <em>secure=False</em>, <em>hashalg='md5'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.AuthTicket" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>This class represents an authentication token.  You must pass in
the shared secret, the userid, and the IP address.  Optionally you
can include tokens (a list of strings, representing role names),
'user_data', which is arbitrary data available for your own use in
later scripts.  Lastly, you can override the cookie name and
timestamp.</p>
<p>Once you provide all the arguments, use .cookie_value() to
generate the appropriate authentication ticket.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">token</span> <span class="o">=</span> <span class="n">AuthTicket</span><span class="p">(</span><span class="s1">&#39;sharedsecret&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;REMOTE_ADDR&#39;</span><span class="p">],</span> <span class="n">tokens</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">])</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">cookie_value</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="exception">
<dt id="pyramid.authentication.AuthTktCookieHelper.BadTicket">
<em class="property">exception </em><code class="descname">BadTicket</code><span class="sig-paren">(</span><em>msg</em>, <em>expected=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.BadTicket" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Exception raised when a ticket can't be parsed.  If we get far enough to
determine what the expected digest should have been, expected is set.
This should not be shown by default, but can be useful for debugging.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktCookieHelper.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktCookieHelper.forget"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.forget" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a set of expires Set-Cookie headers, which will destroy
any existing auth_tkt cookie when attached to a response</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktCookieHelper.identify">
<code class="descname">identify</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktCookieHelper.identify"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.identify" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a dictionary with authentication information, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
if no valid auth_tkt is attached to <code class="docutils literal notranslate"><span class="pre">request</span></code></p>
</dd></dl>

<dl class="staticmethod">
<dt id="pyramid.authentication.AuthTktCookieHelper.parse_ticket">
<em class="property">static </em><code class="descname">parse_ticket</code><span class="sig-paren">(</span><em>secret</em>, <em>ticket</em>, <em>ip</em>, <em>hashalg='md5'</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.parse_ticket" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Parse the ticket, returning (timestamp, userid, tokens, user_data).</p>
<p>If the ticket cannot be parsed, a <code class="docutils literal notranslate"><span class="pre">BadTicket</span></code> exception will be raised
with an explanation.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid.authentication.AuthTktCookieHelper.remember">
<code class="descname">remember</code><span class="sig-paren">(</span><em>request</em>, <em>userid</em>, <em>max_age=None</em>, <em>tokens=()</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#AuthTktCookieHelper.remember"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.AuthTktCookieHelper.remember" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Return a set of Set-Cookie headers; when set into a response,
these headers will represent a valid authentication ticket.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">max_age</span></code></dt>
<dd>The max age of the auth_tkt cookie, in seconds.  When this value is
set, the cookie's <code class="docutils literal notranslate"><span class="pre">Max-Age</span></code> and <code class="docutils literal notranslate"><span class="pre">Expires</span></code> settings will be set,
allowing the auth_tkt cookie to last between browser sessions.  If
this value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <code class="docutils literal notranslate"><span class="pre">max_age</span></code> value provided to the
helper itself will be used as the <code class="docutils literal notranslate"><span class="pre">max_age</span></code> value.  Default:
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tokens</span></code></dt>
<dd>A sequence of strings that will be placed into the auth_tkt tokens
field.  Each string in the sequence must be of the Python <code class="docutils literal notranslate"><span class="pre">str</span></code>
type and must match the regex <code class="docutils literal notranslate"><span class="pre">^[A-Za-z][A-Za-z0-9+_-]*$</span></code>.
Tokens are available in the returned identity when an auth_tkt is
found in the request and unpacked.  Default: <code class="docutils literal notranslate"><span class="pre">()</span></code>.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid.authentication.HTTPBasicCredentials">
<em class="property">class </em><code class="descname">HTTPBasicCredentials</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid.authentication.HTTPBasicCredentials" title="この定義へのパーマリンク">¶</a></dt>
<dd><dl class="attribute">
<dt id="pyramid.authentication.HTTPBasicCredentials.password">
<code class="descname">password</code><a class="headerlink" href="#pyramid.authentication.HTTPBasicCredentials.password" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="pyramid.authentication.HTTPBasicCredentials.username">
<code class="descname">username</code><a class="headerlink" href="#pyramid.authentication.HTTPBasicCredentials.username" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="helper-functions">
<h2>Helper Functions<a class="headerlink" href="#helper-functions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<blockquote>
<div><dl class="function">
<dt id="pyramid.authentication.extract_http_basic_credentials">
<code class="descname">extract_http_basic_credentials</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid/authentication.html#extract_http_basic_credentials"><span class="viewcode-link">[ソース]</span></a><a class="headerlink" href="#pyramid.authentication.extract_http_basic_credentials" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>A helper function for extraction of HTTP Basic credentials
from a given <a class="reference internal" href="../glossary.html#term-request"><span class="xref std std-term">request</span></a>.</p>
<p>Returns a <a class="reference internal" href="#pyramid.authentication.HTTPBasicCredentials" title="pyramid.authentication.HTTPBasicCredentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPBasicCredentials</span></code></a> 2-tuple with <code class="docutils literal notranslate"><span class="pre">username</span></code> and
<code class="docutils literal notranslate"><span class="pre">password</span></code> attributes or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no credentials could be found.</p>
</dd></dl>

</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">pyramid.authentication</span></code></a><ul>
<li><a class="reference internal" href="#module-pyramid.authentication">Authentication Policies</a></li>
<li><a class="reference internal" href="#helper-classes">Helper Classes</a></li>
<li><a class="reference internal" href="#helper-functions">Helper Functions</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="index.html"
                        title="前の章へ">API Documentation</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="authorization.html"
                        title="次の章へ"><code class="docutils literal notranslate"><span class="pre">pyramid.authorization</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/authentication.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="authorization.html" title="pyramid.authorization"
             >次へ</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Documentation"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 8月 13, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4 で生成しました。
    </div>
  </body>
</html>