
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Extending Pyramid Configuration &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="Pyramid cookiecutters" href="cookiecutters.html" />
    <link rel="prev" title="Advanced Configuration" href="advconfig.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="cookiecutters.html" title="Pyramid cookiecutters"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="advconfig.html" title="Advanced Configuration"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="extending-pyramid-configuration">
<span id="extconfig-narr"></span><span id="index-0"></span><h1>Extending Pyramid Configuration<a class="headerlink" href="#extending-pyramid-configuration" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Pyramid allows you to extend its Configurator with custom directives.  Custom
directives can use other directives, they can add a custom <a class="reference internal" href="../glossary.html#term-action"><span class="xref std std-term">action</span></a>, they
can participate in <a class="reference internal" href="../glossary.html#term-conflict-resolution"><span class="xref std std-term">conflict resolution</span></a>, and they can provide some
number of <a class="reference internal" href="../glossary.html#term-introspectable"><span class="xref std std-term">introspectable</span></a> objects.</p>
<div class="section" id="adding-methods-to-the-configurator-via-add-directive">
<span id="add-directive"></span><span id="index-1"></span><h2>Adding Methods to the Configurator via <code class="docutils literal notranslate"><span class="pre">add_directive</span></code><a class="headerlink" href="#adding-methods-to-the-configurator-via-add-directive" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Framework extension writers can add arbitrary methods to a <a class="reference internal" href="../glossary.html#term-configurator"><span class="xref std std-term">Configurator</span></a>
by using the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_directive()</span></code></a> method of the
configurator. Using <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_directive()</span></code></a> makes it
possible to extend a Pyramid configurator in arbitrary ways, and allows it to
perform application-specific tasks more succinctly.</p>
<p>The <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_directive()</span></code></a> method accepts two
positional arguments: a method name and a callable object.  The callable object
is usually a function that takes the configurator instance as its first
argument and accepts other arbitrary positional and keyword arguments. For
example:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.events</span> <span class="kn">import</span> <span class="n">NewRequest</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">add_newrequest_subscriber</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">subscriber</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_subscriber</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="n">NewRequest</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_newrequest_subscriber&#39;</span><span class="p">,</span>
                         <span class="n">add_newrequest_subscriber</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Once <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_directive()</span></code></a> is called, a user can
then call the added directive by its given name as if it were a built-in method
of the Configurator:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mysubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_newrequest_subscriber</span><span class="p">(</span><span class="n">mysubscriber</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>A call to <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_directive" title="pyramid.config.Configurator.add_directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_directive()</span></code></a> is often &quot;hidden&quot;
within an <code class="docutils literal notranslate"><span class="pre">includeme</span></code> function within a &quot;frameworky&quot; package meant to be
included as per <a class="reference internal" href="advconfig.html#including-configuration"><span class="std std-ref">Including Configuration from External Sources</span></a> via
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.include" title="pyramid.config.Configurator.include"><code class="xref py py-meth docutils literal notranslate"><span class="pre">include()</span></code></a>.  For example, if you put this
code in a package named <code class="docutils literal notranslate"><span class="pre">pyramid_subscriberhelpers</span></code>:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_newrequest_subscriber&#39;</span><span class="p">,</span>
                         <span class="n">add_newrequest_subscriber</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The user of the add-on package <code class="docutils literal notranslate"><span class="pre">pyramid_subscriberhelpers</span></code> would then be able
to install it and subsequently do:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mysubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_subscriberhelpers&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_newrequest_subscriber</span><span class="p">(</span><span class="n">mysubscriber</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="using-config-action-in-a-directive">
<h2>Using <code class="docutils literal notranslate"><span class="pre">config.action</span></code> in a Directive<a class="headerlink" href="#using-config-action-in-a-directive" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>If a custom directive can't do its work exclusively in terms of existing
configurator methods (such as
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_subscriber" title="pyramid.config.Configurator.add_subscriber"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber()</span></code></a> as above), the directive may
need to make use of the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.action()</span></code></a> method. This
method adds an entry to the list of &quot;actions&quot; that Pyramid will attempt to
process when <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> is called. An action is
simply a dictionary that includes a <a class="reference internal" href="../glossary.html#term-discriminator"><span class="xref std std-term">discriminator</span></a>, possibly a callback
function, and possibly other metadata used by Pyramid's action system.</p>
<p>Here's an example directive which uses the &quot;action&quot; method:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_jammyjam</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">jammyjam</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam</span> <span class="o">=</span> <span class="n">jammyjam</span>
    <span class="n">config</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span> <span class="n">register</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_jammyjam&#39;</span><span class="p">,</span> <span class="n">add_jammyjam</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Fancy, but what does it do?  The action method accepts a number of arguments.
In the above directive named <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code>, we call
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a> with two arguments: the string
<code class="docutils literal notranslate"><span class="pre">jammyjam</span></code> is passed as the first argument named <code class="docutils literal notranslate"><span class="pre">discriminator</span></code>, and the
closure function named <code class="docutils literal notranslate"><span class="pre">register</span></code> is passed as the second argument named
<code class="docutils literal notranslate"><span class="pre">callable</span></code>.</p>
<p>When the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a> method is called, it
appends an action to the list of pending configuration actions.  All pending
actions with the same discriminator value are potentially in conflict with one
another (see <a class="reference internal" href="advconfig.html#conflict-detection"><span class="std std-ref">Conflict Detection</span></a>).  When the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a> method of the Configurator is
called (either explicitly or as the result of calling
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.make_wsgi_app" title="pyramid.config.Configurator.make_wsgi_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make_wsgi_app()</span></code></a>), conflicting actions are
potentially automatically resolved as per <a class="reference internal" href="advconfig.html#automatic-conflict-resolution"><span class="std std-ref">Automatic Conflict Resolution</span></a>.
If a conflict cannot be automatically resolved, a
<code class="xref py py-exc docutils literal notranslate"><span class="pre">pyramid.exceptions.ConfigurationConflictError</span></code> is raised and application
startup is prevented.</p>
<p>In our above example, therefore, if a consumer of our <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code>
directive did this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_jammyjam</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_jammyjam</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When the action list was committed resulting from the set of calls above, our
user's application would not start, because the discriminators of the actions
generated by the two calls are in direct conflict.  Automatic conflict
resolution cannot resolve the conflict (because no <code class="docutils literal notranslate"><span class="pre">config.include</span></code> is
involved), and the user provided no intermediate
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> call between the calls to
<code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> to ensure that the successive calls did not conflict with each
other.</p>
<p>This demonstrates the purpose of the discriminator argument to the action
method: it's used to indicate a uniqueness constraint for an action.  Two
actions with the same discriminator will conflict unless the conflict is
automatically or manually resolved. A discriminator can be any hashable object,
but it is generally a string or a tuple.  <em>You use a discriminator to
declaratively ensure that the user doesn't provide ambiguous configuration
statements.</em></p>
<p>But let's imagine that a consumer of <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> used it in such a way
that no configuration conflicts are generated.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_jammyjam</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>What happens now?  When the <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> method is called, an action is
appended to the pending actions list.  When the pending configuration actions
are processed during <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>, and no
conflicts occur, the <em>callable</em> provided as the second argument to the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a> method within <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> is
called with no arguments.  The callable in <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> is the <code class="docutils literal notranslate"><span class="pre">register</span></code>
closure function.  It simply sets the value <code class="docutils literal notranslate"><span class="pre">config.registry.jammyjam</span></code> to
whatever the user passed in as the <code class="docutils literal notranslate"><span class="pre">jammyjam</span></code> argument to the
<code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> function.  Therefore, the result of the user's call to our
directive will set the <code class="docutils literal notranslate"><span class="pre">jammyjam</span></code> attribute of the registry to the string
<code class="docutils literal notranslate"><span class="pre">first</span></code>.  <em>A callable is used by a directive to defer the result of a user's
call to the directive until conflict detection has had a chance to do its job</em>.</p>
<p>Other arguments exist to the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a>
method, including <code class="docutils literal notranslate"><span class="pre">args</span></code>, <code class="docutils literal notranslate"><span class="pre">kw</span></code>, <code class="docutils literal notranslate"><span class="pre">order</span></code>, and <code class="docutils literal notranslate"><span class="pre">introspectables</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kw</span></code> exist as values, which if passed will be used as arguments
to the <code class="docutils literal notranslate"><span class="pre">callable</span></code> function when it is called back.  For example, our
directive might use them like so:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_jammyjam</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">jammyjam</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam_args</span> <span class="o">=</span> <span class="n">arg</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam_kw</span> <span class="o">=</span> <span class="n">kw</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam</span> <span class="o">=</span> <span class="n">jammyjam</span>
    <span class="n">config</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span> <span class="n">register</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,),</span> <span class="n">kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;two&#39;</span><span class="p">:</span><span class="s1">&#39;two&#39;</span><span class="p">})</span>
</pre></div>
</td></tr></table></div>
<p>In the above example, when this directive is used to generate an action, and
that action is committed, <code class="docutils literal notranslate"><span class="pre">config.registry.jammyjam_args</span></code> will be set to
<code class="docutils literal notranslate"><span class="pre">('one',)</span></code> and <code class="docutils literal notranslate"><span class="pre">config.registry.jammyjam_kw</span></code> will be set to
<code class="docutils literal notranslate"><span class="pre">{'two':'two'}</span></code>.  <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kw</span></code> are honestly not very useful when your
<code class="docutils literal notranslate"><span class="pre">callable</span></code> is a closure function, because you already usually have access to
every local in the directive without needing them to be passed back.  They can
be useful, however, if you don't use a closure as a callable.</p>
<p><code class="docutils literal notranslate"><span class="pre">order</span></code> is a crude order control mechanism.  <code class="docutils literal notranslate"><span class="pre">order</span></code> defaults to the
integer <code class="docutils literal notranslate"><span class="pre">0</span></code>; it can be set to any other integer.  All actions that share an
order will be called before other actions that share a higher order.  This
makes it possible to write a directive with callable logic that relies on the
execution of the callable of another directive being done first.  For example,
Pyramid's <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> directive registers an
action with a higher order than the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> method.  Due to this, the
<code class="docutils literal notranslate"><span class="pre">add_view</span></code> method's callable can assume that, if a <code class="docutils literal notranslate"><span class="pre">route_name</span></code> was passed
to it, that a route by this name was already registered by <code class="docutils literal notranslate"><span class="pre">add_route</span></code>, and
if such a route has not already been registered, it's a configuration error (a
view that names a nonexistent route via its <code class="docutils literal notranslate"><span class="pre">route_name</span></code> parameter will never
be called).</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.6 で変更: </span>As of Pyramid 1.6 it is possible for one action to invoke another. See
<a class="reference internal" href="#ordering-actions"><span class="std std-ref">Ordering Actions</span></a> for more information.</p>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">introspectables</span></code> is a sequence of <a class="reference internal" href="../glossary.html#term-introspectable"><span class="xref std std-term">introspectable</span></a> objects.
You can pass a sequence of introspectables to the
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a> method, which allows you to augment
Pyramid's configuration introspection system.</p>
</div>
<div class="section" id="ordering-actions">
<span id="id1"></span><h2>Ordering Actions<a class="headerlink" href="#ordering-actions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>In Pyramid every <a class="reference internal" href="../glossary.html#term-action"><span class="xref std std-term">action</span></a> has an inherent ordering relative to other
actions. The logic within actions is deferred until a call to
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.commit" title="pyramid.config.Configurator.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.commit()</span></code></a> (which is automatically invoked by
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.make_wsgi_app" title="pyramid.config.Configurator.make_wsgi_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.make_wsgi_app()</span></code></a>). This means you may call
<code class="docutils literal notranslate"><span class="pre">config.add_view(route_name='foo')</span></code> <strong>before</strong> <code class="docutils literal notranslate"><span class="pre">config.add_route('foo',</span>
<span class="pre">'/foo')</span></code> because nothing actually happens until commit-time. During a commit
cycle, conflicts are resolved, and actions are ordered and executed.</p>
<p>By default, almost every action in Pyramid has an <code class="docutils literal notranslate"><span class="pre">order</span></code> of
<a class="reference internal" href="../api/config.html#pyramid.config.PHASE3_CONFIG" title="pyramid.config.PHASE3_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE3_CONFIG</span></code></a>. Every action within the same order-level
will be executed in the order it was called. This means that if an action must
be reliably executed before or after another action, the <code class="docutils literal notranslate"><span class="pre">order</span></code> must be
defined explicitly to make this work. For example, views are dependent on
routes being defined. Thus the action created by
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a> has an <code class="docutils literal notranslate"><span class="pre">order</span></code> of
<a class="reference internal" href="../api/config.html#pyramid.config.PHASE2_CONFIG" title="pyramid.config.PHASE2_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE2_CONFIG</span></code></a>.</p>
<div class="section" id="pre-defined-phases">
<h3>Pre-defined Phases<a class="headerlink" href="#pre-defined-phases" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../api/config.html#pyramid.config.PHASE0_CONFIG" title="pyramid.config.PHASE0_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE0_CONFIG</span></code></a></p>
<ul class="simple">
<li>This phase is reserved for developers who want to execute actions prior to
Pyramid's core directives.</li>
</ul>
<p><a class="reference internal" href="../api/config.html#pyramid.config.PHASE1_CONFIG" title="pyramid.config.PHASE1_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE1_CONFIG</span></code></a></p>
<ul class="simple">
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_renderer" title="pyramid.config.Configurator.add_renderer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_renderer()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route_predicate" title="pyramid.config.Configurator.add_route_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route_predicate()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_subscriber_predicate" title="pyramid.config.Configurator.add_subscriber_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view_predicate" title="pyramid.config.Configurator.add_view_predicate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_predicate()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view_deriver" title="pyramid.config.Configurator.add_view_deriver"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_deriver()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.override_asset" title="pyramid.config.Configurator.override_asset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.override_asset()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.set_authorization_policy" title="pyramid.config.Configurator.set_authorization_policy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_authorization_policy()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.set_default_csrf_options" title="pyramid.config.Configurator.set_default_csrf_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_default_csrf_options()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.set_default_permission" title="pyramid.config.Configurator.set_default_permission"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_default_permission()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.set_view_mapper" title="pyramid.config.Configurator.set_view_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_view_mapper()</span></code></a></li>
</ul>
<p><a class="reference internal" href="../api/config.html#pyramid.config.PHASE2_CONFIG" title="pyramid.config.PHASE2_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE2_CONFIG</span></code></a></p>
<ul class="simple">
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a></li>
<li><a class="reference internal" href="../api/config.html#pyramid.config.Configurator.set_authentication_policy" title="pyramid.config.Configurator.set_authentication_policy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_authentication_policy()</span></code></a></li>
</ul>
<p><a class="reference internal" href="../api/config.html#pyramid.config.PHASE3_CONFIG" title="pyramid.config.PHASE3_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">pyramid.config.PHASE3_CONFIG</span></code></a></p>
<ul class="simple">
<li>The default for all builtin or custom directives unless otherwise specified.</li>
</ul>
</div>
<div class="section" id="calling-actions-from-actions">
<h3>Calling Actions from Actions<a class="headerlink" href="#calling-actions-from-actions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.6 で追加.</span></p>
</div>
<p>Pyramid's configurator allows actions to be added during a commit-cycle as long
as they are added to the current or a later <code class="docutils literal notranslate"><span class="pre">order</span></code> phase. This means that
your custom action can defer decisions until commit-time and then do things
like invoke <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a>. It can also provide
better conflict detection if your addon needs to call more than one other
action.</p>
<p>For example, let's make an addon that invokes <code class="docutils literal notranslate"><span class="pre">add_route</span></code> and <code class="docutils literal notranslate"><span class="pre">add_view</span></code>,
but we want it to conflict with any other call to our addon:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">PHASE0_CONFIG</span>

<span class="k">def</span> <span class="nf">includeme</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_auto_route&#39;</span><span class="p">,</span> <span class="n">add_auto_route</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">add_auto_route</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s1">&#39;auto route&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="n">register</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">PHASE0_CONFIG</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Now someone else can use your addon and be informed if there is a conflict
between this route and another, or two calls to <code class="docutils literal notranslate"><span class="pre">add_auto_route</span></code>. Notice how
we had to invoke our action <strong>before</strong> <code class="docutils literal notranslate"><span class="pre">add_view</span></code> or <code class="docutils literal notranslate"><span class="pre">add_route</span></code>. If we
tried to invoke this afterward, the subsequent calls to <code class="docutils literal notranslate"><span class="pre">add_view</span></code> and
<code class="docutils literal notranslate"><span class="pre">add_route</span></code> would cause conflicts because that phase had already been
executed, and the configurator cannot go back in time to add more views during
that commit-cycle.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;auto_route_addon&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_auto_route</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">my_view</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">response</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="adding-configuration-introspection">
<span id="introspection"></span><h2>Adding Configuration Introspection<a class="headerlink" href="#adding-configuration-introspection" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
<p>Pyramid provides a configuration introspection system that can be used by
debugging tools to provide visibility into the configuration of a running
application.</p>
<p>All built-in Pyramid directives (such as
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_view" title="pyramid.config.Configurator.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view()</span></code></a> and
<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.add_route" title="pyramid.config.Configurator.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route()</span></code></a>) register a set of
introspectables when called.  For example, when you register a view via
<code class="docutils literal notranslate"><span class="pre">add_view</span></code>, the directive registers at least one introspectable: an
introspectable about the view registration itself, providing human-consumable
values for the arguments passed into it.  You can later use the introspection
query system to determine whether a particular view uses a renderer, or whether
a particular view is limited to a particular request method, or against which
routes a particular view is registered.  The Pyramid &quot;debug toolbar&quot; makes use
of the introspection system in various ways to display information to Pyramid
developers.</p>
<p>Introspection values are set when a sequence of <a class="reference internal" href="../glossary.html#term-introspectable"><span class="xref std std-term">introspectable</span></a> objects
is passed to the <a class="reference internal" href="../api/config.html#pyramid.config.Configurator.action" title="pyramid.config.Configurator.action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">action()</span></code></a> method. Here's an
example of a directive which uses introspectables:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_jammyjam</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">intr</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">introspectable</span><span class="p">(</span><span class="n">category_name</span><span class="o">=</span><span class="s1">&#39;jammyjams&#39;</span><span class="p">,</span>
                                 <span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span>
                                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;a jammyjam&#39;</span><span class="p">,</span>
                                 <span class="n">type_name</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">intr</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">config</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span> <span class="n">register</span><span class="p">,</span> <span class="n">introspectables</span><span class="o">=</span><span class="p">(</span><span class="n">intr</span><span class="p">,))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_jammyjam&#39;</span><span class="p">,</span> <span class="n">add_jammyjam</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>If you notice, the above directive uses the <code class="docutils literal notranslate"><span class="pre">introspectable</span></code> attribute of a
Configurator (<a class="reference internal" href="../api/config.html#pyramid.config.Configurator.introspectable" title="pyramid.config.Configurator.introspectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyramid.config.Configurator.introspectable</span></code></a>) to create an
introspectable object.  The introspectable object's constructor requires at
least four arguments: the <code class="docutils literal notranslate"><span class="pre">category_name</span></code>, the <code class="docutils literal notranslate"><span class="pre">discriminator</span></code>, the
<code class="docutils literal notranslate"><span class="pre">title</span></code>, and the <code class="docutils literal notranslate"><span class="pre">type_name</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">category_name</span></code> is a string representing the logical category for this
introspectable.  Usually the category_name is a pluralization of the type of
object being added via the action.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> is a value unique <strong>within the category</strong> (unlike the
action discriminator, which must be unique within the entire set of actions).
It is typically a string or tuple representing the values unique to this
introspectable within the category.  It is used to generate links and as part
of a relationship-forming target for other introspectables.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">title</span></code> is a human-consumable string that can be used by introspection
system frontends to show a friendly summary of this introspectable.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">type_name</span></code> is a value that can be used to subtype this introspectable
within its category for sorting and presentation purposes.  It can be any
value.</p>
<p>An introspectable is also dictionary-like.  It can contain any set of key/value
pairs, typically related to the arguments passed to its related directive.
While the <code class="docutils literal notranslate"><span class="pre">category_name</span></code>, <code class="docutils literal notranslate"><span class="pre">discriminator</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span></code>, and <code class="docutils literal notranslate"><span class="pre">type_name</span></code>
are <em>metadata</em> about the introspectable, the values provided as key/value pairs
are the actual data provided by the introspectable.  In the above example, we
set the <code class="docutils literal notranslate"><span class="pre">value</span></code> key to the value of the <code class="docutils literal notranslate"><span class="pre">value</span></code> argument passed to the
directive.</p>
<p>Our directive above mutates the introspectable, and passes it in to the
<code class="docutils literal notranslate"><span class="pre">action</span></code> method as the first element of a tuple as the value of the
<code class="docutils literal notranslate"><span class="pre">introspectable</span></code> keyword argument.  This associates this introspectable with
the action.  Introspection tools will then display this introspectable in their
index.</p>
<div class="section" id="introspectable-relationships">
<h3>Introspectable Relationships<a class="headerlink" href="#introspectable-relationships" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Two introspectables may have relationships between each other.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_jammyjam</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">template</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">config</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">jammyjam</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
    <span class="n">intr</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">introspectable</span><span class="p">(</span><span class="n">category_name</span><span class="o">=</span><span class="s1">&#39;jammyjams&#39;</span><span class="p">,</span>
                                 <span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span>
                                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;a jammyjam&#39;</span><span class="p">,</span>
                                 <span class="n">type_name</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">intr</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">tmpl_intr</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">introspectable</span><span class="p">(</span><span class="n">category_name</span><span class="o">=</span><span class="s1">&#39;jammyjam templates&#39;</span><span class="p">,</span>
                                      <span class="n">discriminator</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
                                      <span class="n">title</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
                                      <span class="n">type_name</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">tmpl_intr</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">template</span>
    <span class="n">intr</span><span class="o">.</span><span class="n">relate</span><span class="p">(</span><span class="s1">&#39;jammyjam templates&#39;</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s1">&#39;jammyjam&#39;</span><span class="p">,</span> <span class="n">register</span><span class="p">,</span> <span class="n">introspectables</span><span class="o">=</span><span class="p">(</span><span class="n">intr</span><span class="p">,</span> <span class="n">tmpl_intr</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_directive</span><span class="p">(</span><span class="s1">&#39;add_jammyjam&#39;</span><span class="p">,</span> <span class="n">add_jammyjam</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the above example, the <code class="docutils literal notranslate"><span class="pre">add_jammyjam</span></code> directive registers two
introspectables: the first is related to the <code class="docutils literal notranslate"><span class="pre">value</span></code> passed to the directive,
and the second is related to the <code class="docutils literal notranslate"><span class="pre">template</span></code> passed to the directive. If you
believe a concept within a directive is important enough to have its own
introspectable, you can cause the same directive to register more than one
introspectable, registering one introspectable for the &quot;main idea&quot; and another
for a related concept.</p>
<p>The call to <code class="docutils literal notranslate"><span class="pre">intr.relate</span></code> above
(<a class="reference internal" href="../api/interfaces.html#pyramid.interfaces.IIntrospectable.relate" title="pyramid.interfaces.IIntrospectable.relate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyramid.interfaces.IIntrospectable.relate()</span></code></a>) is passed two arguments: a
category name and a directive.  The example above effectively indicates that
the directive wishes to form a relationship between the <code class="docutils literal notranslate"><span class="pre">intr</span></code> introspectable
and the <code class="docutils literal notranslate"><span class="pre">tmpl_intr</span></code> introspectable; the arguments passed to <code class="docutils literal notranslate"><span class="pre">relate</span></code> are
the category name and discriminator of the <code class="docutils literal notranslate"><span class="pre">tmpl_intr</span></code> introspectable.</p>
<p>Relationships need not be made between two introspectables created by the same
directive.  Instead a relationship can be formed between an introspectable
created in one directive and another introspectable created in another by
calling <code class="docutils literal notranslate"><span class="pre">relate</span></code> on either side with the other directive's category name and
discriminator.  An error will be raised at configuration commit time if you
attempt to relate an introspectable with another nonexistent introspectable,
however.</p>
<p>Introspectable relationships will show up in frontend system renderings of
introspection values.  For example, if a view registration names a route name,
the introspectable related to the view callable will show a reference to the
route to which it relates and vice versa.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">Extending Pyramid Configuration</a><ul>
<li><a class="reference internal" href="#adding-methods-to-the-configurator-via-add-directive">Adding Methods to the Configurator via <code class="docutils literal notranslate"><span class="pre">add_directive</span></code></a></li>
<li><a class="reference internal" href="#using-config-action-in-a-directive">Using <code class="docutils literal notranslate"><span class="pre">config.action</span></code> in a Directive</a></li>
<li><a class="reference internal" href="#ordering-actions">Ordering Actions</a><ul>
<li><a class="reference internal" href="#pre-defined-phases">Pre-defined Phases</a></li>
<li><a class="reference internal" href="#calling-actions-from-actions">Calling Actions from Actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-configuration-introspection">Adding Configuration Introspection</a><ul>
<li><a class="reference internal" href="#introspectable-relationships">Introspectable Relationships</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="advconfig.html"
                        title="前の章へ">Advanced Configuration</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="cookiecutters.html"
                        title="次の章へ">Pyramid cookiecutters</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/narr/extconfig.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="cookiecutters.html" title="Pyramid cookiecutters"
             >次へ</a> |</li>
        <li class="right" >
          <a href="advconfig.html" title="Advanced Configuration"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 8月 18, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4 で生成しました。
    </div>
  </body>
</html>