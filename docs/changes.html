
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Pyramid Change History &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="copyright" title="著作権" href="copyright.html" />
    <link rel="next" title="Defending Pyramid&#39;s Design" href="designdefense.html" />
    <link rel="prev" title="What&#39;s New in Pyramid 1.0" href="whatsnew-1.0.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="designdefense.html" title="Defending Pyramid&#39;s Design"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New in Pyramid 1.0"
             accesskey="P">前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyramid-change-history">
<span id="changelog"></span><h1><span>Pyramid</span> Change History<a class="headerlink" href="#pyramid-change-history" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="unreleased">
<span id="changes-1-9-3"></span><h2>1.9.3 (Unreleased)<a class="headerlink" href="#unreleased" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Set appropriate <code class="docutils literal notranslate"><span class="pre">code</span></code> and <code class="docutils literal notranslate"><span class="pre">title</span></code> attributes on the <code class="docutils literal notranslate"><span class="pre">HTTPClientError</span></code> and
<code class="docutils literal notranslate"><span class="pre">HTTPServerError</span></code> exception classes. This prevents inadvertently returning a 520
error code.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3280">https://github.com/Pylons/pyramid/pull/3280</a></li>
</ul>
</div>
<div class="section" id="changes-1-9-2">
<span id="id1"></span><h2>1.9.2 (2018-04-23)<a class="headerlink" href="#changes-1-9-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Pin to <code class="docutils literal notranslate"><span class="pre">webob</span> <span class="pre">&gt;=</span> <span class="pre">1.7.0</span></code> instead of <code class="docutils literal notranslate"><span class="pre">1.7.0rc2</span></code> to avoid accidentally
opting users into pre-releases because a downstream dependency allowed it.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/3220">https://github.com/Pylons/pyramid/issues/3220</a></li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.get_root</span></code> which was broken by the execution policy
feature added in the 1.9 release.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3265">https://github.com/Pylons/pyramid/pull/3265</a></li>
</ul>
</div>
<div class="section" id="changes-1-9-1">
<span id="id2"></span><h2>1.9.1 (2017-07-13)<a class="headerlink" href="#changes-1-9-1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">_depth</span></code> and <code class="docutils literal notranslate"><span class="pre">_category</span></code> arguments to all of the venusian
decorators. The <code class="docutils literal notranslate"><span class="pre">_category</span></code> argument can be used to affect which actions
are registered when performing a <code class="docutils literal notranslate"><span class="pre">config.scan(...,</span> <span class="pre">category=...)</span></code> with a
specific category. The <code class="docutils literal notranslate"><span class="pre">_depth</span></code> argument should be used when wrapping
the decorator in your own. This change affects <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.view.exception_view_config</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.view.forbidden_view_config</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid.view.notfound_view_config</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.events.subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.response.response_adapter</span></code>
decorators. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3121">https://github.com/Pylons/pyramid/pull/3121</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/3123">https://github.com/Pylons/pyramid/pull/3123</a></li>
<li>Fix a circular import which made it impossible to import
<code class="docutils literal notranslate"><span class="pre">pyramid.viewderivers</span></code> before <code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3124">https://github.com/Pylons/pyramid/pull/3124</a></li>
<li>Improve documentation to show the <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> being
used as a context manager in more places.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3126">https://github.com/Pylons/pyramid/pull/3126</a></li>
</ul>
</div>
<div class="section" id="id3">
<h2>1.9 (2017-06-26)<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>No major changes from 1.9b1.</li>
<li>Updated documentation links for <code class="docutils literal notranslate"><span class="pre">docs.pylonsproject.org</span></code> to use HTTPS.</li>
</ul>
</div>
<div class="section" id="b1-2017-06-19">
<h2>1.9b1 (2017-06-19)<a class="headerlink" href="#b1-2017-06-19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add an informative error message when unknown predicates are supplied. The
new message suggests alternatives based on the list of known predicates.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3054">https://github.com/Pylons/pyramid/pull/3054</a></li>
<li>Added integrity attributes for JavaScripts in cookiecutters, scaffolds, and
resulting source files in tutorials.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2548">https://github.com/Pylons/pyramid/issues/2548</a></li>
<li>Update RELEASING.txt for updating cookiecutters. Change cookiecutter URLs to
use shortcut.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/3042">https://github.com/Pylons/pyramid/issues/3042</a></li>
<li>Ensure the correct threadlocals are pushed during view execution when
invoked from <code class="docutils literal notranslate"><span class="pre">request.invoke_exception_view</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3060">https://github.com/Pylons/pyramid/pull/3060</a></li>
<li>Fix a bug in which <code class="docutils literal notranslate"><span class="pre">pyramid.security.ALL_PERMISSIONS</span></code> failed to return
a valid iterator in its <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> implementation.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3074">https://github.com/Pylons/pyramid/pull/3074</a></li>
<li>Normalize the permission results to a proper class hierarchy.
<code class="docutils literal notranslate"><span class="pre">pyramid.security.ACLAllowed</span></code> is now a subclass of
<code class="docutils literal notranslate"><span class="pre">pyramid.security.Allowed</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.security.ACLDenied</span></code> is now a
subclass of <code class="docutils literal notranslate"><span class="pre">pyramid.security.Denied</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3084">https://github.com/Pylons/pyramid/pull/3084</a></li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">quote_via</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pyramid.encode.urlencode</span></code> to follow
the stdlib's version and enable custom quoting functions.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3088">https://github.com/Pylons/pyramid/pull/3088</a></li>
<li>Support <cite>_query=None</cite> and <cite>_anchor=None</cite> in <code class="docutils literal notranslate"><span class="pre">request.route_url</span></code> as well
as <code class="docutils literal notranslate"><span class="pre">query=None</span></code> and <code class="docutils literal notranslate"><span class="pre">anchor=None</span></code> in <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code>.
Previously this would cause an <cite>?</cite> and a <cite>#</cite>, respectively, in the url
with nothing after it. Now the unnecessary parts are dropped from the
generated URL. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3034">https://github.com/Pylons/pyramid/pull/3034</a></li>
<li>Revamp the <code class="docutils literal notranslate"><span class="pre">IRouter</span></code> API used by <code class="docutils literal notranslate"><span class="pre">IExecutionPolicy</span></code> to force
pushing/popping the request threadlocals. The
<code class="docutils literal notranslate"><span class="pre">IRouter.make_request(environ)</span></code> API has been replaced by
<code class="docutils literal notranslate"><span class="pre">IRouter.request_context(environ)</span></code> which should be used as a context
manager. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3086">https://github.com/Pylons/pyramid/pull/3086</a></li>
</ul>
</div>
<div class="section" id="a2-2017-05-09">
<h2>1.9a2 (2017-05-09)<a class="headerlink" href="#a2-2017-05-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="backward-incompatibilities">
<h3>Backward Incompatibilities<a class="headerlink" href="#backward-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">request.exception</span></code> and <code class="docutils literal notranslate"><span class="pre">request.exc_info</span></code> will only be set if the
response was generated by the EXCVIEW tween. This is to avoid any confusion
where a response was generated elsewhere in the pipeline and not in
direct relation to the original exception. If anyone upstream wants to
catch and render responses for exceptions they should set
<code class="docutils literal notranslate"><span class="pre">request.exception</span></code> and <code class="docutils literal notranslate"><span class="pre">request.exc_info</span></code> themselves to indicate
the exception that was squashed when generating the response.</p>
<p>Similar behavior occurs with <code class="docutils literal notranslate"><span class="pre">request.invoke_exception_view</span></code> in which
the exception properties are set to reflect the exception if a response
is successfully generated by the method.</p>
<p>This is a very minor incompatibility. Most tweens right now would give
priority to the raised exception and ignore <code class="docutils literal notranslate"><span class="pre">request.exception</span></code>. This
change just improves and clarifies that bookkeeping by trying to be
more clear about the relationship between the response and its squashed
exception. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/3029">https://github.com/Pylons/pyramid/pull/3029</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/3031">https://github.com/Pylons/pyramid/pull/3031</a></p>
</li>
</ul>
</div>
</div>
<div class="section" id="a1-2017-05-01">
<h2>1.9a1 (2017-05-01)<a class="headerlink" href="#a1-2017-05-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="major-features">
<h3>Major Features<a class="headerlink" href="#major-features" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The file format used by all <code class="docutils literal notranslate"><span class="pre">p*</span></code> command line scripts such as <code class="docutils literal notranslate"><span class="pre">pserve</span></code>
and <code class="docutils literal notranslate"><span class="pre">pshell</span></code>, as well as the <code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code> function
is now replaceable thanks to a new dependency on
<a class="reference external" href="https://docs.pylonsproject.org/projects/plaster/en/latest/">plaster</a>.</p>
<p>For now, Pyramid is still shipping with integrated support for the
PasteDeploy INI format by depending on the
<a class="reference external" href="https://github.com/Pylons/plaster_pastedeploy">plaster_pastedeploy</a>
binding library. This may change in the future.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2985">https://github.com/Pylons/pyramid/pull/2985</a></p>
</li>
<li><p class="first">Added an execution policy hook to the request pipeline. An execution
policy has the ability to control creation and execution of the request
objects before they enter the rest of the pipeline. This means for a single
request environ the policy may create more than one request object.</p>
<p>The first library to use this feature is
<a class="reference external" href="https://docs.pylonsproject.org/projects/pyramid-retry/en/latest/">pyramid_retry</a>.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2964">https://github.com/Pylons/pyramid/pull/2964</a></p>
</li>
<li><p class="first">CSRF support has been refactored out of sessions and into its own
independent API in the <code class="docutils literal notranslate"><span class="pre">pyramid.csrf</span></code> module. It supports a pluggable
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ICSRFStoragePolicy</span></code> which can be used to define your
own mechanism for generating and validating CSRF tokens. By default,
Pyramid continues to use the <code class="docutils literal notranslate"><span class="pre">pyramid.csrf.LegacySessionCSRFStoragePolicy</span></code>
that uses the <code class="docutils literal notranslate"><span class="pre">request.session.get_csrf_token</span></code> and
<code class="docutils literal notranslate"><span class="pre">request.session.new_csrf_token</span></code> APIs under the hood to preserve
compatibility. Two new policies are shipped as well,
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.SessionCSRFStoragePolicy</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.CookieCSRFStoragePolicy</span></code> which will store the CSRF tokens
in the session and in a standalone cookie, respectively. The storage policy
can be changed by using the new
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_csrf_storage_policy</span></code> config directive.</p>
<p>CSRF tokens should be used via the new <code class="docutils literal notranslate"><span class="pre">pyramid.csrf.get_csrf_token</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.new_csrf_token</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.csrf.check_csrf_token</span></code> APIs
in order to continue working if the storage policy is changed. Also, the
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.get_csrf_token</span></code> function is injected into templates to be
used conveniently in UI code.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2854">https://github.com/Pylons/pyramid/pull/2854</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/3019">https://github.com/Pylons/pyramid/pull/3019</a></p>
</li>
</ul>
</div>
<div class="section" id="minor-features">
<h3>Minor Features<a class="headerlink" href="#minor-features" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Support an <code class="docutils literal notranslate"><span class="pre">open_url</span></code> config setting in the <code class="docutils literal notranslate"><span class="pre">pserve</span></code> section of the
config file. This url is used to open a web browser when <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--browser</span></code>
is invoked. When this setting is unavailable the <code class="docutils literal notranslate"><span class="pre">pserve</span></code> script will
attempt to guess the port the server is using from the
<code class="docutils literal notranslate"><span class="pre">server:&lt;server_name&gt;</span></code> section of the config file but there is no
requirement that the server is being run in this format so it may fail.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2984">https://github.com/Pylons/pyramid/pull/2984</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> can now be used as a context manager
which will automatically push/pop threadlocals (similar to
<code class="docutils literal notranslate"><span class="pre">config.begin()</span></code> and <code class="docutils literal notranslate"><span class="pre">config.end()</span></code>). It will also automatically perform
a <code class="docutils literal notranslate"><span class="pre">config.commit()</span></code> and thus it is only recommended to be used at the
top-level of your app. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2874">https://github.com/Pylons/pyramid/pull/2874</a></li>
<li>The threadlocals are now available inside any function invoked via
<code class="docutils literal notranslate"><span class="pre">config.include</span></code>. This means the only config-time code that cannot rely
on threadlocals is code executed from non-actions inside the main. This
can be alleviated by invoking <code class="docutils literal notranslate"><span class="pre">config.begin()</span></code> and <code class="docutils literal notranslate"><span class="pre">config.end()</span></code>
appropriately or using the new context manager feature of the configurator.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2989">https://github.com/Pylons/pyramid/pull/2989</a></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>HTTPException's accepts a detail kwarg that may be used to pass additional
details to the exception. You may now pass objects so long as they have a
valid __str__ method. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2951">https://github.com/Pylons/pyramid/pull/2951</a></li>
<li>Fix a reference cycle causing memory leaks in which the registry
would keep a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> instance alive even after the configurator
was discarded. Another fix was also added for the <code class="docutils literal notranslate"><span class="pre">global_registries</span></code>
object in which the registry was stored in a closure preventing it from
being deallocated. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2967">https://github.com/Pylons/pyramid/pull/2967</a></li>
<li>Fix a bug directly invoking <code class="docutils literal notranslate"><span class="pre">pyramid.scripts.pserve.main</span></code> with the
<code class="docutils literal notranslate"><span class="pre">--reload</span></code> option in which <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> is always used in the subprocess
instead of the supplied <code class="docutils literal notranslate"><span class="pre">argv</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2962">https://github.com/Pylons/pyramid/pull/2962</a></li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Pyramid currently depends on <code class="docutils literal notranslate"><span class="pre">plaster_pastedeploy</span></code> to simplify the
transition to <code class="docutils literal notranslate"><span class="pre">plaster</span></code> by maintaining integrated support for INI files.
This dependency on <code class="docutils literal notranslate"><span class="pre">plaster_pastedeploy</span></code> should be considered subject to
Pyramid's deprecation policy and may be removed in the future.
Applications should depend on the appropriate plaster binding to satisfy
their needs.</p>
</li>
<li><p class="first">Retrieving CSRF token from the session has been deprecated in favor of
equivalent methods in the <code class="docutils literal notranslate"><span class="pre">pyramid.csrf</span></code> module. The CSRF methods
(<code class="docutils literal notranslate"><span class="pre">ISession.get_csrf_token</span></code> and <code class="docutils literal notranslate"><span class="pre">ISession.new_csrf_token</span></code>) are no longer
required on the <code class="docutils literal notranslate"><span class="pre">ISession</span></code> interface except when using the default
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.LegacySessionCSRFStoragePolicy</span></code>.</p>
<p>Also, <code class="docutils literal notranslate"><span class="pre">pyramid.session.check_csrf_token</span></code> is now located at
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf.check_csrf_token</span></code>.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2854">https://github.com/Pylons/pyramid/pull/2854</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/3019">https://github.com/Pylons/pyramid/pull/3019</a></p>
</li>
</ul>
</div>
<div class="section" id="documentation-changes">
<h3>Documentation Changes<a class="headerlink" href="#documentation-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added the execution policy to the routing diagram in the Request Processing
chapter. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2993">https://github.com/Pylons/pyramid/pull/2993</a></li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2>1.8 (2017-01-21)<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>No major changes from 1.8b1.</li>
</ul>
</div>
<div class="section" id="b1-2017-01-17">
<h2>1.8b1 (2017-01-17)<a class="headerlink" href="#b1-2017-01-17" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added an <code class="docutils literal notranslate"><span class="pre">override</span></code> option to <code class="docutils literal notranslate"><span class="pre">config.add_translation_dirs</span></code> to allow
later calls to place translation directories at a higher priority than
earlier calls. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2902">https://github.com/Pylons/pyramid/pull/2902</a></li>
</ul>
</div>
<div class="section" id="id5">
<h3>Documentation Changes<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Improve registry documentation to discuss uses as a component registry
and as a dictionary. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2893">https://github.com/Pylons/pyramid/pull/2893</a></li>
<li>Quick Tour, Quick Tutorial, and most other remaining documentation updated to
use cookiecutters instead of pcreate and scaffolds.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2888">https://github.com/Pylons/pyramid/pull/2888</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2889">https://github.com/Pylons/pyramid/pull/2889</a></li>
<li>Fix unittests in wiki2 to work without different dependencies between
py2 and py3. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2899">https://github.com/Pylons/pyramid/pull/2899</a></li>
<li>Update Windows documentation to track newer Python 3 improvements to the
installer. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2900">https://github.com/Pylons/pyramid/pull/2900</a></li>
<li>Updated the <code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code> tutorial to use cookiecutters and Apache 2.4+.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2901">https://github.com/Pylons/pyramid/pull/2901</a></li>
</ul>
</div>
</div>
<div class="section" id="a1-2016-12-25">
<h2>1.8a1 (2016-12-25)<a class="headerlink" href="#a1-2016-12-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id6">
<h3>Backward Incompatibilities<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Support for the <code class="docutils literal notranslate"><span class="pre">IContextURL</span></code> interface that was deprecated in Pyramid 1.3
has been removed.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2822">https://github.com/Pylons/pyramid/pull/2822</a></p>
</li>
<li><p class="first">Following the Pyramid deprecation period (1.6 -&gt; 1.8),
daemon support for pserve has been removed. This includes removing the
daemon commands (start, stop, restart, status) as well as the following
arguments: <code class="docutils literal notranslate"><span class="pre">--daemon</span></code>, <code class="docutils literal notranslate"><span class="pre">--pid-file</span></code>, <code class="docutils literal notranslate"><span class="pre">--log-file</span></code>,
<code class="docutils literal notranslate"><span class="pre">--monitor-restart</span></code>, <code class="docutils literal notranslate"><span class="pre">--status</span></code>, <code class="docutils literal notranslate"><span class="pre">--user</span></code>, <code class="docutils literal notranslate"><span class="pre">--group</span></code>,
<code class="docutils literal notranslate"><span class="pre">--stop-daemon</span></code></p>
<p>To run your server as a daemon you should use a process manager instead of
pserve.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2615">https://github.com/Pylons/pyramid/pull/2615</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pcreate</span></code> is now interactive by default. You will be prompted if a file
already exists with different content. Previously if there were similar
files it would silently skip them unless you specified <code class="docutils literal notranslate"><span class="pre">--interactive</span></code>
or <code class="docutils literal notranslate"><span class="pre">--overwrite</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2775">https://github.com/Pylons/pyramid/pull/2775</a></p>
</li>
<li><p class="first">Removed undocumented argument <code class="docutils literal notranslate"><span class="pre">cachebust_match</span></code> from
<code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code>. This argument was shipped accidentally
in Pyramid 1.6. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2681">https://github.com/Pylons/pyramid/pull/2681</a></p>
</li>
<li><p class="first">Change static view to avoid setting the <code class="docutils literal notranslate"><span class="pre">Content-Encoding</span></code> response header
to an encoding guessed using Python's <code class="docutils literal notranslate"><span class="pre">mimetypes</span></code> module. This was causing
clients to decode the content of gzipped files when downloading them. The
client would end up with a <code class="docutils literal notranslate"><span class="pre">foo.txt.gz</span></code> file on disk that was already
decoded, thus should really be <code class="docutils literal notranslate"><span class="pre">foo.txt</span></code>. Also, the <code class="docutils literal notranslate"><span class="pre">Content-Encoding</span></code>
should only have been used if the client itself broadcast support for the
encoding via <code class="docutils literal notranslate"><span class="pre">Accept-Encoding</span></code> request headers.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2810">https://github.com/Pylons/pyramid/pull/2810</a></p>
</li>
<li><p class="first">Settings are no longer accessible as attributes on the settings object
(e.g. <code class="docutils literal notranslate"><span class="pre">request.registry.settings.foo</span></code>). This was deprecated in Pyramid 1.2.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2823">https://github.com/Pylons/pyramid/pull/2823</a></p>
</li>
</ul>
</div>
<div class="section" id="id7">
<h3>Features<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Python 3.6 compatibility.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/2835">https://github.com/Pylons/pyramid/issues/2835</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pcreate</span></code> learned about <code class="docutils literal notranslate"><span class="pre">--package-name</span></code> to allow you to create a new
project in an existing folder with a different package name than the project
name. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2783">https://github.com/Pylons/pyramid/pull/2783</a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">_get_credentials</span></code> private method of <code class="docutils literal notranslate"><span class="pre">BasicAuthAuthenticationPolicy</span></code>
has been extracted into standalone function <code class="docutils literal notranslate"><span class="pre">extract_http_basic_credentials</span></code>
in <code class="docutils literal notranslate"><span class="pre">pyramid.authentication</span></code> module, this function extracts HTTP Basic
credentials from a <code class="docutils literal notranslate"><span class="pre">request</span></code> object, and returns them as a named tuple.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2662">https://github.com/Pylons/pyramid/pull/2662</a></p>
</li>
<li><p class="first">Pyramid 1.4 silently dropped a feature of the configurator that has been
restored. It's again possible for action discriminators to conflict across
different action orders.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2757">https://github.com/Pylons/pyramid/pull/2757</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code> and its sibling <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.prepare</span></code>
can now be used as context managers to automatically invoke the <code class="docutils literal notranslate"><span class="pre">closer</span></code>
and pop threadlocals off of the stack to prevent memory leaks.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2760">https://github.com/Pylons/pyramid/pull/2760</a></p>
</li>
<li><p class="first">Added <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_exception_view</span></code> and the
<code class="docutils literal notranslate"><span class="pre">pyramid.view.exception_view_config</span></code> decorator. It is now possible using
these methods or via the new <code class="docutils literal notranslate"><span class="pre">exception_only=True</span></code> option to <code class="docutils literal notranslate"><span class="pre">add_view</span></code>
to add a view which will only be matched when handling an exception.
Previously any exception views were also registered for a traversal
context that inherited from the exception class which prevented any
exception-only optimizations.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2660">https://github.com/Pylons/pyramid/pull/2660</a></p>
</li>
<li><p class="first">Added the <code class="docutils literal notranslate"><span class="pre">exception_only</span></code> boolean to
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IViewDeriverInfo</span></code> which can be used by view derivers
to determine if they are wrapping a view which only handles exceptions.
This means that it is no longer necessary to perform request-time checks
for <code class="docutils literal notranslate"><span class="pre">request.exception</span></code> to determine if the view is handling an exception
- the pipeline can be optimized at config-time.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2660">https://github.com/Pylons/pyramid/pull/2660</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pserve</span></code> should now work with <code class="docutils literal notranslate"><span class="pre">gevent</span></code> and other workers that need
to monkeypatch the process, assuming the server and / or the app do so
as soon as possible before importing the rest of pyramid.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2797">https://github.com/Pylons/pyramid/pull/2797</a></p>
</li>
<li><p class="first">Pyramid no longer copies the settings object passed to the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator(settings=)</span></code>. The original <code class="docutils literal notranslate"><span class="pre">dict</span></code> is kept.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2823">https://github.com/Pylons/pyramid/pull/2823</a></p>
</li>
<li><p class="first">The csrf trusted origins setting may now be a whitespace-separated list of
domains. Previously only a python list was allowed. Also, it can now be set
using the <code class="docutils literal notranslate"><span class="pre">PYRAMID_CSRF_TRUSTED_ORIGINS</span></code> environment variable similar to
other settings. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2823">https://github.com/Pylons/pyramid/pull/2823</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> now uses the
<cite>hupper &lt;http://docs.pylonsproject.org/projects/hupper/en/latest/&gt;</cite>
library to monitor file changes. This comes with many improvements:</p>
<ul class="simple">
<li>If the <a class="reference external" href="http://pythonhosted.org/watchdog/">watchdog</a> package is
installed then monitoring will be done using inotify instead of
cpu and disk-intensive polling.</li>
<li>The monitor is now a separate process that will not crash and starts up
before any of your code.</li>
<li>The monitor will not restart the process after a crash until a file is
saved.</li>
<li>The monitor works on windows.</li>
<li>You can now trigger a reload manually from a pyramid view or any other
code via <code class="docutils literal notranslate"><span class="pre">hupper.get_reloader().trigger_reload()</span></code>. Kind of neat.</li>
<li>You can trigger a reload by issuing a <code class="docutils literal notranslate"><span class="pre">SIGHUP</span></code> to the monitor process.</li>
</ul>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2805">https://github.com/Pylons/pyramid/pull/2805</a></p>
</li>
<li><p class="first">A new <code class="docutils literal notranslate"><span class="pre">[pserve]</span></code> section is supported in your config files with a
<code class="docutils literal notranslate"><span class="pre">watch_files</span></code> key that can configure <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> to monitor custom
file paths. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2827">https://github.com/Pylons/pyramid/pull/2827</a></p>
</li>
<li><p class="first">Allow streaming responses to be made from subclasses of
<code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPException</span></code>. Previously the response would
be unrolled while testing for a body, making it impossible to stream
a response.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2863">https://github.com/Pylons/pyramid/pull/2863</a></p>
</li>
<li><p class="first">Update starter, alchemy and zodb scaffolds to support IPv6 by using the
new <code class="docutils literal notranslate"><span class="pre">listen</span></code> directives in waitress.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2853">https://github.com/Pylons/pyramid/pull/2853</a></p>
</li>
<li><p class="first">All p* scripts now use argparse instead of optparse. This improves their
<code class="docutils literal notranslate"><span class="pre">--help</span></code> output as well as enabling nicer documentation of their options.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2864">https://github.com/Pylons/pyramid/pull/2864</a></p>
</li>
<li><p class="first">Any deferred configuration action registered via <code class="docutils literal notranslate"><span class="pre">config.action</span></code> may now
depend on threadlocal state, such as asset overrides, being active when
the action is executed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2873">https://github.com/Pylons/pyramid/pull/2873</a></p>
</li>
<li><p class="first">Asset specifications for directories passed to
<code class="docutils literal notranslate"><span class="pre">config.add_translation_dirs</span></code> now support overriding the entire asset
specification, including the folder name. Previously only the package name
was supported and the folder would always need to have the same name.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2873">https://github.com/Pylons/pyramid/pull/2873</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">config.begin()</span></code> will propagate the current threadlocal request through
as long as the registry is the same. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>  <span class="c1"># pushes a request</span>
<span class="n">config</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>         <span class="c1"># propagates the previous request through unchanged</span>
<span class="k">assert</span> <span class="n">get_current_request</span><span class="p">()</span> <span class="ow">is</span> <span class="n">request</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2873">https://github.com/Pylons/pyramid/pull/2873</a></p>
</li>
<li><p class="first">Added a new <code class="docutils literal notranslate"><span class="pre">callback</span></code> option to <code class="docutils literal notranslate"><span class="pre">config.set_default_csrf_options</span></code> which
can be used to determine per-request whether CSRF checking should be enabled
to allow for a mix authentication methods. Only cookie-based methods
generally require CSRF checking.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2778">https://github.com/Pylons/pyramid/pull/2778</a></p>
</li>
</ul>
</div>
<div class="section" id="id8">
<h3>Bug Fixes<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fixed bug in <code class="docutils literal notranslate"><span class="pre">proutes</span></code> such that it now shows the correct view when a
class and <code class="docutils literal notranslate"><span class="pre">attr</span></code> is involved.
See: <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2687">https://github.com/Pylons/pyramid/pull/2687</a></li>
<li>Fix a <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> in Python 3.5 when using <code class="docutils literal notranslate"><span class="pre">re.split</span></code> on the
<code class="docutils literal notranslate"><span class="pre">format</span></code> setting to the <code class="docutils literal notranslate"><span class="pre">proutes</span></code> script.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2714">https://github.com/Pylons/pyramid/pull/2714</a></li>
<li>Fix a <code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> emitted by WebOb when using arbitrary objects
as the <code class="docutils literal notranslate"><span class="pre">userid</span></code> in the <code class="docutils literal notranslate"><span class="pre">AuthTktAuthenticationPolicy</span></code>. This is now caught
by the policy and the object is serialized as a base64 string to avoid
the cryptic warning. Since the userid will be read back as a string on
subsequent requests a more useful warning is emitted encouraging you to
use a primitive type instead.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2715">https://github.com/Pylons/pyramid/pull/2715</a></li>
<li>Pyramid 1.6 introduced the ability for an action to invoke another action.
There was a bug in the way that <code class="docutils literal notranslate"><span class="pre">config.add_view</span></code> would interact with
custom view derivers introduced in Pyramid 1.7 because the view's
discriminator cannot be computed until view derivers and view predicates
have been created in earlier orders. Invoking an action from another action
would trigger an unrolling of the pipeline and would compute discriminators
before they were ready. The new behavior respects the <code class="docutils literal notranslate"><span class="pre">order</span></code> of the action
and ensures the discriminators are not computed until dependent actions
from previous orders have executed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2757">https://github.com/Pylons/pyramid/pull/2757</a></li>
<li>Fix bug in i18n where the default domain would always use the Germanic plural
style, even if a different plural function is defined in the relevant
messages file. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2859">https://github.com/Pylons/pyramid/pull/2859</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">config.override_asset</span></code> method now occurs during
<code class="docutils literal notranslate"><span class="pre">pyramid.config.PHASE1_CONFIG</span></code> such that it is ordered to execute before
any calls to <code class="docutils literal notranslate"><span class="pre">config.add_translation_dirs</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2873">https://github.com/Pylons/pyramid/pull/2873</a></li>
</ul>
</div>
<div class="section" id="id9">
<h3>Deprecations<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pcreate</span></code> script and related scaffolds have been deprecated in favor
of the popular
<a class="reference external" href="https://cookiecutter.readthedocs.io/en/latest/">cookiecutter</a> project.</p>
<p>All of Pyramid's official scaffolds as well as the tutorials have been
ported to cookiecutters:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-starter">pyramid-cookiecutter-starter</a></li>
<li><a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-alchemy">pyramid-cookiecutter-alchemy</a></li>
<li><a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-zodb">pyramid-cookiecutter-zodb</a></li>
</ul>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2780">https://github.com/Pylons/pyramid/pull/2780</a></p>
</li>
</ul>
</div>
<div class="section" id="id10">
<h3>Documentation Changes<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Update Typographical Conventions.
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2838">https://github.com/Pylons/pyramid/pull/2838</a></p>
</li>
<li><p class="first">Add <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid-nacl-session/en/latest/">pyramid_nacl_session</a>
to session factories. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2791">https://github.com/Pylons/pyramid/issues/2791</a></p>
</li>
<li><p class="first">Update <code class="docutils literal notranslate"><span class="pre">HACKING.txt</span></code> from stale branch that was never merged to master.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2782">https://github.com/Pylons/pyramid/pull/2782</a></p>
</li>
<li><p class="first">Updated Windows installation instructions and related bits.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2661">https://github.com/Pylons/pyramid/issues/2661</a></p>
</li>
<li><p class="first">Fix an inconsistency in the documentation between view predicates and
route predicates and highlight the differences in their APIs.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2764">https://github.com/Pylons/pyramid/pull/2764</a></p>
</li>
<li><p class="first">Clarify a possible misuse of the <code class="docutils literal notranslate"><span class="pre">headers</span></code> kwarg to subclasses of
<code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPException</span></code> in which more appropriate
kwargs from the parent class <code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> should be
used instead. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2750">https://github.com/Pylons/pyramid/pull/2750</a></p>
</li>
<li><p class="first">The SQLAlchemy + URL Dispatch + Jinja2 (<code class="docutils literal notranslate"><span class="pre">wiki2</span></code>) and
ZODB + Traversal + Chameleon (<code class="docutils literal notranslate"><span class="pre">wiki</span></code>) tutorials have been updated to
utilize the new cookiecutters and drop support for the <code class="docutils literal notranslate"><span class="pre">pcreate</span></code>
scaffolds.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2881">https://github.com/Pylons/pyramid/pull/2881</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2883">https://github.com/Pylons/pyramid/pull/2883</a>.</p>
</li>
<li><p class="first">Improve output of p* script descriptions for help.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2886">https://github.com/Pylons/pyramid/pull/2886</a></p>
</li>
<li><p class="first">Quick Tour updated to use cookiecutters instead of pcreate and scaffolds.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2888">https://github.com/Pylons/pyramid/pull/2888</a></p>
</li>
</ul>
</div>
</div>
<div class="section" id="id11">
<h2>1.7 (2016-05-19)<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Fix a bug in the wiki2 tutorial where bcrypt is always expecting byte
strings. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2576">https://github.com/Pylons/pyramid/pull/2576</a></li>
<li>Simplify windows detection code and remove some duplicated data.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2585">https://github.com/Pylons/pyramid/pull/2585</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2586">https://github.com/Pylons/pyramid/pull/2586</a></li>
</ul>
</div>
<div class="section" id="b4-2016-05-12">
<h2>1.7b4 (2016-05-12)<a class="headerlink" href="#b4-2016-05-12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Fixed the exception view tween to re-raise the original exception if
no exception view could be found to handle the exception. This better
allows tweens further up the chain to handle exceptions that were
left unhandled. Previously they would be converted into a
<code class="docutils literal notranslate"><span class="pre">PredicateMismatch</span></code> exception if predicates failed to allow the view to
handle the exception.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2567">https://github.com/Pylons/pyramid/pull/2567</a></li>
<li>Exposed the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IRequestFactory</span></code> interface to mirror
the public <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponseFactory</span></code> interface.</li>
</ul>
</div>
<div class="section" id="b3-2016-05-10">
<h2>1.7b3 (2016-05-10)<a class="headerlink" href="#b3-2016-05-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Fix <code class="docutils literal notranslate"><span class="pre">request.invoke_exception_view</span></code> to raise an <code class="docutils literal notranslate"><span class="pre">HTTPNotFound</span></code>
exception if no view is matched. Previously <code class="docutils literal notranslate"><span class="pre">None</span></code> would be returned
if no views were matched and a <code class="docutils literal notranslate"><span class="pre">PredicateMismatch</span></code> would be raised if
a view &quot;almost&quot; matched (a view was found matching the context).
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2564">https://github.com/Pylons/pyramid/pull/2564</a></li>
<li>Add defaults for py.test configuration and coverage to all three scaffolds,
and update documentation accordingly.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2550">https://github.com/Pylons/pyramid/pull/2550</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">linkcheck</span></code> to <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> for Sphinx. To check the documentation for
broken links, use the command <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">linkcheck</span>
<span class="pre">SPHINXBUILD=$VENV/bin/sphinx-build</span></code>. Also removed and fixed dozens of broken
external links.</li>
<li>Fix the internal runner for scaffold tests to ensure they work with pip
and py.test.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2565">https://github.com/Pylons/pyramid/pull/2565</a></li>
</ul>
</div>
<div class="section" id="b2-2016-05-01">
<h2>1.7b2 (2016-05-01)<a class="headerlink" href="#b2-2016-05-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Removed inclusion of pyramid_tm in development.ini for alchemy scaffold
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2538">https://github.com/Pylons/pyramid/issues/2538</a></li>
<li>A default permission set via <code class="docutils literal notranslate"><span class="pre">config.set_default_permission</span></code> will no
longer be enforced on an exception view. This has been the case for a while
with the default exception views (<code class="docutils literal notranslate"><span class="pre">config.add_notfound_view</span></code> and
<code class="docutils literal notranslate"><span class="pre">config.add_forbidden_view</span></code>), however for any other exception view a
developer had to remember to set <code class="docutils literal notranslate"><span class="pre">permission=NO_PERMISSION_REQUIRED</span></code> or
be surprised when things didn't work. It is still possible to force a
permission check on an exception view by setting the <code class="docutils literal notranslate"><span class="pre">permission</span></code> argument
manually to <code class="docutils literal notranslate"><span class="pre">config.add_view</span></code>. This behavior is consistent with the new
CSRF features added in the 1.7 series.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2534">https://github.com/Pylons/pyramid/pull/2534</a></li>
</ul>
</div>
<div class="section" id="b1-2016-04-25">
<h2>1.7b1 (2016-04-25)<a class="headerlink" href="#b1-2016-04-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>This release announces the beta period for 1.7.</li>
<li>Fix an issue where some files were being included in the alchemy scafffold
which had been removed from the 1.7 series.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2525">https://github.com/Pylons/pyramid/issues/2525</a></li>
</ul>
</div>
<div class="section" id="a2-2016-04-19">
<h2>1.7a2 (2016-04-19)<a class="headerlink" href="#a2-2016-04-19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id12">
<h3>Features<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Automatic CSRF checks are now disabled by default on exception views. They
can be turned back on by setting the appropriate <cite>require_csrf</cite> option on
the view.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2517">https://github.com/Pylons/pyramid/pull/2517</a></li>
<li>The automatic CSRF API was reworked to use a config directive for
setting the options. The <code class="docutils literal notranslate"><span class="pre">pyramid.require_default_csrf</span></code> setting is
no longer supported. Instead, a new <code class="docutils literal notranslate"><span class="pre">config.set_default_csrf_options</span></code>
directive has been introduced that allows the developer to specify
the default value for <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> as well as change the CSRF token,
header and safe request methods. The <code class="docutils literal notranslate"><span class="pre">pyramid.csrf_trusted_origins</span></code>
setting is still supported.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2518">https://github.com/Pylons/pyramid/pull/2518</a></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Bug fixes<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>CSRF origin checks had a bug causing the checks to always fail.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2512">https://github.com/Pylons/pyramid/pull/2512</a></li>
<li>Fix the test suite to pass on windows.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2520">https://github.com/Pylons/pyramid/pull/2520</a></li>
</ul>
</div>
</div>
<div class="section" id="a1-2016-04-16">
<h2>1.7a1 (2016-04-16)<a class="headerlink" href="#a1-2016-04-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id14">
<h3>Backward Incompatibilities<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Following the Pyramid deprecation period (1.4 -&gt; 1.6),
AuthTktAuthenticationPolicy's default hashing algorithm is changing from md5
to sha512. If you are using the authentication policy and need to continue
using md5, please explicitly set hashalg to 'md5'.</p>
<p>This change does mean that any existing auth tickets (and associated cookies)
will no longer be valid, and users will no longer be logged in, and have to
login to their accounts again.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2496">https://github.com/Pylons/pyramid/pull/2496</a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">check_csrf_token</span></code> function no longer validates a csrf token in the
query string of a request. Only headers and request bodies are supported.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2500">https://github.com/Pylons/pyramid/pull/2500</a></p>
</li>
</ul>
</div>
<div class="section" id="id15">
<h3>Features<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a new setting, <code class="docutils literal notranslate"><span class="pre">pyramid.require_default_csrf</span></code> which may be used
to turn on CSRF checks globally for every POST request in the application.
This should be considered a good default for websites built on Pyramid.
It is possible to opt-out of CSRF checks on a per-view basis by setting
<code class="docutils literal notranslate"><span class="pre">require_csrf=False</span></code> on those views.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2413">https://github.com/Pylons/pyramid/pull/2413</a></li>
<li>Added a <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> view option which will enforce CSRF checks on any
request with an unsafe method as defined by RFC2616. If the CSRF check fails
a <code class="docutils literal notranslate"><span class="pre">BadCSRFToken</span></code> exception will be raised and may be caught by exception
views (the default response is a <code class="docutils literal notranslate"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></code>). This option should be
used in place of the deprecated <code class="docutils literal notranslate"><span class="pre">check_csrf</span></code> view predicate which would
normally result in unexpected <code class="docutils literal notranslate"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></code> response to the client
instead of a catchable exception.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2413">https://github.com/Pylons/pyramid/pull/2413</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2500">https://github.com/Pylons/pyramid/pull/2500</a></li>
<li>Added an additional CSRF validation that checks the origin/referrer of a
request and makes sure it matches the current <code class="docutils literal notranslate"><span class="pre">request.domain</span></code>. This
particular check is only active when accessing a site over HTTPS as otherwise
browsers don't always send the required information. If this additional CSRF
validation fails a <code class="docutils literal notranslate"><span class="pre">BadCSRFOrigin</span></code> exception will be raised and may be
caught by exception views (the default response is <code class="docutils literal notranslate"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></code>).
Additional allowed origins may be configured by setting
<code class="docutils literal notranslate"><span class="pre">pyramid.csrf_trusted_origins</span></code> to a list of domain names (with ports if on
a non standard port) to allow. Subdomains are not allowed unless the domain
name has been prefixed with a <code class="docutils literal notranslate"><span class="pre">.</span></code>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2501">https://github.com/Pylons/pyramid/pull/2501</a></li>
<li>Added a new <code class="docutils literal notranslate"><span class="pre">pyramid.session.check_csrf_origin</span></code> API for validating the
origin or referrer headers against the request's domain.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2501">https://github.com/Pylons/pyramid/pull/2501</a></li>
<li>Pyramid HTTPExceptions will now take into account the best match for the
clients Accept header, and depending on what is requested will return
text/html, application/json or text/plain. The default for <em>/</em> is still
text/html, but if application/json is explicitly mentioned it will now
receive a valid JSON response. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2489">https://github.com/Pylons/pyramid/pull/2489</a></li>
<li>A new event and interface (BeforeTraversal) has been introduced that will
notify listeners before traversal starts in the router. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2469">https://github.com/Pylons/pyramid/pull/2469</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1876">https://github.com/Pylons/pyramid/pull/1876</a></li>
<li>Add a new &quot;view deriver&quot; concept to Pyramid to allow framework authors to
inject elements into the standard Pyramid view pipeline and affect all
views in an application. This is similar to a decorator except that it
has access to options passed to <code class="docutils literal notranslate"><span class="pre">config.add_view</span></code> and can affect other
stages of the pipeline such as the raw response from a view or prior to
security checks. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2021">https://github.com/Pylons/pyramid/pull/2021</a></li>
<li>Allow a leading <code class="docutils literal notranslate"><span class="pre">=</span></code> on the key of the request param predicate.
For example, '=abc=1' is equivalent down to
<code class="docutils literal notranslate"><span class="pre">request.params['=abc']</span> <span class="pre">==</span> <span class="pre">'1'</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1370">https://github.com/Pylons/pyramid/pull/1370</a></li>
<li>A new <code class="docutils literal notranslate"><span class="pre">request.invoke_exception_view(...)</span></code> method which can be used to
invoke an exception view and get back a response. This is useful for
rendering an exception view outside of the context of the excview tween
where you may need more control over the request.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2393">https://github.com/Pylons/pyramid/pull/2393</a></li>
<li>Allow using variable substitutions like <code class="docutils literal notranslate"><span class="pre">%(LOGGING_LOGGER_ROOT_LEVEL)s</span></code>
for logging sections of the .ini file and populate these variables from
the <code class="docutils literal notranslate"><span class="pre">pserve</span></code> command line -- e.g.:
<code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">development.ini</span> <span class="pre">LOGGING_LOGGER_ROOT_LEVEL=DEBUG</span></code>
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2399">https://github.com/Pylons/pyramid/pull/2399</a></li>
</ul>
</div>
<div class="section" id="id16">
<h3>Documentation Changes<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A complete overhaul of the docs:</p>
<ul class="simple">
<li>Use pip instead of easy_install.</li>
<li>Become opinionated by preferring Python 3.4 or greater to simplify
installation of Python and its required packaging tools.</li>
<li>Use venv for the tool, and virtual environment for the thing created,
instead of virtualenv.</li>
<li>Use py.test and pytest-cov instead of nose and coverage.</li>
<li>Further updates to the scaffolds as well as tutorials and their src files.</li>
</ul>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2468">https://github.com/Pylons/pyramid/pull/2468</a></p>
</li>
<li><p class="first">A complete overhaul of the <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold as well as the
Wiki2 SQLAlchemy + URLDispatch tutorial to introduce more modern features
into the usage of SQLAlchemy with Pyramid and provide a better starting
point for new projects.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2024">https://github.com/Pylons/pyramid/pull/2024</a></p>
</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Bug Fixes<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--browser</span></code> to use the <code class="docutils literal notranslate"><span class="pre">--server-name</span></code> instead of the
app name when selecting a section to use. This was only working for people
who had server and app sections with the same name, for example
<code class="docutils literal notranslate"><span class="pre">[app:main]</span></code> and <code class="docutils literal notranslate"><span class="pre">[server:main]</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2292">https://github.com/Pylons/pyramid/pull/2292</a></li>
</ul>
</div>
<div class="section" id="id18">
<h3>Deprecations<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">check_csrf</span></code> view predicate has been deprecated. Use the
new <code class="docutils literal notranslate"><span class="pre">require_csrf</span></code> option or the <code class="docutils literal notranslate"><span class="pre">pyramid.require_default_csrf</span></code> setting
to ensure that the <code class="docutils literal notranslate"><span class="pre">BadCSRFToken</span></code> exception is raised.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2413">https://github.com/Pylons/pyramid/pull/2413</a></li>
<li>Support for Python 3.3 will be removed in Pyramid 1.8.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/2477">https://github.com/Pylons/pyramid/issues/2477</a></li>
<li>Python 2.6 is no longer supported by Pyramid. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/2368">https://github.com/Pylons/pyramid/issues/2368</a></li>
<li>Dropped Python 3.2 support.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2256">https://github.com/Pylons/pyramid/pull/2256</a></li>
</ul>
</div>
</div>
<div class="section" id="id19">
<h2>1.6 (2016-01-03)<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id20">
<h3>Deprecations<a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Continue removal of <code class="docutils literal notranslate"><span class="pre">pserve</span></code> daemon/process management features
by deprecating <code class="docutils literal notranslate"><span class="pre">--user</span></code> and <code class="docutils literal notranslate"><span class="pre">--group</span></code> options.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2190">https://github.com/Pylons/pyramid/pull/2190</a></li>
</ul>
</div>
</div>
<div class="section" id="b3-2015-12-17">
<h2>1.6b3 (2015-12-17)<a class="headerlink" href="#b3-2015-12-17" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id21">
<h3>Backward Incompatibilities<a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Remove the <code class="docutils literal notranslate"><span class="pre">cachebust</span></code> option from <code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code>. See
<code class="docutils literal notranslate"><span class="pre">config.add_cache_buster</span></code> for the new way to attach cache busters to
static assets.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2186">https://github.com/Pylons/pyramid/pull/2186</a></p>
</li>
<li><p class="first">Modify the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ICacheBuster</span></code> API to be a simple callable
instead of an object with <code class="docutils literal notranslate"><span class="pre">match</span></code> and <code class="docutils literal notranslate"><span class="pre">pregenerate</span></code> methods. Cache
busters are now focused solely on generation. Matching has been dropped.</p>
<p>Note this affects usage of <code class="docutils literal notranslate"><span class="pre">pyramid.static.QueryStringCacheBuster</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.static.ManifestCacheBuster</span></code>.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2186">https://github.com/Pylons/pyramid/pull/2186</a></p>
</li>
</ul>
</div>
<div class="section" id="id22">
<h3>Features<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a new <code class="docutils literal notranslate"><span class="pre">config.add_cache_buster</span></code> API for attaching cache busters to
static assets. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2186">https://github.com/Pylons/pyramid/pull/2186</a></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Bug Fixes<a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">IAssetDescriptor.abspath</span></code> always returns an absolute path.
There were cases depending on the process CWD that a relative path would
be returned. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/2188">https://github.com/Pylons/pyramid/issues/2188</a></li>
</ul>
</div>
</div>
<div class="section" id="b2-2015-10-15">
<h2>1.6b2 (2015-10-15)<a class="headerlink" href="#b2-2015-10-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id24">
<h3>Features<a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Allow asset specifications to be supplied to
<code class="docutils literal notranslate"><span class="pre">pyramid.static.ManifestCacheBuster</span></code> instead of requiring a
filesystem path.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2015-10-15">
<h2>1.6b1 (2015-10-15)<a class="headerlink" href="#b1-2015-10-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id25">
<h3>Backward Incompatibilities<a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">IPython and BPython support have been removed from pshell in the core.
To continue using them on Pyramid 1.6+ you must install the binding
packages explicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyramid_ipython

or

$ pip install pyramid_bpython
</pre></div>
</div>
</li>
<li><p class="first">Remove default cache busters introduced in 1.6a1 including
<code class="docutils literal notranslate"><span class="pre">PathSegmentCacheBuster</span></code>, <code class="docutils literal notranslate"><span class="pre">PathSegmentMd5CacheBuster</span></code>, and
<code class="docutils literal notranslate"><span class="pre">QueryStringMd5CacheBuster</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2116">https://github.com/Pylons/pyramid/pull/2116</a></p>
</li>
</ul>
</div>
<div class="section" id="id26">
<h3>Features<a class="headerlink" href="#id26" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Additional shells for <code class="docutils literal notranslate"><span class="pre">pshell</span></code> can now be registered as entrypoints. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1891">https://github.com/Pylons/pyramid/pull/1891</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2012">https://github.com/Pylons/pyramid/pull/2012</a></li>
<li>The variables injected into <code class="docutils literal notranslate"><span class="pre">pshell</span></code> are now displayed with their
docstrings instead of the default <code class="docutils literal notranslate"><span class="pre">str(obj)</span></code> when possible.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1929">https://github.com/Pylons/pyramid/pull/1929</a></li>
<li>Add new <code class="docutils literal notranslate"><span class="pre">pyramid.static.ManifestCacheBuster</span></code> for use with external
asset pipelines as well as examples of common usages in the narrative.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2116">https://github.com/Pylons/pyramid/pull/2116</a></li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> to not crash on syntax errors!!!
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2125">https://github.com/Pylons/pyramid/pull/2125</a></li>
<li>Fix an issue when user passes unparsed strings to <code class="docutils literal notranslate"><span class="pre">pyramid.session.CookieSession</span></code>
and <code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktCookieHelper</span></code> for time related parameters
<code class="docutils literal notranslate"><span class="pre">timeout</span></code>, <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code>, <code class="docutils literal notranslate"><span class="pre">max_age</span></code> that expect an integer value.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2050">https://github.com/Pylons/pyramid/pull/2050</a></li>
</ul>
</div>
<div class="section" id="id27">
<h3>Bug Fixes<a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPException</span></code> now defaults to
<code class="docutils literal notranslate"><span class="pre">520</span> <span class="pre">Unknown</span> <span class="pre">Error</span></code> instead of <code class="docutils literal notranslate"><span class="pre">None</span> <span class="pre">None</span></code> to conform with changes in
WebOb 1.5.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1865">https://github.com/Pylons/pyramid/pull/1865</a></li>
<li><code class="docutils literal notranslate"><span class="pre">pshell</span></code> will now preserve the capitalization of variables in the
<code class="docutils literal notranslate"><span class="pre">[pshell]</span></code> section of the INI file. This makes exposing classes to the
shell a little more straightfoward.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1883">https://github.com/Pylons/pyramid/pull/1883</a></li>
<li>Fixed usage of <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--monitor-restart</span> <span class="pre">--daemon</span></code> which would fail in
horrible ways. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2118">https://github.com/Pylons/pyramid/pull/2118</a></li>
<li>Explicitly prevent <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span> <span class="pre">--daemon</span></code> from being used. It's never
been supported but would work and fail in weird ways.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2119">https://github.com/Pylons/pyramid/pull/2119</a></li>
<li>Fix an issue on Windows when running <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> in which the
process failed to fork because it could not find the pserve script to
run. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2138">https://github.com/Pylons/pyramid/pull/2138</a></li>
</ul>
</div>
<div class="section" id="id28">
<h3>Deprecations<a class="headerlink" href="#id28" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecate <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--monitor-restart</span></code> in favor of user's using a real
process manager such as Systemd or Upstart as well as Python-based
solutions like Circus and Supervisor.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2120">https://github.com/Pylons/pyramid/pull/2120</a></li>
</ul>
</div>
</div>
<div class="section" id="a2-2015-06-30">
<h2>1.6a2 (2015-06-30)<a class="headerlink" href="#a2-2015-06-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id29">
<h3>Bug Fixes<a class="headerlink" href="#id29" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.exception_response</span></code> returns the
appropriate &quot;concrete&quot; class for <code class="docutils literal notranslate"><span class="pre">400</span></code> and <code class="docutils literal notranslate"><span class="pre">500</span></code> status codes.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1832">https://github.com/Pylons/pyramid/issues/1832</a></li>
<li>Fix an infinite recursion bug introduced in 1.6a1 when
<code class="docutils literal notranslate"><span class="pre">pyramid.view.render_view_to_response</span></code> was called directly or indirectly.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1643">https://github.com/Pylons/pyramid/issues/1643</a></li>
<li>Further fix the JSONP renderer by prefixing the returned content with
a comment. This should mitigate attacks from Flash (See CVE-2014-4671).
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1649">https://github.com/Pylons/pyramid/pull/1649</a></li>
<li>Allow periods and brackets (<code class="docutils literal notranslate"><span class="pre">[]</span></code>) in the JSONP callback. The original
fix was overly-restrictive and broke Angular.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1649">https://github.com/Pylons/pyramid/pull/1649</a></li>
</ul>
</div>
</div>
<div class="section" id="a1-2015-04-15">
<h2>1.6a1 (2015-04-15)<a class="headerlink" href="#a1-2015-04-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id30">
<h3>Features<a class="headerlink" href="#id30" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>pcreate will now ask for confirmation if invoked with
an argument for a project name that already exists or
is importable in the current environment.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1357">https://github.com/Pylons/pyramid/issues/1357</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1837">https://github.com/Pylons/pyramid/pull/1837</a></li>
<li>Make it possible to subclass <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> and also use
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.add_request.method</span></code>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1529">https://github.com/Pylons/pyramid/issues/1529</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> has grown the ability to allow
actions to call other actions during a commit-cycle. This enables much more
logic to be placed into actions, such as the ability to invoke other actions
or group them for improved conflict detection. We have also exposed and
documented the config phases that Pyramid uses in order to further assist
in building conforming addons.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1513">https://github.com/Pylons/pyramid/pull/1513</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">pyramid.request.apply_request_extensions</span></code> function which can be
used in testing to apply any request extensions configured via
<code class="docutils literal notranslate"><span class="pre">config.add_request_method</span></code>. Previously it was only possible to test
the extensions by going through Pyramid's router.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1581">https://github.com/Pylons/pyramid/pull/1581</a></li>
<li>pcreate when run without a scaffold argument will now print information on
the missing flag, as well as a list of available scaffolds.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1566">https://github.com/Pylons/pyramid/pull/1566</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1297">https://github.com/Pylons/pyramid/issues/1297</a></li>
<li>Added support / testing for 'pypy3' under Tox and Travis.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1469">https://github.com/Pylons/pyramid/pull/1469</a></li>
<li>Automate code coverage metrics across py2 and py3 instead of just py2.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1471">https://github.com/Pylons/pyramid/pull/1471</a></li>
<li>Cache busting for static resources has been added and is available via a new
argument to <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_static_view</span></code>: <code class="docutils literal notranslate"><span class="pre">cachebust</span></code>.
Core APIs are shipped for both cache busting via query strings and
path segments and may be extended to fit into custom asset pipelines.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1380">https://github.com/Pylons/pyramid/pull/1380</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1583">https://github.com/Pylons/pyramid/pull/1583</a></li>
<li>Add <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.root_package</span></code> attribute and init
parameter to assist with includeable packages that wish to resolve
resources relative to the package in which the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> was created.
This is especially useful for addons that need to load asset specs from
settings, in which case it is may be natural for a developer to define
imports or assets relative to the top-level package.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1337">https://github.com/Pylons/pyramid/pull/1337</a></li>
<li>Added line numbers to the log formatters in the scaffolds to assist with
debugging. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1326">https://github.com/Pylons/pyramid/pull/1326</a></li>
<li>Add new HTTP exception objects for status codes
<code class="docutils literal notranslate"><span class="pre">428</span> <span class="pre">Precondition</span> <span class="pre">Required</span></code>, <code class="docutils literal notranslate"><span class="pre">429</span> <span class="pre">Too</span> <span class="pre">Many</span> <span class="pre">Requests</span></code> and
<code class="docutils literal notranslate"><span class="pre">431</span> <span class="pre">Request</span> <span class="pre">Header</span> <span class="pre">Fields</span> <span class="pre">Too</span> <span class="pre">Large</span></code> in <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1372/files">https://github.com/Pylons/pyramid/pull/1372/files</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">pshell</span></code> script will now load a <code class="docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code> file if one is
defined in the environment prior to launching the interpreter.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1448">https://github.com/Pylons/pyramid/pull/1448</a></li>
<li>Make it simple to define notfound and forbidden views that wish to use
the default exception-response view but with altered predicates and other
configuration options. The <code class="docutils literal notranslate"><span class="pre">view</span></code> argument is now optional in
<code class="docutils literal notranslate"><span class="pre">config.add_notfound_view</span></code> and <code class="docutils literal notranslate"><span class="pre">config.add_forbidden_view</span></code>..
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/494">https://github.com/Pylons/pyramid/issues/494</a></li>
<li>Greatly improve the readability of the <code class="docutils literal notranslate"><span class="pre">pcreate</span></code> shell script output.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1453">https://github.com/Pylons/pyramid/pull/1453</a></li>
<li>Improve robustness to timing attacks in the <code class="docutils literal notranslate"><span class="pre">AuthTktCookieHelper</span></code> and
the <code class="docutils literal notranslate"><span class="pre">SignedCookieSessionFactory</span></code> classes by using the stdlib's
<code class="docutils literal notranslate"><span class="pre">hmac.compare_digest</span></code> if it is available (such as Python 2.7.7+ and 3.3+).
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1457">https://github.com/Pylons/pyramid/pull/1457</a></li>
<li>Assets can now be overidden by an absolute path on the filesystem when using
the <code class="docutils literal notranslate"><span class="pre">config.override_asset</span></code> API. This makes it possible to fully support
serving up static content from a mutable directory while still being able
to use the <code class="docutils literal notranslate"><span class="pre">request.static_url</span></code> API and <code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code>.
Previously it was not possible to use <code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code> with an
absolute path <strong>and</strong> generate urls to the content. This change replaces
the call, <code class="docutils literal notranslate"><span class="pre">config.add_static_view('/abs/path',</span> <span class="pre">'static')</span></code>, with
<code class="docutils literal notranslate"><span class="pre">config.add_static_view('myapp:static',</span> <span class="pre">'static')</span></code> and
<code class="docutils literal notranslate"><span class="pre">config.override_asset(to_override='myapp:static/',</span>
<span class="pre">override_with='/abs/path/')</span></code>. The <code class="docutils literal notranslate"><span class="pre">myapp:static</span></code> asset spec is completely
made up and does not need to exist - it is used for generating urls
via <code class="docutils literal notranslate"><span class="pre">request.static_url('myapp:static/foo.png')</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1252">https://github.com/Pylons/pyramid/issues/1252</a></li>
<li>Added <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_response_factory</span></code> and the
<code class="docutils literal notranslate"><span class="pre">response_factory</span></code> keyword argument to the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> for defining
a factory that will return a custom <code class="docutils literal notranslate"><span class="pre">Response</span></code> class.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1499">https://github.com/Pylons/pyramid/pull/1499</a></li>
<li>Allow an iterator to be returned from a renderer. Previously it was only
possible to return bytes or unicode.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1417">https://github.com/Pylons/pyramid/pull/1417</a></li>
<li><code class="docutils literal notranslate"><span class="pre">pserve</span></code> can now take a <code class="docutils literal notranslate"><span class="pre">-b</span></code> or <code class="docutils literal notranslate"><span class="pre">--browser</span></code> option to open the server
URL in a web browser. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1533">https://github.com/Pylons/pyramid/pull/1533</a></li>
<li>Overall improvments for the <code class="docutils literal notranslate"><span class="pre">proutes</span></code> command. Added <code class="docutils literal notranslate"><span class="pre">--format</span></code> and
<code class="docutils literal notranslate"><span class="pre">--glob</span></code> arguments to the command, introduced the <code class="docutils literal notranslate"><span class="pre">method</span></code>
column for displaying available request methods, and improved the <code class="docutils literal notranslate"><span class="pre">view</span></code>
output by showing the module instead of just <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1488">https://github.com/Pylons/pyramid/pull/1488</a></li>
<li>Support keyword-only arguments and function annotations in views in
Python 3. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1556">https://github.com/Pylons/pyramid/pull/1556</a></li>
<li><code class="docutils literal notranslate"><span class="pre">request.response</span></code> will no longer be mutated when using the
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render_to_response()</span></code> API.  It is now necessary to
pass in a <code class="docutils literal notranslate"><span class="pre">response=</span></code> argument to <code class="docutils literal notranslate"><span class="pre">render_to_response</span></code> if you wish to
supply the renderer with a custom response object for it to use. If you
do not pass one then a response object will be created using the
application's <code class="docutils literal notranslate"><span class="pre">IResponseFactory</span></code>. Almost all renderers
mutate the <code class="docutils literal notranslate"><span class="pre">request.response</span></code> response object (for example, the JSON
renderer sets <code class="docutils literal notranslate"><span class="pre">request.response.content_type</span></code> to <code class="docutils literal notranslate"><span class="pre">application/json</span></code>).
However, when invoking <code class="docutils literal notranslate"><span class="pre">render_to_response</span></code> it is not expected that the
response object being returned would be the same one used later in the
request. The response object returned from <code class="docutils literal notranslate"><span class="pre">render_to_response</span></code> is now
explicitly different from <code class="docutils literal notranslate"><span class="pre">request.response</span></code>. This does not change the
API of a renderer. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1563">https://github.com/Pylons/pyramid/pull/1563</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">append_slash</span></code> argument of <code class="docutils literal notranslate"><span class="pre">`Configurator().add_notfound_view()</span></code> will
now accept anything that implements the <code class="docutils literal notranslate"><span class="pre">IResponse</span></code> interface and will use
that as the response class instead of the default <code class="docutils literal notranslate"><span class="pre">HTTPFound</span></code>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1610">https://github.com/Pylons/pyramid/pull/1610</a></li>
</ul>
</div>
<div class="section" id="id31">
<h3>Bug Fixes<a class="headerlink" href="#id31" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The JSONP renderer created JavaScript code in such a way that a callback
variable could be used to arbitrarily inject javascript into the response
object. <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1627">https://github.com/Pylons/pyramid/pull/1627</a></li>
<li>Work around an issue where <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> would leave terminal echo
disabled if it reloaded during a pdb session.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1577">https://github.com/Pylons/pyramid/pull/1577</a>,
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1592">https://github.com/Pylons/pyramid/pull/1592</a></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp2</span></code> now raise
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when accidentally passed <code class="docutils literal notranslate"><span class="pre">None</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1320">https://github.com/Pylons/pyramid/pull/1320</a></li>
<li>Fix an issue whereby predicates would be resolved as maybe_dotted in the
introspectable but not when passed for registration. This would mean that
<code class="docutils literal notranslate"><span class="pre">add_route_predicate</span></code> for example can not take a string and turn it into
the actual callable function.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1306">https://github.com/Pylons/pyramid/pull/1306</a></li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> to return a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> with a proper
package. Previously it was not possible to do package-relative includes
using the returned <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> during testing. There is now a
<code class="docutils literal notranslate"><span class="pre">package</span></code> argument that can override this behavior as well.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1322">https://github.com/Pylons/pyramid/pull/1322</a></li>
<li>Fix an issue where a <code class="docutils literal notranslate"><span class="pre">pyramid.response.FileResponse</span></code> may apply a charset
where it does not belong. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1251">https://github.com/Pylons/pyramid/pull/1251</a></li>
<li>Work around a bug introduced in Python 2.7.7 on Windows where
<code class="docutils literal notranslate"><span class="pre">mimetypes.guess_type</span></code> returns Unicode rather than str for the content
type, unlike any previous version of Python.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1360">https://github.com/Pylons/pyramid/issues/1360</a> for more information.</li>
<li><code class="docutils literal notranslate"><span class="pre">pcreate</span></code> now normalizes the package name by converting hyphens to
underscores. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1376">https://github.com/Pylons/pyramid/pull/1376</a></li>
<li>Fix an issue with the final response/finished callback being unable to
add another callback to the list. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1373">https://github.com/Pylons/pyramid/pull/1373</a></li>
<li>Fix a failing unittest caused by differing mimetypes across various OSs.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1405">https://github.com/Pylons/pyramid/issues/1405</a></li>
<li>Fix route generation for static view asset specifications having no path.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1377">https://github.com/Pylons/pyramid/pull/1377</a></li>
<li>Allow the <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.JSONP</span></code> renderer to work even if there is no
valid request object. In this case it will not wrap the object in a
callback and thus behave just like the <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.JSON</span></code> renderer.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1561">https://github.com/Pylons/pyramid/pull/1561</a></li>
<li>Prevent &quot;parameters to load are deprecated&quot; <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>
from setuptools&gt;=11.3. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1541">https://github.com/Pylons/pyramid/pull/1541</a></li>
<li>Avoiding sharing the <code class="docutils literal notranslate"><span class="pre">IRenderer</span></code> objects across threads when attached to
a view using the <cite>renderer=</cite> argument. These renderers were instantiated
at time of first render and shared between requests, causing potentially
subtle effects like <cite>pyramid.reload_templates = true</cite> failing to work
in <cite>pyramid_mako</cite>. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1575">https://github.com/Pylons/pyramid/pull/1575</a>
and <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1268">https://github.com/Pylons/pyramid/issues/1268</a></li>
<li>Avoiding timing attacks against CSRF tokens.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1574">https://github.com/Pylons/pyramid/pull/1574</a></li>
<li><code class="docutils literal notranslate"><span class="pre">request.finished_callbacks</span></code> and <code class="docutils literal notranslate"><span class="pre">request.response_callbacks</span></code> now
default to an iterable instead of <code class="docutils literal notranslate"><span class="pre">None</span></code>. It may be checked for a length
of 0. This was the behavior in 1.5.</li>
</ul>
</div>
<div class="section" id="id32">
<h3>Deprecations<a class="headerlink" href="#id32" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pserve</span></code> command's daemonization features have been deprecated. This
includes the <code class="docutils literal notranslate"><span class="pre">[start,stop,restart,status]</span></code> subcommands as well as the
<code class="docutils literal notranslate"><span class="pre">--daemon</span></code>, <code class="docutils literal notranslate"><span class="pre">--stop-server</span></code>, <code class="docutils literal notranslate"><span class="pre">--pid-file</span></code>, and <code class="docutils literal notranslate"><span class="pre">--status</span></code> flags.</p>
<p>Please use a real process manager in the future instead of relying on the
<code class="docutils literal notranslate"><span class="pre">pserve</span></code> to daemonize itself. Many options exist including your Operating
System's services such as Systemd or Upstart, as well as Python-based
solutions like Circus and Supervisor.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1641">https://github.com/Pylons/pyramid/pull/1641</a></p>
</li>
<li><p class="first">Renamed the <code class="docutils literal notranslate"><span class="pre">principal</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pyramid.security.remember()</span></code> to
<code class="docutils literal notranslate"><span class="pre">userid</span></code> in order to clarify its intended purpose.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1399">https://github.com/Pylons/pyramid/pull/1399</a></p>
</li>
</ul>
</div>
<div class="section" id="docs">
<h3>Docs<a class="headerlink" href="#docs" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Moved the documentation for <code class="docutils literal notranslate"><span class="pre">accept</span></code> on <code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> to no
longer be part of the predicate list. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1391">https://github.com/Pylons/pyramid/issues/1391</a> for a bug report stating
<code class="docutils literal notranslate"><span class="pre">not_</span></code> was failing on <code class="docutils literal notranslate"><span class="pre">accept</span></code>. Discussion with &#64;mcdonc led to the
conclusion that it should not be documented as a predicate.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1487">https://github.com/Pylons/pyramid/pull/1487</a> for this PR</li>
<li>Removed logging configuration from Quick Tutorial ini files except for
scaffolding- and logging-related chapters to avoid needing to explain it too
early.</li>
<li>Clarify a previously-implied detail of the <code class="docutils literal notranslate"><span class="pre">ISession.invalidate</span></code> API
documentation.</li>
<li>Improve and clarify the documentation on what Pyramid defines as a
<code class="docutils literal notranslate"><span class="pre">principal</span></code> and a <code class="docutils literal notranslate"><span class="pre">userid</span></code> in its security APIs.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1399">https://github.com/Pylons/pyramid/pull/1399</a></li>
<li>Add documentation of command line programs (<code class="docutils literal notranslate"><span class="pre">p*</span></code> scripts). See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2191">https://github.com/Pylons/pyramid/pull/2191</a></li>
</ul>
</div>
<div class="section" id="scaffolds">
<h3>Scaffolds<a class="headerlink" href="#scaffolds" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Update scaffold generating machinery to return the version of pyramid and
pyramid docs for use in scaffolds. Updated starter, alchemy and zodb
templates to have links to correctly versioned documentation and reflect
which pyramid was used to generate the scaffold.</li>
<li>Removed non-ascii copyright symbol from templates, as this was
causing the scaffolds to fail for project generation.</li>
<li>You can now run the scaffolding func tests via <code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">py2-scaffolds</span></code> and
<code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">py3-scaffolds</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="id33">
<h2>1.5 (2014-04-08)<a class="headerlink" href="#id33" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Python 3.4 compatibility.</li>
<li>Avoid crash in <code class="docutils literal notranslate"><span class="pre">pserve</span> <span class="pre">--reload</span></code> under Py3k, when iterating over possibly
mutated <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></code> failed if the secret contained
higher order characters. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1246">https://github.com/Pylons/pyramid/issues/1246</a></li>
<li>Fixed a bug in <code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></code> and
<code class="docutils literal notranslate"><span class="pre">SignedCookieSessionFactory</span></code> where <code class="docutils literal notranslate"><span class="pre">timeout=None</span></code> would cause a new
session to always be created. Also in <code class="docutils literal notranslate"><span class="pre">SignedCookieSessionFactory</span></code> a
<code class="docutils literal notranslate"><span class="pre">reissue_time=None</span></code> would cause an exception when modifying the session.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1247">https://github.com/Pylons/pyramid/issues/1247</a></li>
<li>Updated docs and scaffolds to keep in step with new 2.0 release of
<code class="docutils literal notranslate"><span class="pre">Lingua</span></code>.  This included removing all <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files from scaffolds
and documentation environments.</li>
</ul>
</div>
<div class="section" id="b1-2014-02-08">
<h2>1.5b1 (2014-02-08)<a class="headerlink" href="#b1-2014-02-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id34">
<h3>Features<a class="headerlink" href="#id34" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>We no longer eagerly clear <code class="docutils literal notranslate"><span class="pre">request.exception</span></code> and <code class="docutils literal notranslate"><span class="pre">request.exc_info</span></code> in
the exception view tween.  This makes it possible to inspect exception
information within a finished callback.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1223">https://github.com/Pylons/pyramid/issues/1223</a>.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2014-01-28">
<h2>1.5a4 (2014-01-28)<a class="headerlink" href="#a4-2014-01-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id35">
<h3>Features<a class="headerlink" href="#id35" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Updated scaffolds with new theme, fixed documentation and sample project.</li>
</ul>
</div>
<div class="section" id="id36">
<h3>Bug Fixes<a class="headerlink" href="#id36" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Depend on a newer version of WebOb so that we pull in some crucial bug-fixes
that were showstoppers for functionality in Pyramid.</li>
<li>Add a trailing semicolon to the JSONP response. This fixes JavaScript syntax
errors for old IE versions. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1205">https://github.com/Pylons/pyramid/pull/1205</a></li>
<li>Fix a memory leak when the configurator's <code class="docutils literal notranslate"><span class="pre">set_request_property</span></code> method was
used or when the configurator's <code class="docutils literal notranslate"><span class="pre">add_request_method</span></code> method was used with
the <code class="docutils literal notranslate"><span class="pre">property=True</span></code> attribute.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1212">https://github.com/Pylons/pyramid/issues/1212</a> .</li>
</ul>
</div>
</div>
<div class="section" id="a3-2013-12-10">
<h2>1.5a3 (2013-12-10)<a class="headerlink" href="#a3-2013-12-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id37">
<h3>Features<a class="headerlink" href="#id37" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">An authorization API has been added as a method of the
request: <code class="docutils literal notranslate"><span class="pre">request.has_permission</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">request.has_permission</span></code> is a method-based alternative to the
<code class="docutils literal notranslate"><span class="pre">pyramid.security.has_permission</span></code> API and works exactly the same.  The
older API is now deprecated.</p>
</li>
<li><p class="first">Property API attributes have been added to the request for easier access to
authentication data: <code class="docutils literal notranslate"><span class="pre">request.authenticated_userid</span></code>,
<code class="docutils literal notranslate"><span class="pre">request.unauthenticated_userid</span></code>, and <code class="docutils literal notranslate"><span class="pre">request.effective_principals</span></code>.</p>
<p>These are analogues, respectively, of
<code class="docutils literal notranslate"><span class="pre">pyramid.security.authenticated_userid</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.security.unauthenticated_userid</span></code>, and
<code class="docutils literal notranslate"><span class="pre">pyramid.security.effective_principals</span></code>.  They operate exactly the same,
except they are attributes of the request instead of functions accepting a
request.  They are properties, so they cannot be assigned to.  The older
function-based APIs are now deprecated.</p>
</li>
<li><p class="first">Pyramid's console scripts (<code class="docutils literal notranslate"><span class="pre">pserve</span></code>, <code class="docutils literal notranslate"><span class="pre">pviews</span></code>, etc) can now be run
directly, allowing custom arguments to be sent to the python interpreter
at runtime. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">scripts</span><span class="o">.</span><span class="n">pserve</span> <span class="n">development</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
</li>
<li><p class="first">Added a specific subclass of <code class="docutils literal notranslate"><span class="pre">HTTPBadRequest</span></code> named
<code class="docutils literal notranslate"><span class="pre">pyramid.exceptions.BadCSRFToken</span></code> which will now be raised in response
to failures in <code class="docutils literal notranslate"><span class="pre">check_csrf_token</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1149">https://github.com/Pylons/pyramid/pull/1149</a></p>
</li>
<li><p class="first">Added a new <code class="docutils literal notranslate"><span class="pre">SignedCookieSessionFactory</span></code> which is very similar to the
<code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></code> but with a clearer focus on signing
content. The custom serializer arguments to this function should only focus
on serializing, unlike its predecessor which required the serializer to also
perform signing.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a> .  Note
that cookies generated using <code class="docutils literal notranslate"><span class="pre">SignedCookieSessionFactory</span></code> are not
compatible with cookies generated using <code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactory</span></code>,
so existing user session data will be destroyed if you switch to it.</p>
</li>
<li><p class="first">Added a new <code class="docutils literal notranslate"><span class="pre">BaseCookieSessionFactory</span></code> which acts as a generic cookie
factory that can be used by framework implementors to create their own
session implementations. It provides a reusable API which focuses strictly
on providing a dictionary-like object that properly handles renewals,
timeouts, and conformance with the <code class="docutils literal notranslate"><span class="pre">ISession</span></code> API.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a></p>
</li>
<li><p class="first">The anchor argument to <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.route_url</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.resource_url</span></code> and their derivatives will now be
escaped via URL quoting to ensure minimal conformance.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first">Allow sending of <code class="docutils literal notranslate"><span class="pre">_query</span></code> and <code class="docutils literal notranslate"><span class="pre">_anchor</span></code> options to
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url</span></code> when an external URL is being
generated.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first">You can now send a string as the <code class="docutils literal notranslate"><span class="pre">_query</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.route_url</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.resource_url</span></code> and their derivatives.  When a
string is sent instead of a list or dictionary. it is URL-quoted however it
does not need to be in <code class="docutils literal notranslate"><span class="pre">k=v</span></code> form.  This is useful if you want to be able
to use a different query string format than <code class="docutils literal notranslate"><span class="pre">x-www-form-urlencoded</span></code>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1183">https://github.com/Pylons/pyramid/pull/1183</a></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now has a <code class="docutils literal notranslate"><span class="pre">domain</span></code> attribute to match the
new WebOb 1.3 API.  Its value is <code class="docutils literal notranslate"><span class="pre">example.com</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id38">
<h3>Bug Fixes<a class="headerlink" href="#id38" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix the <code class="docutils literal notranslate"><span class="pre">pcreate</span></code> script so that when the target directory name ends with a
slash it does not produce a non-working project directory structure.
Previously saying <code class="docutils literal notranslate"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">starter</span> <span class="pre">/foo/bar/</span></code> produced different output
than  saying <code class="docutils literal notranslate"><span class="pre">pcreate</span> <span class="pre">-s</span> <span class="pre">starter</span> <span class="pre">/foo/bar</span></code>.  The former did not work
properly.</li>
<li>Fix the <code class="docutils literal notranslate"><span class="pre">principals_allowed_by_permission</span></code> method of
<code class="docutils literal notranslate"><span class="pre">ACLAuthorizationPolicy</span></code> so it anticipates a callable <code class="docutils literal notranslate"><span class="pre">__acl__</span></code>
on resources.  Previously it did not try to call the <code class="docutils literal notranslate"><span class="pre">__acl__</span></code>
if it was callable.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pviews</span></code> script did not work when a url required custom request
methods in order to perform traversal. Custom methods and descriptors added
via <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method</span></code> will now be present,
allowing traversal to continue.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1104">https://github.com/Pylons/pyramid/issues/1104</a></li>
<li>Remove unused <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument from <code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code>.</li>
<li>Allow the <code class="docutils literal notranslate"><span class="pre">BasicAuthenticationPolicy</span></code> to work with non-ascii usernames
and passwords. The charset is not passed as part of the header and different
browsers alternate between UTF-8 and Latin-1, so the policy now attempts
to decode with UTF-8 first, and will fallback to Latin-1.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1170">https://github.com/Pylons/pyramid/pull/1170</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">&#64;view_defaults</span></code> now apply to notfound and forbidden views
that are defined as methods of a decorated class.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1173">https://github.com/Pylons/pyramid/issues/1173</a></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a &quot;Quick Tutorial&quot; to go with the Quick Tour</li>
<li>Removed mention of <code class="docutils literal notranslate"><span class="pre">pyramid_beaker</span></code> from docs.  Beaker is no longer
maintained.  Point people at <code class="docutils literal notranslate"><span class="pre">pyramid_redis_sessions</span></code> instead.</li>
<li>Add documentation for <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IRendererFactory</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IRenderer</span></code>.</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h3>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The key/values in the <code class="docutils literal notranslate"><span class="pre">_query</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">request.route_url</span></code> and the
<code class="docutils literal notranslate"><span class="pre">query</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> (and their variants), used
to encode a value of <code class="docutils literal notranslate"><span class="pre">None</span></code> as the string <code class="docutils literal notranslate"><span class="pre">'None'</span></code>, leaving the resulting
query string to be <code class="docutils literal notranslate"><span class="pre">a=b&amp;key=None</span></code>. The value is now dropped in this
situation, leaving a query string of <code class="docutils literal notranslate"><span class="pre">a=b&amp;key=</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1119">https://github.com/Pylons/pyramid/issues/1119</a></li>
</ul>
</div>
<div class="section" id="id39">
<h3>Deprecations<a class="headerlink" href="#id39" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecate the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ITemplateRenderer</span></code> interface. It was
ill-defined and became unused when Mako and Chameleon template bindings were
split into their own packages.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.session.UnencryptedCookieSessionFactoryConfig</span></code> API has been
deprecated and is superseded by the
<code class="docutils literal notranslate"><span class="pre">pyramid.session.SignedCookieSessionFactory</span></code>.  Note that while the cookies
generated by the <code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></code>
are compatible with cookies generated by old releases, cookies generated by
the SignedCookieSessionFactory are not. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1142">https://github.com/Pylons/pyramid/pull/1142</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.security.has_permission</span></code> API is now deprecated.  Instead, use
the newly-added <code class="docutils literal notranslate"><span class="pre">has_permission</span></code> method of the request object.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.security.effective_principals</span></code> API is now deprecated.
Instead, use the newly-added <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> attribute of the
request object.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.security.authenticated_userid</span></code> API is now deprecated.
Instead, use the newly-added <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code> attribute of the
request object.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.security.unauthenticated_userid</span></code> API is now deprecated.
Instead, use the newly-added <code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> attribute of the
request object.</li>
</ul>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid now depends on WebOb&gt;=1.3 (it uses <code class="docutils literal notranslate"><span class="pre">webob.cookies.CookieProfile</span></code>
from 1.3+).</li>
</ul>
</div>
</div>
<div class="section" id="a2-2013-09-22">
<h2>1.5a2 (2013-09-22)<a class="headerlink" href="#a2-2013-09-22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id40">
<h3>Features<a class="headerlink" href="#id40" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Users can now provide dotted Python names to as the <code class="docutils literal notranslate"><span class="pre">factory</span></code> argument
the Configurator methods named <code class="docutils literal notranslate"><span class="pre">add_{view,route,subscriber}_predicate</span></code>
(instead of passing the predicate factory directly, you can pass a
dotted name which refers to the factory).</li>
</ul>
</div>
<div class="section" id="id41">
<h3>Bug Fixes<a class="headerlink" href="#id41" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix an exception in <code class="docutils literal notranslate"><span class="pre">pyramid.path.package_name</span></code> when resolving the package
name for namespace packages that had no <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute.</li>
</ul>
</div>
<div class="section" id="id42">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id42" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Pyramid no longer depends on or configures the Mako and Chameleon templating
system renderers by default.  Disincluding these templating systems by
default means that the Pyramid core has fewer dependencies and can run on
future platforms without immediate concern for the compatibility of its
templating add-ons.  It also makes maintenance slightly more effective, as
different people can maintain the templating system add-ons that they
understand and care about without needing commit access to the Pyramid core,
and it allows users who just don't want to see any packages they don't use
come along for the ride when they install Pyramid.</p>
<p>This means that upon upgrading to Pyramid 1.5a2+, projects that use either
of these templating systems will see a traceback that ends something like
this when their application attempts to render a Chameleon or Mako template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">pt</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">mako</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">mak</span>
</pre></div>
</div>
<p>Support for Mako templating has been moved into an add-on package named
<code class="docutils literal notranslate"><span class="pre">pyramid_mako</span></code>, and support for Chameleon templating has been moved into
an add-on package named <code class="docutils literal notranslate"><span class="pre">pyramid_chameleon</span></code>.  These packages are drop-in
replacements for the old built-in support for these templating langauges.
All you have to do is install them and make them active in your configuration
to register renderer factories for <code class="docutils literal notranslate"><span class="pre">.pt</span></code> and/or <code class="docutils literal notranslate"><span class="pre">.mako</span></code> (or <code class="docutils literal notranslate"><span class="pre">.mak</span></code>) to
make your application work again.</p>
<p>To re-add support for Chameleon and/or Mako template renderers into your
existing projects, follow the below steps.</p>
<p>If you depend on Mako templates:</p>
<ul>
<li><p class="first">Make sure the <code class="docutils literal notranslate"><span class="pre">pyramid_mako</span></code> package is installed.  One way to do this
is by adding <code class="docutils literal notranslate"><span class="pre">pyramid_mako</span></code> to the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> section of your
package's <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file and afterwards rerunning <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">develop</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="c1">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;pyramid_mako&#39;</span><span class="p">,</span>         <span class="c1"># new dependency</span>
        <span class="s1">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c1">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Within the portion of your application which instantiates a Pyramid
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> (often the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function in
your project's <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file), tell Pyramid to include the
<code class="docutils literal notranslate"><span class="pre">pyramid_mako</span></code> includeme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="o">.....</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_mako&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>If you depend on Chameleon templates:</p>
<ul>
<li><p class="first">Make sure the <code class="docutils literal notranslate"><span class="pre">pyramid_chameleon</span></code> package is installed.  One way to do
this is by adding <code class="docutils literal notranslate"><span class="pre">pyramid_chameleon</span></code> to the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> section
of your package's <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file and afterwards rerunning
<code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">develop</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="c1">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">,</span>         <span class="c1"># new dependency</span>
        <span class="s1">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c1">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Within the portion of your application which instantiates a Pyramid
<code class="docutils literal notranslate"><span class="pre">~pyramid.config.Configurator</span></code> (often the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function in
your project's <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file), tell Pyramid to include the
<code class="docutils literal notranslate"><span class="pre">pyramid_chameleon</span></code> includeme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="o">.....</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Note that it's also fine to install these packages into <em>older</em> Pyramids for
forward compatibility purposes.  Even if you don't upgrade to Pyramid 1.5
immediately, performing the above steps in a Pyramid 1.4 installation is
perfectly fine, won't cause any difference, and will give you forward
compatibility when you eventually do upgrade to Pyramid 1.5.</p>
<p>With the removal of Mako and Chameleon support from the core, some
unit tests that use the <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render*</span></code> methods may begin to
fail.  If any of your unit tests are invoking either
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code>  or <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render_to_response()</span></code>
with either Mako or Chameleon templates then the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> instance in effect during
the unit test should be also be updated to include the addons, as shown
above. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_mako&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;mypkg:templates/home.mako&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;mypkg:templates/home.pt&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
</li>
<li><p class="first">If you're using the Pyramid debug toolbar, when you upgrade Pyramid to
1.5a2+, you'll also need to upgrade the <code class="docutils literal notranslate"><span class="pre">pyramid_debugtoolbar</span></code> package to
at least version 1.0.8, as older toolbar versions are not compatible with
Pyramid 1.5a2+ due to the removal of Mako support from the core.  It's
fine to use this newer version of the toolbar code with older Pyramids too.</p>
</li>
<li><p class="first">Removed the <code class="docutils literal notranslate"><span class="pre">request.response_*</span></code> varying attributes. These attributes
have been deprecated since Pyramid 1.1, and as per the deprecation policy,
have now been removed.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">request.response</span></code> will no longer be mutated when using the
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code> API.  Almost all renderers mutate the
<code class="docutils literal notranslate"><span class="pre">request.response</span></code> response object (for example, the JSON renderer sets
<code class="docutils literal notranslate"><span class="pre">request.response.content_type</span></code> to <code class="docutils literal notranslate"><span class="pre">application/json</span></code>), but this is
only necessary when the renderer is generating a response; it was a bug
when it was done as a side effect of calling <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code>.</p>
</li>
<li><p class="first">Removed the <code class="docutils literal notranslate"><span class="pre">bfg2pyramid</span></code> fixer script.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.events.NewResponse</span></code> event is now sent <strong>after</strong> response
callbacks are executed.  It previously executed before response callbacks
were executed.  Rationale: it's more useful to be able to inspect the response
after response callbacks have done their jobs instead of before.</p>
</li>
<li><p class="first">Removed the class named <code class="docutils literal notranslate"><span class="pre">pyramid.view.static</span></code> that had been deprecated
since Pyramid 1.1.  Instead use <code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code> with
<code class="docutils literal notranslate"><span class="pre">use_subpath=True</span></code> argument.</p>
</li>
<li><p class="first">Removed the <code class="docutils literal notranslate"><span class="pre">pyramid.view.is_response</span></code> function that had been deprecated
since Pyramid 1.1.  Use the <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.is_response</span></code> method
instead.</p>
</li>
<li><p class="first">Removed the ability to pass the following arguments to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code>: <code class="docutils literal notranslate"><span class="pre">view</span></code>, <code class="docutils literal notranslate"><span class="pre">view_context</span></code>.
<code class="docutils literal notranslate"><span class="pre">view_for</span></code>, <code class="docutils literal notranslate"><span class="pre">view_permission</span></code>, <code class="docutils literal notranslate"><span class="pre">view_renderer</span></code>, and <code class="docutils literal notranslate"><span class="pre">view_attr</span></code>.
Using these arguments had been deprecated since Pyramid 1.1.  Instead of
passing view-related arguments to <code class="docutils literal notranslate"><span class="pre">add_route</span></code>, use a separate call to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view</span></code> to associate a view with a route
using its <code class="docutils literal notranslate"><span class="pre">route_name</span></code> argument.  Note that this impacts the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_static_view</span></code> function too, because it
delegates to <code class="docutils literal notranslate"><span class="pre">add_route</span></code>.</p>
</li>
<li><p class="first">Removed the ability to influence and query a <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code>
object as if it were a dictionary.  Previously it was possible to use methods
like <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>, <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>, and other dictlike methods to
access values in the WSGI environment.  This behavior had been deprecated
since Pyramid 1.1.  Use methods of <code class="docutils literal notranslate"><span class="pre">request.environ</span></code> (a real dictionary)
instead.</p>
</li>
<li><p class="first">Removed ancient backwards compatibily hack in
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.DefaultRootFactory</span></code> which populated the <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> of
the factory with the matchdict values for compatibility with BFG 0.9.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">renderer_globals_factory</span></code> argument to the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator`</span> <span class="pre">constructor</span> <span class="pre">and</span> <span class="pre">its</span> <span class="pre">``setup_registry</span></code> method
has been removed.  The <code class="docutils literal notranslate"><span class="pre">set_renderer_globals_factory</span></code> method of
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> has also been removed.  The (internal)
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IRendererGlobals</span></code> interface was also removed.  These
arguments, methods and interfaces had been deprecated since 1.1.  Use a
<code class="docutils literal notranslate"><span class="pre">BeforeRender</span></code> event subscriber as documented in the &quot;Hooks&quot; chapter of the
Pyramid narrative documentation instead of providing renderer globals values
to the configurator.</p>
</li>
</ul>
</div>
<div class="section" id="id43">
<h3>Deprecations<a class="headerlink" href="#id43" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property</span></code> method now issues
a deprecation warning when used.  It had been docs-deprecated in 1.4
but did not issue a deprecation warning when used.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2013-08-30">
<h2>1.5a1 (2013-08-30)<a class="headerlink" href="#a1-2013-08-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id44">
<h3>Features<a class="headerlink" href="#id44" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A new http exception subclass named <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPSuccessful</span></code>
was added.  You can use this class as the <code class="docutils literal notranslate"><span class="pre">context</span></code> of an exception
view to catch all 200-series &quot;exceptions&quot; (e.g. &quot;raise HTTPOk&quot;).  This
also allows you to catch <em>only</em> the <code class="docutils literal notranslate"><span class="pre">HTTPOk</span></code> exception itself; previously
this was impossible because a number of other exceptions
(such as <code class="docutils literal notranslate"><span class="pre">HTTPNoContent</span></code>) inherited from <code class="docutils literal notranslate"><span class="pre">HTTPOk</span></code>, but now they do not.</p>
</li>
<li><p class="first">You can now generate &quot;hybrid&quot; urldispatch/traversal URLs more easily
by using the new <code class="docutils literal notranslate"><span class="pre">route_name</span></code>, <code class="docutils literal notranslate"><span class="pre">route_kw</span></code> and <code class="docutils literal notranslate"><span class="pre">route_remainder_name</span></code>
arguments to  <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> and <code class="docutils literal notranslate"><span class="pre">request.resource_path</span></code>.  See
the new section of the &quot;Combining Traversal and URL Dispatch&quot; documentation
chapter entitled  &quot;Hybrid URL Generation&quot;.</p>
</li>
<li><p class="first">It is now possible to escape double braces in Pyramid scaffolds (unescaped,
these represent replacement values).  You can use <code class="docutils literal notranslate"><span class="pre">\{\{a\}\}</span></code> to
represent a &quot;bare&quot; <code class="docutils literal notranslate"><span class="pre">{{a}}</span></code>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/862">https://github.com/Pylons/pyramid/pull/862</a></p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">localizer</span></code> and <code class="docutils literal notranslate"><span class="pre">locale_name</span></code> properties (reified) to the request.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/508">https://github.com/Pylons/pyramid/issues/508</a>.  Note that the
<code class="docutils literal notranslate"><span class="pre">pyramid.i18n.get_localizer</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.i18n.get_locale_name</span></code> functions
now simply look up these properties on the request.</p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">pdistreport</span></code> script, which prints the Python version in use, the
Pyramid version in use, and the version number and location of all Python
distributions currently installed.</p>
</li>
<li><p class="first">Add the ability to invert the result of any view, route, or subscriber
predicate using the <code class="docutils literal notranslate"><span class="pre">not_</span></code> class.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="k">import</span> <span class="n">not_</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;myroute&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>The above example will ensure that the view is called if the request method
is not POST (at least if no other view is more specific).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pyramid.config.not_</span></code> class can be used against any value that is
a predicate value passed in any of these contexts:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.events.subscriber</span></code></li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">scripts/prequest.py</span></code>: add support for submitting <code class="docutils literal notranslate"><span class="pre">PUT</span></code> and <code class="docutils literal notranslate"><span class="pre">PATCH</span></code>
requests.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1033">https://github.com/Pylons/pyramid/pull/1033</a>.  add support for
submitting <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> and <code class="docutils literal notranslate"><span class="pre">PROPFIND</span></code> requests, and  allow users to specify
basic authentication credentials in the request via a <code class="docutils literal notranslate"><span class="pre">--login</span></code> argument to
the script.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1039">https://github.com/Pylons/pyramid/pull/1039</a>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ACLAuthorizationPolicy</span></code> supports <code class="docutils literal notranslate"><span class="pre">__acl__</span></code> as a callable. This
removes the ambiguity between the potential <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> that would
be raised on the <code class="docutils literal notranslate"><span class="pre">context</span></code> when the property was not defined and the
<code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> that could be raised from any user-defined code within
a dynamic property. It is recommended to define a dynamic ACL as a callable
to avoid this ambiguity. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/735">https://github.com/Pylons/pyramid/issues/735</a>.</p>
</li>
<li><p class="first">Allow a protocol-relative URL (e.g. <code class="docutils literal notranslate"><span class="pre">//example.com/images</span></code>) to be passed to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_static_view</span></code>. This allows
externally-hosted static URLs to be generated based on the current protocol.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">AuthTktAuthenticationPolicy</span></code> has two new options to configure its
domain usage:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">parent_domain</span></code>: if set the authentication cookie is set on
the parent domain. This is useful if you have multiple sites sharing the
same domain.</li>
<li><code class="docutils literal notranslate"><span class="pre">domain</span></code>: if provided the cookie is always set for this domain, bypassing
all usual logic.</li>
</ul>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1028">https://github.com/Pylons/pyramid/pull/1028</a>,
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1072">https://github.com/Pylons/pyramid/pull/1072</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1078">https://github.com/Pylons/pyramid/pull/1078</a>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">AuthTktAuthenticationPolicy</span></code> now supports IPv6 addresses when using
the <code class="docutils literal notranslate"><span class="pre">include_ip=True</span></code> option. This is possibly incompatible with
alternative <code class="docutils literal notranslate"><span class="pre">auth_tkt</span></code> implementations, as the specification does not
define how to properly handle IPv6. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/831">https://github.com/Pylons/pyramid/issues/831</a>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments via
<code class="docutils literal notranslate"><span class="pre">pyramid.paster.get_appsettings</span></code>. This also allowed the generated
<code class="docutils literal notranslate"><span class="pre">initialize_db</span></code> script from the <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold to grow support
for options in the form <code class="docutils literal notranslate"><span class="pre">a=1</span> <span class="pre">b=2</span></code> so you can fill in
values in a parameterized <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file, e.g.
<code class="docutils literal notranslate"><span class="pre">initialize_myapp_db</span> <span class="pre">etc/development.ini</span> <span class="pre">a=1</span> <span class="pre">b=2</span></code>.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/911">https://github.com/Pylons/pyramid/pull/911</a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">request.session.check_csrf_token()</span></code> method and the <code class="docutils literal notranslate"><span class="pre">check_csrf</span></code> view
predicate now take into account the value of the HTTP header named
<code class="docutils literal notranslate"><span class="pre">X-CSRF-Token</span></code> (as well as the <code class="docutils literal notranslate"><span class="pre">csrf_token</span></code> form parameter, which they
always did).  The header is tried when the form parameter does not exist.</p>
</li>
<li><p class="first">View lookup will now search for valid views based on the inheritance
hierarchy of the context. It tries to find views based on the most
specific context first, and upon predicate failure, will move up the
inheritance chain to test views found by the super-type of the context.
In the past, only the most specific type containing views would be checked
and if no matching view could be found then a PredicateMismatch would be
raised. Now predicate mismatches don't hide valid views registered on
super-types. Here's an example that now works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IResource</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@implementer</span><span class="p">(</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyResource</span><span class="p">:</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">MyResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">override_post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>
</pre></div>
</div>
<p>Previously the override_post view registration would hide the get
and delete views in the context of MyResource -- leading to a
predicate mismatch error when trying to use GET or DELETE
methods. Now the views are found and no predicate mismatch is
raised.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/786">https://github.com/Pylons/pyramid/pull/786</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1004">https://github.com/Pylons/pyramid/pull/1004</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1046">https://github.com/Pylons/pyramid/pull/1046</a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pserve</span></code> command now takes a <code class="docutils literal notranslate"><span class="pre">-v</span></code> (or <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>) flag and a
<code class="docutils literal notranslate"><span class="pre">-q</span></code> (or <code class="docutils literal notranslate"><span class="pre">--quiet</span></code>) flag.  Output from running <code class="docutils literal notranslate"><span class="pre">pserve</span></code> can be
controlled using these flags.  <code class="docutils literal notranslate"><span class="pre">-v</span></code> can be specified multiple times to
increase verbosity.  <code class="docutils literal notranslate"><span class="pre">-q</span></code> sets verbosity to <code class="docutils literal notranslate"><span class="pre">0</span></code> unconditionally.  The
default verbosity level is <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold tests now provide better coverage.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1029">https://github.com/Pylons/pyramid/pull/1029</a></p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code> method now supports being
called with an external URL as pattern. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/611">https://github.com/Pylons/pyramid/issues/611</a> and the documentation section
in the &quot;URL Dispatch&quot; chapter entitled &quot;External Routes&quot; for more information.</p>
</li>
</ul>
</div>
<div class="section" id="id45">
<h3>Bug Fixes<a class="headerlink" href="#id45" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>It was not possible to use <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.HTTPException</span></code> as
the <code class="docutils literal notranslate"><span class="pre">context</span></code> of an exception view as very general catchall for
http-related exceptions when you wanted that exception view to override the
default exception view.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/985">https://github.com/Pylons/pyramid/issues/985</a></li>
<li>When the <code class="docutils literal notranslate"><span class="pre">pyramid.reload_templates</span></code> setting was true, and a Chameleon
template was reloaded, and the renderer specification named a macro
(e.g. <code class="docutils literal notranslate"><span class="pre">foo#macroname.pt</span></code>), renderings of the template after the template
was reloaded due to a file change would produce the entire template body
instead of just a rendering of the macro.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1013">https://github.com/Pylons/pyramid/issues/1013</a>.</li>
<li>Fix an obscure problem when combining a virtual root with a route with a
<code class="docutils literal notranslate"><span class="pre">*traverse</span></code> in its pattern.  Now the traversal path generated in
such a configuration will be correct, instead of an element missing
a leading slash.</li>
<li>Fixed a Mako renderer bug returning a tuple with a previous defname value
in some circumstances. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1037">https://github.com/Pylons/pyramid/issues/1037</a>
for more information.</li>
<li>Make the <code class="docutils literal notranslate"><span class="pre">pyramid.config.assets.PackageOverrides</span></code> object implement the API
for <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> objects specified in PEP 302.  Proxies to the
<code class="docutils literal notranslate"><span class="pre">__loader__</span></code> set by the importer, if present; otherwise, raises
<code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>.  This makes Pyramid static view overrides work
properly under Python 3.3 (previously they would not).  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1015">https://github.com/Pylons/pyramid/pull/1015</a> for more information.</li>
<li><code class="docutils literal notranslate"><span class="pre">mako_templating</span></code>: added defensive workaround for non-importability of
<code class="docutils literal notranslate"><span class="pre">mako</span></code> due to upstream <code class="docutils literal notranslate"><span class="pre">markupsafe</span></code> dropping Python 3.2 support.  Mako
templating will no longer work under the combination of MarkupSafe 0.17 and
Python 3.2 (although the combination of MarkupSafe 0.17 and Python 3.3 or any
supported Python 2 version will work OK).</li>
<li>Spaces and dots may now be in mako renderer template paths. This was
broken when support for the new makodef syntax was added in 1.4a1.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/950">https://github.com/Pylons/pyramid/issues/950</a></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.debug_authorization=true</span></code> will now correctly print out
<code class="docutils literal notranslate"><span class="pre">Allowed</span></code> for views registered with <code class="docutils literal notranslate"><span class="pre">NO_PERMISSION_REQUIRED</span></code> instead
of invoking the <code class="docutils literal notranslate"><span class="pre">permits</span></code> method of the authorization policy.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/954">https://github.com/Pylons/pyramid/issues/954</a></li>
<li>Pyramid failed to install on some systems due to being packaged with
some test files containing higher order characters in their names. These
files have now been removed. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/981">https://github.com/Pylons/pyramid/issues/981</a></li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyResource</span></code> didn't define <code class="docutils literal notranslate"><span class="pre">__bool__</span></code>, so code under
Python 3 would use <code class="docutils literal notranslate"><span class="pre">__len__</span></code> to find truthiness; this usually caused an
instance of DummyResource to be &quot;falsy&quot; instead of &quot;truthy&quot;.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1032">https://github.com/Pylons/pyramid/pull/1032</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold would break when the database was MySQL during
tables creation.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1049">https://github.com/Pylons/pyramid/pull/1049</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">current_route_url</span></code> method now attaches the query string to the URL by
default. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1040">https://github.com/Pylons/pyramid/issues/1040</a></li>
<li>Make <code class="docutils literal notranslate"><span class="pre">pserve.cherrypy_server_runner</span></code> Python 3 compatible. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/718">https://github.com/Pylons/pyramid/issues/718</a></li>
</ul>
</div>
<div class="section" id="id46">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id46" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Modified the <code class="docutils literal notranslate"><span class="pre">current_route_url</span></code> method in pyramid.Request. The method
previously returned the URL without the query string by default, it now does
attach the query string unless it is overriden.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route_url</span></code> and <code class="docutils literal notranslate"><span class="pre">route_path</span></code> APIs no longer quote <code class="docutils literal notranslate"><span class="pre">/</span></code>
to <code class="docutils literal notranslate"><span class="pre">%2F</span></code> when a replacement value contains a <code class="docutils literal notranslate"><span class="pre">/</span></code>.  This was pointless,
as WSGI servers always unquote the slash anyway, and Pyramid never sees the
quoted value.</li>
<li>It is no longer possible to set a <code class="docutils literal notranslate"><span class="pre">locale_name</span></code> attribute of the request,
nor is it possible to set a <code class="docutils literal notranslate"><span class="pre">localizer</span></code> attribute of the request.  These
are now &quot;reified&quot; properties that look up a locale name and localizer
respectively using the machinery described in the &quot;Internationalization&quot;
chapter of the documentation.</li>
<li>If you send an <code class="docutils literal notranslate"><span class="pre">X-Vhm-Root</span></code> header with a value that ends with a slash (or
any number of slashes), the trailing slash(es) will be removed before a URL
is generated when you use use <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> or
<code class="docutils literal notranslate"><span class="pre">request.resource_path</span></code>.  Previously the virtual root path would not have
trailing slashes stripped, which would influence URL generation.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResourceURL</span></code> interface has now grown two new
attributes: <code class="docutils literal notranslate"><span class="pre">virtual_path_tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">physical_path_tuple</span></code>.  These should
be the tuple form of the resource's path (physical and virtual).</li>
</ul>
</div>
</div>
<div class="section" id="id47">
<h2>1.4 (2012-12-18)<a class="headerlink" href="#id47" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id48">
<h3>Docs<a class="headerlink" href="#id48" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix functional tests in the ZODB tutorial</li>
</ul>
</div>
</div>
<div class="section" id="b3-2012-12-10">
<h2>1.4b3 (2012-12-10)<a class="headerlink" href="#b3-2012-12-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Packaging release only, no code changes.  1.4b2 was a brownbag release due to
missing directories in the tarball.</li>
</ul>
</div>
<div class="section" id="b2-2012-12-10">
<h2>1.4b2 (2012-12-10)<a class="headerlink" href="#b2-2012-12-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id49">
<h3>Docs<a class="headerlink" href="#id49" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Scaffolding is now PEP-8 compliant (at least for a brief shining moment).</li>
<li>Tutorial improvements.</li>
</ul>
</div>
<div class="section" id="id50">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id50" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Modified the <code class="docutils literal notranslate"><span class="pre">_depth</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> to accept
a value relative to the invocation of <code class="docutils literal notranslate"><span class="pre">view_config</span></code> itself. Thus, when it
was previously expecting a value of <code class="docutils literal notranslate"><span class="pre">1</span></code> or greater, to reflect that
the caller of <code class="docutils literal notranslate"><span class="pre">view_config</span></code> is 1 stack frame away from <code class="docutils literal notranslate"><span class="pre">venusian.attach</span></code>,
this implementation detail is now hidden.</li>
<li>Modified the <code class="docutils literal notranslate"><span class="pre">_backframes</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pyramid.util.action_method</span></code> in a
similar way to the changes described to <code class="docutils literal notranslate"><span class="pre">_depth</span></code> above.  This argument
remains undocumented, but might be used in the wild by some insane person.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2012-11-21">
<h2>1.4b1 (2012-11-21)<a class="headerlink" href="#b1-2012-11-21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id51">
<h3>Features<a class="headerlink" href="#id51" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Small microspeed enhancement which anticipates that a
<code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> object is likely to be returned from a view.
Some code is shortcut if the class of the object returned by a view is this
class.  A similar microoptimization was done to
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.is_response</span></code>.</p>
</li>
<li><p class="first">Make it possible to use variable arguments on <code class="docutils literal notranslate"><span class="pre">p*</span></code> commands (<code class="docutils literal notranslate"><span class="pre">pserve</span></code>,
<code class="docutils literal notranslate"><span class="pre">pshell</span></code>, <code class="docutils literal notranslate"><span class="pre">pviews</span></code>, etc) in the form <code class="docutils literal notranslate"><span class="pre">a=1</span> <span class="pre">b=2</span></code> so you can fill in
values in parameterized <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file, e.g. <code class="docutils literal notranslate"><span class="pre">pshell</span> <span class="pre">etc/development.ini</span>
<span class="pre">http_port=8080</span></code>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/714">https://github.com/Pylons/pyramid/pull/714</a></p>
</li>
<li><p class="first">A somewhat advanced and obscure feature of Pyramid event handlers is their
ability to handle &quot;multi-interface&quot; notifications.  These notifications have
traditionally presented multiple objects to the subscriber callable.  For
instance, if an event was sent by code like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">registry</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>In the past, in order to catch such an event, you were obligated to write and
register an event subscriber that mentioned both the event and the context in
its argument list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>In many subscriber callables registered this way, it was common for the logic
in the subscriber callable to completely ignore the second and following
arguments (e.g. <code class="docutils literal notranslate"><span class="pre">context</span></code> in the above example might be ignored), because
they usually existed as attributes of the event anyway.  You could usually
get the same value by doing <code class="docutils literal notranslate"><span class="pre">event.context</span></code> or similar.</p>
<p>The fact that you needed to put an extra argument which you usually ignored
in the subscriber callable body was only a minor annoyance until we added
&quot;subscriber predicates&quot;, used to narrow the set of circumstances under which
a subscriber will be executed, in a prior 1.4 alpha release.  Once those were
added, the annoyance was escalated, because subscriber predicates needed to
accept the same argument list and arity as the subscriber callables that they
were configured against.  So, for example, if you had these two subscriber
registrations in your code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">SomeOtherEvent</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>And you wanted to use a subscriber predicate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">],</span> <span class="n">mypredicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber1</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">SomeOtherEvent</span><span class="p">,</span> <span class="n">mypredicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">asubscriber2</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>If an existing <code class="docutils literal notranslate"><span class="pre">mypredicate</span></code> subscriber predicate had been written in such
a way that it accepted only one argument in its <code class="docutils literal notranslate"><span class="pre">__call__</span></code>, you could not
use it against a subscription which named more than one interface in its
subscriber interface list.  Similarly, if you had written a subscriber
predicate that accepted two arguments, you couldn't use it against a
registration that named only a single interface type.</p>
<p>For example, if you created this predicate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPredicate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># portions elided...</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</div>
<p>It would not work against a multi-interface-registered subscription, so in
the above example, when you attempted to use it against <code class="docutils literal notranslate"><span class="pre">asubscriber1</span></code>, it
would fail at runtime with a TypeError, claiming something was attempting to
call it with too many arguments.</p>
<p>To hack around this limitation, you were obligated to design the
<code class="docutils literal notranslate"><span class="pre">mypredicate</span></code> predicate to expect to receive in its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> either a
single <code class="docutils literal notranslate"><span class="pre">event</span></code> argument (a SomeOtherEvent object) <em>or</em> a pair of arguments
(a SomeEvent object and a SomeContextType object), presumably by doing
something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPredicate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># portions elided...</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">foo</span>
</pre></div>
</div>
<p>This was confusing and bad.</p>
<p>In order to allow people to ignore unused arguments to subscriber callables
and to normalize the relationship between event subscribers and subscriber
predicates, we now allow both subscribers and subscriber predicates to accept
only a single <code class="docutils literal notranslate"><span class="pre">event</span></code> argument even if they've been subscribed for
notifications that involve multiple interfaces.  Subscribers and subscriber
predicates that accept only one argument will receive the first object passed
to <code class="docutils literal notranslate"><span class="pre">notify</span></code>; this is typically (but not always) the event object.  The
other objects involved in the subscription lookup will be discarded.  You can
now write an event subscriber that accepts only <code class="docutils literal notranslate"><span class="pre">event</span></code> even if it
subscribes to multiple interfaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeEvent</span><span class="p">,</span> <span class="n">SomeContextType</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="c1"># this will work!</span>
</pre></div>
</div>
<p>This prevents you from needing to match the subscriber callable parameters to
the subscription type unnecessarily, especially when you don't make use of
any argument in your subscribers except for the event object itself.</p>
<p>Note, however, that if the event object is not the first
object in the call to <code class="docutils literal notranslate"><span class="pre">notify</span></code>, you'll run into trouble.  For example, if
notify is called with the context argument first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">registry</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>You won't be able to take advantage of the event-only feature.  It will
&quot;work&quot;, but the object received by your event handler won't be the event
object, it will be the context object, which won't be very useful:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeContextType</span><span class="p">,</span> <span class="n">SomeEvent</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="c1"># bzzt! you&#39;ll be getting the context here as ``event``, and it&#39;ll</span>
    <span class="c1"># be useless</span>
</pre></div>
</div>
<p>Existing multiple-argument subscribers continue to work without issue, so you
should continue use those if your system notifies using multiple interfaces
and the first interface is not the event interface.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">SomeContextType</span><span class="p">,</span> <span class="n">SomeEvent</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">asubscriber</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="c1"># this will still work!</span>
</pre></div>
</div>
<p>The event-only feature makes it possible to use a subscriber predicate that
accepts only a request argument within both multiple-interface subscriber
registrations and single-interface subscriber registrations.  You needn't
make slightly different variations of predicates depending on the
subscription type arguments.  Instead, just write all your subscriber
predicates so they only accept <code class="docutils literal notranslate"><span class="pre">event</span></code> in their <code class="docutils literal notranslate"><span class="pre">__call__</span></code> and they'll be
useful across all registrations for subscriptions that use an event as their
first argument, even ones which accept more than just <code class="docutils literal notranslate"><span class="pre">event</span></code>.</p>
<p>However, the same caveat applies to predicates as to subscriber callables: if
you're subscribing to a multi-interface event, and the first interface is not
the event interface, the predicate won't work properly.  In such a case,
you'll need to match the predicate <code class="docutils literal notranslate"><span class="pre">__call__</span></code> argument ordering and
composition to the ordering of the interfaces.  For example, if the
registration for the subscription uses <code class="docutils literal notranslate"><span class="pre">[SomeContext,</span> <span class="pre">SomeEvent]</span></code>, you'll
need to reflect that in the ordering of the parameters of the predicate's
<code class="docutils literal notranslate"><span class="pre">__call__</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
<p>tl;dr: 1) When using multi-interface subscriptions, always use the event type
as the first subscription registration argument and 2) When 1 is true, use
only <code class="docutils literal notranslate"><span class="pre">event</span></code> in your subscriber and subscriber predicate parameter lists,
no matter how many interfaces the subscriber is notified with.  This
combination will result in the maximum amount of reusability of subscriber
predicates and the least amount of thought on your part.  Drink responsibly.</p>
</li>
</ul>
</div>
<div class="section" id="id52">
<h3>Bug Fixes<a class="headerlink" href="#id52" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A failure when trying to locate the attribute <code class="docutils literal notranslate"><span class="pre">__text__</span></code> on route and view
predicates existed when the <code class="docutils literal notranslate"><span class="pre">debug_routematch</span></code> setting was true or when the
<code class="docutils literal notranslate"><span class="pre">pviews</span></code> command was used. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/727">https://github.com/Pylons/pyramid/pull/727</a></li>
</ul>
</div>
<div class="section" id="id53">
<h3>Documentation<a class="headerlink" href="#id53" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Sync up tutorial source files with the files that are rendered by the
scaffold that each uses.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2012-11-14">
<h2>1.4a4 (2012-11-14)<a class="headerlink" href="#a4-2012-11-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id54">
<h3>Features<a class="headerlink" href="#id54" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code> has been updated to
support newer hashing algorithms such as <code class="docutils literal notranslate"><span class="pre">sha512</span></code>. Existing applications
should consider updating if possible for improved security over the default
md5 hashing.</li>
<li>Added an <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> route and view predicate.</li>
<li>Do not allow the userid returned from the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code> or the
userid that is one of the list of principals returned by
<code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> to be either of the strings <code class="docutils literal notranslate"><span class="pre">system.Everyone</span></code> or
<code class="docutils literal notranslate"><span class="pre">system.Authenticated</span></code> when any of the built-in authorization policies that
live in <code class="docutils literal notranslate"><span class="pre">pyramid.authentication</span></code> are in use.  These two strings are
reserved for internal usage by Pyramid and they will not be accepted as valid
userids.</li>
<li>Slightly better debug logging from
<code class="docutils literal notranslate"><span class="pre">pyramid.authentication.RepozeWho1AuthenticationPolicy</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.security.view_execution_permitted</span></code> used to return <code class="docutils literal notranslate"><span class="pre">True</span></code> if no
view could be found. It now raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> exception in that case, as
it doesn't make sense to assert that a nonexistent view is
execution-permitted. See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/299">https://github.com/Pylons/pyramid/issues/299</a>.</li>
<li>Allow a <code class="docutils literal notranslate"><span class="pre">_depth</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code>, which will
permit limited composition reuse of the decorator by other software that
wants to provide custom decorators that are much like view_config.</li>
<li>Allow an iterable of decorators to be passed to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view</span></code>. This allows views to be wrapped
by more than one decorator without requiring combining the decorators
yourself.</li>
</ul>
</div>
<div class="section" id="id55">
<h3>Bug Fixes<a class="headerlink" href="#id55" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>In the past if a renderer returned <code class="docutils literal notranslate"><span class="pre">None</span></code>, the body of the resulting
response would be set explicitly to the empty string.  Instead, now, the body
is left unchanged, which allows the renderer to set a body itself by using
e.g. <code class="docutils literal notranslate"><span class="pre">request.response.body</span> <span class="pre">=</span> <span class="pre">b'foo'</span></code>.  The body set by the renderer will
be unmolested on the way out.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/709">https://github.com/Pylons/pyramid/issues/709</a></li>
<li>In uncommon cases, the <code class="docutils literal notranslate"><span class="pre">pyramid_excview_tween_factory</span></code> might have
inadvertently raised a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> looking for <code class="docutils literal notranslate"><span class="pre">request_iface</span></code> as an
attribute of the request.  It no longer fails in this case.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/700">https://github.com/Pylons/pyramid/issues/700</a></li>
<li>Be more tolerant of potential error conditions in <code class="docutils literal notranslate"><span class="pre">match_param</span></code> and
<code class="docutils literal notranslate"><span class="pre">physical_path</span></code> predicate implementations; instead of raising an exception,
return False.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.view.render_view</span></code> was not functioning properly under Python 3.x
due to a byte/unicode discrepancy. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/721">https://github.com/Pylons/pyramid/issues/721</a></li>
</ul>
</div>
<div class="section" id="id56">
<h3>Deprecations<a class="headerlink" href="#id56" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code> will emit a warning if
an application is using the policy without explicitly passing a <code class="docutils literal notranslate"><span class="pre">hashalg</span></code>
argument. This is because the default is &quot;md5&quot; which is considered
theoretically subject to collision attacks. If you really want &quot;md5&quot; then you
must specify it explicitly to get rid of the warning.</li>
</ul>
</div>
<div class="section" id="id57">
<h3>Documentation<a class="headerlink" href="#id57" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All of the tutorials that use
<code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code> now explicitly pass
<code class="docutils literal notranslate"><span class="pre">sha512</span></code> as a <code class="docutils literal notranslate"><span class="pre">hashalg</span></code> argument.</li>
</ul>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Move <code class="docutils literal notranslate"><span class="pre">TopologicalSorter</span></code> from <code class="docutils literal notranslate"><span class="pre">pyramid.config.util</span></code> to <code class="docutils literal notranslate"><span class="pre">pyramid.util</span></code>,
move <code class="docutils literal notranslate"><span class="pre">CyclicDependencyError</span></code> from <code class="docutils literal notranslate"><span class="pre">pyramid.config.util</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.exceptions</span></code>, rename <code class="docutils literal notranslate"><span class="pre">Singleton</span></code> to <code class="docutils literal notranslate"><span class="pre">Sentinel</span></code> and move from
<code class="docutils literal notranslate"><span class="pre">pyramid.config.util</span></code> to <code class="docutils literal notranslate"><span class="pre">pyramid.util</span></code>; this is in an effort to
move that stuff that may be an API one day out of <code class="docutils literal notranslate"><span class="pre">pyramid.config.util</span></code>,
because that package should never be imported from non-Pyramid code.
TopologicalSorter is still not an API, but may become one.</li>
<li>Get rid of shady monkeypatching of <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> done within the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> of Pyramid.
Webob no longer relies on this being done.  Instead, the ResponseClass
attribute of the Pyramid Request class is assigned to the Pyramid response
class; that's enough to satisfy WebOb and behave as it did before with the
monkeypatching.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2012-10-26">
<h2>1.4a3 (2012-10-26)<a class="headerlink" href="#a3-2012-10-26" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id58">
<h3>Bug Fixes<a class="headerlink" href="#id58" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The match_param predicate's text method was fixed to sort its values.
Part of <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></li>
<li>1.4a <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.prepare</span></code> behaved differently than 1.3 series
function of same name.  In particular, if passed a request, it would not
set the <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute of the request like 1.3 did.  A symptom
would be that passing a request to <code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code> (which uses
the function) that did not have a <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute could assume that
the registry would be attached to the request by Pyramid.  This assumption
could be made in 1.3, but not in 1.4.  The assumption can now be made in
1.4 too (a registry is attached to a request passed to bootstrap or
prepare).</li>
<li>When registering a view configuration that named a Chameleon ZPT renderer
with a macro name in it (e.g. <code class="docutils literal notranslate"><span class="pre">renderer='some/template#somemacro.pt</span></code>) as
well as a view configuration without a macro name in it that pointed to the
same template (e.g. <code class="docutils literal notranslate"><span class="pre">renderer='some/template.pt'</span></code>), internal caching could
confuse the two, and your code might have rendered one instead of the
other.</li>
</ul>
</div>
<div class="section" id="id59">
<h3>Features<a class="headerlink" href="#id59" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Allow multiple values to be specified to the <code class="docutils literal notranslate"><span class="pre">request_param</span></code> view/route
predicate as a sequence.  Previously only a single string value was allowed.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/705">https://github.com/Pylons/pyramid/pull/705</a></li>
<li>Comments with references to documentation sections placed in scaffold
<code class="docutils literal notranslate"><span class="pre">.ini</span></code> files.</li>
<li>Added an HTTP Basic authentication policy
at <code class="docutils literal notranslate"><span class="pre">pyramid.authentication.BasicAuthAuthenticationPolicy</span></code>.</li>
<li>The Configurator <code class="docutils literal notranslate"><span class="pre">testing_securitypolicy</span></code> method now returns the policy
object it creates.</li>
<li>The Configurator <code class="docutils literal notranslate"><span class="pre">testing_securitypolicy</span></code> method accepts two new
arguments: <code class="docutils literal notranslate"><span class="pre">remember_result</span></code> and <code class="docutils literal notranslate"><span class="pre">forget_result</span></code>.  If supplied, these
values influence the result of the policy's <code class="docutils literal notranslate"><span class="pre">remember</span></code> and <code class="docutils literal notranslate"><span class="pre">forget</span></code>
methods, respectively.</li>
<li>The DummySecurityPolicy created by <code class="docutils literal notranslate"><span class="pre">testing_securitypolicy</span></code> now sets a
<code class="docutils literal notranslate"><span class="pre">forgotten</span></code> value on the policy (the value <code class="docutils literal notranslate"><span class="pre">True</span></code>) when its <code class="docutils literal notranslate"><span class="pre">forget</span></code>
method is called.</li>
<li>The DummySecurityPolicy created by <code class="docutils literal notranslate"><span class="pre">testing_securitypolicy</span></code> now sets a
<code class="docutils literal notranslate"><span class="pre">remembered</span></code> value on the policy, which is the value of the <code class="docutils literal notranslate"><span class="pre">principal</span></code>
argument it's called with when its <code class="docutils literal notranslate"><span class="pre">remember</span></code> method is called.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">physical_path</span></code> view predicate.  If specified, this value should be a
string or a tuple representing the physical traversal path of the context
found via traversal for this predicate to match as true.  For example:
<code class="docutils literal notranslate"><span class="pre">physical_path='/'</span></code> or <code class="docutils literal notranslate"><span class="pre">physical_path='/a/b/c'</span></code> or <code class="docutils literal notranslate"><span class="pre">physical_path=('',</span>
<span class="pre">'a',</span> <span class="pre">'b',</span> <span class="pre">'c')</span></code>.  This is not a path prefix match or a regex, it's a
whole-path match.  It's useful when you want to always potentially show a
view when some object is traversed to, but you can't be sure about what kind
of object it will be, so you can't use the <code class="docutils literal notranslate"><span class="pre">context</span></code> predicate.  The
individual path elements inbetween slash characters or in tuple elements
should be the Unicode representation of the name of the resource and should
not be encoded in any way.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2012-09-27">
<h2>1.4a2 (2012-09-27)<a class="headerlink" href="#a2-2012-09-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id60">
<h3>Bug Fixes<a class="headerlink" href="#id60" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When trying to determine Mako defnames and Chameleon macro names in asset
specifications, take into account that the filename may have a hyphen in
it.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/692">https://github.com/Pylons/pyramid/pull/692</a></li>
</ul>
</div>
<div class="section" id="id61">
<h3>Features<a class="headerlink" href="#id61" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A new <code class="docutils literal notranslate"><span class="pre">pyramid.session.check_csrf_token</span></code> convenience function was added.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">check_csrf</span></code> view predicate was added.  For example, you can now do
<code class="docutils literal notranslate"><span class="pre">config.add_view(someview,</span> <span class="pre">check_csrf=True)</span></code>.  When the predicate is
checked, if the <code class="docutils literal notranslate"><span class="pre">csrf_token</span></code> value in <code class="docutils literal notranslate"><span class="pre">request.params</span></code> matches the CSRF
token in the request's session, the view will be permitted to execute.
Otherwise, it will not be permitted to execute.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></code> to alchemy template, so that tables
defined imperatively will work.</li>
</ul>
</div>
<div class="section" id="id62">
<h3>Documentation<a class="headerlink" href="#id62" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>update wiki2 SQLA tutorial with the changes required after inserting
<code class="docutils literal notranslate"><span class="pre">Base.metadata.bind</span> <span class="pre">=</span> <span class="pre">engine</span></code> into the alchemy scaffold.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2012-09-16">
<h2>1.4a1 (2012-09-16)<a class="headerlink" href="#a1-2012-09-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id63">
<h3>Bug Fixes<a class="headerlink" href="#id63" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Forward port from 1.3 branch: When no authentication policy was configured,
a call to <code class="docutils literal notranslate"><span class="pre">pyramid.security.effective_principals</span></code> would unconditionally
return the empty list.  This was incorrect, it should have unconditionally
returned <code class="docutils literal notranslate"><span class="pre">[Everyone]</span></code>, and now does.</li>
<li>Explicit url dispatch regexes can now contain colons.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/629">https://github.com/Pylons/pyramid/issues/629</a></li>
<li>On at least one 64-bit Ubuntu system under Python 3.2, using the
<code class="docutils literal notranslate"><span class="pre">view_config</span></code> decorator caused a <code class="docutils literal notranslate"><span class="pre">RuntimeError:</span> <span class="pre">dictionary</span> <span class="pre">changed</span> <span class="pre">size</span>
<span class="pre">during</span> <span class="pre">iteration</span></code> exception.  It no longer does.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/635">https://github.com/Pylons/pyramid/issues/635</a> for more information.</li>
<li>In Mako Templates lookup, check if the uri is already adjusted and bring
it back to an asset spec. Normally occurs with inherited templates or
included components.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/606">https://github.com/Pylons/pyramid/issues/606</a>
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/607">https://github.com/Pylons/pyramid/issues/607</a></li>
<li>In Mako Templates lookup, check for absolute uri (using mako directories)
when mixing up inheritance with asset specs.
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/662">https://github.com/Pylons/pyramid/issues/662</a></li>
<li>HTTP Accept headers were not being normalized causing potentially
conflicting view registrations to go unnoticed. Two views that only
differ in the case ('text/html' vs. 'text/HTML') will now raise an error.
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/620">https://github.com/Pylons/pyramid/pull/620</a></li>
<li>Forward-port from 1.3 branch: when registering multiple views with an
<code class="docutils literal notranslate"><span class="pre">accept</span></code> predicate in a Pyramid application runing under Python 3, you
might have received a <code class="docutils literal notranslate"><span class="pre">TypeError:</span> <span class="pre">unorderable</span> <span class="pre">types:</span> <span class="pre">function()</span> <span class="pre">&lt;</span>
<span class="pre">function()</span></code> exception.</li>
</ul>
</div>
<div class="section" id="id64">
<h3>Features<a class="headerlink" href="#id64" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Python 3.3 compatibility.</p>
</li>
<li><p class="first">Configurator.add_directive now accepts arbitrary callables like partials or
objects implementing <code class="docutils literal notranslate"><span class="pre">__call__</span></code> which dont have <code class="docutils literal notranslate"><span class="pre">__name__</span></code> and
<code class="docutils literal notranslate"><span class="pre">__doc__</span></code> attributes.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/621">https://github.com/Pylons/pyramid/issues/621</a>
and <a class="reference external" href="https://github.com/Pylons/pyramid/pull/647">https://github.com/Pylons/pyramid/pull/647</a>.</p>
</li>
<li><p class="first">Third-party custom view, route, and subscriber predicates can now be added
for use by view authors via
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view_predicate</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route_predicate</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber_predicate</span></code>.  So, for example,
doing this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_view_predicate</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="n">my</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">ABCPredicate</span><span class="p">)</span>
</pre></div>
</div>
<p>Might allow a view author to do this in an application that configured that
predicate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="n">abc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar features exist for <code class="docutils literal notranslate"><span class="pre">add_route</span></code>, and <code class="docutils literal notranslate"><span class="pre">add_subscriber</span></code>.  See
&quot;Adding A Third Party View, Route, or Subscriber Predicate&quot; in the Hooks
chapter for more information.</p>
<p>Note that changes made to support the above feature now means that only
actions registered using the same &quot;order&quot; can conflict with one another.
It used to be the case that actions registered at different orders could
potentially conflict, but to my knowledge nothing ever depended on this
behavior (it was a bit silly).</p>
</li>
<li><p class="first">Custom objects can be made easily JSON-serializable in Pyramid by defining
a <code class="docutils literal notranslate"><span class="pre">__json__</span></code> method on the object's class. This method should return
values natively serializable by <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code> (such as ints, lists,
dictionaries, strings, and so forth).</p>
</li>
<li><p class="first">The JSON renderer now allows for the definition of custom type adapters to
convert unknown objects to JSON serializations.</p>
</li>
<li><p class="first">As of this release, the <code class="docutils literal notranslate"><span class="pre">request_method</span></code> predicate, when used, will also
imply that <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> is implied when you use <code class="docutils literal notranslate"><span class="pre">GET</span></code>.  For example, using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method='GET')</span></code> is equivalent to using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD'))</span></code>.  Using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'POST')</span></code> is equivalent to using
<code class="docutils literal notranslate"><span class="pre">&#64;view_config(request_method=('GET',</span> <span class="pre">'HEAD',</span> <span class="pre">'POST')</span></code>.  This is because
HEAD is a variant of GET that omits the body, and WebOb has special support
to return an empty body when a HEAD is used.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">config.add_request_method</span></code> has been introduced to support extending
request objects with arbitrary callables. This method expands on the
previous <code class="docutils literal notranslate"><span class="pre">config.set_request_property</span></code> by supporting methods as well as
properties. This method now causes less code to be executed at
request construction time than <code class="docutils literal notranslate"><span class="pre">config.set_request_property</span></code> in
version 1.3.</p>
</li>
<li><p class="first">Don't add a <code class="docutils literal notranslate"><span class="pre">?</span></code> to URLs generated by <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> if the
<code class="docutils literal notranslate"><span class="pre">query</span></code> argument is provided but empty.</p>
</li>
<li><p class="first">Don't add a <code class="docutils literal notranslate"><span class="pre">?</span></code> to URLs generated by <code class="docutils literal notranslate"><span class="pre">request.route_url</span></code> if the
<code class="docutils literal notranslate"><span class="pre">_query</span></code> argument is provided but empty.</p>
</li>
<li><p class="first">The static view machinery now raises (rather than returns) <code class="docutils literal notranslate"><span class="pre">HTTPNotFound</span></code>
and <code class="docutils literal notranslate"><span class="pre">HTTPMovedPermanently</span></code> exceptions, so these can be caught by the
Not Found View (and other exception views).</p>
</li>
<li><p class="first">The Mako renderer now supports a def name in an asset spec.  When the def
name is present in the asset spec, the system will render the template def
within the template and will return the result. An example asset spec is
<code class="docutils literal notranslate"><span class="pre">package:path/to/template#defname.mako</span></code>. This will render the def named
<code class="docutils literal notranslate"><span class="pre">defname</span></code> inside the <code class="docutils literal notranslate"><span class="pre">template.mako</span></code> template instead of rendering the
entire template.  The old way of returning a tuple in the form
<code class="docutils literal notranslate"><span class="pre">('defname',</span> <span class="pre">{})</span></code> from the view is supported for backward compatibility,</p>
</li>
<li><p class="first">The Chameleon ZPT renderer now accepts a macro name in an asset spec.  When
the macro name is present in the asset spec, the system will render the
macro listed as a <code class="docutils literal notranslate"><span class="pre">define-macro</span></code> and return the result instead of
rendering the entire template.  An example asset spec:
<code class="docutils literal notranslate"><span class="pre">package:path/to/template#macroname.pt</span></code>.  This will render the macro
defined as <code class="docutils literal notranslate"><span class="pre">macroname</span></code> within the <code class="docutils literal notranslate"><span class="pre">template.pt</span></code> template instead of the
entire templae.</p>
</li>
<li><p class="first">When there is a predicate mismatch exception (seen when no view matches for
a given request due to predicates not working), the exception now contains
a textual description of the predicate which didn't match.</p>
</li>
<li><p class="first">An <code class="docutils literal notranslate"><span class="pre">add_permission</span></code> directive method was added to the Configurator.  This
directive registers a free-standing permission introspectable into the
Pyramid introspection system.  Frameworks built atop Pyramid can thus use
the <code class="docutils literal notranslate"><span class="pre">permissions</span></code> introspectable category data to build a
comprehensive list of permissions supported by a running system.  Before
this method was added, permissions were already registered in this
introspectable category as a side effect of naming them in an <code class="docutils literal notranslate"><span class="pre">add_view</span></code>
call, this method just makes it possible to arrange for a permission to be
put into the <code class="docutils literal notranslate"><span class="pre">permissions</span></code> introspectable category without naming it
along with an associated view.  Here's an example of usage of
<code class="docutils literal notranslate"><span class="pre">add_permission</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">UnencryptedCookieSessionFactoryConfig</span></code> now accepts
<code class="docutils literal notranslate"><span class="pre">signed_serialize</span></code> and <code class="docutils literal notranslate"><span class="pre">signed_deserialize</span></code> hooks which may be used
to influence how the sessions are marshalled (by default this is done
with HMAC+pickle).</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now supports methods supplied by the
<code class="docutils literal notranslate"><span class="pre">pyramid.util.InstancePropertyMixin</span></code> class such as <code class="docutils literal notranslate"><span class="pre">set_property</span></code>.</p>
</li>
<li><p class="first">Request properties and methods added via <code class="docutils literal notranslate"><span class="pre">config.set_request_property</span></code> or
<code class="docutils literal notranslate"><span class="pre">config.add_request_method</span></code> are now available to tweens.</p>
</li>
<li><p class="first">Request properties and methods added via <code class="docutils literal notranslate"><span class="pre">config.set_request_property</span></code> or
<code class="docutils literal notranslate"><span class="pre">config.add_request_method</span></code> are now available in the request object
returned from <code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">request.context</span></code> of environment request during <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code> is now the
root object if a context isn't already set on a provided request.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.decorator.reify</span></code> function is now an API, and was added to
the API documentation.</p>
</li>
<li><p class="first">Added the <code class="docutils literal notranslate"><span class="pre">pyramid.testing.testConfig</span></code> context manager, which can be used
to generate a configurator in a test, e.g. <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">testing.testConfig(...):</span></code>.</p>
</li>
<li><p class="first">Users can now invoke a subrequest from within view code using a new
<code class="docutils literal notranslate"><span class="pre">request.invoke_subrequest</span></code> API.</p>
</li>
</ul>
</div>
<div class="section" id="id65">
<h3>Deprecations<a class="headerlink" href="#id65" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property</span></code> has been
documentation-deprecated.  The method remains usable but the more
featureful <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_request_method</span></code> should be
used in its place (it has all of the same capabilities but can also extend
the request object with methods).</li>
</ul>
</div>
<div class="section" id="id66">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id66" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Pyramid router no longer adds the values <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code> or
<code class="docutils literal notranslate"><span class="pre">bfg.routes.matchdict</span></code> to the request's WSGI environment dictionary.
These values were docs-deprecated in <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 1.0 (effectively seven
minor releases ago).  If your code depended on these values, use
request.matched_route and request.matchdict instead.</li>
<li>It is no longer possible to pass an environ dictionary directly to
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.ResourceTreeTraverser.__call__</span></code> (aka
<code class="docutils literal notranslate"><span class="pre">ModelGraphTraverser.__call__</span></code>).  Instead, you must pass a request
object.  Passing an environment instead of a request has generated a
deprecation warning since Pyramid 1.1.</li>
<li>Pyramid will no longer work properly if you use the
<code class="docutils literal notranslate"><span class="pre">webob.request.LegacyRequest</span></code> as a request factory.  Instances of the
LegacyRequest class have a <code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> which return a string.
This Pyramid release assumes that <code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> will
unconditionally be Unicode.</li>
<li>The functions from <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_zpt</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_text</span></code>
named <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code>, <code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>, and
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code> have been removed.  These have issued a
deprecation warning upon import since Pyramid 1.0.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.get_renderer()</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.get_renderer().implementation()</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render()</span></code> or <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.render_to_response</span></code>
respectively instead of these functions.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.configuration</span></code> module was removed.  It had been deprecated
since Pyramid 1.0 and printed a deprecation warning upon its use.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.paster.PyramidTemplate</span></code> API was removed.  It had been
deprecated since Pyramid 1.1 and issued a warning on import.  If your code
depended on this, adjust your code to import
<code class="docutils literal notranslate"><span class="pre">pyramid.scaffolds.PyramidTemplate</span></code> instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.settings.get_settings()</span></code> API was removed.  It had been
printing a deprecation warning since Pyramid 1.0.  If your code depended on
this API, use <code class="docutils literal notranslate"><span class="pre">pyramid.threadlocal.get_current_registry().settings</span></code>
instead or use the <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute of the registry available from
the request (<code class="docutils literal notranslate"><span class="pre">request.registry.settings</span></code>).</li>
<li>These APIs from the <code class="docutils literal notranslate"><span class="pre">pyramid.testing</span></code> module were removed.  They have
been printing deprecation warnings since Pyramid 1.0:<ul>
<li><code class="docutils literal notranslate"><span class="pre">registerDummySecurityPolicy</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerResources</span></code> (aka <code class="docutils literal notranslate"><span class="pre">registerModels</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_resources</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerEventListener</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_add_subscriber</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code> (aka <cite>registerDummyRenderer`</cite>), use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_add_template</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerView</span></code>, use <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerUtility</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.registry.registerUtility</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerAdapter</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.registry.registerAdapter</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerSubscriber</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_subscriber</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerRoute</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code> instead.</li>
<li><code class="docutils literal notranslate"><span class="pre">registerSettings</span></code>, use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_settings</span></code> instead.</li>
</ul>
</li>
<li>In Pyramid 1.3 and previous, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of a Response object
was invoked before any finished callbacks were executed.  As of this
release, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of a Response object is invoked <em>after</em>
finished callbacks are executed.  This is in support of the
<code class="docutils literal notranslate"><span class="pre">request.invoke_subrequest</span></code> feature.</li>
<li>The 200-series exception responses named <code class="docutils literal notranslate"><span class="pre">HTTPCreated</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPAccepted</span></code>,
<code class="docutils literal notranslate"><span class="pre">HTTPNonAuthoritativeInformation</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPNoContent</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPResetContent</span></code>,
and <code class="docutils literal notranslate"><span class="pre">HTTPPartialContent</span></code> in <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code> no longer inherit
from <code class="docutils literal notranslate"><span class="pre">HTTPOk</span></code>.  Instead they inherit from a new base class named
<code class="docutils literal notranslate"><span class="pre">HTTPSuccessful</span></code>.  This will have no effect on you unless you've registered
an exception view for <code class="docutils literal notranslate"><span class="pre">HTTPOk</span></code> and expect that exception view to
catch all the aforementioned exceptions.</li>
</ul>
</div>
<div class="section" id="id67">
<h3>Documentation<a class="headerlink" href="#id67" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added an &quot;Upgrading Pyramid&quot; chapter to the narrative documentation.  It
describes how to cope with deprecations and removals of Pyramid APIs and
how to show Pyramid-generated deprecation warnings while running tests and
while running a server.</li>
<li>Added a &quot;Invoking a Subrequest&quot; chapter to the documentation.  It describes
how to use the new <code class="docutils literal notranslate"><span class="pre">request.invoke_subrequest</span></code> API.</li>
</ul>
</div>
<div class="section" id="id68">
<h3>Dependencies<a class="headerlink" href="#id68" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid now requires WebOb 1.2b3+ (the prior Pyramid release only relied on
1.2dev+).  This is to ensure that we obtain a version of WebOb that returns
<code class="docutils literal notranslate"><span class="pre">request.path_info</span></code> as text.</li>
</ul>
</div>
</div>
<div class="section" id="id69">
<h2>1.3 (2012-03-21)<a class="headerlink" href="#id69" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id70">
<h3>Bug Fixes<a class="headerlink" href="#id70" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp2</span></code> calls the downstream WSGI app, the app's
environ will no longer have (deprecated and potentially misleading)
<code class="docutils literal notranslate"><span class="pre">bfg.routes.matchdict</span></code> or <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code> keys in it.  A symptom of
this bug would be a <code class="docutils literal notranslate"><span class="pre">wsgiapp2</span></code>-wrapped Pyramid app finding the wrong view
because it mistakenly detects that a route was matched when, in fact, it
was not.</li>
<li>The fix for issue <a class="reference external" href="https://github.com/Pylons/pyramid/issues/461">https://github.com/Pylons/pyramid/issues/461</a> (which made
it possible for instance methods to be used as view callables) introduced a
backwards incompatibility when methods that declared only a request
argument were used.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/503">https://github.com/Pylons/pyramid/issues/503</a></li>
</ul>
</div>
</div>
<div class="section" id="b3-2012-03-17">
<h2>1.3b3 (2012-03-17)<a class="headerlink" href="#b3-2012-03-17" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id71">
<h3>Bug Fixes<a class="headerlink" href="#id71" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">config.add_view(&lt;aninstancemethod&gt;)</span></code> raised AttributeError involving
<code class="docutils literal notranslate"><span class="pre">__text__</span></code>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/461">https://github.com/Pylons/pyramid/issues/461</a></li>
<li>Remove references to do-nothing <code class="docutils literal notranslate"><span class="pre">pyramid.debug_templates</span></code> setting in all
Pyramid-provided <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files.  This setting previously told Chameleon to
render better exceptions; now Chameleon always renders nice exceptions
regardless of the value of this setting.</li>
</ul>
</div>
<div class="section" id="id72">
<h3>Scaffolds<a class="headerlink" href="#id72" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold now shows an informative error message in the
browser if the person creating the project forgets to run the
initialization script.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold initialization script is now called
<code class="docutils literal notranslate"><span class="pre">initialize_&lt;projectname&gt;_db</span></code> instead of <code class="docutils literal notranslate"><span class="pre">populate_&lt;projectname&gt;</span></code>.</li>
</ul>
</div>
<div class="section" id="id73">
<h3>Documentation<a class="headerlink" href="#id73" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Wiki tutorials improved due to collaboration at PyCon US 2012 sprints.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2012-03-02">
<h2>1.3b2 (2012-03-02)<a class="headerlink" href="#b2-2012-03-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id74">
<h3>Bug Fixes<a class="headerlink" href="#id74" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The method <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.partial_application_url</span></code> is no longer
in the API docs.  It was meant to be a private method; its publication in
the documentation as an API method was a mistake, and it has been renamed
to something private.</p>
</li>
<li><p class="first">When a static view was registered using an absolute filesystem path on
Windows, the <code class="docutils literal notranslate"><span class="pre">request.static_url</span></code> function did not work to generate URLs
to its resources.  Symptom: &quot;No static URL definition matching
c:\foo\bar\baz&quot;.</p>
</li>
<li><p class="first">Make all tests pass on Windows XP.</p>
</li>
<li><p class="first">Bug in ACL authentication checking on Python 3: the <code class="docutils literal notranslate"><span class="pre">permits</span></code> and
<code class="docutils literal notranslate"><span class="pre">principals_allowed_by_permission</span></code> method of
<code class="docutils literal notranslate"><span class="pre">pyramid.authorization.ACLAuthenticationPolicy</span></code> could return an
inappropriate <code class="docutils literal notranslate"><span class="pre">True</span></code> value when a permission on an ACL was a string
rather than a sequence, and then only if the ACL permission string was a
substring of the <code class="docutils literal notranslate"><span class="pre">permission</span></code> value passed to the function.</p>
<p>This bug effects no Pyramid deployment under Python 2; it is a bug that
exists only in deployments running on Python 3.  It has existed since
Pyramid 1.3a1.</p>
<p>This bug was due to the presence of an <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> attribute on strings
under Python 3 which is not present under strings in Python 2.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="b1-2012-02-26">
<h2>1.3b1 (2012-02-26)<a class="headerlink" href="#b1-2012-02-26" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id75">
<h3>Bug Fixes<a class="headerlink" href="#id75" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.with_package</span></code> didn't work if the
Configurator was an old-style <code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator</span></code>
instance.</li>
<li>Pyramid authorization policies did not show up in the introspector.</li>
</ul>
</div>
<div class="section" id="id76">
<h3>Deprecations<a class="headerlink" href="#id76" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All references to the <code class="docutils literal notranslate"><span class="pre">tmpl_context</span></code> request variable were removed from
the docs.  Its existence in Pyramid is confusing for people who were never
Pylons users.  It was added as a porting convenience for Pylons users in
Pyramid 1.0, but it never caught on because the Pyramid rendering system is
a lot different than Pylons' was, and alternate ways exist to do what it
was designed to offer in Pylons.  It will continue to exist &quot;forever&quot; but
it will not be recommended or mentioned in the docs.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2012-02-22">
<h2>1.3a9 (2012-02-22)<a class="headerlink" href="#a9-2012-02-22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id77">
<h3>Features<a class="headerlink" href="#id77" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add an <code class="docutils literal notranslate"><span class="pre">introspection</span></code> boolean to the Configurator constructor.  If this
is <code class="docutils literal notranslate"><span class="pre">True</span></code>, actions registered using the Configurator will be registered
with the introspector.  If it is <code class="docutils literal notranslate"><span class="pre">False</span></code>, they won't.  The default is
<code class="docutils literal notranslate"><span class="pre">True</span></code>.  Setting it to <code class="docutils literal notranslate"><span class="pre">False</span></code> during action processing will prevent
introspection for any following registration statements, and setting it to
<code class="docutils literal notranslate"><span class="pre">True</span></code> will start them up again.  This addition is to service a
requirement that the debug toolbar's own views and methods not show up in
the introspector.</li>
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_notfound_view</span></code>.  This is a
wrapper for <code class="docutils literal notranslate"><span class="pre">pyramid.Config.configurator.add_view</span></code> which provides easy
append_slash support and does the right thing about permissions.  It should
be preferred over calling <code class="docutils literal notranslate"><span class="pre">add_view</span></code> directly with
<code class="docutils literal notranslate"><span class="pre">context=HTTPNotFound</span></code> as was previously recommended.</li>
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.view.notfound_view_config</span></code>.  This is a decorator
constructor like <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> that calls
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_notfound_view</span></code> when scanned.  It should
be preferred over using <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> with
<code class="docutils literal notranslate"><span class="pre">context=HTTPNotFound</span></code> as was previously recommended.</li>
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_forbidden_view</span></code>.  This is a
wrapper for <code class="docutils literal notranslate"><span class="pre">pyramid.Config.configurator.add_view</span></code> which does the right
thing about permissions.  It should be preferred over calling <code class="docutils literal notranslate"><span class="pre">add_view</span></code>
directly with <code class="docutils literal notranslate"><span class="pre">context=HTTPForbidden</span></code> as was previously recommended.</li>
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.view.forbidden_view_config</span></code>.  This is a decorator
constructor like <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> that calls
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_forbidden_view</span></code> when scanned.  It should
be preferred over using <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> with
<code class="docutils literal notranslate"><span class="pre">context=HTTPForbidden</span></code> as was previously recommended.</li>
<li>New APIs: <code class="docutils literal notranslate"><span class="pre">pyramid.response.FileResponse</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.response.FileIter</span></code>, for usage in views that must serve files
&quot;manually&quot;.</li>
</ul>
</div>
<div class="section" id="id78">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id78" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.with_context</span></code> class method.  It was
never an API, it is only used by <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> and its functionality has
been moved to that package's latest release.  This means that you'll need
to use the 0.9.2 or later release of <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> with this release of
Pyramid.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">introspector</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code>
constructor API has been removed.  It has been replaced by the boolean
<code class="docutils literal notranslate"><span class="pre">introspection</span></code> flag.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.registry.noop_introspector</span></code> API object has been removed.</li>
<li>The older deprecated <code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> Configurator method is now an
alias for the new <code class="docutils literal notranslate"><span class="pre">add_notfound_view</span></code> Configurator method.  Likewise, the
older deprecated <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> is now an alias for the new
<code class="docutils literal notranslate"><span class="pre">add_forbidden_view</span></code>. This has the following impact: the <code class="docutils literal notranslate"><span class="pre">context</span></code> sent
to views with a <code class="docutils literal notranslate"><span class="pre">(context,</span> <span class="pre">request)</span></code> call signature registered via the
<code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> or <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> will now be an exception
object instead of the actual resource context found.  Use
<code class="docutils literal notranslate"><span class="pre">request.context</span></code> to get the actual resource context.  It's also
recommended to disuse <code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> in favor of
<code class="docutils literal notranslate"><span class="pre">add_notfound_view</span></code>, and disuse <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> in favor of
<code class="docutils literal notranslate"><span class="pre">add_forbidden_view</span></code> despite the aliasing.</li>
</ul>
</div>
<div class="section" id="id79">
<h3>Deprecations<a class="headerlink" href="#id79" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The API documentation for <code class="docutils literal notranslate"><span class="pre">pyramid.view.append_slash_notfound_view</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.view.AppendSlashNotFoundViewFactory</span></code> was removed.  These names
still exist and are still importable, but they are no longer APIs.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_notfound_view(append_slash=True)</span></code> or
<code class="docutils literal notranslate"><span class="pre">pyramid.view.notfound_view_config(append_slash=True)</span></code> to get the same
behavior.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> and <code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> methods of the
Configurator were removed from the documentation.  They have been
deprecated since Pyramid 1.1.</li>
</ul>
</div>
<div class="section" id="id80">
<h3>Bug Fixes<a class="headerlink" href="#id80" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The static file response object used by <code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code> opened
the static file twice, when it only needed to open it once.</li>
<li>The AppendSlashNotFoundViewFactory used request.path to match routes.  This
was wrong because request.path contains the script name, and this would
cause it to fail in circumstances where the script name was not empty.  It
should have used request.path_info, and now does.</li>
</ul>
</div>
<div class="section" id="id81">
<h3>Documentation<a class="headerlink" href="#id81" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Updated the &quot;Creating a Not Found View&quot; section of the &quot;Hooks&quot; chapter,
replacing explanations of registering a view using <code class="docutils literal notranslate"><span class="pre">add_view</span></code> or
<code class="docutils literal notranslate"><span class="pre">view_config</span></code> with ones using <code class="docutils literal notranslate"><span class="pre">add_notfound_view</span></code> or
<code class="docutils literal notranslate"><span class="pre">notfound_view_config</span></code>.</li>
<li>Updated the &quot;Creating a Not Forbidden View&quot; section of the &quot;Hooks&quot; chapter,
replacing explanations of registering a view using <code class="docutils literal notranslate"><span class="pre">add_view</span></code> or
<code class="docutils literal notranslate"><span class="pre">view_config</span></code> with ones using <code class="docutils literal notranslate"><span class="pre">add_forbidden_view</span></code> or
<code class="docutils literal notranslate"><span class="pre">forbidden_view_config</span></code>.</li>
<li>Updated the &quot;Redirecting to Slash-Appended Routes&quot; section of the &quot;URL
Dispatch&quot; chapter, replacing explanations of registering a view using
<code class="docutils literal notranslate"><span class="pre">add_view</span></code> or <code class="docutils literal notranslate"><span class="pre">view_config</span></code> with ones using <code class="docutils literal notranslate"><span class="pre">add_notfound_view</span></code> or
<code class="docutils literal notranslate"><span class="pre">notfound_view_config</span></code></li>
<li>Updated all tutorials to use <code class="docutils literal notranslate"><span class="pre">pyramid.view.forbidden_view_config</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> with an HTTPForbidden context.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2012-02-19">
<h2>1.3a8 (2012-02-19)<a class="headerlink" href="#a8-2012-02-19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id82">
<h3>Features<a class="headerlink" href="#id82" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">scan</span></code> method of a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> can be passed an <code class="docutils literal notranslate"><span class="pre">ignore</span></code>
argument, which can be a string, a callable, or a list consisting of
strings and/or callables.  This feature allows submodules, subpackages, and
global objects from being scanned.  See
<a class="reference external" href="http://readthedocs.org/docs/venusian/en/latest/#ignore-scan-argument">http://readthedocs.org/docs/venusian/en/latest/#ignore-scan-argument</a> for
more information about how to use the <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument to <code class="docutils literal notranslate"><span class="pre">scan</span></code>.</li>
<li>Better error messages when a view callable returns a value that cannot be
converted to a response (for example, when a view callable returns a
dictionary without a renderer defined, or doesn't return any value at all).
The error message now contains information about the view callable itself
as well as the result of calling it.</li>
<li>Better error message when a .pyc-only module is <code class="docutils literal notranslate"><span class="pre">config.include</span></code> -ed.
This is not permitted due to error reporting requirements, and a better
error message is shown when it is attempted.  Previously it would fail with
something like &quot;AttributeError: 'NoneType' object has no attribute
'rfind'&quot;.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_traverser</span></code> API method.  See the
Hooks narrative documentation section entitled &quot;Changing the Traverser&quot; for
more information.  This is not a new feature, it just provides an API for
adding a traverser without needing to use the ZCA API.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_resource_url_adapter</span></code> API method.
See the Hooks narrative documentation section entitled &quot;Changing How
pyramid.request.Request.resource_url Generates a URL&quot; for more information.
This is not a new feature, it just provides an API for adding a resource
url adapter without needing to use the ZCA API.</li>
<li>The system value <code class="docutils literal notranslate"><span class="pre">req</span></code> is now supplied to renderers as an alias for
<code class="docutils literal notranslate"><span class="pre">request</span></code>.  This means that you can now, for example, in a template, do
<code class="docutils literal notranslate"><span class="pre">req.route_url(...)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">request.route_url(...)</span></code>.  This is
purely a change to reduce the amount of typing required to use request
methods and attributes from within templates.  The value <code class="docutils literal notranslate"><span class="pre">request</span></code> is
still available too, this is just an alternative.</li>
<li>A new interface was added: <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResourceURL</span></code>.  An adapter
implementing its interface can be used to override resource URL generation
when <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> is called.  This interface replaces the
now-deprecated <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IContextURL</span></code> interface.</li>
<li>The dictionary passed to a resource's <code class="docutils literal notranslate"><span class="pre">__resource_url__</span></code> method (see
&quot;Overriding Resource URL Generation&quot; in the &quot;Resources&quot; chapter) now
contains an <code class="docutils literal notranslate"><span class="pre">app_url</span></code> key, representing the application URL generated
during <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code>.  It represents a potentially customized
URL prefix, containing potentially custom scheme, host and port information
passed by the user to <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code>.  It should be used instead
of <code class="docutils literal notranslate"><span class="pre">request.application_url</span></code> where necessary.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> API now accepts these arguments: <code class="docutils literal notranslate"><span class="pre">app_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">scheme</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, and <code class="docutils literal notranslate"><span class="pre">port</span></code>.  The app_url argument can be used to
replace the URL prefix wholesale during url generation.  The <code class="docutils literal notranslate"><span class="pre">scheme</span></code>,
<code class="docutils literal notranslate"><span class="pre">host</span></code>, and <code class="docutils literal notranslate"><span class="pre">port</span></code> arguments can be used to replace the respective
default values of <code class="docutils literal notranslate"><span class="pre">request.application_url</span></code> partially.</li>
<li>A new API named <code class="docutils literal notranslate"><span class="pre">request.resource_path</span></code> now exists.  It works like
<code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> but produces a relative URL rather than an
absolute one.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">request.route_url</span></code> API now accepts these arguments: <code class="docutils literal notranslate"><span class="pre">_app_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">_scheme</span></code>, <code class="docutils literal notranslate"><span class="pre">_host</span></code>, and <code class="docutils literal notranslate"><span class="pre">_port</span></code>.  The <code class="docutils literal notranslate"><span class="pre">_app_url</span></code> argument can be
used to replace the URL prefix wholesale during url generation.  The
<code class="docutils literal notranslate"><span class="pre">_scheme</span></code>, <code class="docutils literal notranslate"><span class="pre">_host</span></code>, and <code class="docutils literal notranslate"><span class="pre">_port</span></code> arguments can be used to replace the
respective default values of <code class="docutils literal notranslate"><span class="pre">request.application_url</span></code> partially.</li>
</ul>
</div>
<div class="section" id="id83">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id83" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IContextURL</span></code> interface has been deprecated.
People have been instructed to use this to register a resource url adapter
in the &quot;Hooks&quot; chapter to use to influence <code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> URL
generation for resources found via custom traversers since Pyramid 1.0.</p>
<p>The interface still exists and registering such an adapter still works, but
this interface will be removed from the software after a few major Pyramid
releases.  You should replace it with an equivalent
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResourceURL</span></code> adapter, registered using the new
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_resource_url_adapter</span></code> API.  A
deprecation warning is now emitted when a
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IContextURL</span></code> adapter is found when
<code class="docutils literal notranslate"><span class="pre">request.resource_url</span></code> is called.</p>
</li>
</ul>
</div>
<div class="section" id="id84">
<h3>Documentation<a class="headerlink" href="#id84" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Don't create a <code class="docutils literal notranslate"><span class="pre">session</span></code> instance in SQLA Wiki tutorial, use raw
<code class="docutils literal notranslate"><span class="pre">DBSession</span></code> instead (this is more common in real SQLA apps).</li>
</ul>
</div>
<div class="section" id="scaffolding">
<h3>Scaffolding<a class="headerlink" href="#scaffolding" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Put <code class="docutils literal notranslate"><span class="pre">pyramid.includes</span></code> targets within ini files in scaffolds on separate
lines in order to be able to tell people to comment out only the
<code class="docutils literal notranslate"><span class="pre">pyramid_debugtoolbar</span></code> line when they want to disable the toolbar.</li>
</ul>
</div>
<div class="section" id="id85">
<h3>Dependencies<a class="headerlink" href="#id85" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Depend on <code class="docutils literal notranslate"><span class="pre">venusian</span></code> &gt;= 1.0a3 to provide scan <code class="docutils literal notranslate"><span class="pre">ignore</span></code> support.</li>
</ul>
</div>
<div class="section" id="internal">
<h3>Internal<a class="headerlink" href="#internal" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Create a &quot;MakoRendererFactoryHelper&quot; that provides customizable settings
key prefixes.  Allows settings prefixes other than &quot;mako.&quot; to be used to
create different factories that don't use the global mako settings.  This
will be useful for the debug toolbar, which can currently be sabotaged by
someone using custom mako configuration settings.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2012-02-07">
<h2>1.3a7 (2012-02-07)<a class="headerlink" href="#a7-2012-02-07" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id86">
<h3>Features<a class="headerlink" href="#id86" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>More informative error message when a <code class="docutils literal notranslate"><span class="pre">config.include</span></code> cannot find an
<code class="docutils literal notranslate"><span class="pre">includeme</span></code>.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/392">https://github.com/Pylons/pyramid/pull/392</a>.</li>
<li>Internal: catch unhashable discriminators early (raise an error instead of
allowing them to find their way into resolveConflicts).</li>
<li>The <cite>match_param</cite> view predicate now accepts a string or a tuple.
This replaces the broken behavior of accepting a dict. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/425">https://github.com/Pylons/pyramid/issues/425</a> for more information.</li>
</ul>
</div>
<div class="section" id="id87">
<h3>Bug Fixes<a class="headerlink" href="#id87" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The process will now restart when <code class="docutils literal notranslate"><span class="pre">pserve</span></code> is used with the <code class="docutils literal notranslate"><span class="pre">--reload</span></code>
flag when the <code class="docutils literal notranslate"><span class="pre">development.ini</span></code> file (or any other .ini file in use) is
changed.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/377">https://github.com/Pylons/pyramid/issues/377</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/411">https://github.com/Pylons/pyramid/pull/411</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">prequest</span></code> script would fail when used against URLs which did not
return HTML or text.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/381">https://github.com/Pylons/pyramid/issues/381</a></li>
</ul>
</div>
<div class="section" id="id88">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id88" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <cite>match_param</cite> view predicate no longer accepts a dict. This will
have no negative affect because the implementation was broken for
dict-based arguments.</li>
</ul>
</div>
<div class="section" id="id89">
<h3>Documentation<a class="headerlink" href="#id89" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a traversal hello world example to the narrative docs.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2012-01-20">
<h2>1.3a6 (2012-01-20)<a class="headerlink" href="#a6-2012-01-20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id90">
<h3>Features<a class="headerlink" href="#id90" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_request_property</span></code>. Add lazy
property descriptors to a request without changing the request factory.
This method provides conflict detection and is the suggested way to add
properties to a request.</li>
<li>Responses generated by Pyramid's <code class="docutils literal notranslate"><span class="pre">static_view</span></code> now use
a <code class="docutils literal notranslate"><span class="pre">wsgi.file_wrapper</span></code> (see
<a class="reference external" href="http://www.python.org/dev/peps/pep-0333/#optional-platform-specific-file-handling">http://www.python.org/dev/peps/pep-0333/#optional-platform-specific-file-handling</a>)
when one is provided by the web server.</li>
</ul>
</div>
<div class="section" id="id91">
<h3>Bug Fixes<a class="headerlink" href="#id91" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Views registered with an <code class="docutils literal notranslate"><span class="pre">accept</span></code> could not be overridden correctly with
a different view that had the same predicate arguments.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/404">https://github.com/Pylons/pyramid/pull/404</a> for more information.</li>
<li>When using a dotted name for a <code class="docutils literal notranslate"><span class="pre">view</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> that pointed to a class with a <code class="docutils literal notranslate"><span class="pre">view_defaults</span></code>
decorator, the view defaults would not be applied.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/396">https://github.com/Pylons/pyramid/issues/396</a> .</li>
<li>Static URL paths were URL-quoted twice.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/407">https://github.com/Pylons/pyramid/issues/407</a> .</li>
</ul>
</div>
</div>
<div class="section" id="a5-2012-01-09">
<h2>1.3a5 (2012-01-09)<a class="headerlink" href="#a5-2012-01-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id92">
<h3>Bug Fixes<a class="headerlink" href="#id92" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_defaults</span></code> decorator did not work properly when
more than one view relied on the defaults being different for configuration
conflict resolution.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/394">https://github.com/Pylons/pyramid/issues/394</a>.</li>
</ul>
</div>
<div class="section" id="id93">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id93" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">path_info</span></code> route and view predicates now match against
<code class="docutils literal notranslate"><span class="pre">request.upath_info</span></code> (Unicode) rather than <code class="docutils literal notranslate"><span class="pre">request.path_info</span></code>
(indeterminate value based on Python 3 vs. Python 2).  This has to be done
to normalize matching on Python 2 and Python 3.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2012-01-05">
<h2>1.3a4 (2012-01-05)<a class="headerlink" href="#a4-2012-01-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id94">
<h3>Features<a class="headerlink" href="#id94" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.set_property</span></code>. Add lazy property
descriptors to a request without changing the request factory. New
properties may be reified, effectively caching the value for the lifetime
of the instance. Common use-cases for this would be to get a database
connection for the request or identify the current user.</li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">waitress</span></code> WSGI server instead of <code class="docutils literal notranslate"><span class="pre">wsgiref</span></code> in scaffolding.</li>
</ul>
</div>
<div class="section" id="id95">
<h3>Bug Fixes<a class="headerlink" href="#id95" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The documentation of <code class="docutils literal notranslate"><span class="pre">pyramid.events.subscriber</span></code> indicated that using it
as a decorator with no arguments like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">somefunc</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Would register <code class="docutils literal notranslate"><span class="pre">somefunc</span></code> to receive all events sent via the registry,
but this was untrue.  Instead, it would receive no events at all.  This has
now been fixed and the code matches the documentation.  See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/386">https://github.com/Pylons/pyramid/issues/386</a></p>
</li>
<li><p class="first">Literal portions of route patterns were not URL-quoted when <code class="docutils literal notranslate"><span class="pre">route_url</span></code>
or <code class="docutils literal notranslate"><span class="pre">route_path</span></code> was used to generate a URL or path.</p>
</li>
<li><p class="first">The result of <code class="docutils literal notranslate"><span class="pre">route_path</span></code> or <code class="docutils literal notranslate"><span class="pre">route_url</span></code> might have been <code class="docutils literal notranslate"><span class="pre">unicode</span></code>
or <code class="docutils literal notranslate"><span class="pre">str</span></code> depending on the input.  It is now guaranteed to always be
<code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
</li>
<li><p class="first">URL matching when the pattern contained non-ASCII characters in literal
parts was indeterminate.  Now the pattern supplied to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> is
assumed to be either: a <code class="docutils literal notranslate"><span class="pre">unicode</span></code> value, or a <code class="docutils literal notranslate"><span class="pre">str</span></code> value that contains
only ASCII characters.  If you now want to match the path info from a URL
that contains high order characters, you can pass the Unicode
representation of the decoded path portion in the pattern.</p>
</li>
<li><p class="first">When using a <code class="docutils literal notranslate"><span class="pre">traverse=</span></code> route predicate, traversal would fail with a
URLDecodeError if there were any high-order characters in the traversal
pattern or in the matched dynamic segments.</p>
</li>
<li><p class="first">Using a dynamic segment named <code class="docutils literal notranslate"><span class="pre">traverse</span></code> in a route pattern like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;trav_route&#39;</span><span class="p">,</span> <span class="s1">&#39;traversal/{traverse:.*}&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Would cause a <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> when the route was matched and the
matched portion of the URL contained any high-order characters.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/385">https://github.com/Pylons/pyramid/issues/385</a> .</p>
</li>
<li><p class="first">When using a <code class="docutils literal notranslate"><span class="pre">*traverse</span></code> stararg in a route pattern, a URL that matched
that possessed a <code class="docutils literal notranslate"><span class="pre">&#64;&#64;</span></code> in its name (signifying a view name) would be
inappropriately quoted by the traversal machinery during traversal,
resulting in the view not being found properly. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/382">https://github.com/Pylons/pyramid/issues/382</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/375">https://github.com/Pylons/pyramid/issues/375</a> .</p>
</li>
</ul>
</div>
<div class="section" id="id96">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id96" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">String values passed to <code class="docutils literal notranslate"><span class="pre">route_url</span></code> or <code class="docutils literal notranslate"><span class="pre">route_path</span></code> that are meant to
replace &quot;remainder&quot; matches will now be URL-quoted except for embedded
slashes. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;remain&#39;</span><span class="p">,</span> <span class="s1">&#39;/foo*remainder&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">route_path</span><span class="p">(</span><span class="s1">&#39;remain&#39;</span><span class="p">,</span> <span class="n">remainder</span><span class="o">=</span><span class="s1">&#39;abc / def&#39;</span><span class="p">)</span>
<span class="c1"># -&gt; &#39;/foo/abc%20/%20def&#39;</span>
</pre></div>
</div>
<p>Previously string values passed as remainder replacements were tacked on
untouched, without any URL-quoting.  But this doesn't really work logically
if the value passed is Unicode (raw unicode cannot be placed in a URL or in
a path) and it is inconsistent with the rest of the URL generation
machinery if the value is a string (it won't be quoted unless by the
caller).</p>
<p>Some folks will have been relying on the older behavior to tack on query
string elements and anchor portions of the URL; sorry, you'll need to
change your code to use the <code class="docutils literal notranslate"><span class="pre">_query</span></code> and/or <code class="docutils literal notranslate"><span class="pre">_anchor</span></code> arguments to
<code class="docutils literal notranslate"><span class="pre">route_path</span></code> or <code class="docutils literal notranslate"><span class="pre">route_url</span></code> to do this now.</p>
</li>
<li><p class="first">If you pass a bytestring that contains non-ASCII characters to
<code class="docutils literal notranslate"><span class="pre">add_route</span></code> as a pattern, it will now fail at startup time.  Use Unicode
instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-12-21">
<h2>1.3a3 (2011-12-21)<a class="headerlink" href="#a3-2011-12-21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id97">
<h3>Features<a class="headerlink" href="#id97" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">prequest</span></code> script (along the lines of <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">request</span></code>).  It is
documented in the &quot;Command-Line Pyramid&quot; chapter in the section entitled
&quot;Invoking a Request&quot;.</li>
<li>Add undocumented <code class="docutils literal notranslate"><span class="pre">__discriminator__</span></code> API to derived view callables.
e.g. <code class="docutils literal notranslate"><span class="pre">adapters.lookup(...).__discriminator__(context,</span> <span class="pre">request)</span></code>.  It will
be used by superdynamic systems that require the discriminator to be used
for introspection after manual view lookup.</li>
</ul>
</div>
<div class="section" id="id98">
<h3>Bug Fixes<a class="headerlink" href="#id98" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Normalized exit values and <code class="docutils literal notranslate"><span class="pre">-h</span></code> output for all <code class="docutils literal notranslate"><span class="pre">p*</span></code> scripts
(<code class="docutils literal notranslate"><span class="pre">pviews</span></code>, <code class="docutils literal notranslate"><span class="pre">proutes</span></code>, etc).</li>
</ul>
</div>
<div class="section" id="id99">
<h3>Documentation<a class="headerlink" href="#id99" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a section named &quot;Making Your Script into a Console Script&quot; in the
&quot;Command-Line Pyramid&quot; chapter.</li>
<li>Removed the &quot;Running Pyramid on Google App Engine&quot; tutorial from the main
docs.  It survives on in the Cookbook
(<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/gae.html">http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/gae.html</a>).
Rationale: it provides the correct info for the Python 2.5 version of GAE
only, and this version of Pyramid does not support Python 2.5.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-12-14">
<h2>1.3a2 (2011-12-14)<a class="headerlink" href="#a2-2011-12-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id100">
<h3>Features<a class="headerlink" href="#id100" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>New API: <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_defaults</span></code>. If you use a class as a view, you
can use the new <code class="docutils literal notranslate"><span class="pre">view_defaults</span></code> class decorator on the class to provide
defaults to the view configuration information used by every
<code class="docutils literal notranslate"><span class="pre">&#64;view_config</span></code> decorator that decorates a method of that class.  It also
works against view configurations involving a class made imperatively.</li>
<li>Added a backwards compatibility knob to <code class="docutils literal notranslate"><span class="pre">pcreate</span></code> to emulate <code class="docutils literal notranslate"><span class="pre">paster</span>
<span class="pre">create</span></code> handling for the <code class="docutils literal notranslate"><span class="pre">--list-templates</span></code> option.</li>
<li>Changed scaffolding machinery around a bit to make it easier for people who
want to have extension scaffolds that can work across Pyramid 1.0.X, 1.1.X,
1.2.X and 1.3.X.  See the new &quot;Creating Pyramid Scaffolds&quot; chapter in the
narrative documentation for more info.</li>
</ul>
</div>
<div class="section" id="id101">
<h3>Documentation<a class="headerlink" href="#id101" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added documentation to &quot;View Configuration&quot; narrative documentation chapter
about <code class="docutils literal notranslate"><span class="pre">view_defaults</span></code> class decorator.</li>
<li>Added API docs for <code class="docutils literal notranslate"><span class="pre">view_defaults</span></code> class decorator.</li>
<li>Added an API docs chapter for <code class="docutils literal notranslate"><span class="pre">pyramid.scaffolds</span></code>.</li>
<li>Added a narrative docs chapter named &quot;Creating Pyramid Scaffolds&quot;.</li>
</ul>
</div>
<div class="section" id="id102">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id102" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">template_renderer</span></code> method of <code class="docutils literal notranslate"><span class="pre">pyramid.scaffolds.PyramidScaffold</span></code>
was renamed to <code class="docutils literal notranslate"><span class="pre">render_template</span></code>.  If you were overriding it, you're a
bad person, because it wasn't an API before now.  But we're nice so we're
letting you know.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-12-09">
<h2>1.3a1 (2011-12-09)<a class="headerlink" href="#a1-2011-12-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id103">
<h3>Features<a class="headerlink" href="#id103" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Python 3.2 compatibility.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">pyramid.compat</span></code> module and API documentation which provides Python
2/3 straddling support for Pyramid add-ons and development environments.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">mako.directories</span></code> setting is no longer required to use Mako templates
Rationale: Mako template renderers can be specified using an absolute asset
spec.  An entire application can be written with such asset specs,
requiring no ordered lookup path.</li>
<li><code class="docutils literal notranslate"><span class="pre">bpython</span></code> interpreter compatibility in <code class="docutils literal notranslate"><span class="pre">pshell</span></code>.  See the &quot;Command-Line
Pyramid&quot; narrative docs chapter for more information.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">get_appsettings</span></code> API function to the <code class="docutils literal notranslate"><span class="pre">pyramid.paster</span></code> module.
This function returns the settings defined within an <code class="docutils literal notranslate"><span class="pre">[app:...]</span></code> section
in a PasteDeploy ini file.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">setup_logging</span></code> API function to the <code class="docutils literal notranslate"><span class="pre">pyramid.paster</span></code> module.
This function sets up Python logging according to the logging configuration
in a PasteDeploy ini file.</li>
<li>Configuration conflict reporting is reported in a more understandable way
(&quot;Line 11 in file...&quot; vs. a repr of a tuple of similar info).</li>
<li>A configuration introspection system was added; see the narrative
documentation chapter entitled &quot;Pyramid Configuration Introspection&quot; for
more information.  New APIs: <code class="docutils literal notranslate"><span class="pre">pyramid.registry.Introspectable</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.introspector</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.introspectable</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.registry.Registry.introspector</span></code>.</li>
<li>Allow extra keyword arguments to be passed to the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.action</span></code> method.</li>
<li>New APIs: <code class="docutils literal notranslate"><span class="pre">pyramid.path.AssetResolver</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.path.DottedNameResolver</span></code>.  The former can be used to resolve
asset specifications, the latter can be used to resolve dotted names to
modules or packages.</li>
</ul>
</div>
<div class="section" id="id104">
<h3>Bug Fixes<a class="headerlink" href="#id104" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make test suite pass on 32-bit systems; closes #286.  closes #306.
See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/286">https://github.com/Pylons/pyramid/issues/286</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> decorator did not accept a <code class="docutils literal notranslate"><span class="pre">match_params</span></code>
predicate argument.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/308">https://github.com/Pylons/pyramid/pull/308</a></li>
<li>The AuthTktCookieHelper could potentially generate Unicode headers
inappropriately when the <code class="docutils literal notranslate"><span class="pre">tokens</span></code> argument to remember was used.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/314">https://github.com/Pylons/pyramid/pull/314</a>.</li>
<li>The AuthTktAuthenticationPolicy did not use a timing-attack-aware string
comparator.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/320">https://github.com/Pylons/pyramid/pull/320</a> for more info.</li>
<li>The DummySession in <code class="docutils literal notranslate"><span class="pre">pyramid.testing</span></code> now generates a new CSRF token if
one doesn't yet exist.</li>
<li><code class="docutils literal notranslate"><span class="pre">request.static_url</span></code> now generates URL-quoted URLs when fed a <code class="docutils literal notranslate"><span class="pre">path</span></code>
argument which contains characters that are unsuitable for URLs.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/349">https://github.com/Pylons/pyramid/issues/349</a> for more info.</li>
<li>Prevent a scaffold rendering from being named <code class="docutils literal notranslate"><span class="pre">site</span></code> (conflicts with
Python internal site.py).</li>
<li>Support for using instances as targets of the <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp</span></code> and
<code class="docutils literal notranslate"><span class="pre">pryramid.wsgi.wsgiapp2</span></code> functions.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/370">https://github.com/Pylons/pyramid/pull/370</a> for more info.</li>
</ul>
</div>
<div class="section" id="id105">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id105" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer runs on Python 2.5 (which includes the most recent
release of Jython and the Python 2.5 version of GAE as of this writing).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">paster</span></code> command is no longer the documented way to create projects,
start the server, or run debugging commands.  To create projects from
scaffolds, <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">create</span></code> is replaced by the <code class="docutils literal notranslate"><span class="pre">pcreate</span></code> console script.
To serve up a project, <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">serve</span></code> is replaced by the <code class="docutils literal notranslate"><span class="pre">pserve</span></code>
console script.  New console scripts named <code class="docutils literal notranslate"><span class="pre">pshell</span></code>, <code class="docutils literal notranslate"><span class="pre">pviews</span></code>,
<code class="docutils literal notranslate"><span class="pre">proutes</span></code>, and <code class="docutils literal notranslate"><span class="pre">ptweens</span></code> do what their <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">&lt;commandname&gt;</span></code>
equivalents used to do.  Rationale: the Paste and PasteScript packages do
not run under Python 3.</li>
<li>The default WSGI server run as the result of <code class="docutils literal notranslate"><span class="pre">pserve</span></code> from newly rendered
scaffolding is now the <code class="docutils literal notranslate"><span class="pre">wsgiref</span></code> WSGI server instead of the
<code class="docutils literal notranslate"><span class="pre">paste.httpserver</span></code> server.  Rationale: Rationale: the Paste and
PasteScript packages do not run under Python 3.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pshell</span></code> command (see &quot;paster pshell&quot;) no longer accepts a
<code class="docutils literal notranslate"><span class="pre">--disable-ipython</span></code> command-line argument.  Instead, it accepts a <code class="docutils literal notranslate"><span class="pre">-p</span></code>
or <code class="docutils literal notranslate"><span class="pre">--python-shell</span></code> argument, which can be any of the values <code class="docutils literal notranslate"><span class="pre">python</span></code>,
<code class="docutils literal notranslate"><span class="pre">ipython</span></code> or <code class="docutils literal notranslate"><span class="pre">bpython</span></code>.</li>
<li>Removed the <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.renderer_from_name</span></code> function.  It has been
deprecated since Pyramid 1.0, and was never an API.</li>
<li>To use ZCML with versions of Pyramid &gt;= 1.3, you will need <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code>
version &gt;= 0.8 and <code class="docutils literal notranslate"><span class="pre">zope.configuration</span></code> version &gt;= 3.8.0.  The
<code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> package version 0.8 is backwards compatible all the way to
Pyramid 1.0, so you won't be warned if you have older versions installed
and upgrade Pyramid &quot;in-place&quot;; it may simply break instead.</li>
</ul>
</div>
<div class="section" id="id106">
<h3>Dependencies<a class="headerlink" href="#id106" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer depends on the <code class="docutils literal notranslate"><span class="pre">zope.component</span></code> package, except as a
testing dependency.</li>
<li>Pyramid now depends on a zope.interface&gt;=3.8.0, WebOb&gt;=1.2dev,
repoze.lru&gt;=0.4, zope.deprecation&gt;=3.5.0, translationstring&gt;=0.4 (for
Python 3 compatibility purposes).  It also, as a testing dependency,
depends on WebTest&gt;=1.3.1 for the same reason.</li>
<li>Pyramid no longer depends on the Paste or PasteScript packages.</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Documentation<a class="headerlink" href="#id107" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The SQLAlchemy Wiki tutorial has been updated.  It now uses
<code class="docutils literal notranslate"><span class="pre">&#64;view_config</span></code> decorators and an explicit database population script.</li>
<li>Minor updates to the ZODB Wiki tutorial.</li>
<li>A narrative documentation chapter named &quot;Extending Pyramid Configuration&quot;
was added; it describes how to add a new directive, and how use the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.action</span></code> method within custom directives.  It
also describes how to add introspectable objects.</li>
<li>A narrative documentation chapter named &quot;Pyramid Configuration
Introspection&quot; was added.  It describes how to query the introspection
system.</li>
</ul>
</div>
<div class="section" id="id108">
<h3>Scaffolds<a class="headerlink" href="#id108" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Rendered scaffolds have now been changed to be more relocatable (fewer
mentions of the package name within files in the package).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">routesalchemy</span></code> scaffold has been renamed <code class="docutils literal notranslate"><span class="pre">alchemy</span></code>, replacing the
older (traversal-based) <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> scaffold (which has been retired).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">starter</span></code> scaffold now uses URL dispatch by default.</li>
</ul>
</div>
</div>
<div class="section" id="id109">
<h2>1.2 (2011-09-12)<a class="headerlink" href="#id109" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id110">
<h3>Features<a class="headerlink" href="#id110" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Route pattern replacement marker names can now begin with an underscore.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/276">https://github.com/Pylons/pyramid/issues/276</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-09-11">
<h2>1.2b3 (2011-09-11)<a class="headerlink" href="#b3-2011-09-11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id111">
<h3>Bug Fixes<a class="headerlink" href="#id111" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The route prefix was not taken into account when a static view was added in
an &quot;include&quot;.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/266">https://github.com/Pylons/pyramid/issues/266</a> .</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-09-08">
<h2>1.2b2 (2011-09-08)<a class="headerlink" href="#b2-2011-09-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id112">
<h3>Bug Fixes<a class="headerlink" href="#id112" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The 1.2b1 tarball was a brownbag (particularly for Windows users) because
it contained filenames with stray quotation marks in inappropriate places.
We depend on <code class="docutils literal notranslate"><span class="pre">setuptools-git</span></code> to produce release tarballs, and when it
was run to produce the 1.2b1 tarball, it didn't yet cope well with files
present in git repositories with high-order characters in their filenames.</li>
</ul>
</div>
<div class="section" id="id113">
<h3>Documentation<a class="headerlink" href="#id113" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Minor tweaks to the &quot;Introduction&quot; narrative chapter example app and
wording.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-09-08">
<h2>1.2b1 (2011-09-08)<a class="headerlink" href="#b1-2011-09-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id114">
<h3>Bug Fixes<a class="headerlink" href="#id114" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Sometimes falling back from territory translations (<code class="docutils literal notranslate"><span class="pre">de_DE</span></code>) to language
translations (<code class="docutils literal notranslate"><span class="pre">de</span></code>) would not work properly when using a localizer.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/263">https://github.com/Pylons/pyramid/issues/263</a></li>
<li>The static file serving machinery could not serve files that started with a
<code class="docutils literal notranslate"><span class="pre">.</span></code> (dot) character.</li>
<li>Static files with high-order (super-ASCII) characters in their names could
not be served by a static view.  The static file serving machinery
inappropriately URL-quoted path segments in filenames when asking for files
from the filesystem.</li>
<li>Within <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.traversal_path</span></code> , canonicalize URL segments
from UTF-8 to Unicode before checking whether a segment matches literally
one of <code class="docutils literal notranslate"><span class="pre">.</span></code>, the empty string, or <code class="docutils literal notranslate"><span class="pre">..</span></code> in case there's some sneaky way
someone might tunnel those strings via UTF-8 that don't match the literals
before decoded.</li>
</ul>
</div>
<div class="section" id="id115">
<h3>Documentation<a class="headerlink" href="#id115" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a &quot;What Makes Pyramid Unique&quot; section to the Introduction narrative
chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2011-09-06">
<h2>1.2a6 (2011-09-06)<a class="headerlink" href="#a6-2011-09-06" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id116">
<h3>Bug Fixes<a class="headerlink" href="#id116" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>AuthTktAuthenticationPolicy with a <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> interfered with logout.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/262">https://github.com/Pylons/pyramid/issues/262</a>.</li>
</ul>
</div>
<div class="section" id="id117">
<h3>Internal<a class="headerlink" href="#id117" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Internalize code previously depended upon as imports from the
<code class="docutils literal notranslate"><span class="pre">paste.auth</span></code> module (futureproof).</li>
<li>Replaced use of <code class="docutils literal notranslate"><span class="pre">paste.urlparser.StaticURLParser</span></code> with a derivative of
Chris Rossi's &quot;happy&quot; static file serving code (futureproof).</li>
<li>Fixed test suite; on some systems tests would fail due to indeterminate
test run ordering and a double-push-single-pop of a shared test variable.</li>
</ul>
</div>
<div class="section" id="behavior-differences">
<h3>Behavior Differences<a class="headerlink" href="#behavior-differences" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>An ETag header is no longer set when serving a static file.  A
Last-Modified header is set instead.</li>
<li>Static file serving no longer supports the <code class="docutils literal notranslate"><span class="pre">wsgi.file_wrapper</span></code> extension.</li>
<li>Instead of returning a <code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code> error when a static file is served
that cannot be accessed by the Pyramid process' user due to file
permissions, an IOError (or similar) will be raised.</li>
</ul>
</div>
<div class="section" id="id118">
<h3>Scaffolds<a class="headerlink" href="#id118" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All scaffolds now send the <code class="docutils literal notranslate"><span class="pre">cache_max_age</span></code> parameter to the
<code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> method.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2011-09-04">
<h2>1.2a5 (2011-09-04)<a class="headerlink" href="#a5-2011-09-04" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id119">
<h3>Bug Fixes<a class="headerlink" href="#id119" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> of a configurator was not properly taken into account
when registering routes in certain circumstances.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/260">https://github.com/Pylons/pyramid/issues/260</a></li>
</ul>
</div>
<div class="section" id="id120">
<h3>Dependencies<a class="headerlink" href="#id120" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">zope.configuration</span></code> package is no longer a dependency.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2011-09-02">
<h2>1.2a4 (2011-09-02)<a class="headerlink" href="#a4-2011-09-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id121">
<h3>Features<a class="headerlink" href="#id121" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Support an <code class="docutils literal notranslate"><span class="pre">onerror</span></code> keyword argument to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.scan()</span></code>.  This onerror keyword argument is
passed to <code class="docutils literal notranslate"><span class="pre">venusian.Scanner.scan()</span></code> to influence error behavior when
an exception is raised during scanning.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">request_method</span></code> predicate argument to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_view</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code> is now permitted to be a tuple of
HTTP method names.  Previously it was restricted to being a string
representing a single HTTP method name.</li>
<li>Undeprecated <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.find_model</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.model_path</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.model_path_tuple</span></code>,
and <code class="docutils literal notranslate"><span class="pre">pyramid.url.model_url</span></code>, which were all deprecated in Pyramid 1.0.
There's just not much cost to keeping them around forever as aliases to
their renamed <code class="docutils literal notranslate"><span class="pre">resource_*</span></code> prefixed functions.</li>
<li>Undeprecated <code class="docutils literal notranslate"><span class="pre">pyramid.view.bfg_view</span></code>, which was deprecated in Pyramid
1.0.  This is a low-cost alias to <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> which we'll
just keep around forever.</li>
</ul>
</div>
<div class="section" id="id122">
<h3>Dependencies<a class="headerlink" href="#id122" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid now requires Venusian 1.0a1 or better to support the <code class="docutils literal notranslate"><span class="pre">onerror</span></code>
keyword argument to <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.scan</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-08-29">
<h2>1.2a3 (2011-08-29)<a class="headerlink" href="#a3-2011-08-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id123">
<h3>Bug Fixes<a class="headerlink" href="#id123" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid did not properly generate static URLs using
<code class="docutils literal notranslate"><span class="pre">pyramid.url.static_url</span></code> when passed a caller-package relative path due
to a refactoring done in 1.2a1.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> object emitted a deprecation warning any time
<code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> was called upon it.  However, there are legitimate
situations in which <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> is called on arbitrary objects
(e.g. <code class="docutils literal notranslate"><span class="pre">hasattr</span></code>).  Now, the <code class="docutils literal notranslate"><span class="pre">settings</span></code> object only emits the warning
upon successful lookup.</li>
</ul>
</div>
<div class="section" id="id124">
<h3>Internal<a class="headerlink" href="#id124" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Use <code class="docutils literal notranslate"><span class="pre">config.with_package</span></code> in view_config decorator rather than
manufacturing a new renderer helper (cleanup).</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-08-27">
<h2>1.2a2 (2011-08-27)<a class="headerlink" href="#a2-2011-08-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id125">
<h3>Bug Fixes<a class="headerlink" href="#id125" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When a <code class="docutils literal notranslate"><span class="pre">renderers=</span></code> argument is not specified to the Configurator
constructor, eagerly register and commit the default renderer set.  This
permits the overriding of the default renderers, which was broken in 1.2a1
without a commit directly after Configurator construction.</li>
<li>Mako rendering exceptions had the wrong value for an error message.</li>
<li>An include could not set a root factory successfully because the
Configurator constructor unconditionally registered one that would be
treated as if it were &quot;the word of the user&quot;.</li>
</ul>
</div>
<div class="section" id="id126">
<h3>Features<a class="headerlink" href="#id126" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A session factory can now be passed in using the dotted name syntax.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-08-24">
<h2>1.2a1 (2011-08-24)<a class="headerlink" href="#a1-2011-08-24" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id127">
<h3>Features<a class="headerlink" href="#id127" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">[pshell]</span></code> section in an ini configuration file now treats a
<code class="docutils literal notranslate"><span class="pre">setup</span></code> key as a dotted name that points to a callable that is passed the
bootstrap environment.  It can mutate the environment as necessary for
great justice.</p>
</li>
<li><p class="first">A new configuration setting named <code class="docutils literal notranslate"><span class="pre">pyramid.includes</span></code> is now available.
It is described in the &quot;Environment Variables and <code class="docutils literal notranslate"><span class="pre">.ini</span></code> Files Settings&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">Added a <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> argument to the
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.include</span></code> method.  This argument allows you
to compose URL dispatch applications together.  See the section entitled
&quot;Using a Route Prefix to Compose Applications&quot; in the &quot;URL Dispatch&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">Added a <code class="docutils literal notranslate"><span class="pre">pyramid.security.NO_PERMISSION_REQUIRED</span></code> constant for use in
<code class="docutils literal notranslate"><span class="pre">permission=</span></code> statements to view configuration.  This constant has a
value of the string <code class="docutils literal notranslate"><span class="pre">__no_permission_required__</span></code>.  This string value was
previously referred to in documentation; now the documentation uses the
constant.</p>
</li>
<li><p class="first">Added a decorator-based way to configure a response adapter:
<code class="docutils literal notranslate"><span class="pre">pyramid.response.response_adapter</span></code>.  This decorator has the same use as
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_response_adapter</span></code> but it's declarative.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.events.BeforeRender</span></code> event now has an attribute named
<code class="docutils literal notranslate"><span class="pre">rendering_val</span></code>.  This can be used to introspect the value returned by a
view in a BeforeRender subscriber.</p>
</li>
<li><p class="first">New configurator directive: <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_tween</span></code>.
This directive adds a &quot;tween&quot;.  A &quot;tween&quot; is used to wrap the Pyramid
router's primary request handling function.  This is a feature may be used
by Pyramid framework extensions, to provide, for example, view timing
support and as a convenient place to hang bookkeeping code.</p>
<p>Tweens are further described in the narrative docs section in the Hooks
chapter, named &quot;Registering Tweens&quot;.</p>
</li>
<li><p class="first">New paster command <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">ptweens</span></code>, which prints the current &quot;tween&quot;
configuration for an application.  See the section entitled &quot;Displaying
Tweens&quot; in the Command-Line Pyramid chapter of the narrative documentation
for more info.</p>
</li>
<li><p class="first">The Pyramid debug logger now uses the standard logging configuration
(usually set up by Paste as part of startup).  This means that output from
e.g. <code class="docutils literal notranslate"><span class="pre">debug_notfound</span></code>, <code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code>, etc. will go to the
normal logging channels.  The logger name of the debug logger will be the
package name of the <em>caller</em> of the Configurator's constructor.</p>
</li>
<li><p class="first">A new attribute is available on request objects: <code class="docutils literal notranslate"><span class="pre">exc_info</span></code>.  Its value
will be <code class="docutils literal notranslate"><span class="pre">None</span></code> until an exception is caught by the Pyramid router, after
which it will be the result of <code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now implements the
<code class="docutils literal notranslate"><span class="pre">add_finished_callback</span></code> and <code class="docutils literal notranslate"><span class="pre">add_response_callback</span></code> methods.</p>
</li>
<li><p class="first">New methods of the <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> class:
<code class="docutils literal notranslate"><span class="pre">set_authentication_policy</span></code> and <code class="docutils literal notranslate"><span class="pre">set_authorization_policy</span></code>.  These are
meant to be consumed mostly by add-on authors.</p>
</li>
<li><p class="first">New Configurator method: <code class="docutils literal notranslate"><span class="pre">set_root_factory</span></code>.</p>
</li>
<li><p class="first">Pyramid no longer eagerly commits some default configuration statements at
Configurator construction time, which permits values passed in as
constructor arguments (e.g. <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> and
<code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code>) to override the same settings obtained via an
&quot;include&quot;.</p>
</li>
<li><p class="first">Better Mako rendering exceptions via
<code class="docutils literal notranslate"><span class="pre">pyramid.mako_templating.MakoRenderingException</span></code></p>
</li>
<li><p class="first">New request methods: <code class="docutils literal notranslate"><span class="pre">current_route_url</span></code>, <code class="docutils literal notranslate"><span class="pre">current_route_path</span></code>, and
<code class="docutils literal notranslate"><span class="pre">static_path</span></code>.</p>
</li>
<li><p class="first">New functions in <code class="docutils literal notranslate"><span class="pre">pyramid.url</span></code>: <code class="docutils literal notranslate"><span class="pre">current_route_path</span></code> and
<code class="docutils literal notranslate"><span class="pre">static_path</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.static_url</span></code> API (and its brethren
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.static_path</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid.url.static_url</span></code>, and
<code class="docutils literal notranslate"><span class="pre">pyramid.url.static_path</span></code>) now accept an asbolute filename as a &quot;path&quot;
argument.  This will generate a URL to an asset as long as the filename is
in a directory which was previously registered as a static view.
Previously, trying to generate a URL to an asset using an absolute file
path would raise a ValueError.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">RemoteUserAuthenticationPolicy</span> <span class="pre">``,</span> <span class="pre">``AuthTktAuthenticationPolicy</span></code>,
and <code class="docutils literal notranslate"><span class="pre">SessionAuthenticationPolicy</span></code> constructors now accept an additional
keyword argument named <code class="docutils literal notranslate"><span class="pre">debug</span></code>.  By default, this keyword argument is
<code class="docutils literal notranslate"><span class="pre">False</span></code>.  When it is <code class="docutils literal notranslate"><span class="pre">True</span></code>, debug information will be sent to the
Pyramid debug logger (usually on stderr) when the <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code>
or <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> method is called on any of these policies.  The
output produced can be useful when trying to diagnose
authentication-related problems.</p>
</li>
<li><p class="first">New view predicate: <code class="docutils literal notranslate"><span class="pre">match_param</span></code>.  Example: a view added via
<code class="docutils literal notranslate"><span class="pre">config.add_view(aview,</span> <span class="pre">match_param='action=edit')</span></code> will be called only
when the <code class="docutils literal notranslate"><span class="pre">request.matchdict</span></code> has a value inside it named <code class="docutils literal notranslate"><span class="pre">action</span></code> with
a value of <code class="docutils literal notranslate"><span class="pre">edit</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id128">
<h3>Internal<a class="headerlink" href="#id128" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Pyramid &quot;exception view&quot; machinery is now implemented as a &quot;tween&quot;
(<code class="docutils literal notranslate"><span class="pre">pyramid.tweens.excview_tween_factory</span></code>).</li>
<li>WSGIHTTPException (HTTPFound, HTTPNotFound, etc) now has a new API named
&quot;prepare&quot; which renders the body and content type when it is provided with
a WSGI environ.  Required for debug toolbar.</li>
<li>Once <code class="docutils literal notranslate"><span class="pre">__call__</span></code> or <code class="docutils literal notranslate"><span class="pre">prepare</span></code> is called on a WSGIHTTPException, the body
will be set, and subsequent calls to <code class="docutils literal notranslate"><span class="pre">__call__</span></code> will always return the
same body.  Delete the body attribute to rerender the exception body.</li>
<li>Previously the <code class="docutils literal notranslate"><span class="pre">pyramid.events.BeforeRender</span></code> event <em>wrapped</em> a dictionary
(it addressed it as its <code class="docutils literal notranslate"><span class="pre">_system</span></code> attribute).  Now it <em>is</em> a dictionary
(it inherits from <code class="docutils literal notranslate"><span class="pre">dict</span></code>), and it's the value that is passed to templates
as a top-level dictionary.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route_url</span></code>, <code class="docutils literal notranslate"><span class="pre">route_path</span></code>, <code class="docutils literal notranslate"><span class="pre">resource_url</span></code>, <code class="docutils literal notranslate"><span class="pre">static_url</span></code>, and
<code class="docutils literal notranslate"><span class="pre">current_route_url</span></code> functions in the <code class="docutils literal notranslate"><span class="pre">pyramid.url</span></code> package now delegate
to a method on the request they've been passed, instead of the other way
around.  The pyramid.request.Request object now inherits from a mixin named
pyramid.url.URLMethodsMixin to make this possible, and all url/path
generation logic is embedded in this mixin.</li>
<li>Refactor <code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> into a package.</li>
<li>Removed the <code class="docutils literal notranslate"><span class="pre">_set_security_policies</span></code> method of the Configurator.</li>
<li>Moved the <code class="docutils literal notranslate"><span class="pre">StaticURLInfo</span></code> class from <code class="docutils literal notranslate"><span class="pre">pyramid.static</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.views</span></code>.</li>
<li>Move the <code class="docutils literal notranslate"><span class="pre">Settings</span></code> class from <code class="docutils literal notranslate"><span class="pre">pyramid.settings</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.settings</span></code>.</li>
<li>Move the <code class="docutils literal notranslate"><span class="pre">OverrideProvider</span></code>, <code class="docutils literal notranslate"><span class="pre">PackageOverrides</span></code>, <code class="docutils literal notranslate"><span class="pre">DirectoryOverride</span></code>,
and <code class="docutils literal notranslate"><span class="pre">FileOverride</span></code> classes from <code class="docutils literal notranslate"><span class="pre">pyramid.asset</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.assets</span></code>.</li>
</ul>
</div>
<div class="section" id="id129">
<h3>Deprecations<a class="headerlink" href="#id129" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All Pyramid-related deployment settings (e.g. <code class="docutils literal notranslate"><span class="pre">debug_all</span></code>,
<code class="docutils literal notranslate"><span class="pre">debug_notfound</span></code>) are now meant to be prefixed with the prefix
<code class="docutils literal notranslate"><span class="pre">pyramid.</span></code>.  For example: <code class="docutils literal notranslate"><span class="pre">debug_all</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">pyramid.debug_all</span></code>.  The
old non-prefixed settings will continue to work indefinitely but supplying
them may eventually print a deprecation warning.  All scaffolds and
tutorials have been changed to use prefixed settings.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> dictionary now raises a deprecation warning when you
attempt to access its values via <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> instead of
via <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>.</li>
</ul>
</div>
<div class="section" id="id130">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id130" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">If a string is passed as the <code class="docutils literal notranslate"><span class="pre">debug_logger</span></code> parameter to a Configurator,
that string is considered to be the name of a global Python logger rather
than a dotted name to an instance of a logger.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.include</span></code> method now accepts only a
single <code class="docutils literal notranslate"><span class="pre">callable</span></code> argument (a sequence of callables used to be
permitted).  If you are passing more than one <code class="docutils literal notranslate"><span class="pre">callable</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.include</span></code>, it will break.  You now must now
instead make a separate call to the method for each callable.  This change
was introduced to support the <code class="docutils literal notranslate"><span class="pre">route_prefix</span></code> feature of include.</p>
</li>
<li><p class="first">It may be necessary to more strictly order configuration route and view
statements when using an &quot;autocommitting&quot; Configurator.  In the past, it
was possible to add a view which named a route name before adding a route
with that name when you used an autocommitting configurator.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;my.pkg.someview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;/foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above will raise an exception when the view attempts to add itself.
Now you must add the route before adding the view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;/foo&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;my.pkg.someview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This won't effect &quot;normal&quot; users, only people who have legacy BFG codebases
that used an autommitting configurator and possibly tests that use the
configurator API (the configurator returned by <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> is
an autocommitting configurator).  The right way to get around this is to
use a non-autocommitting configurator (the default), which does not have
these directive ordering requirements.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code> directive no longer returns a
route object.  This change was required to make route vs. view
configuration processing work properly.</p>
</li>
</ul>
</div>
<div class="section" id="id131">
<h3>Documentation<a class="headerlink" href="#id131" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Narrative and API documentation which used the <code class="docutils literal notranslate"><span class="pre">route_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">route_path</span></code>, <code class="docutils literal notranslate"><span class="pre">resource_url</span></code>, <code class="docutils literal notranslate"><span class="pre">static_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">current_route_url</span></code>
functions in the <code class="docutils literal notranslate"><span class="pre">pyramid.url</span></code> package have now been changed to use
eponymous methods of the request instead.</li>
<li>Added a section entitled &quot;Using a Route Prefix to Compose Applications&quot; to
the &quot;URL Dispatch&quot; narrative documentation chapter.</li>
<li>Added a new module to the API docs: <code class="docutils literal notranslate"><span class="pre">pyramid.tweens</span></code>.</li>
<li>Added a &quot;Registering Tweens&quot; section to the &quot;Hooks&quot; narrative chapter.</li>
<li>Added a &quot;Displaying Tweens&quot; section to the &quot;Command-Line Pyramid&quot; narrative
chapter.</li>
<li>Added documentation for the <code class="docutils literal notranslate"><span class="pre">pyramid.tweens</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.includes</span></code>
configuration settings to the &quot;Environment Variables and <code class="docutils literal notranslate"><span class="pre">.ini</span></code> Files
Settings&quot; chapter.</li>
<li>Added a Logging chapter to the narrative docs (based on the Pylons logging
docs, thanks Phil).</li>
<li>Added a Paste chapter to the narrative docs (moved content from the Project
chapter).</li>
<li>Added the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IDict</span></code> interface representing the methods
of a dictionary, for documentation purposes only (IMultiDict and
IBeforeRender inherit from it).</li>
<li>All tutorials now use - The <code class="docutils literal notranslate"><span class="pre">route_url</span></code>, <code class="docutils literal notranslate"><span class="pre">route_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">resource_url</span></code>, <code class="docutils literal notranslate"><span class="pre">static_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">current_route_url</span></code> methods of the
request rather than the function variants imported from <code class="docutils literal notranslate"><span class="pre">pyramid.url</span></code>.</li>
<li>The ZODB wiki tutorial now uses the <code class="docutils literal notranslate"><span class="pre">pyramid_zodbconn</span></code> package rather
than the <code class="docutils literal notranslate"><span class="pre">repoze.zodbconn</span></code> package to provide ZODB integration.</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h3>Dependency Changes<a class="headerlink" href="#dependency-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid now relies on PasteScript &gt;= 1.7.4.  This version contains a
feature important for allowing flexible logging configuration.</li>
</ul>
</div>
<div class="section" id="id132">
<h3>Scaffolds<a class="headerlink" href="#id132" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All scaffolds now use the <code class="docutils literal notranslate"><span class="pre">pyramid_tm</span></code> package rather than the
<code class="docutils literal notranslate"><span class="pre">repoze.tm2</span></code> middleware to manage transaction management.</li>
<li>The ZODB scaffold now uses the <code class="docutils literal notranslate"><span class="pre">pyramid_zodbconn</span></code> package rather than the
<code class="docutils literal notranslate"><span class="pre">repoze.zodbconn</span></code> package to provide ZODB integration.</li>
<li>All scaffolds now use the <code class="docutils literal notranslate"><span class="pre">pyramid_debugtoolbar</span></code> package rather than the
<code class="docutils literal notranslate"><span class="pre">WebError</span></code> package to provide interactive debugging features.</li>
<li>Projects created via a scaffold no longer depend on the <code class="docutils literal notranslate"><span class="pre">WebError</span></code>
package at all; configuration in the <code class="docutils literal notranslate"><span class="pre">production.ini</span></code> file which used to
require its <code class="docutils literal notranslate"><span class="pre">error_catcher</span></code> middleware has been removed.  Configuring
error catching / email sending is now the domain of the <code class="docutils literal notranslate"><span class="pre">pyramid_exclog</span></code>
package (see <a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_exclog/en/latest/">http://docs.pylonsproject.org/projects/pyramid_exclog/en/latest/</a>).</li>
</ul>
</div>
<div class="section" id="id133">
<h3>Bug Fixes<a class="headerlink" href="#id133" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fixed an issue with the default renderer not working at certain times.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/249">https://github.com/Pylons/pyramid/issues/249</a></li>
</ul>
</div>
</div>
<div class="section" id="id134">
<h2>1.1 (2011-07-22)<a class="headerlink" href="#id134" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id135">
<h3>Features<a class="headerlink" href="#id135" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added the <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.null_renderer</span></code> object as an API.  The null
renderer is an object that can be used in advanced integration cases as
input to the view configuration <code class="docutils literal notranslate"><span class="pre">renderer=</span></code> argument.  When the null
renderer is used as a view renderer argument, Pyramid avoids converting the
view callable result into a Response object.  This is useful if you want to
reuse the view configuration and lookup machinery outside the context of
its use by the Pyramid router.  This feature was added for consumption by
the <code class="docutils literal notranslate"><span class="pre">pyramid_rpc</span></code> package, which uses view configuration and lookup
outside the context of a router in exactly this way.  <code class="docutils literal notranslate"><span class="pre">pyramid_rpc</span></code> has
been broken under 1.1 since 1.1b1; adding it allows us to make it work
again.</li>
<li>Change all scaffolding templates that point to docs.pylonsproject.org to
use <code class="docutils literal notranslate"><span class="pre">/projects/pyramid/current</span></code> rather than <code class="docutils literal notranslate"><span class="pre">/projects/pyramid/dev</span></code>.</li>
</ul>
</div>
<div class="section" id="id136">
<h3>Internals<a class="headerlink" href="#id136" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">compat</span></code> code that served only the purpose of providing backwards
compatibility with Python 2.4.</li>
<li>Add a deprecation warning for non-API function
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.renderer_from_name</span></code> which has seen use in the wild.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">clone</span></code> method to <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.RendererHelper</span></code> for use by
the <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> decorator.</li>
</ul>
</div>
<div class="section" id="id137">
<h3>Documentation<a class="headerlink" href="#id137" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fixed two typos in wiki2 (SQLA + URL Dispatch) tutorial.</li>
<li>Reordered chapters in narrative section for better new user friendliness.</li>
<li>Added more indexing markers to sections in documentation.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2011-07-18">
<h2>1.1b4 (2011-07-18)<a class="headerlink" href="#b4-2011-07-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id138">
<h3>Documentation<a class="headerlink" href="#id138" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a section entitled &quot;Writing a Script&quot; to the &quot;Command-Line Pyramid&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id139">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id139" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>We added the <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.make_request</span></code> API too hastily in 1.1b3.
It has been removed.  Sorry for any inconvenience.  Use the
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.blank</span></code> API instead.</li>
</ul>
</div>
<div class="section" id="id140">
<h3>Features<a class="headerlink" href="#id140" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code>, <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pviews</span></code>, and <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">proutes</span></code> commands
each now under the hood uses <code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code>, which makes it
possible to supply an <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file without naming the &quot;right&quot; section in
the file that points at the actual Pyramid application.  Instead, you can
generally just run <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">{pshell|proutes|pviews}</span> <span class="pre">development.ini</span></code> and
it will do mostly the right thing.</li>
</ul>
</div>
<div class="section" id="id141">
<h3>Bug Fixes<a class="headerlink" href="#id141" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Omit custom environ variables when rendering a custom exception template in
<code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.WSGIHTTPException._set_default_attrs</span></code>;
stringifying thse may trigger code that should not be executed; see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/239">https://github.com/Pylons/pyramid/issues/239</a></li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-07-15">
<h2>1.1b3 (2011-07-15)<a class="headerlink" href="#b3-2011-07-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id142">
<h3>Features<a class="headerlink" href="#id142" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Fix corner case to ease semifunctional testing of views: create a new
rendererinfo to clear out old registry on a rescan.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/234">https://github.com/Pylons/pyramid/pull/234</a>.</p>
</li>
<li><p class="first">New API class: <code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code>.  This supersedes the
deprecated <code class="docutils literal notranslate"><span class="pre">pyramid.view.static</span></code> class.  <code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code>
by default serves up documents as the result of the request's
<code class="docutils literal notranslate"><span class="pre">path_info</span></code>, attribute rather than it's <code class="docutils literal notranslate"><span class="pre">subpath</span></code> attribute (the
inverse was true of <code class="docutils literal notranslate"><span class="pre">pyramid.view.static</span></code>, and still is).
<code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code> exposes a <code class="docutils literal notranslate"><span class="pre">use_subpath</span></code> flag for use when
you want the static view to behave like the older deprecated version.</p>
</li>
<li><p class="first">A new API function <code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code> has been added to make
writing scripts that bootstrap a Pyramid environment easier, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.paster</span> <span class="k">import</span> <span class="n">bootstrap</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="s1">&#39;/path/to/my/development.ini&#39;</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s1">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A new API function <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.prepare</span></code> has been added.  It is a
lower-level analogue of <code class="docutils literal notranslate"><span class="pre">pyramid.paster.boostrap</span></code> that accepts a request
and a registry instead of a config file argument, and is used for the same
purpose:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="k">import</span> <span class="n">prepare</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">prepare</span><span class="p">(</span><span class="n">registry</span><span class="o">=</span><span class="n">myregistry</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">request</span><span class="o">.</span><span class="n">route_url</span><span class="p">(</span><span class="s1">&#39;myroute&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">A new API function <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.make_request</span></code> has been added.  The
resulting request will have a <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute.  It is meant to be
used in conjunction with <code class="docutils literal notranslate"><span class="pre">pyramid.scripting.prepare</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">pyramid.paster.bootstrap</span></code> (both of which accept a request as an
argument):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.scripting</span> <span class="k">import</span> <span class="n">make_request</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">make_request</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">New API attribute <code class="docutils literal notranslate"><span class="pre">pyramid.config.global_registries</span></code> is an iterable
object that contains references to every Pyramid registry loaded into the
current process via <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.make_app</span></code>.  It also has
a <code class="docutils literal notranslate"><span class="pre">last</span></code> attribute containing the last registry loaded.  This is used by
the scripting machinery, and is available for introspection.</p>
</li>
</ul>
</div>
<div class="section" id="id143">
<h3>Deprecations<a class="headerlink" href="#id143" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.view.static</span></code> class has been deprecated in favor of the newer
<code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code> class.  A deprecation warning is raised when
it is used.  You should replace it with a reference to
<code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code> with the <code class="docutils literal notranslate"><span class="pre">use_subpath=True</span></code> argument.</li>
</ul>
</div>
<div class="section" id="id144">
<h3>Bug Fixes<a class="headerlink" href="#id144" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Without a mo-file loaded for the combination of domain/locale,
<code class="docutils literal notranslate"><span class="pre">pyramid.i18n.Localizer.pluralize</span></code> run using that domain/locale
combination raised an inscrutable &quot;translations object has no attr
'plural'&quot; error.  Now, instead it &quot;works&quot; (it uses a germanic pluralization
by default).  It's nonsensical to try to pluralize something without
translations for that locale/domain available, but this behavior matches
the behavior of <code class="docutils literal notranslate"><span class="pre">pyramid.i18n.Localizer.translate</span></code> so it's at least
consistent; see <a class="reference external" href="https://github.com/Pylons/pyramid/issues/235">https://github.com/Pylons/pyramid/issues/235</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-07-13">
<h2>1.1b2 (2011-07-13)<a class="headerlink" href="#b2-2011-07-13" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id145">
<h3>Features<a class="headerlink" href="#id145" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>New environment setting <code class="docutils literal notranslate"><span class="pre">PYRAMID_PREVENT_HTTP_CACHE</span></code> and new
configuration file value <code class="docutils literal notranslate"><span class="pre">prevent_http_cache</span></code>.  These are synomymous and
allow you to prevent HTTP cache headers from being set by Pyramid's
<code class="docutils literal notranslate"><span class="pre">http_cache</span></code> machinery globally in a process.  see the &quot;Influencing HTTP
Caching&quot; section of the &quot;View Configuration&quot; narrative chapter and the
detailed documentation for this setting in the &quot;Environment Variables and
Configuration Settings&quot; narrative chapter.</li>
</ul>
</div>
<div class="section" id="behavior-changes">
<h3>Behavior Changes<a class="headerlink" href="#behavior-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Previously, If a <code class="docutils literal notranslate"><span class="pre">BeforeRender</span></code> event subscriber added a value via the
<code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> or <code class="docutils literal notranslate"><span class="pre">update</span></code> methods of the event object with a key that
already existed in the renderer globals dictionary, a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> was
raised.  With the deprecation of the &quot;add_renderer_globals&quot; feature of the
configurator, there was no way to override an existing value in the
renderer globals dictionary that already existed.  Now, the event object
will overwrite an older value that is already in the globals dictionary
when its <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> or <code class="docutils literal notranslate"><span class="pre">update</span></code> is called (as well as the new
<code class="docutils literal notranslate"><span class="pre">setdefault</span></code> method), just like a plain old dictionary.  As a result, for
maximum interoperability with other third-party subscribers, if you write
an event subscriber meant to be used as a BeforeRender subscriber, your
subscriber code will now need to (using <code class="docutils literal notranslate"><span class="pre">.get</span></code> or <code class="docutils literal notranslate"><span class="pre">__contains__</span></code> of the
event object) ensure no value already exists in the renderer globals
dictionary before setting an overriding value.</li>
</ul>
</div>
<div class="section" id="id146">
<h3>Bug Fixes<a class="headerlink" href="#id146" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code> method allowed two routes with the same
route to be added without an intermediate <code class="docutils literal notranslate"><span class="pre">config.commit()</span></code>.  If you now
receive a <code class="docutils literal notranslate"><span class="pre">ConfigurationError</span></code> at startup time that appears to be
<code class="docutils literal notranslate"><span class="pre">add_route</span></code> related, you'll need to either a) ensure that all of your
route names are unique or b) call <code class="docutils literal notranslate"><span class="pre">config.commit()</span></code> before adding a
second route with the name of a previously added name or c) use a
Configurator that works in <code class="docutils literal notranslate"><span class="pre">autocommit</span></code> mode.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> scaffolds
inappropriately used <code class="docutils literal notranslate"><span class="pre">DBSession.rollback()</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">transaction.abort()</span></code> in one place.</li>
<li>We now clear <code class="docutils literal notranslate"><span class="pre">request.response</span></code> before we invoke an exception view; an
exception view will be working with a request.response that has not been
touched by any code prior to the exception.</li>
<li>Views associated with routes with spaces in the route name may not have
been looked up correctly when using Pyramid with <code class="docutils literal notranslate"><span class="pre">zope.interface</span></code> 3.6.4
and better.  See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/232">https://github.com/Pylons/pyramid/issues/232</a>.</li>
</ul>
</div>
<div class="section" id="id147">
<h3>Documentation<a class="headerlink" href="#id147" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Wiki2 (SQLAlchemy + URL Dispatch) tutorial <code class="docutils literal notranslate"><span class="pre">models.initialize_sql</span></code> didn't
match the <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> scaffold function of the same name; it
didn't get synchronized when it was changed in the scaffold.</li>
<li>New documentation section in View Configuration narrative chapter:
&quot;Influencing HTTP Caching&quot;.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-07-10">
<h2>1.1b1 (2011-07-10)<a class="headerlink" href="#b1-2011-07-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id148">
<h3>Features<a class="headerlink" href="#id148" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">It is now possible to invoke <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code> even if the paste ini file
section name pointed to in its argument is not actually a Pyramid WSGI
application.  The shell will work in a degraded mode, and will warn the
user.  See &quot;The Interactive Shell&quot; in the &quot;Creating a Pyramid Project&quot;
narrative documentation section.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code> now offers more built-in global variables by default
(including <code class="docutils literal notranslate"><span class="pre">app</span></code> and <code class="docutils literal notranslate"><span class="pre">settings</span></code>).  See &quot;The Interactive Shell&quot; in the
&quot;Creating a Pyramid Project&quot; narrative documentation section.</p>
</li>
<li><p class="first">It is now possible to add a <code class="docutils literal notranslate"><span class="pre">[pshell]</span></code> section to your application's .ini
configuration file, which influences the global names available to a pshell
session.  See &quot;Extending the Shell&quot; in the &quot;Creating a Pyramid Project&quot;
narrative documentation chapter.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">config.scan</span></code> method has grown a <code class="docutils literal notranslate"><span class="pre">**kw</span></code> argument.  <code class="docutils literal notranslate"><span class="pre">kw</span></code> argument
represents a set of keyword arguments to pass to the Venusian <code class="docutils literal notranslate"><span class="pre">Scanner</span></code>
object created by Pyramid.  (See the Venusian documentation for more
information about <code class="docutils literal notranslate"><span class="pre">Scanner</span></code>).</p>
</li>
<li><p class="first">New request property: <code class="docutils literal notranslate"><span class="pre">json_body</span></code>. This property will return the
JSON-decoded variant of the request body.  If the request body is not
well-formed JSON, this property will raise an exception.</p>
</li>
<li><p class="first">A new value <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> can be used as a view configuration
parameter.</p>
<p>When you supply an <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> value to a view configuration, the
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> and <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers of a response generated by the
associated view callable are modified.  The value for <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> may be
one of the following:</p>
<ul class="simple">
<li>A nonzero integer.  If it's a nonzero integer, it's treated as a number
of seconds.  This number of seconds will be used to compute the
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> header and the <code class="docutils literal notranslate"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></code> parameter of
responses to requests which call this view.  For example:
<code class="docutils literal notranslate"><span class="pre">http_cache=3600</span></code> instructs the requesting browser to 'cache this
response for an hour, please'.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> instance.  If it's a <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code>
instance, it will be converted into a number of seconds, and that number
of seconds will be used to compute the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> header and the
<code class="docutils literal notranslate"><span class="pre">Cache-Control:</span> <span class="pre">max-age</span></code> parameter of responses to requests which call
this view.  For example: <code class="docutils literal notranslate"><span class="pre">http_cache=datetime.timedelta(days=1)</span></code>
instructs the requesting browser to 'cache this response for a day,
please'.</li>
<li>Zero (<code class="docutils literal notranslate"><span class="pre">0</span></code>).  If the value is zero, the <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> and
<code class="docutils literal notranslate"><span class="pre">Expires</span></code> headers present in all responses from this view will be
composed such that client browser cache (and any intermediate caches) are
instructed to never cache the response.</li>
<li>A two-tuple.  If it's a two tuple (e.g. <code class="docutils literal notranslate"><span class="pre">http_cache=(1,</span>
<span class="pre">{'public':True})</span></code>), the first value in the tuple may be a nonzero
integer or a <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> instance; in either case this value
will be used as the number of seconds to cache the response.  The second
value in the tuple must be a dictionary.  The values present in the
dictionary will be used as input to the <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> response
header.  For example: <code class="docutils literal notranslate"><span class="pre">http_cache=(3600,</span> <span class="pre">{'public':True})</span></code> means 'cache
for an hour, and add <code class="docutils literal notranslate"><span class="pre">public</span></code> to the Cache-Control header of the
response'.  All keys and values supported by the
<code class="docutils literal notranslate"><span class="pre">webob.cachecontrol.CacheControl</span></code> interface may be added to the
dictionary.  Supplying <code class="docutils literal notranslate"><span class="pre">{'public':True}</span></code> is equivalent to calling
<code class="docutils literal notranslate"><span class="pre">response.cache_control.public</span> <span class="pre">=</span> <span class="pre">True</span></code>.</li>
</ul>
<p>Providing a non-tuple value as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> is equivalent to calling
<code class="docutils literal notranslate"><span class="pre">response.cache_expires(value)</span></code> within your view's body.</p>
<p>Providing a two-tuple value as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code> is equivalent to calling
<code class="docutils literal notranslate"><span class="pre">response.cache_expires(value[0],</span> <span class="pre">**value[1])</span></code> within your view's body.</p>
<p>If you wish to avoid influencing, the <code class="docutils literal notranslate"><span class="pre">Expires</span></code> header, and instead wish
to only influence <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> headers, pass a tuple as <code class="docutils literal notranslate"><span class="pre">http_cache</span></code>
with the first element of <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g.: <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">{'public':True})</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id149">
<h3>Bug Fixes<a class="headerlink" href="#id149" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Framework wrappers of the original view (such as http_cached and so on)
relied on being able to trust that the response they were receiving was an
IResponse.  It wasn't always, because the response was resolved by the
router instead of early in the view wrapping process.  This has been fixed.</li>
</ul>
</div>
<div class="section" id="id150">
<h3>Documentation<a class="headerlink" href="#id150" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a section in the &quot;Webob&quot; chapter named &quot;Dealing With A JSON-Encoded
Request Body&quot; (usage of <code class="docutils literal notranslate"><span class="pre">request.json_body</span></code>).</li>
</ul>
</div>
<div class="section" id="id151">
<h3>Behavior Changes<a class="headerlink" href="#id151" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code>, <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">proutes</span></code>, and <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pviews</span></code> commands
now take a single argument in the form <code class="docutils literal notranslate"><span class="pre">/path/to/config.ini#sectionname</span></code>
rather than the previous 2-argument spelling <code class="docutils literal notranslate"><span class="pre">/path/to/config.ini</span>
<span class="pre">sectionname</span></code>.  <code class="docutils literal notranslate"><span class="pre">#sectionname</span></code> may be omitted, in which case <code class="docutils literal notranslate"><span class="pre">#main</span></code> is
assumed.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2011-07-01">
<h2>1.1a4 (2011-07-01)<a class="headerlink" href="#a4-2011-07-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id152">
<h3>Bug Fixes<a class="headerlink" href="#id152" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now raises deprecation warnings when
attributes deprecated for <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> are accessed (like
<code class="docutils literal notranslate"><span class="pre">response_content_type</span></code>).  This is for the benefit of folks running unit
tests which use DummyRequest instead of a &quot;real&quot; request, so they know
things are deprecated without necessarily needing a functional test suite.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.events.subscriber</span></code> directive behaved contrary to the
documentation when passed more than one interface object to its
constructor.  For example, when the following listener was registered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">(</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">expects_ifoo_events_and_ibar_events</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">event</span>
</pre></div>
</div>
<p>The Events chapter docs claimed that the listener would be registered and
listening for both <code class="docutils literal notranslate"><span class="pre">IFoo</span></code> and <code class="docutils literal notranslate"><span class="pre">IBar</span></code> events.  Instead, it registered an
&quot;object event&quot; subscriber which would only be called if an IObjectEvent was
emitted where the object interface was <code class="docutils literal notranslate"><span class="pre">IFoo</span></code> and the event interface was
<code class="docutils literal notranslate"><span class="pre">IBar</span></code>.</p>
<p>The behavior now matches the documentation. If you were relying on the
buggy behavior of the 1.0 <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> directive in order to register an
object event subscriber, you must now pass a sequence to indicate you'd
like to register a subscriber for an object event. e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@subscriber</span><span class="p">([</span><span class="n">IFoo</span><span class="p">,</span> <span class="n">IBar</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">expects_object_event</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span> <span class="nb">object</span><span class="p">,</span> <span class="n">event</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id153">
<h3>Features<a class="headerlink" href="#id153" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add JSONP renderer (see &quot;JSONP renderer&quot; in the Renderers chapter of the
documentation).</li>
</ul>
</div>
<div class="section" id="id154">
<h3>Deprecations<a class="headerlink" href="#id154" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecated the <code class="docutils literal notranslate"><span class="pre">set_renderer_globals_factory</span></code> method of the Configurator
and the <code class="docutils literal notranslate"><span class="pre">renderer_globals</span></code> Configurator constructor parameter.</li>
</ul>
</div>
<div class="section" id="id155">
<h3>Documentation<a class="headerlink" href="#id155" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Wiki and Wiki2 tutorial &quot;Tests&quot; chapters each had two bugs: neither did
told the user to depend on WebTest, and 2 tests failed in each as the
result of changes to Pyramid itself.  These issues have been fixed.</li>
<li>Move 1.0.X CHANGES.txt entries to HISTORY.txt.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2011-06-26">
<h2>1.1a3 (2011-06-26)<a class="headerlink" href="#a3-2011-06-26" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id156">
<h3>Features<a class="headerlink" href="#id156" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added <code class="docutils literal notranslate"><span class="pre">mako.preprocessor</span></code> config file parameter; allows for a Mako
preprocessor to be specified as a Python callable or Python dotted name.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/183">https://github.com/Pylons/pyramid/pull/183</a> for rationale.</li>
</ul>
</div>
<div class="section" id="id157">
<h3>Bug fixes<a class="headerlink" href="#id157" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid would raise an AttributeError in the Configurator when attempting
to set a <code class="docutils literal notranslate"><span class="pre">__text__</span></code> attribute on a custom predicate that was actually a
classmethod.  See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/217">https://github.com/Pylons/pyramid/pull/217</a> .</li>
<li>Accessing or setting deprecated response_* attrs on request
(e.g. <code class="docutils literal notranslate"><span class="pre">response_content_type</span></code>) now issues a deprecation warning at access
time rather than at rendering time.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2011-06-22">
<h2>1.1a2 (2011-06-22)<a class="headerlink" href="#a2-2011-06-22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id158">
<h3>Bug Fixes<a class="headerlink" href="#id158" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>1.1a1 broke Akhet by not providing a backwards compatibility import shim
for <code class="docutils literal notranslate"><span class="pre">pyramid.paster.PyramidTemplate</span></code>.  Now one has been added, although a
deprecation warning is emitted when Akhet imports it.</li>
<li>If multiple specs were provided in a single call to
<code class="docutils literal notranslate"><span class="pre">config.add_translation_dirs</span></code>, the directories were inserted into the
beginning of the directory list in the wrong order: they were inserted in
the reverse of the order they were provided in the <code class="docutils literal notranslate"><span class="pre">*specs</span></code> list (items
later in the list were added before ones earlier in the list).  This is now
fixed.</li>
</ul>
</div>
<div class="section" id="id159">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id159" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The pyramid Router attempted to set a value into the key
<code class="docutils literal notranslate"><span class="pre">environ['repoze.bfg.message']</span></code> when it caught a view-related exception
for backwards compatibility with applications written for <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>
during error handling.  It did this by using code that looked like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># &quot;why&quot; is an exception object</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">why</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="n">environ</span><span class="p">[</span><span class="s1">&#39;repoze.bfg.message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
</pre></div>
</div>
<p>Use of the value <code class="docutils literal notranslate"><span class="pre">environ['repoze.bfg.message']</span></code> was docs-deprecated in
Pyramid 1.0.  Our standing policy is to not remove features after a
deprecation for two full major releases, so this code was originally slated
to be removed in Pyramid 1.2.  However, computing the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.message</span></code> value was the source of at least one bug found in
the wild (<a class="reference external" href="https://github.com/Pylons/pyramid/issues/199">https://github.com/Pylons/pyramid/issues/199</a>), and there isn't a
foolproof way to both preserve backwards compatibility and to fix the bug.
Therefore, the code which sets the value has been removed in this release.
Code in exception views which relies on this value's presence in the
environment should now use the <code class="docutils literal notranslate"><span class="pre">exception</span></code> attribute of the request
(e.g. <code class="docutils literal notranslate"><span class="pre">request.exception[0]</span></code>) to retrieve the message instead of relying
on <code class="docutils literal notranslate"><span class="pre">request.environ['repoze.bfg.message']</span></code>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a1-2011-06-20">
<h2>1.1a1 (2011-06-20)<a class="headerlink" href="#a1-2011-06-20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id160">
<h3>Documentation<a class="headerlink" href="#id160" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The term &quot;template&quot; used to refer to both &quot;paster templates&quot; and &quot;rendered
templates&quot; (templates created by a rendering engine.  i.e. Mako, Chameleon,
Jinja, etc.).  &quot;Paster templates&quot; will now be refered to as &quot;scaffolds&quot;,
whereas the name for &quot;rendered templates&quot; will remain as &quot;templates.&quot;</li>
<li>The <code class="docutils literal notranslate"><span class="pre">wiki</span></code> (ZODB+Traversal) tutorial was updated slightly.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">wiki2</span></code> (SQLA+URL Dispatch) tutorial was updated slightly.</li>
<li>Make <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthorizationPolicy</span></code> public interfaces, and refer to
them within the <code class="docutils literal notranslate"><span class="pre">pyramid.authentication</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.authorization</span></code>
API docs.</li>
<li>Render the function definitions for each exposed interface in
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces</span></code>.</li>
<li>Add missing docs reference to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.set_view_mapper</span></code> and refer to it within
Hooks chapter section named &quot;Using a View Mapper&quot;.</li>
<li>Added section to the &quot;Environment Variables and <code class="docutils literal notranslate"><span class="pre">.ini</span></code> File Settings&quot;
chapter in the narrative documentation section entitled &quot;Adding a Custom
Setting&quot;.</li>
<li>Added documentation for a &quot;multidict&quot; (e.g. the API of <code class="docutils literal notranslate"><span class="pre">request.POST</span></code>) as
interface API documentation.</li>
<li>Added a section to the &quot;URL Dispatch&quot; narrative chapter regarding the new
&quot;static&quot; route feature.</li>
<li>Added &quot;What's New in Pyramid 1.1&quot; to HTML rendering of documentation.</li>
<li>Added API docs for <code class="docutils literal notranslate"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></code>.</li>
<li>Added API docs for <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.exception_response</span></code>.</li>
<li>Added &quot;HTTP Exceptions&quot; section to Views narrative chapter including a
description of <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.exception_response</span></code>.</li>
</ul>
</div>
<div class="section" id="id161">
<h3>Features<a class="headerlink" href="#id161" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Add support for language fallbacks: when trying to translate for a
specific territory (such as <code class="docutils literal notranslate"><span class="pre">en_GB</span></code>) fall back to translations
for the language (ie <code class="docutils literal notranslate"><span class="pre">en</span></code>). This brings the translation behaviour in line
with GNU gettext and fixes partially translated texts when using C
extensions.</p>
</li>
<li><p class="first">New authentication policy:
<code class="docutils literal notranslate"><span class="pre">pyramid.authentication.SessionAuthenticationPolicy</span></code>, which uses a session
to store credentials.</p>
</li>
<li><p class="first">Accessing the <code class="docutils literal notranslate"><span class="pre">response</span></code> attribute of a <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code>
object (e.g. <code class="docutils literal notranslate"><span class="pre">request.response</span></code> within a view) now produces a new
<code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> object.  This feature is meant to be used
mainly when a view configured with a renderer needs to set response
attributes: all renderers will use the Response object implied by
<code class="docutils literal notranslate"><span class="pre">request.response</span></code> as the response object returned to the router.</p>
<p><code class="docutils literal notranslate"><span class="pre">request.response</span></code> can also be used by code in a view that does not use a
renderer, however the response object that is produced by
<code class="docutils literal notranslate"><span class="pre">request.response</span></code> must be returned when a renderer is not in play (it is
not a &quot;global&quot; response).</p>
</li>
<li><p class="first">Integers and longs passed as <code class="docutils literal notranslate"><span class="pre">elements</span></code> to <code class="docutils literal notranslate"><span class="pre">pyramid.url.resource_url</span></code>
or <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.resource_url</span></code> e.g. <code class="docutils literal notranslate"><span class="pre">resource_url(context,</span>
<span class="pre">request,</span> <span class="pre">1,</span> <span class="pre">2)</span></code> (<code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code> are the <code class="docutils literal notranslate"><span class="pre">elements</span></code>) will now be
converted implicitly to strings in the result.  Previously passing integers
or longs as elements would cause a TypeError.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> paster template now uses <code class="docutils literal notranslate"><span class="pre">query.get</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">query.filter_by</span></code> to take better advantage of identity map caching.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> paster template now has unit tests.</p>
</li>
<li><p class="first">Added <code class="docutils literal notranslate"><span class="pre">pyramid.i18n.make_localizer</span></code> API (broken out from
<code class="docutils literal notranslate"><span class="pre">get_localizer</span></code> guts).</p>
</li>
<li><p class="first">An exception raised by a NewRequest event subscriber can now be caught by
an exception view.</p>
</li>
<li><p class="first">It is now possible to get information about why Pyramid raised a Forbidden
exception from within an exception view.  The <code class="docutils literal notranslate"><span class="pre">ACLDenied</span></code> object returned
by the <code class="docutils literal notranslate"><span class="pre">permits</span></code> method of each stock authorization policy
(<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthorizationPolicy.permits</span></code>) is now attached to
the Forbidden exception as its <code class="docutils literal notranslate"><span class="pre">result</span></code> attribute.  Therefore, if you've
created a Forbidden exception view, you can see the ACE, ACL, permission,
and principals involved in the request as
eg. <code class="docutils literal notranslate"><span class="pre">context.result.permission</span></code>, <code class="docutils literal notranslate"><span class="pre">context.result.acl</span></code>, etc within the
logic of the Forbidden exception view.</p>
</li>
<li><p class="first">Don't explicitly prevent the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> from being lower than the
<code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> when setting up an <code class="docutils literal notranslate"><span class="pre">AuthTktAuthenticationPolicy</span></code>
(previously such a configuration would raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>, now it's
allowed, although typically nonsensical).  Allowing the nonsensical
configuration made the code more understandable and required fewer tests.</p>
</li>
<li><p class="first">A new paster command named <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pviews</span></code> was added.  This command
prints a summary of potentially matching views for a given path.  See the
section entitled &quot;Displaying Matching Views for a Given URL&quot; in the &quot;View
Configuration&quot; chapter of the narrative documentation for more information.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">add_route</span></code> method of the Configurator now accepts a <code class="docutils literal notranslate"><span class="pre">static</span></code>
argument.  If this argument is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the added route will never be
considered for matching when a request is handled.  Instead, it will only
be useful for URL generation via <code class="docutils literal notranslate"><span class="pre">route_url</span></code> and <code class="docutils literal notranslate"><span class="pre">route_path</span></code>.  See the
section entitled &quot;Static Routes&quot; in the URL Dispatch narrative chapter for
more information.</p>
</li>
<li><p class="first">A default exception view for the context
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IExceptionResponse</span></code> is now registered by default.
This means that an instance of any exception response class imported from
<code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code> (such as <code class="docutils literal notranslate"><span class="pre">HTTPFound</span></code>) can now be raised from
within view code; when raised, this exception view will render the
exception to a response.</p>
</li>
<li><p class="first">A function named <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions.exception_response</span></code> is a
shortcut that can be used to create HTTP exception response objects using
an HTTP integer status code.</p>
</li>
<li><p class="first">The Configurator now accepts an additional keyword argument named
<code class="docutils literal notranslate"><span class="pre">exceptionresponse_view</span></code>.  By default, this argument is populated with a
default exception view function that will be used when a response is raised
as an exception. When <code class="docutils literal notranslate"><span class="pre">None</span></code> is passed for this value, an exception view
for responses will not be registered.  Passing <code class="docutils literal notranslate"><span class="pre">None</span></code> returns the
behavior of raising an HTTP exception to that of Pyramid 1.0 (the exception
will propagate to middleware and to the WSGI server).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> class now has a <code class="docutils literal notranslate"><span class="pre">ResponseClass</span></code> interface
which points at <code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> class now has a <code class="docutils literal notranslate"><span class="pre">RequestClass</span></code>
interface which points at <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code>.</p>
</li>
<li><p class="first">It is now possible to return an arbitrary object from a Pyramid view
callable even if a renderer is not used, as long as a suitable adapter to
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code> is registered for the type of the returned
object by using the new
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_response_adapter</span></code> API.  See the section
in the Hooks chapter of the documentation entitled &quot;Changing How Pyramid
Treats View Responses&quot;.</p>
</li>
<li><p class="first">The Pyramid router will now, by default, call the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of
WebOb response objects when returning a WSGI response.  This means that,
among other things, the <code class="docutils literal notranslate"><span class="pre">conditional_response</span></code> feature of WebOb response
objects will now behave properly.</p>
</li>
<li><p class="first">New method named <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.is_response</span></code>.  This method
should be used instead of the <code class="docutils literal notranslate"><span class="pre">pyramid.view.is_response</span></code> function, which
has been deprecated.</p>
</li>
</ul>
</div>
<div class="section" id="id162">
<h3>Bug Fixes<a class="headerlink" href="#id162" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>URL pattern markers used in URL dispatch are permitted to specify a custom
regex. For example, the pattern <code class="docutils literal notranslate"><span class="pre">/{foo:\d+}</span></code> means to match <code class="docutils literal notranslate"><span class="pre">/12345</span></code>
(foo==12345 in the match dictionary) but not <code class="docutils literal notranslate"><span class="pre">/abc</span></code>. However, custom
regexes in a pattern marker which used squiggly brackets did not work. For
example, <code class="docutils literal notranslate"><span class="pre">/{foo:\d{4}}</span></code> would fail to match <code class="docutils literal notranslate"><span class="pre">/1234</span></code> and
<code class="docutils literal notranslate"><span class="pre">/{foo:\d{1,2}}</span></code> would fail to match <code class="docutils literal notranslate"><span class="pre">/1</span></code> or <code class="docutils literal notranslate"><span class="pre">/11</span></code>. One level of
inner squiggly brackets is now recognized so that the prior two patterns
given as examples now work. See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/#issue/123">https://github.com/Pylons/pyramid/issues/#issue/123</a>.</li>
<li>Don't send port numbers along with domain information in cookies set by
AuthTktCookieHelper (see <a class="reference external" href="https://github.com/Pylons/pyramid/issues/131">https://github.com/Pylons/pyramid/issues/131</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.url.route_path</span></code> (and the shortcut
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.route_url</span></code> method) now include the WSGI
SCRIPT_NAME at the front of the path if it is not empty (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/135">https://github.com/Pylons/pyramid/issues/135</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now has a <code class="docutils literal notranslate"><span class="pre">script_name</span></code> attribute (the
empty string).</li>
<li>Don't quote <code class="docutils literal notranslate"><span class="pre">:&#64;&amp;+$,</span></code> symbols in <code class="docutils literal notranslate"><span class="pre">*elements</span></code> passed to
<code class="docutils literal notranslate"><span class="pre">pyramid.url.route_url</span></code> or <code class="docutils literal notranslate"><span class="pre">pyramid.url.resource_url</span></code> (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/141">https://github.com/Pylons/pyramid/issues#issue/141</a>).</li>
<li>Include SCRIPT_NAME in redirects issued by
<code class="docutils literal notranslate"><span class="pre">pyramid.view.append_slash_notfound_view</span></code> (see
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/149">https://github.com/Pylons/pyramid/issues#issue/149</a>).</li>
<li>Static views registered with <code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code> which also included
a <code class="docutils literal notranslate"><span class="pre">permission</span></code> keyword argument would not work as expected, because
<code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> also registered a route factory internally.  Because a
route factory was registered internally, the context checked by the Pyramid
permission machinery never had an ACL.  <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> no longer
registers a route with a factory, so the default root factory will be used.</li>
<li><code class="docutils literal notranslate"><span class="pre">config.add_static_view</span></code> now passes extra keyword arguments it receives
to <code class="docutils literal notranslate"><span class="pre">config.add_route</span></code> (calling add_static_view is mostly logically
equivalent to adding a view of the type <code class="docutils literal notranslate"><span class="pre">pyramid.static.static_view</span></code>
hooked up to a route with a subpath).  This makes it possible to pass e.g.,
<code class="docutils literal notranslate"><span class="pre">factory=</span></code> to <code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> to protect a particular static view
with a custom ACL.</li>
<li><code class="docutils literal notranslate"><span class="pre">testing.DummyRequest</span></code> used the wrong registry (the global registry) as
<code class="docutils literal notranslate"><span class="pre">self.registry</span></code> if a dummy request was created <em>before</em> <code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code>
was executed (<code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code> pushes a local registry onto the
threadlocal stack). Fixed by implementing <code class="docutils literal notranslate"><span class="pre">registry</span></code> as a property for
DummyRequest instead of eagerly assigning an attribute.
See also <a class="reference external" href="https://github.com/Pylons/pyramid/issues/165">https://github.com/Pylons/pyramid/issues/165</a></li>
<li>When visiting a URL that represented a static view which resolved to a
subdirectory, the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> of that subdirectory would not be served
properly.  Instead, a redirect to <code class="docutils literal notranslate"><span class="pre">/subdir</span></code> would be issued.  This has
been fixed, and now visiting a subdirectory that contains an <code class="docutils literal notranslate"><span class="pre">index.html</span></code>
within a static view returns the index.html properly.  See also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/67">https://github.com/Pylons/pyramid/issues/67</a>.</li>
<li>Redirects issued by a static view did not take into account any existing
<code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> (such as one set by a url mapping composite).  Now they do.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp2</span></code> decorator did not take into account the
<code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> in the origin request.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp2</span></code> decorator effectively only worked when it
decorated a view found via traversal; it ignored the <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> that was
part of a url-dispatch-matched view.</li>
</ul>
</div>
<div class="section" id="id163">
<h3>Deprecations<a class="headerlink" href="#id163" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Deprecated all assignments to <code class="docutils literal notranslate"><span class="pre">request.response_*</span></code> attributes (for
example <code class="docutils literal notranslate"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'foo'</span></code> is now deprecated).
Assignments and mutations of assignable request attributes that were
considered by the framework for response influence are now deprecated:
<code class="docutils literal notranslate"><span class="pre">response_content_type</span></code>, <code class="docutils literal notranslate"><span class="pre">response_headerlist</span></code>, <code class="docutils literal notranslate"><span class="pre">response_status</span></code>,
<code class="docutils literal notranslate"><span class="pre">response_charset</span></code>, and <code class="docutils literal notranslate"><span class="pre">response_cache_for</span></code>.  Instead of assigning
these to the request object for later detection by the rendering machinery,
users should use the appropriate API of the Response object created by
accessing <code class="docutils literal notranslate"><span class="pre">request.response</span></code> (e.g. code which does
<code class="docutils literal notranslate"><span class="pre">request.response_content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></code> should be changed to
<code class="docutils literal notranslate"><span class="pre">request.response.content_type</span> <span class="pre">=</span> <span class="pre">'abc'</span></code>).</p>
</li>
<li><p class="first">Passing view-related parameters to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.add_route</span></code> is now deprecated.  Previously, a
view was permitted to be connected to a route using a set of <code class="docutils literal notranslate"><span class="pre">view*</span></code>
parameters passed to the <code class="docutils literal notranslate"><span class="pre">add_route</span></code> method of the Configurator.  This
was a shorthand which replaced the need to perform a subsequent call to
<code class="docutils literal notranslate"><span class="pre">add_view</span></code>. For example, it was valid (and often recommended) to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s1">&#39;mypackage.views.myview&#39;</span><span class="p">,</span>
                  <span class="n">view_renderer</span><span class="o">=</span><span class="s1">&#39;some/renderer.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Passing <code class="docutils literal notranslate"><span class="pre">view*</span></code> arguments to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> is now deprecated in favor of
connecting a view to a predefined route via <code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> using
the route's <code class="docutils literal notranslate"><span class="pre">route_name</span></code> parameter.  As a result, the above example
should now be spelled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;mypackage.views.myview&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
                <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;some/renderer.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This deprecation was done to reduce confusion observed in IRC, as well as
to (eventually) reduce documentation burden (see also
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/164">https://github.com/Pylons/pyramid/issues/164</a>).  A deprecation warning is
now issued when any view-related parameter is passed to
<code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code>.</p>
</li>
<li><p class="first">Passing an <code class="docutils literal notranslate"><span class="pre">environ</span></code> dictionary to the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of a
&quot;traverser&quot; (e.g. an object that implements
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ITraverser</span></code> such as an instance of
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.ResourceTreeTraverser</span></code>) as its <code class="docutils literal notranslate"><span class="pre">request</span></code> argument
now causes a deprecation warning to be emitted.  Consumer code should pass a
<code class="docutils literal notranslate"><span class="pre">request</span></code> object instead.  The fact that passing an environ dict is
permitted has been documentation-deprecated since <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 1.1, and
this capability will be removed entirely in a future version.</p>
</li>
<li><p class="first">The following (undocumented, dictionary-like) methods of the
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> object have been deprecated: <code class="docutils literal notranslate"><span class="pre">__contains__</span></code>,
<code class="docutils literal notranslate"><span class="pre">__delitem__</span></code>, <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>, <code class="docutils literal notranslate"><span class="pre">__iter__</span></code>, <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>, <code class="docutils literal notranslate"><span class="pre">get</span></code>,
<code class="docutils literal notranslate"><span class="pre">has_key</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>, <code class="docutils literal notranslate"><span class="pre">iteritems</span></code>, <code class="docutils literal notranslate"><span class="pre">itervalues</span></code>, <code class="docutils literal notranslate"><span class="pre">keys</span></code>, <code class="docutils literal notranslate"><span class="pre">pop</span></code>,
<code class="docutils literal notranslate"><span class="pre">popitem</span></code>, <code class="docutils literal notranslate"><span class="pre">setdefault</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>, and <code class="docutils literal notranslate"><span class="pre">values</span></code>.  Usage of any of
these methods will cause a deprecation warning to be emitted.  These
methods were added for internal compatibility in <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 1.1 (code
that currently expects a request object expected an environ object in BFG
1.0 and before).  In a future version, these methods will be removed
entirely.</p>
</li>
<li><p class="first">Deprecated <code class="docutils literal notranslate"><span class="pre">pyramid.view.is_response</span></code> function in favor of (newly-added)
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.is_response</span></code> method.  Determining if an object
is truly a valid response object now requires access to the registry, which
is only easily available as a request attribute.  The
<code class="docutils literal notranslate"><span class="pre">pyramid.view.is_response</span></code> function will still work until it is removed,
but now may return an incorrect answer under some (very uncommon)
circumstances.</p>
</li>
</ul>
</div>
<div class="section" id="id164">
<h3>Behavior Changes<a class="headerlink" href="#id164" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The default Mako renderer is now configured to escape all HTML in
expression tags. This is intended to help prevent XSS attacks caused by
rendering unsanitized input from users. To revert this behavior in user's
templates, they need to filter the expression through the 'n' filter.
For example, ${ myhtml | n }.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/193">https://github.com/Pylons/pyramid/issues/193</a>.</li>
<li>A custom request factory is now required to return a request object that
has a <code class="docutils literal notranslate"><span class="pre">response</span></code> attribute (or &quot;reified&quot;/lazy property) if they the
request is meant to be used in a view that uses a renderer.  This
<code class="docutils literal notranslate"><span class="pre">response</span></code> attribute should be an instance of the class
<code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code>.</li>
<li>The JSON and string renderer factories now assign to
<code class="docutils literal notranslate"><span class="pre">request.response.content_type</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">request.response_content_type</span></code>.</li>
<li>Each built-in renderer factory now determines whether it should change the
content type of the response by comparing the response's content type
against the response's default content type; if the content type is the
default content type (usually <code class="docutils literal notranslate"><span class="pre">text/html</span></code>), the renderer changes the
content type (to <code class="docutils literal notranslate"><span class="pre">application/json</span></code> or <code class="docutils literal notranslate"><span class="pre">text/plain</span></code> for JSON and string
renderers respectively).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.wsgi.wsgiapp2</span></code> now uses a slightly different method of
figuring out how to &quot;fix&quot; <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> and <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> for the
downstream application.  As a result, those values may differ slightly from
the perspective of the downstream application (for example, <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code>
will now never possess a trailing slash).</li>
<li>Previously, <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> inherited from
<code class="docutils literal notranslate"><span class="pre">webob.request.Request</span></code> and implemented <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code>, <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code>
and <code class="docutils literal notranslate"><span class="pre">__delattr__</span></code> itself in order to overidde &quot;adhoc attr&quot; WebOb behavior
where attributes of the request are stored in the environ.  Now,
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> object inherits from (the more recent)
<code class="docutils literal notranslate"><span class="pre">webob.request.BaseRequest</span></code> instead of <code class="docutils literal notranslate"><span class="pre">webob.request.Request</span></code>, which
provides the same behavior.  <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> no longer
implements its own <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code>, <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code> or <code class="docutils literal notranslate"><span class="pre">__delattr__</span></code> as a
result.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> is now a <em>subclass</em> of
<code class="docutils literal notranslate"><span class="pre">webob.response.Response</span></code> (in order to directly implement the
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code> interface).</li>
<li>The &quot;exception response&quot; objects importable from <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code>
(e.g. <code class="docutils literal notranslate"><span class="pre">HTTPNotFound</span></code>) are no longer just import aliases for classes that
actually live in <code class="docutils literal notranslate"><span class="pre">webob.exc</span></code>.  Instead, we've defined our own exception
classes within the module that mirror and emulate the <code class="docutils literal notranslate"><span class="pre">webob.exc</span></code>
exception response objects almost entirely.  See the &quot;Design Defense&quot; doc
section named &quot;Pyramid Uses its Own HTTP Exception Classes&quot; for more
information.</li>
</ul>
</div>
<div class="section" id="id165">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id165" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid no longer supports Python 2.4.  Python 2.5 or better is required to
run Pyramid 1.1+.</li>
<li>The Pyramid router now, by default, expects response objects returned from
view callables to implement the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code> interface.
Unlike the Pyramid 1.0 version of this interface, objects which implement
IResponse now must define a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method that accepts <code class="docutils literal notranslate"><span class="pre">environ</span></code>
and <code class="docutils literal notranslate"><span class="pre">start_response</span></code>, and which returns an <code class="docutils literal notranslate"><span class="pre">app_iter</span></code> iterable, among
other things.  Previously, it was possible to return any object which had
the three WebOb <code class="docutils literal notranslate"><span class="pre">app_iter</span></code>, <code class="docutils literal notranslate"><span class="pre">headerlist</span></code>, and <code class="docutils literal notranslate"><span class="pre">status</span></code> attributes as
a response, so this is a backwards incompatibility.  It is possible to get
backwards compatibility back by registering an adapter to IResponse from
the type of object you're now returning from view callables.  See the
section in the Hooks chapter of the documentation entitled &quot;Changing How
Pyramid Treats View Responses&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IResponse</span></code> interface is now much more extensive.
Previously it defined only <code class="docutils literal notranslate"><span class="pre">app_iter</span></code>, <code class="docutils literal notranslate"><span class="pre">status</span></code> and <code class="docutils literal notranslate"><span class="pre">headerlist</span></code>; now
it is basically intended to directly mirror the <code class="docutils literal notranslate"><span class="pre">webob.Response</span></code> API,
which has many methods and attributes.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code> classes named <code class="docutils literal notranslate"><span class="pre">HTTPFound</span></code>,
<code class="docutils literal notranslate"><span class="pre">HTTPMultipleChoices</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPMovedPermanently</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTPSeeOther</span></code>,
<code class="docutils literal notranslate"><span class="pre">HTTPUseProxy</span></code>, and <code class="docutils literal notranslate"><span class="pre">HTTPTemporaryRedirect</span></code> now accept <code class="docutils literal notranslate"><span class="pre">location</span></code> as
their first positional argument rather than <code class="docutils literal notranslate"><span class="pre">detail</span></code>.  This means that
you can do, e.g. <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">pyramid.httpexceptions.HTTPFound('http://foo')</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">return</span>
<span class="pre">pyramid.httpexceptions.HTTPFound(location='http//foo')</span></code> (the latter will
of course continue to work).</li>
</ul>
</div>
<div class="section" id="id166">
<h3>Dependencies<a class="headerlink" href="#id166" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Pyramid now depends on WebOb &gt;= 1.0.2 as tests depend on the bugfix in that
release: &quot;Fix handling of WSGI environs with missing <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code>&quot;.
(Note that in reality, everyone should probably be using 1.0.4 or better
though, as WebOb 1.0.2 and 1.0.3 were effectively brownbag releases.)</li>
</ul>
</div>
</div>
<div class="section" id="id167">
<h2>1.0 (2011-01-30)<a class="headerlink" href="#id167" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id168">
<h3>Documentation<a class="headerlink" href="#id168" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fixed bug in ZODB Wiki tutorial (missing dependency on <code class="docutils literal notranslate"><span class="pre">docutils</span></code> in
&quot;models&quot; step within <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>).</li>
<li>Removed API documentation for <code class="docutils literal notranslate"><span class="pre">pyramid.testing</span></code> APIs named
<code class="docutils literal notranslate"><span class="pre">registerDummySecurityPolicy</span></code>, <code class="docutils literal notranslate"><span class="pre">registerResources</span></code>, <code class="docutils literal notranslate"><span class="pre">registerModels</span></code>,
<code class="docutils literal notranslate"><span class="pre">registerEventListener</span></code>, <code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code>,
<code class="docutils literal notranslate"><span class="pre">registerDummyRenderer</span></code>, <code class="docutils literal notranslate"><span class="pre">registerView</span></code>, <code class="docutils literal notranslate"><span class="pre">registerUtility</span></code>,
<code class="docutils literal notranslate"><span class="pre">registerAdapter</span></code>, <code class="docutils literal notranslate"><span class="pre">registerSubscriber</span></code>, <code class="docutils literal notranslate"><span class="pre">registerRoute</span></code>,
and <code class="docutils literal notranslate"><span class="pre">registerSettings</span></code>.</li>
<li>Moved &quot;Using ZODB With ZEO&quot; and &quot;Using repoze.catalog Within Pyramid&quot;
tutorials out of core documentation and into the Pyramid Tutorials site
(<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/">http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/</a>).</li>
<li>Changed &quot;Cleaning up After a Request&quot; section in the URL Dispatch chapter
to use <code class="docutils literal notranslate"><span class="pre">request.add_finished_callback</span></code> instead of jamming an object with
a <code class="docutils literal notranslate"><span class="pre">__del__</span></code> into the WSGI environment.</li>
<li>Remove duplication of <code class="docutils literal notranslate"><span class="pre">add_route</span></code> API documentation from URL Dispatch
narrative chapter.</li>
<li>Remove duplication of API and narrative documentation in
<code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> API docs by pointing to
<code class="docutils literal notranslate"><span class="pre">pyramid.config.add_view</span></code> documentation and narrative chapter
documentation.</li>
<li>Removed some API documentation duplicated in narrative portions of
documentation</li>
<li>Removed &quot;Overall Flow of Authentication&quot; from SQLAlchemy + URL Dispatch
wiki tutorial due to print space concerns (moved to Pyramid Tutorials
site).</li>
</ul>
</div>
<div class="section" id="id169">
<h3>Bug Fixes<a class="headerlink" href="#id169" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecated-since-BFG-1.2 APIs from <code class="docutils literal notranslate"><span class="pre">pyramid.testing</span></code> now properly emit
deprecation warnings.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">egg:repoze.retry#retry</span></code> middleware to the WSGI pipeline in ZODB
templates (retry ZODB conflict errors which occur in normal operations).</li>
<li>Removed duplicate implementations of <code class="docutils literal notranslate"><span class="pre">is_response</span></code>.  Two competing
implementations existed: one in <code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> and one in
<code class="docutils literal notranslate"><span class="pre">pyramid.view</span></code>.  Now the one defined in <code class="docutils literal notranslate"><span class="pre">pyramid.view</span></code> is used
internally by <code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> and continues to be advertised as an API.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2011-01-28">
<h2>1.0b3 (2011-01-28)<a class="headerlink" href="#b3-2011-01-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id170">
<h3>Bug Fixes<a class="headerlink" href="#id170" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Use &amp;copy; instead of copyright symbol in paster templates / tutorial
templates for the benefit of folks who cutnpaste and save to a non-UTF8
format.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.view.append_slash_notfound_view</span></code> now preserves GET query
parameters across redirects.</li>
</ul>
</div>
<div class="section" id="id171">
<h3>Documentation<a class="headerlink" href="#id171" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Beef up documentation related to <code class="docutils literal notranslate"><span class="pre">set_default_permission</span></code>: explicitly
mention that default permissions also protect exception views.</li>
<li>Paster templates and tutorials now use spaces instead of tabs in their HTML
templates.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2011-01-24">
<h2>1.0b2 (2011-01-24)<a class="headerlink" href="#b2-2011-01-24" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id172">
<h3>Bug Fixes<a class="headerlink" href="#id172" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">production.ini</span></code> generated by all paster templates now have an
effective logging level of WARN, which prevents e.g. SQLAlchemy statement
logging and other inappropriate output.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">production.ini</span></code> of the <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> paster templates did not have a <code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code> logger
section, preventing <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">serve</span> <span class="pre">production.ini</span></code> from working.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> paster templates used
the <code class="docutils literal notranslate"><span class="pre">{{package}}</span></code> variable in a place where it should have used the
<code class="docutils literal notranslate"><span class="pre">{{project}}</span></code> variable, causing applications created with uppercase
letters e.g. <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span> <span class="pre">pyramid_routesalchemy</span> <span class="pre">Dibbus</span></code> to fail to
start when <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">serve</span> <span class="pre">development.ini</span></code> was used against the result.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/#issue/107">https://github.com/Pylons/pyramid/issues/#issue/107</a></li>
<li>The <code class="docutils literal notranslate"><span class="pre">render_view</span></code> method of <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.RendererHelper</span></code> passed
an incorrect value into the renderer for <code class="docutils literal notranslate"><span class="pre">renderer_info</span></code>.  It now passes
an instance of <code class="docutils literal notranslate"><span class="pre">RendererHelper</span></code> instead of a dictionary, which is
consistent with other usages.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/106">https://github.com/Pylons/pyramid/issues#issue/106</a></li>
<li>A bug existed in the <code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktCookieHelper</span></code> which
would break any usage of an AuthTktAuthenticationPolicy when one was
configured to reissue its tokens (<code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">timeout</span></code> /
<code class="docutils literal notranslate"><span class="pre">max_age</span></code>). Symptom: <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">('Invalid</span> <span class="pre">token</span> <span class="pre">%r',</span> <span class="pre">'')</span></code>.  See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/108">https://github.com/Pylons/pyramid/issues#issue/108</a>.</li>
</ul>
</div>
</div>
<div class="section" id="b1-2011-01-21">
<h2>1.0b1 (2011-01-21)<a class="headerlink" href="#b1-2011-01-21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id173">
<h3>Features<a class="headerlink" href="#id173" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The AuthTktAuthenticationPolicy now accepts a <code class="docutils literal notranslate"><span class="pre">tokens</span></code> parameter via
<code class="docutils literal notranslate"><span class="pre">pyramid.security.remember</span></code>.  The value must be a sequence of strings.
Tokens are placed into the auth_tkt &quot;tokens&quot; field and returned in the
auth_tkt cookie.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">wild_domain</span></code> argument to AuthTktAuthenticationPolicy, which defaults
to <code class="docutils literal notranslate"><span class="pre">True</span></code>.  If it is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the feature of the policy which
sets a cookie with a wildcard domain will be turned off.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code> file to each paster template. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues#issue/95">https://github.com/Pylons/pyramid/issues#issue/95</a></li>
</ul>
</div>
<div class="section" id="id174">
<h3>Bug Fixes<a class="headerlink" href="#id174" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code> now adds a <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute to the registry (both
when it's passed a registry without any settings and when it creates one).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code> function now takes a <code class="docutils literal notranslate"><span class="pre">settings</span></code> argument, which
should be a dictionary.  Its values will subsequently be available on the
returned <code class="docutils literal notranslate"><span class="pre">config</span></code> object as <code class="docutils literal notranslate"><span class="pre">config.registry.settings</span></code>.</li>
</ul>
</div>
<div class="section" id="id175">
<h3>Documentation<a class="headerlink" href="#id175" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added &quot;What's New in Pyramid 1.0&quot; chapter to HTML rendering of
documentation.</li>
<li>Merged caseman-master narrative editing branch, many wording fixes and
extensions.</li>
<li>Fix deprecated example showing <code class="docutils literal notranslate"><span class="pre">chameleon_zpt</span></code> API call in testing
narrative chapter.</li>
<li>Added &quot;Adding Methods to the Configurator via <code class="docutils literal notranslate"><span class="pre">add_directive</span></code>&quot; section to
Advanced Configuration narrative chapter.</li>
<li>Add docs for <code class="docutils literal notranslate"><span class="pre">add_finished_callback</span></code>, <code class="docutils literal notranslate"><span class="pre">add_response_callback</span></code>,
<code class="docutils literal notranslate"><span class="pre">route_path</span></code>, <code class="docutils literal notranslate"><span class="pre">route_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">static_url</span></code> methods to
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code> API docs.</li>
<li>Add (minimal) documentation about using I18N within Mako templates to
&quot;Internationalization and Localization&quot; narrative chapter.</li>
<li>Move content of &quot;Forms&quot; chapter back to &quot;Views&quot; chapter; I can't think of a
better place to put it.</li>
<li>Slightly improved interface docs for <code class="docutils literal notranslate"><span class="pre">IAuthorizationPolicy</span></code>.</li>
<li>Minimally explain usage of custom regular expressions in URL dispatch
replacement markers within URL Dispatch chapter.</li>
</ul>
</div>
<div class="section" id="id176">
<h3>Deprecations<a class="headerlink" href="#id176" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Using the <code class="docutils literal notranslate"><span class="pre">pyramid.view.bfg_view</span></code> alias for <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code>
(a backwards compatibility shim) now issues a deprecation warning.</li>
</ul>
</div>
<div class="section" id="id177">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id177" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Using <code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code> now registers an ISettings utility as a side
effect.  Some test code which queries for this utility after
<code class="docutils literal notranslate"><span class="pre">testing.setUp</span></code> via queryAdapter will expect a return value of <code class="docutils literal notranslate"><span class="pre">None</span></code>.
This code will need to be changed.</li>
<li>When a <code class="docutils literal notranslate"><span class="pre">pyramid.exceptions.Forbidden</span></code> error is raised, its status code
now <code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code>.  It was previously <code class="docutils literal notranslate"><span class="pre">401</span> <span class="pre">Unauthorized</span></code>, for
backwards compatibility purposes with <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>.  This change will
cause problems for users of Pyramid with <code class="docutils literal notranslate"><span class="pre">repoze.who</span></code>, which intercepts
<code class="docutils literal notranslate"><span class="pre">401</span> <span class="pre">Unauthorized</span></code> by default, but allows <code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code> to pass
through.  Those deployments will need to configure <code class="docutils literal notranslate"><span class="pre">repoze.who</span></code> to also
react to <code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code>.</li>
<li>The default value for the <code class="docutils literal notranslate"><span class="pre">cookie_on_exception</span></code> parameter to
<code class="docutils literal notranslate"><span class="pre">pyramid.session.UnencyrptedCookieSessionFactory</span></code> is now <code class="docutils literal notranslate"><span class="pre">True</span></code>.  This
means that when view code causes an exception to be raised, and the session
has been mutated, a cookie will be sent back in the response.  Previously
its default value was <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
</ul>
</div>
<div class="section" id="paster-templates">
<h3>Paster Templates<a class="headerlink" href="#paster-templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code>
paster templates now use a default &quot;commit veto&quot; hook when configuring the
<code class="docutils literal notranslate"><span class="pre">repoze.tm2</span></code> transaction manager in <code class="docutils literal notranslate"><span class="pre">development.ini</span></code>.  This prevents a
transaction from being committed when the response status code is within
the 400 or 500 ranges.  See also
<a class="reference external" href="http://docs.repoze.org/tm2/#using-a-commit-veto">http://docs.repoze.org/tm2/#using-a-commit-veto</a>.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2011-01-18">
<h2>1.0a10 (2011-01-18)<a class="headerlink" href="#a10-2011-01-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id178">
<h3>Bug Fixes<a class="headerlink" href="#id178" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>URL dispatch now properly handles a <code class="docutils literal notranslate"><span class="pre">.*</span></code> or <code class="docutils literal notranslate"><span class="pre">*</span></code> appearing in a regex
match when used inside brackets.  Resolves issue #90.</li>
</ul>
</div>
<div class="section" id="id179">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id179" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">add_handler</span></code> method of a Configurator has been removed from the
Pyramid core.  Handlers are now a feature of the <code class="docutils literal notranslate"><span class="pre">pyramid_handlers</span></code>
package, which can be downloaded from PyPI.  Documentation for the package
should be available via
<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_handlers/en/latest/">http://docs.pylonsproject.org/projects/pyramid_handlers/en/latest/</a>,
which describes how
to add a configuration statement to your <code class="docutils literal notranslate"><span class="pre">main</span></code> block to reobtain this
method.  You will also need to add an <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> dependency upon
<code class="docutils literal notranslate"><span class="pre">pyramid_handlers</span></code> to your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">load_zcml</span></code> method of a Configurator has been removed from the
Pyramid core.  Loading ZCML is now a feature of the <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code>
package, which can be downloaded from PyPI.  Documentation for the package
should be available via
<a class="reference external" href="http://docs.pylonsproject.org/projects/pyramid_zcml/en/latest/">http://docs.pylonsproject.org/projects/pyramid_zcml/en/latest/</a>,
which describes how
to add a configuration statement to your <code class="docutils literal notranslate"><span class="pre">main</span></code> block to reobtain this
method.  You will also need to add an <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> dependency upon
<code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> to your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.includes</span></code> subpackage has been removed.  ZCML files which use
include the package <code class="docutils literal notranslate"><span class="pre">pyramid.includes</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;include</span>
<span class="pre">package=&quot;pyramid.includes&quot;/&gt;</span></code>) now must include the <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code>
package instead (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;include</span> <span class="pre">package=&quot;pyramid_zcml&quot;/&gt;</span></code>).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.view.action</span></code> decorator has been removed from the Pyramid
core.  Handlers are now a feature of the <code class="docutils literal notranslate"><span class="pre">pyramid_handlers</span></code> package.  It
should now be imported from <code class="docutils literal notranslate"><span class="pre">pyramid_handlers</span></code> e.g. <code class="docutils literal notranslate"><span class="pre">from</span>
<span class="pre">pyramid_handlers</span> <span class="pre">import</span> <span class="pre">action</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">handler</span></code> ZCML directive has been removed.  It is now a feature of
the <code class="docutils literal notranslate"><span class="pre">pyramid_handlers</span></code> package.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pylons_minimal</span></code>, <code class="docutils literal notranslate"><span class="pre">pylons_basic</span></code> and <code class="docutils literal notranslate"><span class="pre">pylons_sqla</span></code> paster
templates were removed.  Use <code class="docutils literal notranslate"><span class="pre">pyramid_sqla</span></code> (available from PyPI) as a
generic replacement for Pylons-esque development.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">make_app</span></code> function has been removed from the <code class="docutils literal notranslate"><span class="pre">pyramid.router</span></code>
module.  It continues life within the <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> package.  This
leaves the <code class="docutils literal notranslate"><span class="pre">pyramid.router</span></code> module without any API functions.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">configure_zcml</span></code> setting within the deployment settings (within
<code class="docutils literal notranslate"><span class="pre">**settings</span></code> passed to a Pyramid <code class="docutils literal notranslate"><span class="pre">main</span></code> function) has ceased to have any
meaning.</li>
</ul>
</div>
<div class="section" id="id180">
<h3>Features<a class="headerlink" href="#id180" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> and <code class="docutils literal notranslate"><span class="pre">pyramid.testing.tearDown</span></code> have been
undeprecated.  They are now the canonical setup and teardown APIs for test
configuration, replacing &quot;direct&quot; creation of a Configurator.  This is a
change designed to provide a facade that will protect against any future
Configurator deprecations.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">charset</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code>
(unconditionally <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>).</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">add_directive</span></code> method to configurator, which allows framework
extenders to add methods to the configurator (ala ZCML directives).</li>
<li>When <code class="docutils literal notranslate"><span class="pre">Configurator.include</span></code> is passed a <em>module</em> as an argument, it
defaults to attempting to find and use a callable named <code class="docutils literal notranslate"><span class="pre">includeme</span></code>
within that module.  This makes it possible to use
<code class="docutils literal notranslate"><span class="pre">config.include('some.module')</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">config.include('some.module.somefunc')</span></code> as long as the include function
within <code class="docutils literal notranslate"><span class="pre">some.module</span></code> is named <code class="docutils literal notranslate"><span class="pre">includeme</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">bfg2pyramid</span></code> script now converts ZCML include tags that have
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.includes</span></code> as a package attribute to the value
<code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code>.  For example, <code class="docutils literal notranslate"><span class="pre">&lt;include</span> <span class="pre">package=&quot;repoze.bfg.includes&quot;&gt;</span></code>
will be converted to <code class="docutils literal notranslate"><span class="pre">&lt;include</span> <span class="pre">package=&quot;pyramid_zcml&quot;&gt;</span></code>.</li>
</ul>
</div>
<div class="section" id="id181">
<h3>Paster Templates<a class="headerlink" href="#id181" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All paster templates now use <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.testing.tearDown</span></code> rather than creating a Configurator &quot;by hand&quot;
within their <code class="docutils literal notranslate"><span class="pre">tests.py</span></code> module, as per decision in features above.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">starter_zcml</span></code> paster template has been moved to the <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code>
package.</li>
</ul>
</div>
<div class="section" id="id182">
<h3>Documentation<a class="headerlink" href="#id182" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The wiki and wiki2 tutorials now use <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.testing.tearDown</span></code> rather than creating a Configurator &quot;by hand&quot;,
as per decision in features above.</li>
<li>The &quot;Testing&quot; narrative chapter now explains <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.testing.tearDown</span></code> instead of Configurator creation and
<code class="docutils literal notranslate"><span class="pre">Configurator.begin()</span></code> and <code class="docutils literal notranslate"><span class="pre">Configurator.end()</span></code>.</li>
<li>Document the <code class="docutils literal notranslate"><span class="pre">request.override_renderer</span></code> attribute within the narrative
&quot;Renderers&quot; chapter in a section named &quot;Overriding A Renderer at Runtime&quot;.</li>
<li>The &quot;Declarative Configuration&quot; narrative chapter has been removed (it was
moved to the <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> package).</li>
<li>Most references to ZCML in narrative chapters have been removed or
redirected to <code class="docutils literal notranslate"><span class="pre">pyramid_zcml</span></code> locations.</li>
</ul>
</div>
<div class="section" id="id183">
<h3>Deprecations<a class="headerlink" href="#id183" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecation warnings related to import of the following API functions were
added: <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.find_model</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.model_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.model_path_tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid.url.model_url</span></code>.  The
instructions emitted by the deprecation warnings instruct the developer to
change these method spellings to their <code class="docutils literal notranslate"><span class="pre">resource</span></code> equivalents.  This is a
consequence of the mass concept rename of &quot;model&quot; to &quot;resource&quot; performed
in 1.0a7.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2011-01-08">
<h2>1.0a9 (2011-01-08)<a class="headerlink" href="#a9-2011-01-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id184">
<h3>Bug Fixes<a class="headerlink" href="#id184" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">proutes</span></code> command tried too hard to resolve the view for printing,
resulting in exceptions when an exceptional root factory was encountered.
Instead of trying to resolve the view, if it cannot, it will now just print
<code class="docutils literal notranslate"><span class="pre">&lt;unknown&gt;</span></code>.</li>
<li>The <cite>self</cite> argument was included in new methods of the <code class="docutils literal notranslate"><span class="pre">ISession</span></code> interface
signature, causing <code class="docutils literal notranslate"><span class="pre">pyramid_beaker</span></code> tests to fail.</li>
<li>Readd <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.model_path_tuple</span></code> as an alias for
<code class="docutils literal notranslate"><span class="pre">pyramid.traversal.resource_path_tuple</span></code> for backwards compatibility.</li>
</ul>
</div>
<div class="section" id="id185">
<h3>Features<a class="headerlink" href="#id185" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a new API <code class="docutils literal notranslate"><span class="pre">pyramid.url.current_route_url</span></code>, which computes a URL based
on the &quot;current&quot; route (if any) and its matchdict values.</li>
<li><code class="docutils literal notranslate"><span class="pre">config.add_view</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">decorator</span></code> keyword argument, a callable
which will decorate the view callable before it is added to the registry.</li>
<li>If a handler class provides an <code class="docutils literal notranslate"><span class="pre">__action_decorator__</span></code> attribute (usually
a classmethod or staticmethod), use that as the decorator for each view
registration for that handler.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code> interface now specifies an
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> method.  This method supports an important
optimization required by people who are using persistent storages which do
not support object caching and whom want to create a &quot;user object&quot; as a
request attribute.</li>
<li>A new API has been added to the <code class="docutils literal notranslate"><span class="pre">pyramid.security</span></code> module named
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>.  This API function calls the
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> method of the effective security policy.</li>
<li>An <code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> method has been added to the dummy
authentication policy returned by
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.testing_securitypolicy</span></code>.  It returns the
same thing as that the dummy authentication policy's
<code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code> method.</li>
<li>The class <code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktCookieHelper</span></code> is now an API.
This class can be used by third-party authentication policy developers to
help in the mechanics of authentication cookie-setting.</li>
<li>New constructor argument to Configurator: <code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code>.  Useful
to create systems that have alternate view calling conventions.  A view
mapper allows objects that are meant to be used as view callables to have
an arbitrary argument list and an arbitrary result.  The object passed as
<code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code> should implement the
<code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IViewMapperFactory</span></code> interface.</li>
<li>add a <code class="docutils literal notranslate"><span class="pre">set_view_mapper</span></code> API to Configurator.  Has
the same result as passing <code class="docutils literal notranslate"><span class="pre">default_view_mapper</span></code> to the Configurator
constructor.</li>
<li><code class="docutils literal notranslate"><span class="pre">config.add_view</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">mapper</span></code> keyword argument, which should
either be <code class="docutils literal notranslate"><span class="pre">None</span></code>, a string representing a Python dotted name, or an
object which is an <code class="docutils literal notranslate"><span class="pre">IViewMapperFactory</span></code>.  This feature is not useful for
&quot;civilians&quot;, only for extension writers.</li>
<li>Allow static renderer provided during view registration to be overridden at
request time via a request attribute named <code class="docutils literal notranslate"><span class="pre">override_renderer</span></code>, which
should be the name of a previously registered renderer.  Useful to provide
&quot;omnipresent&quot; RPC using existing rendered views.</li>
<li>Instances of <code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now have a <code class="docutils literal notranslate"><span class="pre">session</span></code>
object, which is mostly a dictionary, but also implements the other session
API methods for flash and CSRF.</li>
</ul>
</div>
<div class="section" id="id186">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id186" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Since the <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IAuthenticationPolicy</span></code> interface now
specifies that a policy implementation must implement an
<code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> method, all third-party custom authentication
policies now must implement this method.  It, however, will only be called
when the global function named <code class="docutils literal notranslate"><span class="pre">pyramid.security.unauthenticated_userid</span></code>
is invoked, so if you're not invoking that, you will not notice any issues.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ISession.get_csrf_token</span></code> now mandates that an
implementation should return a <em>new</em> token if one doesn't already exist in
the session (previously it would return None).  The internal sessioning
implementation has been changed.</li>
</ul>
</div>
<div class="section" id="id187">
<h3>Documentation<a class="headerlink" href="#id187" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The (weak) &quot;Converting a CMF Application to Pyramid&quot; tutorial has been
removed from the tutorials section.  It was moved to the
<code class="docutils literal notranslate"><span class="pre">pyramid_tutorials</span></code> Github repository.</li>
<li>The &quot;Resource Location and View Lookup&quot; chapter has been replaced with a
variant of Rob Miller's &quot;Much Ado About Traversal&quot; (originally published at
<a class="reference external" href="http://blog.nonsequitarian.org/2010/much-ado-about-traversal/">http://blog.nonsequitarian.org/2010/much-ado-about-traversal/</a>).</li>
<li>Many minor wording tweaks and refactorings (merged Casey Duncan's docs
fork, in which he is working on general editing).</li>
<li>Added (weak) description of new view mapper feature to Hooks narrative
chapter.</li>
<li>Split views chapter into 2: View Callables and View Configuration.</li>
<li>Reorder Renderers and Templates chapters after View Callables but before
View Configuration.</li>
<li>Merge Session Objects, Cross-Site Request Forgery, and Flash Messaging
chapter into a single Sessions chapter.</li>
<li>The Wiki and Wiki2 tutorials now have much nicer CSS and graphics.</li>
</ul>
</div>
<div class="section" id="id188">
<h3>Internals<a class="headerlink" href="#id188" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The &quot;view derivation&quot; code is now factored into a set of classes rather
than a large number of standalone functions (a side effect of the
view mapper refactoring).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.renderer.RendererHelper</span></code> class has grown a <code class="docutils literal notranslate"><span class="pre">render_view</span></code>
method, which is used by the default view mapper (a side effect of the
view mapper refactoring).</li>
<li>The object passed as <code class="docutils literal notranslate"><span class="pre">renderer</span></code> to the &quot;view deriver&quot; is now an instance
of <code class="docutils literal notranslate"><span class="pre">pyramid.renderers.RendererHelper</span></code> rather than a dictionary (a side
effect of view mapper refactoring).</li>
<li>The class used as the &quot;page template&quot; in <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_text</span></code> was
removed, in preference to using a Chameleon-inbuilt version.</li>
<li>A view callable wrapper registered in the registry now contains an
<code class="docutils literal notranslate"><span class="pre">__original_view__</span></code> attribute which references the original view callable
(or class).</li>
<li>The (non-API) method of all internal authentication policy implementations
previously named <code class="docutils literal notranslate"><span class="pre">_get_userid</span></code> is now named <code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code>,
promoted to an API method.  If you were overriding this method, you'll now
need to override it as <code class="docutils literal notranslate"><span class="pre">unauthenticated_userid</span></code> instead.</li>
<li>Remove (non-API) function of config.py named _map_view.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2010-12-27">
<h2>1.0a8 (2010-12-27)<a class="headerlink" href="#a8-2010-12-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id189">
<h3>Bug Fixes<a class="headerlink" href="#id189" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The name <code class="docutils literal notranslate"><span class="pre">registry</span></code> was not available in the <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code>
environment under IPython.</li>
</ul>
</div>
<div class="section" id="id190">
<h3>Features<a class="headerlink" href="#id190" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>If a resource implements a <code class="docutils literal notranslate"><span class="pre">__resource_url__</span></code> method, it will be called
as the result of invoking the <code class="docutils literal notranslate"><span class="pre">pyramid.url.resource_url</span></code> function to
generate a URL, overriding the default logic.  See the new &quot;Generating The
URL Of A Resource&quot; section within the Resources narrative chapter.</li>
<li>Added flash messaging, as described in the &quot;Flash Messaging&quot; narrative
documentation chapter.</li>
<li>Added CSRF token generation, as described in the narrative chapter entitled
&quot;Preventing Cross-Site Request Forgery Attacks&quot;.</li>
<li>Prevent misunderstanding of how the <code class="docutils literal notranslate"><span class="pre">view</span></code> and <code class="docutils literal notranslate"><span class="pre">view_permission</span></code>
arguments to add_route work by raising an exception during configuration if
view-related arguments exist but no <code class="docutils literal notranslate"><span class="pre">view</span></code> argument is passed.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">proute</span></code> command which displays a summary of the routing
table.  See the narrative documentation section within the &quot;URL Dispatch&quot;
chapter entitled &quot;Displaying All Application Routes&quot;.</li>
</ul>
</div>
<div class="section" id="id191">
<h3>Paster Templates<a class="headerlink" href="#id191" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code> Paster template no longer employs ZCML.  Instead, it
is based on scanning.</li>
</ul>
</div>
<div class="section" id="id192">
<h3>Documentation<a class="headerlink" href="#id192" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added &quot;Generating The URL Of A Resource&quot; section to the Resources narrative
chapter (includes information about overriding URL generation using
<code class="docutils literal notranslate"><span class="pre">__resource_url__</span></code>).</li>
<li>Added &quot;Generating the Path To a Resource&quot; section to the Resources
narrative chapter.</li>
<li>Added &quot;Finding a Resource by Path&quot; section to the Resources narrative
chapter.</li>
<li>Added &quot;Obtaining the Lineage of a Resource&quot; to the Resources narrative
chapter.</li>
<li>Added &quot;Determining if a Resource is In The Lineage of Another Resource&quot; to
Resources narrative chapter.</li>
<li>Added &quot;Finding the Root Resource&quot; to Resources narrative chapter.</li>
<li>Added &quot;Finding a Resource With a Class or Interface in Lineage&quot; to
Resources narrative chapter.</li>
<li>Added a &quot;Flash Messaging&quot; narrative documentation chapter.</li>
<li>Added a narrative chapter entitled &quot;Preventing Cross-Site Request Forgery
Attacks&quot;.</li>
<li>Changed the &quot;ZODB + Traversal Wiki Tutorial&quot; based on changes to
<code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code> Paster template.</li>
<li>Added &quot;Advanced Configuration&quot; narrative chapter which documents how to
deal with configuration conflicts, two-phase configuration, <code class="docutils literal notranslate"><span class="pre">include</span></code> and
<code class="docutils literal notranslate"><span class="pre">commit</span></code>.</li>
<li>Fix API documentation rendering for <code class="docutils literal notranslate"><span class="pre">pyramid.view.static</span></code></li>
<li>Add &quot;Pyramid Provides More Than One Way to Do It&quot; to Design Defense
documentation.</li>
<li>Changed &quot;Static Assets&quot; narrative chapter: clarify that <code class="docutils literal notranslate"><span class="pre">name</span></code> represents
a prefix unless it's a URL, added an example of a root-relative static view
fallback for URL dispatch, added an example of creating a simple view that
returns the body of a file.</li>
<li>Move ZCML usage in Hooks chapter to Declarative Configuration chapter.</li>
<li>Merge &quot;Static Assets&quot; chapter into the &quot;Assets&quot; chapter.</li>
<li>Added narrative documentation section within the &quot;URL Dispatch&quot; chapter
entitled &quot;Displaying All Application Routes&quot; (for <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">proutes</span></code>
command).</li>
</ul>
</div>
</div>
<div class="section" id="a7-2010-12-20">
<h2>1.0a7 (2010-12-20)<a class="headerlink" href="#a7-2010-12-20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="terminology-changes">
<h3>Terminology Changes<a class="headerlink" href="#terminology-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The Pyramid concept previously known as &quot;model&quot; is now known as &quot;resource&quot;.
As a result:</p>
<ul>
<li><p class="first">The following API changes have been made:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyramid</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">model_url</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">resource_url</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">find_model</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">find_resource</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">model_path</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">resource_path</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">model_path_tuple</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">resource_path_tuple</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">ModelGraphTraverser</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">traversal</span><span class="o">.</span><span class="n">ResourceTreeTraverser</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">testing_models</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">testing_resources</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">registerModels</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">registerResources</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">DummyModel</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">DummyResource</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>All documentation which previously referred to &quot;model&quot; now refers to
&quot;resource&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">starter</span></code> and <code class="docutils literal notranslate"><span class="pre">starter_zcml</span></code> paster templates now have a
<code class="docutils literal notranslate"><span class="pre">resources.py</span></code> module instead of a <code class="docutils literal notranslate"><span class="pre">models.py</span></code> module.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Positional argument names of various APIs have been changed from
<code class="docutils literal notranslate"><span class="pre">model</span></code> to <code class="docutils literal notranslate"><span class="pre">resource</span></code>.</li>
</ul>
<p>Backwards compatibility shims have been left in place in all cases.  They
will continue to work &quot;forever&quot;.</p>
</li>
<li><p class="first">The Pyramid concept previously known as &quot;resource&quot; is now known as &quot;asset&quot;.
As a result:</p>
<ul>
<li><p class="first">The (non-API) module previously known as <code class="docutils literal notranslate"><span class="pre">pyramid.resource</span></code> is now
known as <code class="docutils literal notranslate"><span class="pre">pyramid.asset</span></code>.</p>
</li>
<li><p class="first">All docs that previously referred to &quot;resource specification&quot; now refer
to &quot;asset specification&quot;.</p>
</li>
<li><p class="first">The following API changes were made:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">absolute_resource_spec</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">absolute_asset_spec</span>

<span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">override_resource</span> <span class="o">-&gt;</span>
                  <span class="n">pyramid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">Configurator</span><span class="o">.</span><span class="n">override_asset</span>
</pre></div>
</div>
</li>
<li><p class="first">The ZCML directive previously known as <code class="docutils literal notranslate"><span class="pre">resource</span></code> is now known as
<code class="docutils literal notranslate"><span class="pre">asset</span></code>.</p>
</li>
<li><p class="first">The setting previously known as <code class="docutils literal notranslate"><span class="pre">BFG_RELOAD_RESOURCES</span></code> (envvar) or
<code class="docutils literal notranslate"><span class="pre">reload_resources</span></code> (config file) is now known, respectively, as
<code class="docutils literal notranslate"><span class="pre">PYRAMID_RELOAD_ASSETS</span></code> and <code class="docutils literal notranslate"><span class="pre">reload_assets</span></code>.</p>
</li>
</ul>
<p>Backwards compatibility shims have been left in place in all cases.  They
will continue to work &quot;forever&quot;.</p>
</li>
</ul>
</div>
<div class="section" id="id193">
<h3>Bug Fixes<a class="headerlink" href="#id193" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make it possible to succesfully run all tests via <code class="docutils literal notranslate"><span class="pre">nosetests</span></code> command
directly (rather than indirectly via <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">nosetests</span></code>).</li>
<li>When a configuration conflict is encountered during scanning, the conflict
exception now shows the decorator information that caused the conflict.</li>
</ul>
</div>
<div class="section" id="id194">
<h3>Features<a class="headerlink" href="#id194" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added <code class="docutils literal notranslate"><span class="pre">debug_routematch</span></code> configuration setting that logs matched routes
(including the matchdict and predicates).</li>
<li>The name <code class="docutils literal notranslate"><span class="pre">registry</span></code> is now available in a <code class="docutils literal notranslate"><span class="pre">pshell</span></code> environment by
default.  It is the application registry object.</li>
</ul>
</div>
<div class="section" id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All environment variables which used to be prefixed with <code class="docutils literal notranslate"><span class="pre">BFG_</span></code> are now
prefixed with <code class="docutils literal notranslate"><span class="pre">PYRAMID_</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_NOTFOUND</span></code> is now
<code class="docutils literal notranslate"><span class="pre">PYRAMID_DEBUG_NOTFOUND</span></code>)</li>
</ul>
</div>
<div class="section" id="id195">
<h3>Documentation<a class="headerlink" href="#id195" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added &quot;Debugging Route Matching&quot; section to the urldispatch narrative
documentation chapter.</li>
<li>Added reference to <code class="docutils literal notranslate"><span class="pre">PYRAMID_DEBUG_ROUTEMATCH</span></code> envvar and <code class="docutils literal notranslate"><span class="pre">debug_routematch</span></code>
config file setting to the Environment narrative docs chapter.</li>
<li>Changed &quot;Project&quot; chapter slightly to expand on use of <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code>.</li>
<li>Direct Jython users to Mako rather than Jinja2 in &quot;Install&quot; narrative
chapter.</li>
<li>Many changes to support terminological renaming of &quot;model&quot; to &quot;resource&quot;
and &quot;resource&quot; to &quot;asset&quot;.</li>
<li>Added an example of <code class="docutils literal notranslate"><span class="pre">WebTest</span></code> functional testing to the testing narrative
chapter.</li>
<li>Rearranged chapter ordering by popular demand (URL dispatch first, then
traversal).  Put hybrid chapter after views chapter.</li>
<li>Split off &quot;Renderers&quot; as its own chapter from &quot;Views&quot; chapter in narrative
documentation.</li>
</ul>
</div>
<div class="section" id="id196">
<h3>Paster Templates<a class="headerlink" href="#id196" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added <code class="docutils literal notranslate"><span class="pre">debug_routematch</span> <span class="pre">=</span> <span class="pre">false</span></code> to all paster templates.</li>
</ul>
</div>
<div class="section" id="id197">
<h3>Dependencies<a class="headerlink" href="#id197" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Depend on Venusian &gt;= 0.5 (for scanning conflict exception decoration).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2010-12-15">
<h2>1.0a6 (2010-12-15)<a class="headerlink" href="#a6-2010-12-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id198">
<h3>Bug Fixes<a class="headerlink" href="#id198" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>1.0a5 introduced a bug when <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator.scan</span></code> was used
without a <code class="docutils literal notranslate"><span class="pre">package</span></code> argument (e.g. <code class="docutils literal notranslate"><span class="pre">config.scan()</span></code> as opposed to
<code class="docutils literal notranslate"><span class="pre">config.scan('packagename')</span></code>.  The symptoms were: lots of deprecation
warnings printed to the console about imports of deprecated Pyramid
functions and classes and non-detection of view callables decorated with
<code class="docutils literal notranslate"><span class="pre">view_config</span></code> decorators.  This has been fixed.</li>
<li>Tests now pass on Windows (no bugs found, but a few tests in the test suite
assumed UNIX path segments in filenames).</li>
</ul>
</div>
<div class="section" id="id199">
<h3>Documentation<a class="headerlink" href="#id199" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>If you followed it to-the-letter, the ZODB+Traversal Wiki tutorial would
instruct you to run a test which would fail because the view callable
generated by the <code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code> tutorial used a one-arg view callable,
but the test in the sample code used a two-arg call.</li>
<li>Updated ZODB+Traversal tutorial setup.py of all steps to match what's
generated by <code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code>.</li>
<li>Fix reference to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversalwrapper</span></code> in &quot;Models&quot; chapter (point
at <code class="docutils literal notranslate"><span class="pre">pyramid_traversalwrapper</span></code> instead).</li>
</ul>
</div>
</div>
<div class="section" id="a5-2010-12-14">
<h2>1.0a5 (2010-12-14)<a class="headerlink" href="#a5-2010-12-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id200">
<h3>Features<a class="headerlink" href="#id200" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">handler</span></code> ZCML directive.  This directive does the same thing as
<code class="docutils literal notranslate"><span class="pre">pyramid.configuration.add_handler</span></code>.</li>
<li>A new module named <code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> was added.  It subsumes the duties of
the older <code class="docutils literal notranslate"><span class="pre">pyramid.configuration</span></code> module.</li>
<li>The new <code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator`</span> <span class="pre">class</span> <span class="pre">has</span> <span class="pre">API</span> <span class="pre">methods</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">older</span>
<span class="pre">``pyramid.configuration.Configurator</span></code> class did not: <code class="docutils literal notranslate"><span class="pre">with_context</span></code> (a
classmethod), <code class="docutils literal notranslate"><span class="pre">include</span></code>, <code class="docutils literal notranslate"><span class="pre">action</span></code>, and <code class="docutils literal notranslate"><span class="pre">commit</span></code>.  These methods exist
for imperative application extensibility purposes.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.testing.setUp</span></code> function now accepts an <code class="docutils literal notranslate"><span class="pre">autocommit</span></code>
keyword argument, which defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.  If it is passed <code class="docutils literal notranslate"><span class="pre">False</span></code>,
the Config object returned by <code class="docutils literal notranslate"><span class="pre">setUp</span></code> will be a non-autocommiting Config
object.</li>
<li>Add logging configuration to all paster templates.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code>, <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code>, and <code class="docutils literal notranslate"><span class="pre">pylons_sqla</span></code> paster
templates now use idiomatic SQLAlchemy configuration in their respective
<code class="docutils literal notranslate"><span class="pre">.ini</span></code> files and Python code.</li>
<li><code class="docutils literal notranslate"><span class="pre">pyramid.testing.DummyRequest</span></code> now has a class variable,
<code class="docutils literal notranslate"><span class="pre">query_string</span></code>, which defaults to the empty string.</li>
<li>Add support for json on GAE by catching NotImplementedError and importing
simplejson from django.utils.</li>
<li>The Mako renderer now accepts a resource specification for
<code class="docutils literal notranslate"><span class="pre">mako.module_directory</span></code>.</li>
<li>New boolean Mako settings variable <code class="docutils literal notranslate"><span class="pre">mako.strict_undefined</span></code>.  See <a class="reference external" href="http://www.makotemplates.org/docs/runtime.html#context-variables">Mako
Context Variables</a> for
its meaning.</li>
</ul>
</div>
<div class="section" id="id201">
<h3>Dependencies<a class="headerlink" href="#id201" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Depend on Mako 0.3.6+ (we now require the <code class="docutils literal notranslate"><span class="pre">strict_undefined</span></code> feature).</li>
</ul>
</div>
<div class="section" id="id202">
<h3>Bug Fixes<a class="headerlink" href="#id202" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When creating a Configurator from within a <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">pshell</span></code> session, you
were required to pass a <code class="docutils literal notranslate"><span class="pre">package</span></code> argument although <code class="docutils literal notranslate"><span class="pre">package</span></code> is not
actually required.  If you didn't pass <code class="docutils literal notranslate"><span class="pre">package</span></code>, you would receive an
error something like <code class="docutils literal notranslate"><span class="pre">KeyError:</span> <span class="pre">'__name__'</span></code> emanating from the
<code class="docutils literal notranslate"><span class="pre">pyramid.path.caller_module</span></code> function.  This has now been fixed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> paster template's unit tests failed
(<code class="docutils literal notranslate"><span class="pre">AssertionError:</span> <span class="pre">'SomeProject'</span> <span class="pre">!=</span> <span class="pre">'someproject'</span></code>).  This is fixed.</li>
<li>Make default renderer work (renderer factory registered with no name, which
is active for every view unless the view names a specific renderer).</li>
<li>The Mako renderer did not properly turn the <code class="docutils literal notranslate"><span class="pre">mako.imports</span></code>,
<code class="docutils literal notranslate"><span class="pre">mako.default_filters</span></code>, and <code class="docutils literal notranslate"><span class="pre">mako.imports</span></code> settings into lists.</li>
<li>The Mako renderer did not properly convert the <code class="docutils literal notranslate"><span class="pre">mako.error_handler</span></code>
setting from a dotted name to a callable.</li>
</ul>
</div>
<div class="section" id="id203">
<h3>Documentation<a class="headerlink" href="#id203" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Merged many wording, readability, and correctness changes to narrative
documentation chapters from <a class="reference external" href="https://github.com/caseman/pyramid">https://github.com/caseman/pyramid</a> (up to and
including &quot;Models&quot; narrative chapter).</li>
<li>&quot;Sample Applications&quot; section of docs changed to note existence of Cluegun,
Shootout and Virginia sample applications, ported from their repoze.bfg
origin packages.</li>
<li>SQLAlchemy+URLDispatch tutorial updated to integrate changes to
<code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> template.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.ITemplateRenderer</span></code> interface to Interfaces API
chapter (has <code class="docutils literal notranslate"><span class="pre">implementation()</span></code> method, required to be used when getting
at Chameleon macros).</li>
<li>Add a &quot;Modifying Package Structure&quot; section to the project narrative
documentation chapter (explain turning a module into a package).</li>
<li>Documentation was added for the new <code class="docutils literal notranslate"><span class="pre">handler</span></code> ZCML directive in the ZCML
section.</li>
</ul>
</div>
<div class="section" id="id204">
<h3>Deprecations<a class="headerlink" href="#id204" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator</span></code> is now deprecated.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code>, passing its constructor
<code class="docutils literal notranslate"><span class="pre">autocommit=True</span></code> instead.  The <code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator</span></code>
alias will live for a long time, as every application uses it, but its
import now issues a deprecation warning.  The
<code class="docutils literal notranslate"><span class="pre">pyramid.config.Configurator</span></code> class has the same API as
<code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator</span></code> class, which it means to replace,
except by default it is a <em>non-autocommitting</em> configurator. The
now-deprecated <code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator</span></code> will autocommit every
time a configuration method is called.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pyramid.configuration</span></code> module remains, but it is deprecated.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.config</span></code> instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2010-11-21">
<h2>1.0a4 (2010-11-21)<a class="headerlink" href="#a4-2010-11-21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id205">
<h3>Features<a class="headerlink" href="#id205" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>URL Dispatch now allows for replacement markers to be located anywhere
in the pattern, instead of immediately following a <code class="docutils literal notranslate"><span class="pre">/</span></code>.</li>
<li>URL Dispatch now uses the form <code class="docutils literal notranslate"><span class="pre">{marker}</span></code> to denote a replace marker in
the route pattern instead of <code class="docutils literal notranslate"><span class="pre">:marker</span></code>. The old colon-style marker syntax
is still accepted for backwards compatibility. The new format allows a
regular expression for that marker location to be used instead of the
default <code class="docutils literal notranslate"><span class="pre">[^/]+</span></code>, for example <code class="docutils literal notranslate"><span class="pre">{marker:\d+}</span></code> is now valid to require the
marker to be digits.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">pyramid.url.route_path</span></code> API, allowing folks to generate relative
URLs.  Calling <code class="docutils literal notranslate"><span class="pre">route_path</span></code> is the same as calling
<code class="docutils literal notranslate"><span class="pre">pyramid.url.route_url</span></code> with the argument <code class="docutils literal notranslate"><span class="pre">_app_url</span></code> equal to the empty
string.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request.route_path</span></code> API.  This is a convenience
method of the request which calls <code class="docutils literal notranslate"><span class="pre">pyramid.url.route_url</span></code>.</li>
<li>Make test suite pass on Jython (requires PasteScript trunk, presumably to
be 1.7.4).</li>
<li>Make test suite pass on PyPy (Chameleon doesn't work).</li>
<li>Surrounding application configuration with <code class="docutils literal notranslate"><span class="pre">config.begin()</span></code> and
<code class="docutils literal notranslate"><span class="pre">config.end()</span></code> is no longer necessary.  All paster templates have been
changed to no longer call these functions.</li>
<li>Fix configurator to not convert <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> to <code class="docutils literal notranslate"><span class="pre">ConfigurationError</span></code>
if the import that failed was unrelated to the import requested via a
dotted name when resolving dotted names (such as view dotted names).</li>
</ul>
</div>
<div class="section" id="id206">
<h3>Documentation<a class="headerlink" href="#id206" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>SQLAlchemy+URLDispatch and ZODB+Traversal tutorials have been updated to
not call <code class="docutils literal notranslate"><span class="pre">config.begin()</span></code> or <code class="docutils literal notranslate"><span class="pre">config.end()</span></code>.</li>
</ul>
</div>
<div class="section" id="id207">
<h3>Bug Fixes<a class="headerlink" href="#id207" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add deprecation warnings to import of <code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_text</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.chameleon_zpt</span></code> of <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code>, <code class="docutils literal notranslate"><span class="pre">get_template</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_template</span></code>, and <code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code>.</li>
<li>Add deprecation warning for import of <code class="docutils literal notranslate"><span class="pre">pyramid.zcml.zcml_configure</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyramid.zcml.file_configure</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid_alchemy</span></code> paster template had a typo, preventing an import
from working.</li>
<li>Fix apparent failures when calling <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.find_model(root,</span>
<span class="pre">path)</span></code> or <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.traverse(path)</span></code> when <code class="docutils literal notranslate"><span class="pre">path</span></code> is
(erroneously) a Unicode object. The user is meant to pass these APIs a
string object, never a Unicode object.  In practice, however, users indeed
pass Unicode.  Because the string that is passed must be ASCII encodeable,
now, if they pass a Unicode object, its data is eagerly converted to an
ASCII string rather than being passed along to downstream code as a
convenience to the user and to prevent puzzling second-order failures from
cropping up (all failures will occur within <code class="docutils literal notranslate"><span class="pre">pyramid.traversal.traverse</span></code>
rather than later down the line as the result of calling e.g.
<code class="docutils literal notranslate"><span class="pre">traversal_path</span></code>).</li>
</ul>
</div>
<div class="section" id="id208">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id208" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.testing.zcml_configure</span></code> API has been removed.  It had been
advertised as removed since repoze.bfg 1.2a1, but hadn't actually been.</li>
</ul>
</div>
<div class="section" id="id209">
<h3>Deprecations<a class="headerlink" href="#id209" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">pyramid.settings.get_settings</span></code> API is now deprecated.  Use
<code class="docutils literal notranslate"><span class="pre">pyramid.threadlocals.get_current_registry().settings</span></code> instead or use the
<code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute of the registry available from the request
(<code class="docutils literal notranslate"><span class="pre">request.registry.settings</span></code>).</li>
</ul>
</div>
<div class="section" id="id210">
<h3>Documentation<a class="headerlink" href="#id210" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Removed <code class="docutils literal notranslate"><span class="pre">zodbsessions</span></code> tutorial chapter.  It's still useful, but we now
have a SessionFactory abstraction which competes with it, and maintaining
documentation on both ways to do it is a distraction.</li>
</ul>
</div>
<div class="section" id="id211">
<h3>Internal<a class="headerlink" href="#id211" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Replace Twill with WebTest in internal integration tests (avoid deprecation
warnings generated by Twill).</li>
</ul>
</div>
</div>
<div class="section" id="a3-2010-11-16">
<h2>1.0a3 (2010-11-16)<a class="headerlink" href="#a3-2010-11-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id212">
<h3>Features<a class="headerlink" href="#id212" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added Mako TemplateLookup settings for <code class="docutils literal notranslate"><span class="pre">mako.error_handler</span></code>,
<code class="docutils literal notranslate"><span class="pre">mako.default_filters</span></code>, and <code class="docutils literal notranslate"><span class="pre">mako.imports</span></code>.</li>
<li>Normalized all paster templates: each now uses the name <code class="docutils literal notranslate"><span class="pre">main</span></code> to
represent the function that returns a WSGI application, each now uses
WebError, each now has roughly the same shape of development.ini style.</li>
<li>Added class vars <code class="docutils literal notranslate"><span class="pre">matchdict</span></code> and <code class="docutils literal notranslate"><span class="pre">matched_route</span></code> to
<code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code>.  Each is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
<li>New API method: <code class="docutils literal notranslate"><span class="pre">pyramid.settings.asbool</span></code>.</li>
<li>New API methods for <code class="docutils literal notranslate"><span class="pre">pyramid.request.Request</span></code>: <code class="docutils literal notranslate"><span class="pre">model_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">route_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">static_url</span></code>.  These are simple passthroughs for their
respective functions in <code class="docutils literal notranslate"><span class="pre">pyramid.url</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> object which used to be available only when
<code class="docutils literal notranslate"><span class="pre">request.settings.get_settings</span></code> was called is now available as
<code class="docutils literal notranslate"><span class="pre">registry.settings</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">request.registry.settings</span></code> in view code).</li>
</ul>
</div>
<div class="section" id="id213">
<h3>Bug Fixes<a class="headerlink" href="#id213" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The pylons_* paster templates erroneously used the <code class="docutils literal notranslate"><span class="pre">{squiggly}</span></code> routing
syntax as the pattern supplied to <code class="docutils literal notranslate"><span class="pre">add_route</span></code>.  This style of routing is
not supported.  They were replaced with <code class="docutils literal notranslate"><span class="pre">:colon</span></code> style route patterns.</li>
<li>The pylons_* paster template used the same string
(<code class="docutils literal notranslate"><span class="pre">your_app_secret_string</span></code>) for the <code class="docutils literal notranslate"><span class="pre">session.secret</span></code> setting in the
generated <code class="docutils literal notranslate"><span class="pre">development.ini</span></code>.  This was a security risk if left unchanged
in a project that used one of the templates to produce production
applications.  It now uses a randomly generated string.</li>
</ul>
</div>
<div class="section" id="id214">
<h3>Documentation<a class="headerlink" href="#id214" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>ZODB+traversal wiki (<code class="docutils literal notranslate"><span class="pre">wiki</span></code>) tutorial updated due to changes to
<code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code> paster template.</li>
<li>SQLAlchemy+urldispach wiki (<code class="docutils literal notranslate"><span class="pre">wiki2</span></code>) tutorial updated due to changes to
<code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> paster template.</li>
<li>Documented the <code class="docutils literal notranslate"><span class="pre">matchdict</span></code> and <code class="docutils literal notranslate"><span class="pre">matched_route</span></code> attributes of the
request object in the Request API documentation.</li>
</ul>
</div>
<div class="section" id="id215">
<h3>Deprecations<a class="headerlink" href="#id215" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Obtaining the <code class="docutils literal notranslate"><span class="pre">settings</span></code> object via
<code class="docutils literal notranslate"><span class="pre">registry.{get|query}Utility(ISettings)</span></code> is now deprecated.  Instead,
obtain the <code class="docutils literal notranslate"><span class="pre">settings</span></code> object via the <code class="docutils literal notranslate"><span class="pre">registry.settings</span></code> attribute.  A
backwards compatibility shim was added to the registry object to register
the settings object as an ISettings utility when <code class="docutils literal notranslate"><span class="pre">setattr(registry,</span>
<span class="pre">'settings',</span> <span class="pre">foo)</span></code> is called, but it will be removed in a later release.</li>
<li>Obtaining the <code class="docutils literal notranslate"><span class="pre">settings</span></code> object via <code class="docutils literal notranslate"><span class="pre">pyramid.settings.get_settings</span></code> is
now deprecated.  Obtain it as the <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute of the registry
now (obtain the registry via <code class="docutils literal notranslate"><span class="pre">pyramid.threadlocal.get_registry</span></code> or as
<code class="docutils literal notranslate"><span class="pre">request.registry</span></code>).</li>
</ul>
</div>
<div class="section" id="id216">
<h3>Behavior Differences<a class="headerlink" href="#id216" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Internal: ZCML directives no longer call get_current_registry() if there's
a <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute on the ZCML context (kill off use of
threadlocals).</li>
<li>Internal: Chameleon template renderers now accept two arguments: <code class="docutils literal notranslate"><span class="pre">path</span></code>
and <code class="docutils literal notranslate"><span class="pre">lookup</span></code>.  <code class="docutils literal notranslate"><span class="pre">Lookup</span></code> will be an instance of a lookup class which
supplies (late-bound) arguments for debug, reload, and translate.  Any
third-party renderers which use (the non-API) function
<code class="docutils literal notranslate"><span class="pre">pyramid.renderers.template_renderer_factory</span></code> will need to adjust their
implementations to obey the new callback argument list.  This change was to
kill off inappropriate use of threadlocals.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2010-11-09">
<h2>1.0a2 (2010-11-09)<a class="headerlink" href="#a2-2010-11-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id217">
<h3>Documentation<a class="headerlink" href="#id217" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All references to events by interface
(e.g. <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.INewRequest</span></code>) have been changed to reference
their concrete classes (e.g. <code class="docutils literal notranslate"><span class="pre">pyramid.events.NewRequest</span></code>) in
documentation about making subscriptions.</li>
<li>All references to Pyramid-the-application were changed from mod-<cite>pyramid</cite>
to app-<cite>Pyramid</cite>.  A custom role setting was added to <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> to
allow for this.  (internal)</li>
</ul>
</div>
</div>
<div class="section" id="a1-2010-11-05">
<h2>1.0a1 (2010-11-05)<a class="headerlink" href="#a1-2010-11-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="features-delta-from-bfg-1-3">
<h3>Features (delta from BFG 1.3)<a class="headerlink" href="#features-delta-from-bfg-1-3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Mako templating renderer supports resource specification format for
template lookups and within Mako templates. Absolute filenames must
be used in Pyramid to avoid this lookup process.</p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code> module, which is a facade for the
<code class="docutils literal notranslate"><span class="pre">webob.exc</span></code> module.</p>
</li>
<li><p class="first">Direct built-in support for the Mako templating language.</p>
</li>
<li><p class="first">A new configurator method exists: <code class="docutils literal notranslate"><span class="pre">add_handler</span></code>.  This method adds
a Pylons-style &quot;view handler&quot; (such a thing used to be called a
&quot;controller&quot; in Pylons 1.0).</p>
</li>
<li><p class="first">New argument to configurator: <code class="docutils literal notranslate"><span class="pre">session_factory</span></code>.</p>
</li>
<li><p class="first">New method on configurator: <code class="docutils literal notranslate"><span class="pre">set_session_factory</span></code></p>
</li>
<li><p class="first">Using <code class="docutils literal notranslate"><span class="pre">request.session</span></code> now returns a (dictionary-like) session
object if a session factory has been configured.</p>
</li>
<li><p class="first">The request now has a new attribute: <code class="docutils literal notranslate"><span class="pre">tmpl_context</span></code> for benefit of
Pylons users.</p>
</li>
<li><p class="first">The decorator previously known as <code class="docutils literal notranslate"><span class="pre">pyramid.view.bfg_view</span></code> is now
known most formally as <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> in docs and
paster templates.  An import of <code class="docutils literal notranslate"><span class="pre">pyramid.view.bfg_view</span></code>, however,
will continue to work &quot;forever&quot;.</p>
</li>
<li><p class="first">New API methods in <code class="docutils literal notranslate"><span class="pre">pyramid.session</span></code>: <code class="docutils literal notranslate"><span class="pre">signed_serialize</span></code> and
<code class="docutils literal notranslate"><span class="pre">signed_deserialize</span></code>.</p>
</li>
<li><p class="first">New interface: <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IRendererInfo</span></code>.  An object of this type
is passed to renderer factory constructors (see &quot;Backwards
Incompatibilities&quot;).</p>
</li>
<li><p class="first">New event type: <code class="docutils literal notranslate"><span class="pre">pyramid.interfaces.IBeforeRender</span></code>.  An object of this type
is sent as an event before a renderer is invoked (but after the
application-level renderer globals factory added via
<code class="docutils literal notranslate"><span class="pre">pyramid.configurator.configuration.set_renderer_globals_factory</span></code>, if any,
has injected its own keys).  Applications may now subscribe to the
<code class="docutils literal notranslate"><span class="pre">IBeforeRender</span></code> event type in order to introspect the and modify the set of
renderer globals before they are passed to a renderer.  The event object
iself has a dictionary-like interface that can be used for this purpose.  For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.events</span> <span class="k">import</span> <span class="n">subscriber</span>
<span class="kn">from</span> <span class="nn">pyramid.interfaces</span> <span class="k">import</span> <span class="n">IRendererGlobalsEvent</span>

<span class="nd">@subscriber</span><span class="p">(</span><span class="n">IRendererGlobalsEvent</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_global</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">event</span><span class="p">[</span><span class="s1">&#39;mykey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
</pre></div>
</div>
<p>If a subscriber attempts to add a key that already exist in the renderer
globals dictionary, a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> is raised.  This limitation is due to the
fact that subscribers cannot be ordered relative to each other.  The set of
keys added to the renderer globals dictionary by all subscribers and
app-level globals factories must be unique.</p>
</li>
<li><p class="first">New class: <code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code>.  This is a pure facade for
<code class="docutils literal notranslate"><span class="pre">webob.Response</span></code> (old code need not change to use this facade, it's
existence is mostly for vanity and documentation-generation purposes).</p>
</li>
<li><p class="first">All preexisting paster templates (except <code class="docutils literal notranslate"><span class="pre">zodb</span></code>) now use &quot;imperative&quot;
configuration (<code class="docutils literal notranslate"><span class="pre">starter</span></code>, <code class="docutils literal notranslate"><span class="pre">routesalchemy</span></code>, <code class="docutils literal notranslate"><span class="pre">alchemy</span></code>).</p>
</li>
<li><p class="first">A new paster template named <code class="docutils literal notranslate"><span class="pre">pyramid_starter_zcml</span></code> exists, which uses
declarative configuration.</p>
</li>
</ul>
</div>
<div class="section" id="documentation-delta-from-bfg-1-3">
<h3>Documentation (delta from BFG 1.3)<a class="headerlink" href="#documentation-delta-from-bfg-1-3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">pyramid.httpexceptions</span></code> API documentation chapter.</li>
<li>Added a <code class="docutils literal notranslate"><span class="pre">pyramid.session</span></code> API documentation chapter.</li>
<li>Added a <code class="docutils literal notranslate"><span class="pre">Session</span> <span class="pre">Objects</span></code> narrative documentation chapter.</li>
<li>Added an API chapter for the <code class="docutils literal notranslate"><span class="pre">pyramid.personality</span></code> module.</li>
<li>Added an API chapter for the <code class="docutils literal notranslate"><span class="pre">pyramid.response</span></code> module.</li>
<li>All documentation which previously referred to <code class="docutils literal notranslate"><span class="pre">webob.Response</span></code> now uses
<code class="docutils literal notranslate"><span class="pre">pyramid.response.Response</span></code> instead.</li>
<li>The documentation has been overhauled to use imperative configuration,
moving declarative configuration (ZCML) explanations to a separate
narrative chapter <code class="docutils literal notranslate"><span class="pre">declarative.rst</span></code>.</li>
<li>The ZODB Wiki tutorial was updated to take into account changes to the
<code class="docutils literal notranslate"><span class="pre">pyramid_zodb</span></code> paster template.</li>
<li>The SQL Wiki tutorial was updated to take into account changes to the
<code class="docutils literal notranslate"><span class="pre">pyramid_routesalchemy</span></code> paster template.</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities-with-bfg-1-3">
<h3>Backwards Incompatibilities (with BFG 1.3)<a class="headerlink" href="#backwards-incompatibilities-with-bfg-1-3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">There is no longer an <code class="docutils literal notranslate"><span class="pre">IDebugLogger</span></code> registered as a named utility
with the name <code class="docutils literal notranslate"><span class="pre">repoze.bfg.debug</span></code>.</p>
</li>
<li><p class="first">The logger which used to have the name of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.debug</span></code> now
has the name <code class="docutils literal notranslate"><span class="pre">pyramid.debug</span></code>.</p>
</li>
<li><p class="first">The deprecated API <code class="docutils literal notranslate"><span class="pre">pyramid.testing.registerViewPermission</span></code>
has been removed.</p>
</li>
<li><p class="first">The deprecated API named <code class="docutils literal notranslate"><span class="pre">pyramid.testing.registerRoutesMapper</span></code>
has been removed.</p>
</li>
<li><p class="first">The deprecated API named <code class="docutils literal notranslate"><span class="pre">pyramid.request.get_request</span></code> was removed.</p>
</li>
<li><p class="first">The deprecated API named <code class="docutils literal notranslate"><span class="pre">pyramid.security.Unauthorized</span></code> was
removed.</p>
</li>
<li><p class="first">The deprecated API named <code class="docutils literal notranslate"><span class="pre">pyramid.view.view_execution_permitted</span></code>
was removed.</p>
</li>
<li><p class="first">The deprecated API named <code class="docutils literal notranslate"><span class="pre">pyramid.view.NotFound</span></code> was removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">bfgshell</span></code> paster command is now named <code class="docutils literal notranslate"><span class="pre">pshell</span></code>.</p>
</li>
<li><p class="first">The Venusian &quot;category&quot; for all built-in Venusian decorators
(e.g. <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">view_config</span></code>/<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>) is now
<code class="docutils literal notranslate"><span class="pre">pyramid</span></code> instead of <code class="docutils literal notranslate"><span class="pre">bfg</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">pyramid.renderers.rendered_response</span></code> function removed; use
<code class="docutils literal notranslate"><span class="pre">render_pyramid.renderers.render_to_response</span></code> instead.</p>
</li>
<li><p class="first">Renderer factories now accept a <em>renderer info object</em> rather than an
absolute resource specification or an absolute path.  The object has the
following attributes: <code class="docutils literal notranslate"><span class="pre">name</span></code> (the <code class="docutils literal notranslate"><span class="pre">renderer=</span></code> value), <code class="docutils literal notranslate"><span class="pre">package</span></code> (the
'current package' when the renderer configuration statement was found),
<code class="docutils literal notranslate"><span class="pre">type</span></code>: the renderer type, <code class="docutils literal notranslate"><span class="pre">registry</span></code>: the current registry, and
<code class="docutils literal notranslate"><span class="pre">settings</span></code>: the deployment settings dictionary.</p>
<p>Third-party <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> renderer implementations that must be ported to
Pyramid will need to account for this.</p>
<p>This change was made primarily to support more flexible Mako template
rendering.</p>
</li>
<li><p class="first">The presence of the key <code class="docutils literal notranslate"><span class="pre">repoze.bfg.message</span></code> in the WSGI environment when
an exception occurs is now deprecated.  Instead, code which relies on this
environ value should use the <code class="docutils literal notranslate"><span class="pre">exception</span></code> attribute of the request
(e.g. <code class="docutils literal notranslate"><span class="pre">request.exception[0]</span></code>) to retrieve the message.</p>
</li>
<li><p class="first">The values <code class="docutils literal notranslate"><span class="pre">bfg_localizer</span></code> and <code class="docutils literal notranslate"><span class="pre">bfg_locale_name</span></code> kept on the request
during internationalization for caching purposes were never APIs.  These
however have changed to <code class="docutils literal notranslate"><span class="pre">localizer</span></code> and <code class="docutils literal notranslate"><span class="pre">locale_name</span></code>, respectively.</p>
</li>
<li><p class="first">The default <code class="docutils literal notranslate"><span class="pre">cookie_name</span></code> value of the <code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code> ZCML
now defaults to <code class="docutils literal notranslate"><span class="pre">auth_tkt</span></code> (it used to default to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.auth_tkt</span></code>).</p>
</li>
<li><p class="first">The default <code class="docutils literal notranslate"><span class="pre">cookie_name</span></code> value of the
<code class="docutils literal notranslate"><span class="pre">pyramid.authentication.AuthTktAuthenticationPolicy</span></code> constructor now
defaults to <code class="docutils literal notranslate"><span class="pre">auth_tkt</span></code> (it used to default to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.auth_tkt</span></code>).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">request_type</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive, the
<code class="docutils literal notranslate"><span class="pre">pyramid.configuration.Configurator.add_view</span></code> method, or the
<code class="docutils literal notranslate"><span class="pre">pyramid.view.view_config</span></code> decorator (nee <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>) is no longer
permitted to be one of the strings <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code> or
<code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, and now must always be an interface.  Accepting the
method-strings as <code class="docutils literal notranslate"><span class="pre">request_type</span></code> was a backwards compatibility strategy
servicing repoze.bfg 1.0 applications.  Use the <code class="docutils literal notranslate"><span class="pre">request_method</span></code>
parameter instead to specify that a view a string request-method predicate.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="repoze-bfg-change-history-previous-name-for-pyramid">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">repoze.bfg</span></code> Change History (previous name for Pyramid)<a class="headerlink" href="#repoze-bfg-change-history-previous-name-for-pyramid" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="b1-2010-10-25">
<h2>1.3b1 (2010-10-25)<a class="headerlink" href="#b1-2010-10-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id218">
<h3>Features<a class="headerlink" href="#id218" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">paster</span></code> template named <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> has been updated
to use SQLAlchemy declarative syntax.  Thanks to Ergo^.</li>
</ul>
</div>
<div class="section" id="id219">
<h3>Bug Fixes<a class="headerlink" href="#id219" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When a renderer factory could not be found, a misleading error
message was raised if the renderer name was not a string.</li>
</ul>
</div>
<div class="section" id="id220">
<h3>Documentation<a class="headerlink" href="#id220" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The &quot;&quot;bfgwiki2&quot; (SQLAlchemy + url dispatch) tutorial has been
updated slightly.  In particular, the source packages no longer
attempt to use a private index, and the recommended Python version
is now 2.6.  It was also updated to take into account the changes to
the <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> template used to set up an environment.</li>
<li>The &quot;bfgwiki&quot; (ZODB + traversal) tutorial has been updated slightly.
In particular, the source packages no longer attempt to use a
private index, and the recommended Python version is now 2.6.</li>
</ul>
</div>
</div>
<div class="section" id="a15-2010-09-30">
<h2>1.3a15 (2010-09-30)<a class="headerlink" href="#a15-2010-09-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id221">
<h3>Features<a class="headerlink" href="#id221" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.traversal_path</span></code> API now eagerly attempts
to encode a Unicode <code class="docutils literal notranslate"><span class="pre">path</span></code> into ASCII before attempting to split
it and decode its segments.  This is for convenience, effectively to
allow a (stored-as-Unicode-in-a-database, or
retrieved-as-Unicode-from-a-request-parameter) Unicode path to be
passed to <code class="docutils literal notranslate"><span class="pre">find_model</span></code>, which eventually internally uses the
<code class="docutils literal notranslate"><span class="pre">traversal_path</span></code> function under the hood.  In version 1.2 and
prior, if the <code class="docutils literal notranslate"><span class="pre">path</span></code> was Unicode, that Unicode was split on
slashes and each resulting segment value was Unicode.  An
inappropriate call to the <code class="docutils literal notranslate"><span class="pre">decode()</span></code> method of a resulting Unicode
path segment could cause a <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> to occur even if
the Unicode representation of the path contained no 'high order'
characters (it effectively did a &quot;double decode&quot;).  By converting
the Unicode path argument to ASCII before we attempt to decode and
split, genuine errors will occur in a more obvious place while also
allowing us to handle (for convenience) the case that it's a Unicode
representation formed entirely from ASCII-compatible characters.</li>
</ul>
</div>
</div>
<div class="section" id="a14-2010-09-14">
<h2>1.3a14 (2010-09-14)<a class="headerlink" href="#a14-2010-09-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id222">
<h3>Bug Fixes<a class="headerlink" href="#id222" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>If an exception view was registered through the legacy
<code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> or <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> APIs, the context
sent to the view was incorrect (could be <code class="docutils literal notranslate"><span class="pre">None</span></code> inappropriately).</li>
</ul>
</div>
<div class="section" id="id223">
<h3>Features<a class="headerlink" href="#id223" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Compatibility with WebOb 1.0.</li>
</ul>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Now requires WebOb &gt;= 1.0.</li>
</ul>
</div>
<div class="section" id="id224">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id224" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Due to changes introduced WebOb 1.0, the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.make_request_ascii</span></code> event subscriber no longer
works, so it has been removed.  This subscriber was meant to be used
in a deployment so that code written before BFG 0.7.0 could run
unchanged.  At this point, such code will need to be rewritten to
expect Unicode from <code class="docutils literal notranslate"><span class="pre">request.GET</span></code>, <code class="docutils literal notranslate"><span class="pre">request.POST</span></code> and
<code class="docutils literal notranslate"><span class="pre">request.params</span></code> or it will need to be changed to use
<code class="docutils literal notranslate"><span class="pre">request.str_POST</span></code>, <code class="docutils literal notranslate"><span class="pre">request.str_GET</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">request.str_params</span></code> instead of the non-<code class="docutils literal notranslate"><span class="pre">str</span></code> versions of same,
as the non-<code class="docutils literal notranslate"><span class="pre">str</span></code> versions of the same APIs always now perform
decoding to Unicode.</li>
</ul>
</div>
<div class="section" id="errata">
<h3>Errata<a class="headerlink" href="#errata" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A prior changelog entry asserted that the <code class="docutils literal notranslate"><span class="pre">INewResponse</span></code> event was
not sent to listeners if the response was not &quot;valid&quot; (if a view or
renderer returned a response object that did not have a
status/headers/app_iter).  This is not true in this release, nor was
it true in 1.3a13.</li>
</ul>
</div>
</div>
<div class="section" id="a13-2010-09-14">
<h2>1.3a13 (2010-09-14)<a class="headerlink" href="#a13-2010-09-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id225">
<h3>Bug Fixes<a class="headerlink" href="#id225" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">traverse</span></code> route predicate could not successfully generate a
traversal path.</li>
</ul>
</div>
<div class="section" id="id226">
<h3>Features<a class="headerlink" href="#id226" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>In support of making it easier to configure applications which are
&quot;secure by default&quot;, a default permission feature was added.  If
supplied, the default permission is used as the permission string to
all view registrations which don't otherwise name a permission.
These APIs are in support of that:<ul>
<li>A new constructor argument was added to the Configurator:
<code class="docutils literal notranslate"><span class="pre">default_permission</span></code>.</li>
<li>A new method was added to the Configurator:
<code class="docutils literal notranslate"><span class="pre">set_default_permission</span></code>.</li>
<li>A new ZCML directive was added: <code class="docutils literal notranslate"><span class="pre">default_permission</span></code>.</li>
</ul>
</li>
<li>Add a new request API: <code class="docutils literal notranslate"><span class="pre">request.add_finished_callback</span></code>.  Finished
callbacks are called by the router unconditionally near the very end
of request processing.  See the &quot;Using Finished Callbacks&quot; section
of the &quot;Hooks&quot; narrative chapter of the documentation for more
information.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">request.matched_route</span></code> attribute is now added to the request
when a route has matched.  Its value is the &quot;route&quot; object that
matched (see the <code class="docutils literal notranslate"><span class="pre">IRoute</span></code> interface within
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code> API documentation for the API of a route
object).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">exception</span></code> attribute of the request is now set slightly
earlier and in a slightly different set of scenarios, for benefit of
&quot;finished callbacks&quot; and &quot;response callbacks&quot;.  In previous
versions, the <code class="docutils literal notranslate"><span class="pre">exception</span></code> attribute of the request was not set at
all if an exception view was not found.  In this version, the
<code class="docutils literal notranslate"><span class="pre">request.exception</span></code> attribute is set immediately when an exception
is caught by the router, even if an exception view could not be
found.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">add_route</span></code> method of a Configurator now accepts a
<code class="docutils literal notranslate"><span class="pre">pregenerator</span></code> argument.  The pregenerator for the resulting route
is called by <code class="docutils literal notranslate"><span class="pre">route_url</span></code> in order to adjust the set of arguments
passed to it by the user for special purposes, such as Pylons
'subdomain' support.  It will influence the URL returned by
<code class="docutils literal notranslate"><span class="pre">route_url</span></code>.  See the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRoutePregenerator</span></code>
interface for more information.</li>
</ul>
</div>
<div class="section" id="id227">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id227" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The router no longer sets the value <code class="docutils literal notranslate"><span class="pre">wsgiorg.routing_args</span></code> into
the environ when a route matches. The value used to be something
like <code class="docutils literal notranslate"><span class="pre">((),</span> <span class="pre">matchdict)</span></code>.  This functionality was only ever
obliquely referred to in change logs; it was never documented as an
API.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">exception</span></code> attribute of the request now defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
In prior versions, the <code class="docutils literal notranslate"><span class="pre">request.exception</span></code> attribute did not exist
if an exception was not raised by user code during request
processing; it only began existence once an exception view was
found.</li>
</ul>
</div>
<div class="section" id="id228">
<h3>Deprecations<a class="headerlink" href="#id228" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IWSGIApplicationCreatedEvent</span></code> event
interface was renamed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IApplicationCreated</span></code>.  Likewise, the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.WSGIApplicationCreatedEvent</span></code> class was renamed
to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.ApplicationCreated</span></code>.  The older aliases will
continue to work indefinitely.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IAfterTraversal</span></code> event interface was
renamed to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IContextFound</span></code>.  Likewise, the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.AfterTraversal</span></code> class was renamed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.ContextFound</span></code>.  The older aliases will continue
to work indefinitely.</li>
<li>References to the WSGI environment values <code class="docutils literal notranslate"><span class="pre">bfg.routes.matchdict</span></code>
and <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code> were removed from documentation.  These
will stick around internally for several more releases, but it is
<code class="docutils literal notranslate"><span class="pre">request.matchdict</span></code> and <code class="docutils literal notranslate"><span class="pre">request.matched_route</span></code> are now the
&quot;official&quot; way to obtain the matchdict and the route object which
resulted in the match.</li>
</ul>
</div>
<div class="section" id="id229">
<h3>Documentation<a class="headerlink" href="#id229" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added documentation for the <code class="docutils literal notranslate"><span class="pre">default_permission</span></code> ZCML directive.</li>
<li>Added documentation for the <code class="docutils literal notranslate"><span class="pre">default_permission</span></code> constructor value
and the <code class="docutils literal notranslate"><span class="pre">set_default_permission</span></code> method in the Configurator API
documentation.</li>
<li>Added a new section to the &quot;security&quot; chapter named &quot;Setting a
Default Permission&quot;.</li>
<li>Document <code class="docutils literal notranslate"><span class="pre">renderer_globals_factory</span></code> and <code class="docutils literal notranslate"><span class="pre">request_factory</span></code>
arguments to Configurator constructor.</li>
<li>Added two sections to the &quot;Hooks&quot; chapter of the documentation:
&quot;Using Response Callbacks&quot; and &quot;Using Finished Callbacks&quot;.</li>
<li>Added documentation of the <code class="docutils literal notranslate"><span class="pre">request.exception</span></code> attribute to the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request</span></code> API documentation.</li>
<li>Added glossary entries for &quot;response callback&quot; and &quot;finished
callback&quot;.</li>
<li>The &quot;Request Processing&quot; narrative chapter has been updated to note
finished and response callback steps.</li>
<li>New interface in interfaces API documentation: <code class="docutils literal notranslate"><span class="pre">IRoutePregenerator</span></code>.</li>
<li>Added a &quot;The Matched Route&quot; section to the URL Dispatch narrative
docs chapter, detailing the <code class="docutils literal notranslate"><span class="pre">matched_route</span></code> attribute.</li>
</ul>
</div>
</div>
<div class="section" id="a12-2010-09-08">
<h2>1.3a12 (2010-09-08)<a class="headerlink" href="#a12-2010-09-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id230">
<h3>Bug Fixes<a class="headerlink" href="#id230" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix a bug in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.static_url</span></code> URL generation: if two
resource specifications were used to create two separate static
views, but they shared a common prefix, it was possible that
<code class="docutils literal notranslate"><span class="pre">static_url</span></code> would generate an incorrect URL.</li>
<li>Fix another bug in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.static_url</span></code> URL generation: too
many slashes in generated URL.</li>
<li>Prevent a race condition which could result in a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>
when rendering a Chameleon template that has not already been
rendered once.  This would usually occur directly after a restart,
when more than one person or thread is trying to execute the same
view at the same time: <a class="reference external" href="https://bugs.launchpad.net/karl3/+bug/621364">https://bugs.launchpad.net/karl3/+bug/621364</a></li>
</ul>
</div>
<div class="section" id="id231">
<h3>Features<a class="headerlink" href="#id231" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The argument to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></code>
which was previously called <code class="docutils literal notranslate"><span class="pre">path</span></code> is now called <code class="docutils literal notranslate"><span class="pre">pattern</span></code> for
better explicability.  For backwards compatibility purposes, passing
a keyword argument named <code class="docutils literal notranslate"><span class="pre">path</span></code> to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> will still work
indefinitely.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">path</span></code> attribute to the ZCML <code class="docutils literal notranslate"><span class="pre">route</span></code> directive is now named
<code class="docutils literal notranslate"><span class="pre">pattern</span></code> for better explicability.  The older <code class="docutils literal notranslate"><span class="pre">path</span></code> attribute
will continue to work indefinitely.</li>
</ul>
</div>
<div class="section" id="id232">
<h3>Documentation<a class="headerlink" href="#id232" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All narrative, API, and tutorial docs which referred to a route
pattern as a <code class="docutils literal notranslate"><span class="pre">path</span></code> have now been updated to refer to them as a
<code class="docutils literal notranslate"><span class="pre">pattern</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code> API documentation page is now rendered
via <code class="docutils literal notranslate"><span class="pre">repoze.sphinx.autointerface</span></code>.</li>
<li>The URL Dispatch narrative chapter now refers to the <code class="docutils literal notranslate"><span class="pre">interfaces</span></code>
chapter to explain the API of an <code class="docutils literal notranslate"><span class="pre">IRoute</span></code> object.</li>
</ul>
</div>
<div class="section" id="id233">
<h3>Paster Templates<a class="headerlink" href="#id233" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The routesalchemy template has been updated to use <code class="docutils literal notranslate"><span class="pre">pattern</span></code> in
its route declarations rather than <code class="docutils literal notranslate"><span class="pre">path</span></code>.</li>
</ul>
</div>
<div class="section" id="id234">
<h3>Dependencies<a class="headerlink" href="#id234" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">tests_require</span></code> now includes <code class="docutils literal notranslate"><span class="pre">repoze.sphinx.autointerface</span></code> as a
dependency.</li>
</ul>
</div>
<div class="section" id="id235">
<h3>Internal<a class="headerlink" href="#id235" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add an API to the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> named <code class="docutils literal notranslate"><span class="pre">get_routes_mapper</span></code>.
This returns an object implementing the <code class="docutils literal notranslate"><span class="pre">IRoutesMapper</span></code> interface.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesMapper</span></code> object now has a
<code class="docutils literal notranslate"><span class="pre">get_route</span></code> method which returns a single Route object or
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
<li>A new interface <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRoute</span></code> was added.  The
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.Route</span></code> object implements this interface.</li>
<li>The canonical attribute for accessing the routing pattern from a
route object is now <code class="docutils literal notranslate"><span class="pre">pattern</span></code> rather than <code class="docutils literal notranslate"><span class="pre">path</span></code>.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">hash()</span></code> rather than <code class="docutils literal notranslate"><span class="pre">id()</span></code> when computing the &quot;phash&quot; of a
custom route/view predicate in order to allow the custom predicate
some control over which predicates are &quot;equal&quot;.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">response.headerlist.append</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">response.headers.add</span></code> in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.add_global_response_headers</span></code> in case the
response is not a WebOb response.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.Route</span></code> constructor (not an API) now
accepts a different ordering of arguments.  Previously it was
<code class="docutils literal notranslate"><span class="pre">(pattern,</span> <span class="pre">name,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></code>.  It is now
<code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">pattern,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></code>.  This is in
support of consistency with <code class="docutils literal notranslate"><span class="pre">configurator.add_route</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesMapper.connect</span></code> method (not an
API) now accepts a different ordering of arguments.  Previously it
was <code class="docutils literal notranslate"><span class="pre">(pattern,</span> <span class="pre">name,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></code>.  It is now
<code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">pattern,</span> <span class="pre">factory=None,</span> <span class="pre">predicates=())</span></code>.  This is in
support of consistency with <code class="docutils literal notranslate"><span class="pre">configurator.add_route</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a11-2010-09-05">
<h2>1.3a11 (2010-09-05)<a class="headerlink" href="#a11-2010-09-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id236">
<h3>Bug Fixes<a class="headerlink" href="#id236" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Process the response callbacks and the NewResponse event earlier, to
enable mutations to the response to take effect.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2010-09-05">
<h2>1.3a10 (2010-09-05)<a class="headerlink" href="#a10-2010-09-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id237">
<h3>Features<a class="headerlink" href="#id237" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request.add_response_callback</span></code> API has
been added.  This method is documented in the new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request</span></code> API chapter.  It can be used to influence
response values before a concrete response object has been created.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INewResponse</span></code> interface now includes a
<code class="docutils literal notranslate"><span class="pre">request</span></code> attribute; as a result, a handler for INewResponse now
has access to the request which caused the response.</p>
</li>
<li><p class="first">Each of the follow methods of the Configurator now allow the
below-named arguments to be passed as &quot;dotted name strings&quot;
(e.g. &quot;foo.bar.baz&quot;) rather than as actual implementation objects
that must be imported:</p>
<dl class="docutils">
<dt>setup_registry</dt>
<dd><p class="first last">root_factory, authentication_policy, authorization_policy,
debug_logger, locale_negotiator, request_factory,
renderer_globals_factory</p>
</dd>
<dt>add_subscriber</dt>
<dd><p class="first last">subscriber, iface</p>
</dd>
<dt>derive_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>add_view</dt>
<dd><p class="first last">view, <code class="docutils literal notranslate"><span class="pre">for_</span></code>, context, request_type, containment</p>
</dd>
<dt>add_route()</dt>
<dd><p class="first last">view, view_for, factory, <code class="docutils literal notranslate"><span class="pre">for_</span></code>, view_context</p>
</dd>
<dt>scan</dt>
<dd><p class="first last">package</p>
</dd>
<dt>add_renderer</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_forbidden_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>set_notfound_view</dt>
<dd><p class="first last">view</p>
</dd>
<dt>set_request_factory</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_renderer_globals_factory()</dt>
<dd><p class="first last">factory</p>
</dd>
<dt>set_locale_negotiator</dt>
<dd><p class="first last">negotiator</p>
</dd>
<dt>testing_add_subscriber</dt>
<dd><p class="first last">event_iface</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id238">
<h3>Bug Fixes<a class="headerlink" href="#id238" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The route pattern registered internally for a local &quot;static view&quot;
(either via the <code class="docutils literal notranslate"><span class="pre">static</span></code> ZCML directive or via the
<code class="docutils literal notranslate"><span class="pre">add_static_view</span></code> method of the configurator) was incorrect.  It
was regsistered for e.g. <code class="docutils literal notranslate"><span class="pre">static*traverse</span></code>, while it should have
been registered for <code class="docutils literal notranslate"><span class="pre">static/*traverse</span></code>.  Symptom: two static views
could not reliably be added to a system when they both shared the
same path prefix (e.g. <code class="docutils literal notranslate"><span class="pre">/static</span></code> and <code class="docutils literal notranslate"><span class="pre">/static2</span></code>).</li>
</ul>
</div>
<div class="section" id="id239">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id239" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The INewResponse event is now not sent to listeners if the response
returned by view code (or a renderer) is not a &quot;real&quot; response
(e.g. if it does not have <code class="docutils literal notranslate"><span class="pre">.status</span></code>, <code class="docutils literal notranslate"><span class="pre">.headerlist</span></code> and
<code class="docutils literal notranslate"><span class="pre">.app_iter</span></code> attribtues).</li>
</ul>
</div>
<div class="section" id="id240">
<h3>Documentation<a class="headerlink" href="#id240" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add an API chapter for the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request</span></code> module, which
includes documentation for the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request</span></code> class
(the &quot;request object&quot;).</li>
<li>Modify the &quot;Request and Response&quot; narrative chapter to reference the
new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request</span></code> API chapter.  Some content was moved from
this chapter into the API documentation itself.</li>
<li>Various changes to denote that Python dotted names are now allowed
as input to Configurator methods.</li>
</ul>
</div>
<div class="section" id="id241">
<h3>Internal<a class="headerlink" href="#id241" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The (internal) feature which made it possible to attach a
<code class="docutils literal notranslate"><span class="pre">global_response_headers</span></code> attribute to the request (which was
assumed to contain a sequence of header key/value pairs which would
later be added to the response by the router), has been removed.
The functionality of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request.add_response_callback</span></code> takes its
place.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.NewResponse</span></code> class's construct has changed:
it now must be created with <code class="docutils literal notranslate"><span class="pre">(request,</span> <span class="pre">response)</span></code> rather than
simply <code class="docutils literal notranslate"><span class="pre">(response)</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2010-08-22">
<h2>1.3a9 (2010-08-22)<a class="headerlink" href="#a9-2010-08-22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id242">
<h3>Features<a class="headerlink" href="#id242" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Configurator now accepts a dotted name <em>string</em> to a package as
a <code class="docutils literal notranslate"><span class="pre">package</span></code> constructor argument. The <code class="docutils literal notranslate"><span class="pre">package</span></code> argument was
previously required to be a package <em>object</em> (not a dotted name
string).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.with_package</span></code> method
was added.  This method returns a new Configurator using the same
application registry as the configurator object it is called
upon. The new configurator is created afresh with its <code class="docutils literal notranslate"><span class="pre">package</span></code>
constructor argument set to the value passed to <code class="docutils literal notranslate"><span class="pre">with_package</span></code>.
This feature will make it easier for future BFG versions to allow
dotted names as arguments in places where currently only object
references are allowed (the work to allow dotted names isntead of
object references everywhere has not yet been done, however).</li>
<li>The new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.maybe_dotted</span></code>
method resolves a Python dotted name string supplied as its
<code class="docutils literal notranslate"><span class="pre">dotted</span></code> argument to a global Python object.  If the value cannot
be resolved, a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.ConfigurationError</span></code> is
raised.  If the value supplied as <code class="docutils literal notranslate"><span class="pre">dotted</span></code> is not a string, the
value is returned unconditionally without any resolution attempted.</li>
<li>The new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.absolute_resource_spec</span></code>
method resolves a potentially relative &quot;resource specification&quot;
string into an absolute version.  If the value supplied as
<code class="docutils literal notranslate"><span class="pre">relative_spec</span></code> is not a string, the value is returned
unconditionally without any resolution attempted.</li>
</ul>
</div>
<div class="section" id="id243">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id243" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The functions in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers</span></code> named <code class="docutils literal notranslate"><span class="pre">render</span></code> and
<code class="docutils literal notranslate"><span class="pre">render_to_response</span></code> introduced in 1.3a6 previously took a set of
<code class="docutils literal notranslate"><span class="pre">**values</span></code> arguments for the values to be passed to the renderer.
This was wrong, as renderers don't need to accept only dictionaries
(they can accept any type of object).  Now, the value sent to the
renderer must be supplied as a positional argument named <code class="docutils literal notranslate"><span class="pre">value</span></code>.
The <code class="docutils literal notranslate"><span class="pre">request</span></code> argument is still a keyword argument, however.</li>
<li>The functions in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers</span></code> named <code class="docutils literal notranslate"><span class="pre">render</span></code> and
<code class="docutils literal notranslate"><span class="pre">render_to_response</span></code> now accept an additonal keyword argument
named <code class="docutils literal notranslate"><span class="pre">package</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code> API in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers</span></code> now accepts a
<code class="docutils literal notranslate"><span class="pre">package</span></code> argument.</li>
</ul>
</div>
<div class="section" id="id244">
<h3>Documentation<a class="headerlink" href="#id244" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The ZCML <code class="docutils literal notranslate"><span class="pre">include</span></code> directive docs were incorrect: they specified
<code class="docutils literal notranslate"><span class="pre">filename</span></code> rather than (the correct) <code class="docutils literal notranslate"><span class="pre">file</span></code> as an allowable
attribute.</li>
</ul>
</div>
<div class="section" id="id245">
<h3>Internal<a class="headerlink" href="#id245" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.resource.resolve_resource_spec</span></code> function can now
accept a package object as its <code class="docutils literal notranslate"><span class="pre">pname</span></code> argument instead of just a
package name.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">_renderer_factory_from_name</span></code> and <code class="docutils literal notranslate"><span class="pre">_renderer_from_name</span></code>
methods of the Configurator were removed.  These were never APIs.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">_render</span></code>, <code class="docutils literal notranslate"><span class="pre">_render_to_response</span></code> and <code class="docutils literal notranslate"><span class="pre">_make_response</span></code>
functions with <code class="docutils literal notranslate"><span class="pre">repoze.bfg.render</span></code> (added in 1.3a6) have been
removed.</li>
<li>A new helper class <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.RendererHelper</span></code> was
added.</li>
<li>The _map_view function of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration</span></code> now takes
only a renderer_name argument instead of both a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> and
<code class="docutils literal notranslate"><span class="pre">renderer``_name</span> <span class="pre">argument.</span>&#160; <span class="pre">It</span> <span class="pre">also</span> <span class="pre">takes</span> <span class="pre">a</span> <span class="pre">``package</span></code> argument
now.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">imp.get_suffixes</span></code> indirection in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.path.package_name</span></code> instead of hardcoded <code class="docutils literal notranslate"><span class="pre">.py</span></code>
<code class="docutils literal notranslate"><span class="pre">.pyc</span></code> and <code class="docutils literal notranslate"><span class="pre">.pyo</span></code> to use for comparison when attemtping to
decide if a directory is a package.</li>
<li>Make tests runnable again under Jython (although they do not all
pass currently).</li>
<li>The reify decorator now maintains the docstring of the function it
wraps.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2010-08-08">
<h2>1.3a8 (2010-08-08)<a class="headerlink" href="#a8-2010-08-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id246">
<h3>Features<a class="headerlink" href="#id246" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">New public interface: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.IExceptionResponse</span></code>.
This interface is provided by all internal exception classes (such
as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code>), instances of which are both
exception objects and can behave as WSGI response objects.  This
interface is made public so that exception classes which are also
valid WSGI response factories can be configured to implement them or
exception instances which are also or response instances can be
configured to provide them.</p>
</li>
<li><p class="first">New API class: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.AppendSlashNotFoundViewFactory</span></code>.</p>
<p>There can only be one Not Found view in any <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>
application.  Even if you use
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></code> as the Not Found
view, <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> still must generate a <code class="docutils literal notranslate"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></code>
response when it cannot redirect to a slash-appended URL; this not
found response will be visible to site users.</p>
<p>If you don't care what this 404 response looks like, and you only
need redirections to slash-appended route URLs, you may use the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></code> object as the Not
Found view.  However, if you wish to use a <em>custom</em> notfound view
callable when a URL cannot be redirected to a slash-appended URL,
you may wish to use an instance of the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.AppendSlashNotFoundViewFactory</span></code> class as the Not
Found view, supplying the notfound view callable as the first
argument to its constructor.  For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="k">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="k">import</span> <span class="n">AppendSlashNotFoundViewFactory</span>

<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">(</span><span class="s1">&#39;It aint there, stop trying!&#39;</span><span class="p">)</span>

<span class="n">custom_append_slash</span> <span class="o">=</span> <span class="n">AppendSlashNotFoundViewFactory</span><span class="p">(</span><span class="n">notfound_view</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">custom_append_slash</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">notfound_view</span></code> supplied must adhere to the two-argument view
callable calling convention of <code class="docutils literal notranslate"><span class="pre">(context,</span> <span class="pre">request)</span></code> (<code class="docutils literal notranslate"><span class="pre">context</span></code>
will be the exception object).</p>
</li>
</ul>
</div>
<div class="section" id="id247">
<h3>Documentation<a class="headerlink" href="#id247" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Expanded the &quot;Cleaning Up After a Request&quot; section of the URL
Dispatch narrative chapter.</li>
<li>Expanded the &quot;Redirecting to Slash-Appended Routes&quot; section of the
URL Dispatch narrative chapter.</li>
</ul>
</div>
<div class="section" id="id248">
<h3>Internal<a class="headerlink" href="#id248" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Previously, two default view functions were registered at
Configurator setup (one for <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> named
<code class="docutils literal notranslate"><span class="pre">default_notfound_view</span></code> and one for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code> named
<code class="docutils literal notranslate"><span class="pre">default_forbidden_view</span></code>) to render internal exception responses.
Those default view functions have been removed, replaced with a
generic default view function which is registered at Configurator
setup for the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IExceptionResponse</span></code> interface
that simply returns the exception instance; the <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> and
<code class="docutils literal notranslate"><span class="pre">Forbidden</span></code> classes are now still exception factories but they are
also response factories which generate instances that implement the
new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IExceptionResponse</span></code> interface.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2010-08-01">
<h2>1.3a7 (2010-08-01)<a class="headerlink" href="#a7-2010-08-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id249">
<h3>Features<a class="headerlink" href="#id249" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></code> API now
returns the route object that was added.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.subscriber</span></code> decorator was added.  This
decorator decorates module-scope functions, which are then treated
as event listeners after a scan() is performed.  See the Events
narrative documentation chapter and the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events</span></code> module
documentation for more information.</li>
</ul>
</div>
<div class="section" id="id250">
<h3>Bug Fixes<a class="headerlink" href="#id250" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When adding a view for a route which did not yet exist (&quot;did not yet
exist&quot; meaning, temporally, a view was added with a route name for a
route which had not yet been added via add_route), the value of the
<code class="docutils literal notranslate"><span class="pre">custom_predicate</span></code> argument to <code class="docutils literal notranslate"><span class="pre">add_view</span></code> was lost.  Symptom:
wrong view matches when using URL dispatch and custom view
predicates together.</li>
<li>Pattern matches for a <code class="docutils literal notranslate"><span class="pre">:segment</span></code> marker in a URL dispatch route
pattern now always match at least one character.  See &quot;Backwards
Incompatibilities&quot; below in this changelog.</li>
</ul>
</div>
<div class="section" id="id251">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id251" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A bug existed in the regular expression to do URL matching.  As an
example, the URL matching machinery would cause the pattern
<code class="docutils literal notranslate"><span class="pre">/{foo}</span></code> to match the root URL <code class="docutils literal notranslate"><span class="pre">/</span></code> resulting in a match
dictionary of <code class="docutils literal notranslate"><span class="pre">{'foo':u''}</span></code> or the pattern <code class="docutils literal notranslate"><span class="pre">/{fud}/edit</span> <span class="pre">might</span>
<span class="pre">match</span> <span class="pre">the</span> <span class="pre">URL</span> <span class="pre">``//edit</span></code> resulting in a match dictionary of
<code class="docutils literal notranslate"><span class="pre">{'fud':u''}</span></code>.  It was always the intent that <code class="docutils literal notranslate"><span class="pre">:segment</span></code> markers
in the pattern would need to match <em>at least one</em> character, and
never match the empty string.  This, however, means that in certain
circumstances, a routing match which your application inadvertently
depended upon may no longer happen.</li>
</ul>
</div>
<div class="section" id="id252">
<h3>Documentation<a class="headerlink" href="#id252" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added description of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.subscriber</span></code> decorator
to the Events narrative chapter.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.subscriber</span></code> API documentation to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events</span></code> API docs.</li>
<li>Added a section named &quot;Zope 3 Enforces 'TTW' Authorization Checks By
Default; BFG Does Not&quot; to the &quot;Design Defense&quot; chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2010-07-25">
<h2>1.3a6 (2010-07-25)<a class="headerlink" href="#a6-2010-07-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id253">
<h3>Features<a class="headerlink" href="#id253" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">New argument to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></code>
and the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive: <code class="docutils literal notranslate"><span class="pre">traverse</span></code>.  If you would like
to cause the <code class="docutils literal notranslate"><span class="pre">context</span></code> to be something other than the <code class="docutils literal notranslate"><span class="pre">root</span></code>
object when this route matches, you can spell a traversal pattern as
the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument.  This traversal pattern will be used as
the traversal path: traversal will begin at the root object implied
by this route (either the global root, or the object returned by the
<code class="docutils literal notranslate"><span class="pre">factory</span></code> associated with this route).</p>
<p>The syntax of the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument is the same as it is for
<code class="docutils literal notranslate"><span class="pre">path</span></code>. For example, if the <code class="docutils literal notranslate"><span class="pre">path</span></code> provided is
<code class="docutils literal notranslate"><span class="pre">articles/:article/edit</span></code>, and the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument provided
is <code class="docutils literal notranslate"><span class="pre">/:article</span></code>, when a request comes in that causes the route to
match in such a way that the <code class="docutils literal notranslate"><span class="pre">article</span></code> match value is '1' (when
the request URI is <code class="docutils literal notranslate"><span class="pre">/articles/1/edit</span></code>), the traversal path will be
generated as <code class="docutils literal notranslate"><span class="pre">/1</span></code>.  This means that the root object's
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> will be called with the name <code class="docutils literal notranslate"><span class="pre">1</span></code> during the
traversal phase.  If the <code class="docutils literal notranslate"><span class="pre">1</span></code> object exists, it will become the
<code class="docutils literal notranslate"><span class="pre">context</span></code> of the request.  The Traversal narrative has more
information about traversal.</p>
<p>If the traversal path contains segment marker names which are not
present in the path argument, a runtime error will occur.  The
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> pattern should not contain segment markers that do not
exist in the <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<p>A similar combining of routing and traversal is available when a
route is matched which contains a <code class="docutils literal notranslate"><span class="pre">*traverse</span></code> remainder marker in
its path.  The <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument allows you to associate route
patterns with an arbitrary traversal path without using a
<code class="docutils literal notranslate"><span class="pre">*traverse</span></code> remainder marker; instead you can use other match
information.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> argument is ignored when attached to a
route that has a <code class="docutils literal notranslate"><span class="pre">*traverse</span></code> remainder marker in its path.</p>
</li>
<li><p class="first">A new method of the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> exists:
<code class="docutils literal notranslate"><span class="pre">set_request_factory</span></code>.  If used, this method will set the factory
used by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> router to create all request objects.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> constructor takes an additional argument:
<code class="docutils literal notranslate"><span class="pre">request_factory</span></code>.  If used, this argument will set the factory
used by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> router to create all request objects.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> constructor takes an additional argument:
<code class="docutils literal notranslate"><span class="pre">request_factory</span></code>.  If used, this argument will set the factory
used by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> router to create all request objects.</p>
</li>
<li><p class="first">A new method of the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> exists:
<code class="docutils literal notranslate"><span class="pre">set_renderer_globals_factory</span></code>.  If used, this method will set the
factory used by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> router to create renderer
globals.</p>
</li>
<li><p class="first">A new method of the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> exists: <code class="docutils literal notranslate"><span class="pre">get_settings</span></code>.  If
used, this method will return the current settings object (performs
the same job as the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_settings</span></code> API).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> constructor takes an additional argument:
<code class="docutils literal notranslate"><span class="pre">renderer_globals_factory</span></code>.  If used, this argument will set the
factory used by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> router to create renderer
globals.</p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.render</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.render_to_response</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.get_renderer</span></code> functions.  These are
imperative APIs which will use the same rendering machinery used by
view configurations with a <code class="docutils literal notranslate"><span class="pre">renderer=</span></code> attribute/argument to
produce a rendering or renderer.  Because these APIs provide a
central API for all rendering, they now form the preferred way to
perform imperative template rendering.  Using functions named
<code class="docutils literal notranslate"><span class="pre">render_*</span></code> from modules such as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_text</span></code> is now discouraged (although not
deprecated).  The code the backing older templating-system-specific
APIs now calls into the newer <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderer</span></code> code.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.testing_add_template</span></code>
has been renamed to <code class="docutils literal notranslate"><span class="pre">testing_add_renderer</span></code>.  A backwards
compatibility alias is present using the old name.</p>
</li>
</ul>
</div>
<div class="section" id="id254">
<h3>Documentation<a class="headerlink" href="#id254" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">Hybrid</span></code> narrative chapter now contains a description of the
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> route argument.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Hooks</span></code> narrative chapter now contains sections about
changing the request factory and adding a renderer globals factory.</li>
<li>The API documentation includes a new module:
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Templates</span></code> chapter was updated; all narrative that used
templating-specific APIs within examples to perform rendering (such
as the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt.render_template_to_response</span></code>
method) was changed to use <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.render_*</span></code>
functions.</li>
</ul>
</div>
<div class="section" id="id255">
<h3>Bug Fixes<a class="headerlink" href="#id255" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">header</span></code> predicate (when used as either a view predicate or a
route predicate) had a problem when specified with a name/regex
pair.  When the header did not exist in the headers dictionary, the
regex match could be fed <code class="docutils literal notranslate"><span class="pre">None</span></code>, causing it to throw a
<code class="docutils literal notranslate"><span class="pre">TypeError:</span> <span class="pre">expected</span> <span class="pre">string</span> <span class="pre">or</span> <span class="pre">buffer</span></code> exception.  Now, the
predicate returns False as intended.</li>
</ul>
</div>
<div class="section" id="id256">
<h3>Deprecations<a class="headerlink" href="#id256" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.rendered_response</span></code> function was never an
official API, but may have been imported by extensions in the wild.
It is officially deprecated in this release.  Use
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers.render_to_response</span></code> instead.</p>
</li>
<li><p class="first">The following APIs are <em>documentation</em> deprecated (meaning they are
officially deprecated in documentation but do not raise a
deprecation error upon their usage, and may continue to work for an
indefinite period of time):</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> module: <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code>,
<code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code>.  The suggested alternatives are
documented within the docstrings of those methods (which are still
present in the documentation).</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_text</span></code> module: <code class="docutils literal notranslate"><span class="pre">get_renderer</span></code>,
<code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code>.  The suggested alternatives are
documented within the docstrings of those methods (which are still
present in the documentation).</p>
<p>In general, to perform template-related functions, one should now
use the various methods in the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderers</span></code> module.</p>
</li>
</ul>
</div>
<div class="section" id="id257">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id257" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A new internal exception class (<em>not</em> an API) named
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></code> now exists.  This
exception is currently raised when no constituent view of a
multiview can be called (due to no predicate match).  Previously, in
this situation, a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> was raised.  We
provide backwards compatibility for code that expected a
<code class="docutils literal notranslate"><span class="pre">NotFound</span></code> to be raised when no predicates match by causing
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></code> to inherit from
<code class="docutils literal notranslate"><span class="pre">NotFound</span></code>.  This will cause any exception view registered for
<code class="docutils literal notranslate"><span class="pre">NotFound</span></code> to be called when a predicate mismatch occurs, as was
the previous behavior.</p>
<p>There is however, one perverse case that will expose a backwards
incompatibility.  If 1) you had a view that was registered as a
member of a multiview 2) this view explicitly raised a <code class="docutils literal notranslate"><span class="pre">NotFound</span></code>
exception <em>in order to</em> proceed to the next predicate check in the
multiview, that code will now behave differently: rather than
skipping to the next view match, a NotFound will be raised to the
top-level exception handling machinery instead.  For code to be
depending upon the behavior of a view raising <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> to
proceed to the next predicate match, would be tragic, but not
impossible, given that <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> is a public interface.
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.PredicateMismatch</span></code> is not a public API and
cannot be depended upon by application code, so you should not
change your view code to raise <code class="docutils literal notranslate"><span class="pre">PredicateMismatch</span></code>.  Instead, move
the logic which raised the <code class="docutils literal notranslate"><span class="pre">NotFound</span></code> exception in the view out
into a custom view predicate.</p>
</li>
<li><p class="first">If, when you run your application's unit test suite under BFG 1.3, a
<code class="docutils literal notranslate"><span class="pre">KeyError</span></code> naming a template or a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> indicating that a
'renderer factory' is not registered may is raised
(e.g. <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">No</span> <span class="pre">factory</span> <span class="pre">for</span> <span class="pre">renderer</span> <span class="pre">named</span> <span class="pre">'.pt'</span> <span class="pre">when</span> <span class="pre">looking</span>
<span class="pre">up</span> <span class="pre">karl.views:templates/snippets.pt</span></code>), you may need to perform some
extra setup in your test code.</p>
<p>The best solution is to use the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.testing_add_renderer</span></code> (or,
alternately the deprecated
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerTemplateRenderer</span></code> or
<code class="docutils literal notranslate"><span class="pre">registerDummyRenderer</span></code>) API within the code comprising each
individual unit test suite to register a &quot;dummy&quot; renderer for each
of the templates and renderers used by code under test.  For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">testing_add_renderer</span><span class="p">(</span><span class="s1">&#39;karl.views:templates/snippets.pt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will register a basic dummy renderer for this particular
missing template.  The <code class="docutils literal notranslate"><span class="pre">testing_add_renderer</span></code> API actually
<em>returns</em> the renderer, but if you don't care about how the render
is used, you don't care about having a reference to it either.</p>
<p>A more rough way to solve the issue exists.  It causes the &quot;real&quot;
template implementations to be used while the system is under test,
which is suboptimal, because tests will run slower, and unit tests
won't actually <em>be</em> unit tests, but it is easier.  Always ensure you
call the <code class="docutils literal notranslate"><span class="pre">setup_registry()</span></code> method of the Configurator .  Eg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reg</span> <span class="o">=</span> <span class="n">MyRegistry</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">registry</span><span class="o">=</span><span class="n">reg</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">setup_registry</span><span class="p">()</span>
</pre></div>
</div>
<p>Calling <code class="docutils literal notranslate"><span class="pre">setup_registry</span></code> only has an effect if you're <em>passing in</em>
a <code class="docutils literal notranslate"><span class="pre">registry</span></code> argument to the Configurator constructor.
<code class="docutils literal notranslate"><span class="pre">setup_registry</span></code> is called by the course of normal operations
anyway if you do not pass in a <code class="docutils literal notranslate"><span class="pre">registry</span></code>.</p>
<p>If your test suite isn't using a Configurator yet, and is still
using the older <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> APIs name <code class="docutils literal notranslate"><span class="pre">setUp</span></code> or
<code class="docutils literal notranslate"><span class="pre">cleanUp</span></code>, these will register the renderers on your behalf.</p>
<p>A variant on the symptom for this theme exists: you may already be
dutifully registering a dummy template or renderer for a template
used by the code you're testing using <code class="docutils literal notranslate"><span class="pre">testing_register_renderer</span></code>
or <code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code>, but (perhaps unbeknownst to you)
the code under test expects to be able to use a &quot;real&quot; template
renderer implementation to retrieve or render <em>another</em> template
that you forgot was being rendered as a side effect of calling the
code you're testing.  This happened to work because it found the
<em>real</em> template while the system was under test previously, and now
it cannot.  The solution is the same.</p>
<p>It may also help reduce confusion to use a <em>resource specification</em>
to specify the template path in the test suite and code rather than
a relative path in either.  A resource specification is unambiguous,
while a relative path needs to be relative to &quot;here&quot;, where &quot;here&quot;
isn't always well-defined (&quot;here&quot; in a test suite may or may not be
the same as &quot;here&quot; in the code under test).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a5-2010-07-14">
<h2>1.3a5 (2010-07-14)<a class="headerlink" href="#a5-2010-07-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id258">
<h3>Features<a class="headerlink" href="#id258" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>New internal exception: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></code>.
This URL is a subclass of the built-in Python exception named
<code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code>.</li>
<li>When decoding a URL segment to Unicode fails, the exception raised
is now <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code>.  This makes it possible to register an
exception view invoked specifically when <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> cannot
decode a URL.</li>
</ul>
</div>
<div class="section" id="id259">
<h3>Bug Fixes<a class="headerlink" href="#id259" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix regression in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_static_view</span></code>.  Before
1.3a4, view names that contained a slash were supported as route
prefixes. 1.3a4 broke this by trying to treat them as full URLs.</li>
</ul>
</div>
<div class="section" id="id260">
<h3>Documentation<a class="headerlink" href="#id260" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></code> exception was added to
the exceptions chapter of the API documentation.</li>
</ul>
</div>
<div class="section" id="id261">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id261" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>in previous releases, when a URL could not be decoded from UTF-8
during traversal, a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> was raised.  Now the error which
is raised is a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.URLDecodeError</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2010-07-03">
<h2>1.3a4 (2010-07-03)<a class="headerlink" href="#a4-2010-07-03" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id262">
<h3>Features<a class="headerlink" href="#id262" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Undocumented hook: make <code class="docutils literal notranslate"><span class="pre">get_app</span></code> and <code class="docutils literal notranslate"><span class="pre">get_root</span></code> of the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.paster.BFGShellCommand</span></code> hookable in cases where
endware may interfere with the default versions.</p>
</li>
<li><p class="first">In earlier versions, a custom route predicate associated with a url
dispatch route (each of the predicate functions fed to the
<code class="docutils literal notranslate"><span class="pre">custom_predicates</span></code> argument of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_route</span></code>) has always
required a 2-positional argument signature, e.g. <code class="docutils literal notranslate"><span class="pre">(context,</span>
<span class="pre">request)</span></code>.  Before this release, the <code class="docutils literal notranslate"><span class="pre">context</span></code> argument was
always <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>As of this release, the first argument passed to a predicate is now
a dictionary conventionally named <code class="docutils literal notranslate"><span class="pre">info</span></code> consisting of <code class="docutils literal notranslate"><span class="pre">route</span></code>,
and <code class="docutils literal notranslate"><span class="pre">match</span></code>.  <code class="docutils literal notranslate"><span class="pre">match</span></code> is a dictionary: it represents the
arguments matched in the URL by the route.  <code class="docutils literal notranslate"><span class="pre">route</span></code> is an object
representing the route which was matched.</p>
<p>This is useful when predicates need access to the route match.  For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">any_of</span><span class="p">(</span><span class="n">segment_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">predicate</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;match&#39;</span><span class="p">][</span><span class="n">segment_name</span><span class="p">]</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">predicate</span>

<span class="n">num_one_two_or_three</span> <span class="o">=</span> <span class="n">any_of</span><span class="p">(</span><span class="s1">&#39;num, &#39;</span><span class="n">one</span><span class="s1">&#39;, &#39;</span><span class="n">two</span><span class="s1">&#39;, &#39;</span><span class="n">three</span><span class="s1">&#39;)</span>

<span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="s1">&#39;/:num&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">num_one_two_or_three</span><span class="p">,))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">route</span></code> object is an object that has two useful attributes:
<code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">path</span></code>.  The <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute is the route name.
The <code class="docutils literal notranslate"><span class="pre">path</span></code> attribute is the route pattern.  An example of using
the route in a set of route predicates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twenty_ten</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;route&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;ymd&#39;</span><span class="p">,</span> <span class="s1">&#39;ym&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;match&#39;</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2010&#39;</span>

<span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;/:year&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
<span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;ym&#39;</span><span class="p">,</span> <span class="s1">&#39;/:year/:month&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
<span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;ymd&#39;</span><span class="p">,</span> <span class="s1">&#39;/:year/:month:/day&#39;</span><span class="p">,</span> <span class="n">custom_predicates</span><span class="o">=</span><span class="p">(</span><span class="n">twenty_ten</span><span class="p">,))</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> API has changed.  If a keyword
<code class="docutils literal notranslate"><span class="pre">_app_url</span></code> is present in the arguments passed to <code class="docutils literal notranslate"><span class="pre">route_url</span></code>,
this value will be used as the protocol/hostname/port/leading path
prefix of the generated URL.  For example, using an <code class="docutils literal notranslate"><span class="pre">_app_url</span></code> of
<code class="docutils literal notranslate"><span class="pre">http://example.com:8080/foo</span></code> would cause the URL
<code class="docutils literal notranslate"><span class="pre">http://example.com:8080/foo/fleeb/flub</span></code> to be returned from this
function if the expansion of the route pattern associated with the
<code class="docutils literal notranslate"><span class="pre">route_name</span></code> expanded to <code class="docutils literal notranslate"><span class="pre">/fleeb/flub</span></code>.</p>
</li>
<li><p class="first">It is now possible to use a URL as the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument fed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.add_static_view</span></code>.  When the
name argument is a URL, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.static_url</span></code> API will
generate join this URL (as a prefix) to a path including the static
file name.  This makes it more possible to put static media on a
separate webserver for production, while keeping static media
package-internal and served by the development webserver during
development.</p>
</li>
</ul>
</div>
<div class="section" id="id263">
<h3>Documentation<a class="headerlink" href="#id263" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The authorization chapter of the ZODB Wiki Tutorial
(docs/tutorials/bfgwiki) was changed to demonstrate authorization
via a group rather than via a direct username (thanks to Alex
Marandon).</li>
<li>The authorization chapter of the SQLAlchemy Wiki Tutorial
(docs/tutorials/bfgwiki2) was changed to demonstrate authorization
via a group rather than via a direct username.</li>
<li>Redirect requests for tutorial sources to
<a class="reference external" href="http://docs.repoze.org/bfgwiki-1.3">http://docs.repoze.org/bfgwiki-1.3</a> and
<a class="reference external" href="http://docs.repoze.org/bfgwiki2-1.3/">http://docs.repoze.org/bfgwiki2-1.3/</a> respectively.</li>
<li>A section named <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">Route</span> <span class="pre">Predicates</span></code> was added to the URL
Dispatch narrative chapter.</li>
<li>The Static Resources chapter has been updated to mention using
<code class="docutils literal notranslate"><span class="pre">static_url</span></code> to generate URLs to external webservers.</li>
</ul>
</div>
<div class="section" id="id264">
<h3>Internal<a class="headerlink" href="#id264" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Removed <code class="docutils literal notranslate"><span class="pre">repoze.bfg.static.StaticURLFactory</span></code> in favor of a new
abstraction revolving around the (still-internal)
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.static.StaticURLInfo</span></code> helper class.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2010-05-01">
<h2>1.3a3 (2010-05-01)<a class="headerlink" href="#a3-2010-05-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id265">
<h3>Paster Templates<a class="headerlink" href="#id265" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">bfg_alchemy</span></code> and <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> templates no longer
register a <code class="docutils literal notranslate"><span class="pre">handle_teardown</span></code> event listener which calls
<code class="docutils literal notranslate"><span class="pre">DBSession.remove</span></code>.  This was found by Chris Withers to be
unnecessary.</li>
</ul>
</div>
<div class="section" id="id266">
<h3>Documentation<a class="headerlink" href="#id266" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The &quot;bfgwiki2&quot; (URL dispatch wiki) tutorial code and documentation
was changed to remove the <code class="docutils literal notranslate"><span class="pre">handle_teardown</span></code> event listener which
calls <code class="docutils literal notranslate"><span class="pre">DBSession.remove</span></code>.</li>
<li>Any mention of the <code class="docutils literal notranslate"><span class="pre">handle_teardown</span></code> event listener as used by the
paster templates was removed from the URL Dispatch narrative chapter.</li>
<li>A section entitled Detecting Available Languages was added to the
i18n narrative docs chapter.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2010-04-28">
<h2>1.3a2 (2010-04-28)<a class="headerlink" href="#a2-2010-04-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id267">
<h3>Features<a class="headerlink" href="#id267" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A locale negotiator no longer needs to be registered explicitly. The
default locale negotiator at
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.i18n.default_locale_negotiator</span></code> is now used
unconditionally as... um, the default locale negotiator.</li>
<li>The default locale negotiator has become more complex.<ul>
<li>First, the negotiator looks for the <code class="docutils literal notranslate"><span class="pre">_LOCALE_</span></code> attribute of
the request object (possibly set by a view or an event listener).</li>
<li>Then it looks for the <code class="docutils literal notranslate"><span class="pre">request.params['_LOCALE_']</span></code> value.</li>
<li>Then it looks for the <code class="docutils literal notranslate"><span class="pre">request.cookies['_LOCALE_']</span></code> value.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id268">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id268" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The default locale negotiator now looks for the parameter named
<code class="docutils literal notranslate"><span class="pre">_LOCALE_</span></code> rather than a parameter named <code class="docutils literal notranslate"><span class="pre">locale</span></code> in
<code class="docutils literal notranslate"><span class="pre">request.params</span></code>.</li>
</ul>
</div>
<div class="section" id="id269">
<h3>Behavior Changes<a class="headerlink" href="#id269" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A locale negotiator may now return <code class="docutils literal notranslate"><span class="pre">None</span></code>, signifying that the
default locale should be used.</li>
</ul>
</div>
<div class="section" id="id270">
<h3>Documentation<a class="headerlink" href="#id270" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Documentation concerning locale negotiation in the
Internationalizationa and Localization chapter was updated.</li>
<li>Expanded portion of i18n narrative chapter docs which discuss
working with gettext files.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2010-04-26">
<h2>1.3a1 (2010-04-26)<a class="headerlink" href="#a1-2010-04-26" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id271">
<h3>Features<a class="headerlink" href="#id271" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Added &quot;exception views&quot;.  When you use an exception (anything that
inherits from the Python <code class="docutils literal notranslate"><span class="pre">Exception</span></code> builtin) as view context
argument, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="k">import</span> <span class="n">bfg_view</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="k">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">webob.exc</span> <span class="k">import</span> <span class="n">HTTPNotFound</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">()</span>
</pre></div>
</div>
<p>For the above example, when the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code>
exception is raised by any view or any root factory, the
<code class="docutils literal notranslate"><span class="pre">notfound_view</span></code> view callable will be invoked and its response
returned.</p>
<p>Other normal view predicates can also be used in combination with an
exception view registration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="k">import</span> <span class="n">bfg_view</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.exceptions</span> <span class="k">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">webob.exc</span> <span class="k">import</span> <span class="n">HTTPNotFound</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">notfound_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HTTPNotFound</span><span class="p">()</span>
</pre></div>
</div>
<p>The above exception view names the <code class="docutils literal notranslate"><span class="pre">route_name</span></code> of <code class="docutils literal notranslate"><span class="pre">home</span></code>,
meaning that it will only be called when the route matched has a
name of <code class="docutils literal notranslate"><span class="pre">home</span></code>.  You can therefore have more than one exception
view for any given exception in the system: the &quot;most specific&quot; one
will be called when the set of request circumstances which match the
view registration.  The only predicate that cannot be not be used
successfully is <code class="docutils literal notranslate"><span class="pre">name</span></code>.  The name used to look up an exception
view is always the empty string.</p>
<p>Existing (pre-1.3) normal views registered against objects
inheriting from <code class="docutils literal notranslate"><span class="pre">Exception</span></code> will continue to work.  Exception
views used for user-defined exceptions and system exceptions used as
contexts will also work.</p>
<p>The feature can be used with any view registration mechanism
(<code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code> decorator, ZCML, or imperative <code class="docutils literal notranslate"><span class="pre">config.add_view</span></code>
styles).</p>
<p>This feature was kindly contributed by Andrey Popp.</p>
</li>
<li><p class="first">Use &quot;Venusian&quot; (<a class="reference external" href="http://docs.repoze.org/venusian">http://docs.repoze.org/venusian</a>) to perform <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>
decorator scanning rather than relying on a BFG-internal decorator
scanner.  (Truth be told, Venusian is really just a generalization
of the BFG-internal decorator scanner).</p>
</li>
<li><p class="first">Internationalization and localization features as documented in the
narrative documentation chapter entitled <code class="docutils literal notranslate"><span class="pre">Internationalization</span> <span class="pre">and</span>
<span class="pre">Localization</span></code>.</p>
</li>
<li><p class="first">A new deployment setting named <code class="docutils literal notranslate"><span class="pre">default_locale_name</span></code> was added.
If this string is present as a Paster <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file option, it will
be considered the default locale name.  The default locale name is
used during locale-related operations such as language translation.</p>
</li>
<li><p class="first">It is now possible to turn on Chameleon template &quot;debugging mode&quot;
for all Chameleon BFG templates by setting a BFG-related Paster
<code class="docutils literal notranslate"><span class="pre">.ini</span></code> file setting named <code class="docutils literal notranslate"><span class="pre">debug_templates</span></code>. The exceptions
raised by Chameleon templates when a rendering fails are sometimes
less than helpful.  <code class="docutils literal notranslate"><span class="pre">debug_templates</span></code> allows you to configure your
application development environment so that exceptions generated by
Chameleon during template compilation and execution will contain
more helpful debugging information.  This mode is on by default in
all new projects.</p>
</li>
<li><p class="first">Add a new method of the Configurator named <code class="docutils literal notranslate"><span class="pre">derive_view</span></code> which can
be used to generate a BFG view callable from a user-supplied
function, instance, or class. This useful for external framework and
plugin authors wishing to wrap callables supplied by their users
which follow the same calling conventions and response conventions
as objects that can be supplied directly to BFG as a view callable.
See the <code class="docutils literal notranslate"><span class="pre">derive_view</span></code> method in the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code> docs.</p>
</li>
</ul>
</div>
<div class="section" id="zcml">
<h3>ZCML<a class="headerlink" href="#zcml" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">translationdir</span></code> ZCML directive to support localization.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">localenegotiator</span></code> ZCML directive to support localization.</li>
</ul>
</div>
<div class="section" id="id272">
<h3>Deprecations<a class="headerlink" href="#id272" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The exception views feature replaces the need for the
<code class="docutils literal notranslate"><span class="pre">set_notfound_view</span></code> and <code class="docutils literal notranslate"><span class="pre">set_forbidden_view</span></code> methods of the
<code class="docutils literal notranslate"><span class="pre">Configurator</span></code> as well as the <code class="docutils literal notranslate"><span class="pre">notfound</span></code> and <code class="docutils literal notranslate"><span class="pre">forbidden</span></code> ZCML
directives.  Those methods and directives will continue to work for
the foreseeable future, but they are deprecated in the
documentation.</li>
</ul>
</div>
<div class="section" id="id273">
<h3>Dependencies<a class="headerlink" href="#id273" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A new install-time dependency on the <code class="docutils literal notranslate"><span class="pre">venusian</span></code> distribution was
added.</li>
<li>A new install-time dependency on the <code class="docutils literal notranslate"><span class="pre">translationstring</span></code>
distribution was added.</li>
<li>Chameleon 1.2.3 or better is now required (internationalization and
per-template debug settings).</li>
</ul>
</div>
<div class="section" id="id274">
<h3>Internal<a class="headerlink" href="#id274" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>View registrations and lookups are now done with three &quot;requires&quot;
arguments instead of two to accomodate orthogonality of exception
views.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></code> interfaces were removed;
they weren't APIs and they became vestigial with the addition of
exception views.</li>
<li>Remove <code class="docutils literal notranslate"><span class="pre">repoze.bfg.compat.pkgutil_26.py</span></code> and import alias
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.compat.walk_packages</span></code>.  These were only required by
internal scanning machinery; Venusian replaced the internal scanning
machinery, so these are no longer required.</li>
</ul>
</div>
<div class="section" id="id275">
<h3>Documentation<a class="headerlink" href="#id275" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Exception view documentation was added to the <code class="docutils literal notranslate"><span class="pre">Hooks</span></code> narrative
chapter.</li>
<li>A new narrative chapter entitled <code class="docutils literal notranslate"><span class="pre">Internationalization</span> <span class="pre">and</span>
<span class="pre">Localization</span></code> was added.</li>
<li>The &quot;Environment Variables and <code class="docutils literal notranslate"><span class="pre">ini</span></code> File Settings&quot; chapter was
changed: documentation about the <code class="docutils literal notranslate"><span class="pre">default_locale_name</span></code> setting was
added.</li>
<li>A new API chapter for the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.i18n</span></code> module was added.</li>
<li>Documentation for the new <code class="docutils literal notranslate"><span class="pre">translationdir</span></code> and
<code class="docutils literal notranslate"><span class="pre">localenegotiator</span></code> ZCML directives were added.</li>
<li>A section was added to the Templates chapter entitled &quot;Nicer
Exceptions in Templates&quot; describing the result of setting
<code class="docutils literal notranslate"><span class="pre">debug_templates</span> <span class="pre">=</span> <span class="pre">true</span></code>.</li>
</ul>
</div>
<div class="section" id="id276">
<h3>Paster Templates<a class="headerlink" href="#id276" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All paster templates now create a <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> which includes
commands related to nose testing and Babel message catalog
extraction/compilation.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">default_locale_name</span> <span class="pre">=</span> <span class="pre">en</span></code> setting was added to each existing paster
template.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">debug_templates</span> <span class="pre">=</span> <span class="pre">true</span></code> setting was added to each existing
paster template.</li>
</ul>
</div>
<div class="section" id="licensing">
<h3>Licensing<a class="headerlink" href="#licensing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The Edgewall (BSD) license was added to the LICENSES.txt file, as
some code in the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.i18n</span></code> derives from Babel source.</li>
</ul>
</div>
</div>
<div class="section" id="id277">
<h2>1.2 (2010-02-10)<a class="headerlink" href="#id277" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>No changes from 1.2b6.</li>
</ul>
</div>
<div class="section" id="b6-2010-02-06">
<h2>1.2b6 (2010-02-06)<a class="headerlink" href="#b6-2010-02-06" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id278">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id278" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove magical feature of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> which
prepended a fully-expanded urldispatch route URL before a the
model's path if it was noticed that the request had matched a route.
This feature was ill-conceived, and didn't work in all scenarios.</li>
</ul>
</div>
<div class="section" id="id279">
<h3>Bug Fixes<a class="headerlink" href="#id279" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>More correct conversion of provided <code class="docutils literal notranslate"><span class="pre">renderer</span></code> values to resource
specification values (internal).</li>
</ul>
</div>
</div>
<div class="section" id="b5-2010-02-04">
<h2>1.2b5 (2010-02-04)<a class="headerlink" href="#b5-2010-02-04" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id280">
<h3>Bug Fixes<a class="headerlink" href="#id280" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>1.2b4 introduced a bug whereby views added via a route configuration
that named a view callable and also a <code class="docutils literal notranslate"><span class="pre">view_attr</span></code> became broken.
Symptom: <code class="docutils literal notranslate"><span class="pre">MyViewClass</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">callable</span></code> or the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> of a
class was being called instead of the method named via
<code class="docutils literal notranslate"><span class="pre">view_attr</span></code>.</li>
<li>Fix a bug whereby a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code>
decorator that provided a package-relative template filename might
not have been resolved properly.  Symptom: inappropriate <code class="docutils literal notranslate"><span class="pre">Missing</span>
<span class="pre">template</span> <span class="pre">resource</span></code> errors.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2010-02-03">
<h2>1.2b4 (2010-02-03)<a class="headerlink" href="#b4-2010-02-03" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id281">
<h3>Documentation<a class="headerlink" href="#id281" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Update GAE tutorial to use Chameleon instead of Jinja2 (now that
it's possible).</li>
</ul>
</div>
<div class="section" id="id282">
<h3>Bug Fixes<a class="headerlink" href="#id282" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Ensure that <code class="docutils literal notranslate"><span class="pre">secure</span></code> flag for AuthTktAuthenticationPolicy
constructor does what it's documented to do (merge Daniel Holth's
fancy-cookies-2 branch).</li>
</ul>
</div>
<div class="section" id="id283">
<h3>Features<a class="headerlink" href="#id283" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">http_only</span></code> options to
AuthTktAuthenticationPolicy constructor (merge Daniel Holth's
fancy-cookies-2 branch).</li>
</ul>
</div>
<div class="section" id="id284">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id284" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">view_header</span></code>, <code class="docutils literal notranslate"><span class="pre">view_accept</span></code>, <code class="docutils literal notranslate"><span class="pre">view_xhr</span></code>,
<code class="docutils literal notranslate"><span class="pre">view_path_info</span></code>, <code class="docutils literal notranslate"><span class="pre">view_request_method</span></code>, <code class="docutils literal notranslate"><span class="pre">view_request_param</span></code>,
and <code class="docutils literal notranslate"><span class="pre">view_containment</span></code> predicate arguments from the
<code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code> argument list.  These arguments were
speculative.  If you need the features exposed by these arguments,
add a view associated with a route using the <code class="docutils literal notranslate"><span class="pre">route_name</span></code> argument
to the <code class="docutils literal notranslate"><span class="pre">add_view</span></code> method instead.</li>
<li>Remove <code class="docutils literal notranslate"><span class="pre">view_header</span></code>, <code class="docutils literal notranslate"><span class="pre">view_accept</span></code>, <code class="docutils literal notranslate"><span class="pre">view_xhr</span></code>,
<code class="docutils literal notranslate"><span class="pre">view_path_info</span></code>, <code class="docutils literal notranslate"><span class="pre">view_request_method</span></code>, <code class="docutils literal notranslate"><span class="pre">view_request_param</span></code>,
and <code class="docutils literal notranslate"><span class="pre">view_containment</span></code> predicate arguments from the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML
directive attribute set.  These attributes were speculative.  If you
need the features exposed by these attributes, add a view associated
with a route using the <code class="docutils literal notranslate"><span class="pre">route_name</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML
directive instead.</li>
</ul>
</div>
<div class="section" id="id285">
<h3>Dependencies<a class="headerlink" href="#id285" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove dependency on <code class="docutils literal notranslate"><span class="pre">sourcecodegen</span></code> (not depended upon by
Chameleon 1.1.1+).</li>
</ul>
</div>
</div>
<div class="section" id="b3-2010-01-24">
<h2>1.2b3 (2010-01-24)<a class="headerlink" href="#b3-2010-01-24" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id286">
<h3>Bug Fixes<a class="headerlink" href="#id286" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When &quot;hybrid mode&quot; (both traversal and urldispatch) is in use,
default to finding route-related views even if a non-route-related
view registration has been made with a more specific context.  The
default used to be to find views with a more specific context first.
Use the new <code class="docutils literal notranslate"><span class="pre">use_global_views</span></code> argument to the route definition to
get back the older behavior.</li>
</ul>
</div>
<div class="section" id="id287">
<h3>Features<a class="headerlink" href="#id287" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">use_global_views</span></code> argument to <code class="docutils literal notranslate"><span class="pre">add_route</span></code> method of
Configurator.  When this argument is true, views registered for <em>no</em>
route will be found if no more specific view related to the route is
found.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">use_global_views</span></code> attribute to ZCML <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> directive
(see above).</li>
</ul>
</div>
<div class="section" id="id288">
<h3>Internal<a class="headerlink" href="#id288" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When registering a view, register the view adapter with the
&quot;requires&quot; interfaces as <code class="docutils literal notranslate"><span class="pre">(request_type,</span> <span class="pre">context_type)</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">(context_type,</span> <span class="pre">request_type)</span></code>.  This provides for saner
lookup, because the registration will always be made with a specific
request interface, but registration may not be made with a specific
context interface.  In general, when creating multiadapters, you
want to order the requires interfaces so that the elements which
are more likely to be registered using specific interfaces are
ordered before those which are less likely.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2010-01-21">
<h2>1.2b2 (2010-01-21)<a class="headerlink" href="#b2-2010-01-21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id289">
<h3>Bug Fixes<a class="headerlink" href="#id289" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> is passed an instance of
<code class="docutils literal notranslate"><span class="pre">zope.component.registry.Components</span></code> as a <code class="docutils literal notranslate"><span class="pre">registry</span></code> constructor
argument, fix the instance up to have the attributes we expect of an
instance of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.Registry</span></code> when <code class="docutils literal notranslate"><span class="pre">setup_registry</span></code>
is called.  This makes it possible to use the global Zope component
registry as a BFG application registry.</li>
<li>When WebOb 0.9.7.1 was used, a deprecation warning was issued for
the class attribute named <code class="docutils literal notranslate"><span class="pre">charset</span></code> within
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request</span></code>.  BFG now <em>requires</em> WebOb &gt;= 0.9.7,
and code was added so that this deprecation warning has disappeared.</li>
<li>Fix a view lookup ordering bug whereby a view with a larger number
of predicates registered first (literally first, not &quot;earlier&quot;) for
a triad would lose during view lookup to one registered with fewer.</li>
<li>Make sure views with exactly N custom predicates are always called
before views with exactly N non-custom predicates given all else is
equal in the view configuration.</li>
</ul>
</div>
<div class="section" id="id290">
<h3>Documentation<a class="headerlink" href="#id290" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Change renderings of ZCML directive documentation.</li>
<li>Add a narrative documentation chapter: &quot;Using the Zope Component
Architecture in repoze.bfg&quot;.</li>
</ul>
</div>
<div class="section" id="id291">
<h3>Dependencies<a class="headerlink" href="#id291" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Require WebOb &gt;= 0.9.7</li>
</ul>
</div>
</div>
<div class="section" id="b1-2010-01-18">
<h2>1.2b1 (2010-01-18)<a class="headerlink" href="#b1-2010-01-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id292">
<h3>Bug Fixes<a class="headerlink" href="#id292" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>In <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code>, <code class="docutils literal notranslate"><span class="pre">bfg_alchemy</span></code> paster templates and the
<code class="docutils literal notranslate"><span class="pre">bfgwiki2</span></code> tutorial, clean up the SQLAlchemy connection by
registering a <code class="docutils literal notranslate"><span class="pre">repoze.tm.after_end</span></code> callback instead of relying on
a <code class="docutils literal notranslate"><span class="pre">__del__</span></code> method of a <code class="docutils literal notranslate"><span class="pre">Cleanup</span></code> class added to the WSGI
environment.  The <code class="docutils literal notranslate"><span class="pre">__del__</span></code> strategy was fragile and caused
problems in the wild.  Thanks to Daniel Holth for testing.</li>
</ul>
</div>
<div class="section" id="id293">
<h3>Features<a class="headerlink" href="#id293" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Read logging configuration from PasteDeploy config file <code class="docutils literal notranslate"><span class="pre">loggers</span></code>
section (and related) when <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">bfgshell</span></code> is invoked.</li>
</ul>
</div>
<div class="section" id="id294">
<h3>Documentation<a class="headerlink" href="#id294" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Major rework in preparation for book publication.</li>
</ul>
</div>
</div>
<div class="section" id="a11-2010-01-05">
<h2>1.2a11 (2010-01-05)<a class="headerlink" href="#a11-2010-01-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id295">
<h3>Bug Fixes<a class="headerlink" href="#id295" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">bfgshell</span></code> and <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span> <span class="pre">bfg_xxx</span></code> work on
Jython (fix minor incompatibility with treatment of <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> at
the class level).</li>
<li>Updated dependency on <code class="docutils literal notranslate"><span class="pre">WebOb</span></code> to require a version which supports
features now used in tests.</li>
</ul>
</div>
<div class="section" id="id296">
<h3>Features<a class="headerlink" href="#id296" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Jython compatibility (at least when repoze.bfg.jinja2 is used as the
templating engine; Chameleon does not work under Jython).</li>
<li>Show the derived abspath of template resource specifications in the
traceback when a renderer template cannot be found.</li>
<li>Show the original traceback when a Chameleon template cannot be
rendered due to a platform incompatibility.</li>
</ul>
</div>
</div>
<div class="section" id="a10-2010-01-04">
<h2>1.2a10 (2010-01-04)<a class="headerlink" href="#a10-2010-01-04" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id297">
<h3>Features<a class="headerlink" href="#id297" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> method now accepts an argument named
<code class="docutils literal notranslate"><span class="pre">context</span></code>.  This is an alias for the older argument named
<code class="docutils literal notranslate"><span class="pre">for_</span></code>; it is preferred over <code class="docutils literal notranslate"><span class="pre">for_</span></code>, but <code class="docutils literal notranslate"><span class="pre">for_</span></code> will continue
to be supported &quot;forever&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive now accepts an attribute named
<code class="docutils literal notranslate"><span class="pre">context</span></code>.  This is an alias for the older attribute named
<code class="docutils literal notranslate"><span class="pre">for</span></code>; it is preferred over <code class="docutils literal notranslate"><span class="pre">for</span></code>, but <code class="docutils literal notranslate"><span class="pre">for</span></code> will continue to
be supported &quot;forever&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code> method now accepts an argument named
<code class="docutils literal notranslate"><span class="pre">view_context</span></code>.  This is an alias for the older argument named
<code class="docutils literal notranslate"><span class="pre">view_for</span></code>; it is preferred over <code class="docutils literal notranslate"><span class="pre">view_for</span></code>, but <code class="docutils literal notranslate"><span class="pre">view_for</span></code>
will continue to be supported &quot;forever&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive now accepts an attribute named
<code class="docutils literal notranslate"><span class="pre">view_context</span></code>.  This is an alias for the older attribute named
<code class="docutils literal notranslate"><span class="pre">view_for</span></code>; it is preferred over <code class="docutils literal notranslate"><span class="pre">view_for</span></code>, but <code class="docutils literal notranslate"><span class="pre">view_for</span></code>
will continue to be supported &quot;forever&quot;.</li>
</ul>
</div>
<div class="section" id="documentation-and-paster-templates">
<h3>Documentation and Paster Templates<a class="headerlink" href="#documentation-and-paster-templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>LaTeX rendering tweaks.</li>
<li>All uses of the <code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> method that used its
<code class="docutils literal notranslate"><span class="pre">for_</span></code> argument now use the <code class="docutils literal notranslate"><span class="pre">context</span></code> argument instead.</li>
<li>All uses of the <code class="docutils literal notranslate"><span class="pre">Configurator.add_route</span></code> method that used its
<code class="docutils literal notranslate"><span class="pre">view_for</span></code> argument now use the <code class="docutils literal notranslate"><span class="pre">view_context</span></code> argument instead.</li>
<li>All uses of the <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive that used its <code class="docutils literal notranslate"><span class="pre">for</span></code>
attribute now use the <code class="docutils literal notranslate"><span class="pre">context</span></code> attribute instead.</li>
<li>All uses of the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive that used its <code class="docutils literal notranslate"><span class="pre">view_for</span></code>
attribute now use the <code class="docutils literal notranslate"><span class="pre">view_context</span></code> attribute instead.</li>
<li>Add a (minimal) tutorial dealing with use of <code class="docutils literal notranslate"><span class="pre">repoze.catalog</span></code> in a
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application.</li>
</ul>
</div>
<div class="section" id="documentation-licensing">
<h3>Documentation Licensing<a class="headerlink" href="#documentation-licensing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Loosen the documentation licensing to allow derivative works: it is
now offered under the <a class="reference external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">Creative Commons
Attribution-Noncommercial-Share Alike 3.0 United States License</a>.  This is
only a documentation licensing change; the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> software
continues to be offered under the Repoze Public License at
<a class="reference external" href="http://repoze.org/license.html">http://repoze.org/license.html</a> (BSD-like).</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-12-27">
<h2>1.2a9 (2009-12-27)<a class="headerlink" href="#a9-2009-12-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id298">
<h3>Documentation Licensing<a class="headerlink" href="#id298" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <em>documentation</em> (the result of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&lt;html|latex|htmlhelp&gt;</span></code>
within the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory) in this release is now offered under
the Creative Commons Attribution-Noncommercial-No Derivative Works
3.0 United States License as described by
<a class="reference external" href="http://creativecommons.org/licenses/by-nc-nd/3.0/us/">http://creativecommons.org/licenses/by-nc-nd/3.0/us/</a> .  This is only
a licensing change for the documentation; the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>
software continues to be offered under the Repoze Public License
at <a class="reference external" href="http://repoze.org/license.html">http://repoze.org/license.html</a> (BSD-like).</li>
</ul>
</div>
<div class="section" id="id299">
<h3>Documentation<a class="headerlink" href="#id299" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added manual index entries to generated index.</li>
<li>Document the previously existing (but non-API)
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.setup_registry</span></code> method as
an official API of a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code>.</li>
<li>Fix syntax errors in various documentation code blocks.</li>
<li>Created new top-level documentation section: &quot;ZCML Directives&quot;.
This section contains detailed ZCML directive information, some of
which was removed from various narrative chapters.</li>
<li>The LaTeX rendering of the documentation has been improved.</li>
<li>Added a &quot;Fore-Matter&quot; section with author, copyright, and licensing
information.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-12-24">
<h2>1.2a8 (2009-12-24)<a class="headerlink" href="#a8-2009-12-24" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id300">
<h3>Features<a class="headerlink" href="#id300" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">**kw</span></code> arg to the <code class="docutils literal notranslate"><span class="pre">Configurator.add_settings</span></code> API.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">hook_zca</span></code> and <code class="docutils literal notranslate"><span class="pre">unhook_zca</span></code> methods to the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code>
API.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> method now returns a
<code class="docutils literal notranslate"><span class="pre">Configurator</span></code> instance which can be used to do further
configuration during unit tests.</li>
</ul>
</div>
<div class="section" id="id301">
<h3>Bug Fixes<a class="headerlink" href="#id301" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">json</span></code> renderer failed to set the response content type to
<code class="docutils literal notranslate"><span class="pre">application/json</span></code>.  It now does, by setting
<code class="docutils literal notranslate"><span class="pre">request.response_content_type</span></code> unless this attribute is already
set.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">string</span></code> renderer failed to set the response content type to
<code class="docutils literal notranslate"><span class="pre">text/plain</span></code>.  It now does, by setting
<code class="docutils literal notranslate"><span class="pre">request.response_content_type</span></code> unless this attribute is already
set.</li>
</ul>
</div>
<div class="section" id="id302">
<h3>Documentation<a class="headerlink" href="#id302" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>General documentation improvements by using better Sphinx roles such
as &quot;class&quot;, &quot;func&quot;, &quot;meth&quot;, and so on.  This means that there are
many more hyperlinks pointing to API documentation for API
definitions in all narrative, tutorial, and API documentation
elements.</li>
<li>Added a description of imperative configuration in various places
which only described ZCML configuration.</li>
<li>A syntactical refreshing of various tutorials.</li>
<li>Added the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.authorization</span></code>, and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code> modules
to API documentation.</li>
</ul>
</div>
<div class="section" id="id303">
<h3>Deprecations<a class="headerlink" href="#id303" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerRoutesMapper</span></code> API (added in an
early 1.2 alpha) was deprecated.  Its import now generates a
deprecation warning.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-12-20">
<h2>1.2a7 (2009-12-20)<a class="headerlink" href="#a7-2009-12-20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id304">
<h3>Features<a class="headerlink" href="#id304" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add four new testing-related APIs to the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code> class:
<code class="docutils literal notranslate"><span class="pre">testing_securitypolicy</span></code>, <code class="docutils literal notranslate"><span class="pre">testing_models</span></code>,
<code class="docutils literal notranslate"><span class="pre">testing_add_subscriber</span></code>, and <code class="docutils literal notranslate"><span class="pre">testing_add_template</span></code>.  These
were added in order to provide more direct access to the
functionality of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> APIs named
<code class="docutils literal notranslate"><span class="pre">registerDummySecurityPolicy</span></code>, <code class="docutils literal notranslate"><span class="pre">registerModels</span></code>,
<code class="docutils literal notranslate"><span class="pre">registerEventListener</span></code>, and <code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code> when a
configurator is used.  The <code class="docutils literal notranslate"><span class="pre">testing</span></code> APIs named are nominally
deprecated (although they will likely remain around &quot;forever&quot;, as
they are in heavy use in the wild).</li>
<li>Add a new API to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code>
class: <code class="docutils literal notranslate"><span class="pre">add_settings</span></code>.  This API can be used to add &quot;settings&quot;
(information returned within via the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_settings</span></code> API) after the configurator has
been initially set up.  This is most useful for testing purposes.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">custom_predicates</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code>
<code class="docutils literal notranslate"><span class="pre">add_view</span></code> method, the <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator and the attribute
list of the ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive.  If <code class="docutils literal notranslate"><span class="pre">custom_predicates</span></code> is
specified, it must be a sequence of predicate callables (a predicate
callable accepts two arguments: <code class="docutils literal notranslate"><span class="pre">context</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code> and
returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>).  The associated view callable will
only be invoked if all custom predicates return <code class="docutils literal notranslate"><span class="pre">True</span></code>.  Use one
or more custom predicates when no existing predefined predicate is
useful.  Predefined and custom predicates can be mixed freely.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">custom_predicates</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">Configurator</span></code>
<code class="docutils literal notranslate"><span class="pre">add_route</span></code> and the attribute list of the ZCML <code class="docutils literal notranslate"><span class="pre">route</span></code>
directive.  If <code class="docutils literal notranslate"><span class="pre">custom_predicates</span></code> is specified, it must be a
sequence of predicate callables (a predicate callable accepts two
arguments: <code class="docutils literal notranslate"><span class="pre">context</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code> and returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or
<code class="docutils literal notranslate"><span class="pre">False</span></code>).  The associated route will match will only be invoked if
all custom predicates return <code class="docutils literal notranslate"><span class="pre">True</span></code>, else route matching
continues.  Note that the value <code class="docutils literal notranslate"><span class="pre">context</span></code> will always be <code class="docutils literal notranslate"><span class="pre">None</span></code>
when passed to a custom route predicate.  Use one or more custom
predicates when no existing predefined predicate is useful.
Predefined and custom predicates can be mixed freely.</li>
</ul>
</div>
<div class="section" id="id305">
<h3>Internal<a class="headerlink" href="#id305" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerTraverser</span></code> function.  This
function was never an API.</li>
</ul>
</div>
<div class="section" id="documenation">
<h3>Documenation<a class="headerlink" href="#documenation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Doc-deprecated most helper functions in the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code>
module.  These helper functions likely won't be removed any time
soon, nor will they generate a warning any time soon, due to their
heavy use in the wild, but equivalent behavior exists in methods of
a Configurator.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-12-18">
<h2>1.2a6 (2009-12-18)<a class="headerlink" href="#a6-2009-12-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id306">
<h3>Features<a class="headerlink" href="#id306" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> object now has two new methods: <code class="docutils literal notranslate"><span class="pre">begin</span></code> and
<code class="docutils literal notranslate"><span class="pre">end</span></code>.  The <code class="docutils literal notranslate"><span class="pre">begin</span></code> method is meant to be called before any
&quot;configuration&quot; begins (e.g. before <code class="docutils literal notranslate"><span class="pre">add_view</span></code>, et. al are
called).  The <code class="docutils literal notranslate"><span class="pre">end</span></code> method is meant to be called after all
&quot;configuration&quot; is complete.</p>
<p>Previously, before there was imperative configuration at all (1.1
and prior), configuration begin and end was invariably implied by
the process of loading a ZCML file.  When a ZCML load happened, the
threadlocal data structure containing the request and registry was
modified before the load, and torn down after the load, making sure
that all framework code that needed <code class="docutils literal notranslate"><span class="pre">get_current_registry</span></code> for the
duration of the ZCML load was satisfied.</p>
<p>Some API methods called during imperative configuration, (such as
<code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> when a renderer is involved) end up for
historical reasons calling <code class="docutils literal notranslate"><span class="pre">get_current_registry</span></code>.  However, in
1.2a5 and below, the Configurator supplied no functionality that
allowed people to make sure that <code class="docutils literal notranslate"><span class="pre">get_current_registry</span></code> returned
the registry implied by the configurator being used.  <code class="docutils literal notranslate"><span class="pre">begin</span></code> now
serves this purpose.  Inversely, <code class="docutils literal notranslate"><span class="pre">end</span></code> pops the thread local
stack, undoing the actions of <code class="docutils literal notranslate"><span class="pre">begin</span></code>.</p>
<p>We make this boundary explicit to reduce the potential for confusion
when the configurator is used in different circumstances (e.g. in
unit tests and app code vs. just in initial app setup).</p>
<p>Existing code written for 1.2a1-1.2a5 which does not call <code class="docutils literal notranslate"><span class="pre">begin</span></code>
or <code class="docutils literal notranslate"><span class="pre">end</span></code> continues to work in the same manner it did before.  It
is however suggested that this code be changed to call <code class="docutils literal notranslate"><span class="pre">begin</span></code> and
<code class="docutils literal notranslate"><span class="pre">end</span></code> to reduce the potential for confusion in the future.</p>
</li>
<li><p class="first">All <code class="docutils literal notranslate"><span class="pre">paster</span></code> templates which generate an application skeleton now
make use of the new <code class="docutils literal notranslate"><span class="pre">begin</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> methods of the
Configurator they use in their respective copies of <code class="docutils literal notranslate"><span class="pre">run.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">tests.py</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id307">
<h3>Documentation<a class="headerlink" href="#id307" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>All documentation that makes use of a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> object to do
application setup and test setup now makes use of the new <code class="docutils literal notranslate"><span class="pre">begin</span></code>
and <code class="docutils literal notranslate"><span class="pre">end</span></code> methods of the configurator.</li>
</ul>
</div>
<div class="section" id="id308">
<h3>Bug Fixes<a class="headerlink" href="#id308" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> or
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code> <em>class</em> (as opposed to instance)
was raised as an exception within a root factory (or route root
factory), the exception would not be caught properly by the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.</span></code> Router and it would propagate to up the call stack,
as opposed to rendering the not found view or the forbidden view as
would have been expected.</li>
<li>When Chameleon page or text templates used as renderers were added
imperatively (via <code class="docutils literal notranslate"><span class="pre">Configurator.add_view</span></code> or some derivative),
they too-eagerly attempted to look up the <code class="docutils literal notranslate"><span class="pre">reload_templates</span></code>
setting via <code class="docutils literal notranslate"><span class="pre">get_settings</span></code>, meaning they were always registered in
non-auto-reload-mode (the default).  Each now waits until its
respective <code class="docutils literal notranslate"><span class="pre">template</span></code> attribute is accessed to look up the value.</li>
<li>When a route with the same name as a previously registered route was
added, the old route was not removed from the mapper's routelist.
Symptom: the old registered route would be used (and possibly
matched) during route lookup when it should not have had a chance to
ever be used.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-12-10">
<h2>1.2a5 (2009-12-10)<a class="headerlink" href="#a5-2009-12-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id309">
<h3>Features<a class="headerlink" href="#id309" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> or
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code> error is raised from within a
custom root factory or the <code class="docutils literal notranslate"><span class="pre">factory</span></code> of a route, the appropriate
response is now sent to the requesting user agent (the result of the
notfound view or the forbidden view, respectively).  When these
errors are raised from within a root factory, the <code class="docutils literal notranslate"><span class="pre">context</span></code> passed
to the notfound or forbidden view will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Also, the
request will not be decorated with <code class="docutils literal notranslate"><span class="pre">view_name</span></code>, <code class="docutils literal notranslate"><span class="pre">subpath</span></code>,
<code class="docutils literal notranslate"><span class="pre">context</span></code>, etc. as would normally be the case if traversal had
been allowed to take place.</li>
</ul>
</div>
<div class="section" id="id310">
<h3>Internals<a class="headerlink" href="#id310" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The exception class representing the error raised by various methods
of a <code class="docutils literal notranslate"><span class="pre">Configurator</span></code> is now importable as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.ConfigurationError</span></code>.</li>
</ul>
</div>
<div class="section" id="id311">
<h3>Documentation<a class="headerlink" href="#id311" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>General documentation freshening which takes imperative
configuration into account in more places and uses glossary
references more liberally.</li>
<li>Remove explanation of changing the request type in a new request
event subscriber, as other predicates are now usually an easier way
to get this done.</li>
<li>Added &quot;Thread Locals&quot; narrative chapter to documentation, and added
a API chapter documenting the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocals</span></code> module.</li>
<li>Added a &quot;Special Exceptions&quot; section to the &quot;Views&quot; narrative
documentation chapter explaining the effect of raising
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code> from within view code.</li>
</ul>
</div>
<div class="section" id="id312">
<h3>Dependencies<a class="headerlink" href="#id312" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A new dependency on the <code class="docutils literal notranslate"><span class="pre">twill</span></code> package was added to the
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> <code class="docutils literal notranslate"><span class="pre">tests_require</span></code> argument (Twill will only be
downloaded when <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">test</span></code> or <code class="docutils literal notranslate"><span class="pre">setup.py</span>
<span class="pre">nosetests</span></code> is invoked).</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-12-07">
<h2>1.2a4 (2009-12-07)<a class="headerlink" href="#a4-2009-12-07" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id313">
<h3>Features<a class="headerlink" href="#id313" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.DummyModel</span></code> now accepts a new constructor
keyword argument: <code class="docutils literal notranslate"><span class="pre">__provides__</span></code>.  If this constructor argument is
provided, it should be an interface or a tuple of interfaces.  The
resulting model will then provide these interfaces (they will be
attached to the constructed model via
<code class="docutils literal notranslate"><span class="pre">zope.interface.alsoProvides</span></code>).</li>
</ul>
</div>
<div class="section" id="id314">
<h3>Bug Fixes<a class="headerlink" href="#id314" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Operation on GAE was broken, presumably because the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration</span></code> module began to attempt to import the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_text</span></code>
modules, and these cannot be used on non-CPython platforms.  It now
tolerates startup time import failures for these modules, and only
raise an import error when a template from one of these packages is
actually used.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-12-02">
<h2>1.2a3 (2009-12-02)<a class="headerlink" href="#a3-2009-12-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id315">
<h3>Bug Fixes<a class="headerlink" href="#id315" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> function inappropriately passed
along <code class="docutils literal notranslate"><span class="pre">_query</span></code> and/or <code class="docutils literal notranslate"><span class="pre">_anchor</span></code> arguments to the
<code class="docutils literal notranslate"><span class="pre">mapper.generate</span></code> function, resulting in blowups.</li>
<li>When two views were registered with differering <code class="docutils literal notranslate"><span class="pre">for</span></code> interfaces
or classes, and the <code class="docutils literal notranslate"><span class="pre">for</span></code> of first view registered was a
superclass of the second, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> view machinery would
incorrectly associate the two views with the same &quot;multiview&quot;.
Multiviews are meant to be collections of views that have <em>exactly</em>
the same for/request/viewname values, without taking inheritance
into account.  Symptom: wrong view callable found even when you had
correctly specified a <code class="docutils literal notranslate"><span class="pre">for_</span></code> interface/class during view
configuration for one or both view configurations.</li>
</ul>
</div>
<div class="section" id="id316">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id316" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.templating</span></code> module has been removed; it had been
deprecated in 1.1 and never actually had any APIs in it.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-11-29">
<h2>1.2a2 (2009-11-29)<a class="headerlink" href="#a2-2009-11-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id317">
<h3>Bug Fixes<a class="headerlink" href="#id317" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The long description of this package (as shown on PyPI) was not
valid reStructuredText, and so was not renderable.</li>
<li>Trying to use an HTTP method name string such as <code class="docutils literal notranslate"><span class="pre">GET</span></code> as a
<code class="docutils literal notranslate"><span class="pre">request_type</span></code> predicate argument caused a startup time failure
when it was encountered in imperative configuration or in a
decorator (symptom: <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">Error:</span> <span class="pre">Required</span> <span class="pre">specification</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">a</span>
<span class="pre">specification</span></code>).  This now works again, although <code class="docutils literal notranslate"><span class="pre">request_method</span></code>
is now the preferred predicate argument for associating a view
configuration with an HTTP request method.</li>
</ul>
</div>
<div class="section" id="id318">
<h3>Documentation<a class="headerlink" href="#id318" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fixed &quot;Startup&quot; narrative documentation chapter; it was explaining
&quot;the old way&quot; an application constructor worked.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-11-28">
<h2>1.2a1 (2009-11-28)<a class="headerlink" href="#a1-2009-11-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id319">
<h3>Features<a class="headerlink" href="#id319" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">An imperative configuration mode.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application can now begin its life as a single
Python file.  Later, the application might evolve into a set of
Python files in a package.  Even later, it might start making use of
other configuration features, such as <code class="docutils literal notranslate"><span class="pre">ZCML</span></code>.  But neither the use
of a package nor the use of non-imperative configuration is required
to create a simple <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application any longer.</p>
<p>Imperative configuration makes <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> competetive with
&quot;microframeworks&quot; such as <a class="reference external" href="http://bottle.paws.de/">Bottle</a> and
<a class="reference external" href="http://www.tornadoweb.org/">Tornado</a>.  <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> has a good
deal of functionality that most microframeworks lack, so this is
hopefully a &quot;best of both worlds&quot; feature.</p>
<p>The simplest possible <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application is now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">webob</span> <span class="k">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">wsgiref</span> <span class="k">import</span> <span class="n">simple_server</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.configuration</span> <span class="k">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">hello_world</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
    <span class="n">simple_server</span><span class="o">.</span><span class="n">make_server</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">A new class now exists: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code>.
This class forms the basis for sharing machinery between
&quot;imperatively&quot; configured applications and traditional
declaratively-configured applications.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> function now accepts three extra
optional keyword arguments: <code class="docutils literal notranslate"><span class="pre">registry</span></code>, <code class="docutils literal notranslate"><span class="pre">request</span></code> and
<code class="docutils literal notranslate"><span class="pre">hook_zca</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">registry</span></code> argument is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the argument will be
treated as the registry that is set as the &quot;current registry&quot; (it
will be returned by <code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></code>)
for the duration of the test.  If the <code class="docutils literal notranslate"><span class="pre">registry</span></code> argument is
<code class="docutils literal notranslate"><span class="pre">None</span></code> (the default), a new registry is created and used for the
duration of the test.</p>
<p>The value of the <code class="docutils literal notranslate"><span class="pre">request</span></code> argument is used as the &quot;current
request&quot; (it will be returned by
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_request</span></code>) for the duration of
the test; it defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">hook_zca</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default), the
<code class="docutils literal notranslate"><span class="pre">zope.component.getSiteManager</span></code> function will be hooked with a
function that returns the value of <code class="docutils literal notranslate"><span class="pre">registry</span></code> (or the
default-created registry if <code class="docutils literal notranslate"><span class="pre">registry</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>) instead of the
registry returned by <code class="docutils literal notranslate"><span class="pre">zope.component.getGlobalSiteManager</span></code>,
causing the Zope Component Architecture API (<code class="docutils literal notranslate"><span class="pre">getSiteManager</span></code>,
<code class="docutils literal notranslate"><span class="pre">getAdapter</span></code>, <code class="docutils literal notranslate"><span class="pre">getUtility</span></code>, and so on) to use the testing
registry instead of the global ZCA registry.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.tearDown</span></code> function now accepts an
<code class="docutils literal notranslate"><span class="pre">unhook_zca</span></code> argument.  If this argument is <code class="docutils literal notranslate"><span class="pre">True</span></code> (the
default), <code class="docutils literal notranslate"><span class="pre">zope.component.getSiteManager.reset()</span></code> will be called.
This will cause the result of the <code class="docutils literal notranslate"><span class="pre">zope.component.getSiteManager</span></code>
function to be the global ZCA registry (the result of
<code class="docutils literal notranslate"><span class="pre">zope.component.getGlobalSiteManager</span></code>) once again.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">run.py</span></code> module in various <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> <code class="docutils literal notranslate"><span class="pre">paster</span></code> templates
now use a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code> class instead of
the (now-legacy) <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> function to produce
a WSGI application.</p>
</li>
</ul>
</div>
<div class="section" id="id320">
<h3>Documentation<a class="headerlink" href="#id320" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The documentation now uses the &quot;request-only&quot; view calling
convention in most examples (as opposed to the <code class="docutils literal notranslate"><span class="pre">context,</span> <span class="pre">request</span></code>
convention).  This is a documentation-only change; the <code class="docutils literal notranslate"><span class="pre">context,</span>
<span class="pre">request</span></code> convention is also supported and documented, and will be
&quot;forever&quot;.</li>
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration</span></code> API documentation has been added.</li>
<li>A narrative documentation chapter entitled &quot;Creating Your First
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> Application&quot; has been added.  This chapter details
usage of the new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code> class,
and demonstrates a simplified &quot;imperative-mode&quot; configuration; doing
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application configuration imperatively was previously
much more difficult.</li>
<li>A narrative documentation chapter entitled &quot;Configuration,
Decorations and Code Scanning&quot; explaining ZCML- vs. imperative-
vs. decorator-based configuration equivalence.</li>
<li>The &quot;ZCML Hooks&quot; chapter has been renamed to &quot;Hooks&quot;; it documents
how to override hooks now via imperative configuration and ZCML.</li>
<li>The explanation about how to supply an alternate &quot;response factory&quot;
has been removed from the &quot;Hooks&quot; chapter.  This feature may be
removed in a later release (it still works now, it's just not
documented).</li>
<li>Add a section entitled &quot;Test Set Up and Tear Down&quot; to the
unittesting chapter.</li>
</ul>
</div>
<div class="section" id="id321">
<h3>Bug Fixes<a class="headerlink" href="#id321" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The ACL authorization policy debugging output when
<code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code> console debugging output was turned on
wasn't as clear as it could have been when a view execution was
denied due to an authorization failure resulting from the set of
principals passed never having matched any ACE in any ACL in the
lineage.  Now in this case, we report <code class="docutils literal notranslate"><span class="pre">&lt;default</span> <span class="pre">deny&gt;</span></code> as the ACE
value and either the root ACL or <code class="docutils literal notranslate"><span class="pre">&lt;No</span> <span class="pre">ACL</span> <span class="pre">found</span> <span class="pre">on</span> <span class="pre">any</span> <span class="pre">object</span> <span class="pre">in</span>
<span class="pre">model</span> <span class="pre">lineage&gt;</span></code> if no ACL was found.</li>
<li>When two views were registered with the same <code class="docutils literal notranslate"><span class="pre">accept</span></code> argument,
but were otherwise registered with the same arguments, if a request
entered the application which had an <code class="docutils literal notranslate"><span class="pre">Accept</span></code> header that accepted
<em>either</em> of the media types defined by the set of views registered
with predicates that otherwise matched, a more or less &quot;random&quot; one
view would &quot;win&quot;.  Now, we try harder to use the view callable
associated with the view configuration that has the most specific
<code class="docutils literal notranslate"><span class="pre">accept</span></code> argument.  Thanks to Alberto Valverde for an initial
patch.</li>
</ul>
</div>
<div class="section" id="id322">
<h3>Internals<a class="headerlink" href="#id322" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The routes mapper is no longer a root factory wrapper.  It is now
consulted directly by the router.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.make_registry</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.map_view</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.owrap_view</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.predicate_wrap</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.secure_view</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.authdebug_view</span></code> callable has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.renderer_from_name</span></code> callable has been
removed.  Use <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.renderer_from_name</span></code>
instead (still not an API, however).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.derive_view</span></code> callable has been removed.  Use
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator.derive_view</span></code> instead (still
not an API, however).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_options</span></code> callable has been removed.
Its job has been subsumed by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.Settings</span></code>
class constructor.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.requestonly</span></code> function has been moved to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.requestonly</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.rendered_response</span></code> function has been moved to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.rendered_response</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.decorate_view</span></code> function has been moved to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.decorate_view</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.MultiView</span></code> class has been moved to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.MultiView</span></code>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.zcml.Uncacheable</span></code> class has been removed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.resource.resource_spec</span></code> function has been removed.</p>
</li>
<li><p class="first">All ZCML directives which deal with attributes which are paths now
use the <code class="docutils literal notranslate"><span class="pre">path</span></code> method of the ZCML context to resolve a relative
name to an absolute one (imperative configuration requirement).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.scripting.get_root</span></code> API now uses a 'real' WebOb
request rather than a FakeRequest when it sets up the request as a
threadlocal.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.traverse</span></code> API now uses a 'real' WebOb
request rather than a FakeRequest when it calls the traverser.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.FakeRequest</span></code> class has been removed.</p>
</li>
<li><p class="first">Most uses of the ZCA threadlocal API (the <code class="docutils literal notranslate"><span class="pre">getSiteManager</span></code>,
<code class="docutils literal notranslate"><span class="pre">getUtility</span></code>, <code class="docutils literal notranslate"><span class="pre">getAdapter</span></code>, <code class="docutils literal notranslate"><span class="pre">getMultiAdapter</span></code> threadlocal API)
have been removed from the core.  Instead, when a threadlocal is
necessary, the core uses the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></code> API to obtain the
registry.</p>
</li>
<li><p class="first">The internal ILogger utility named <code class="docutils literal notranslate"><span class="pre">repoze.bfg.debug</span></code> is now just
an IDebugLogger unnamed utility.  A named utility with the old name
is registered for b/w compat.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></code> interface was
removed; it has become unused.</p>
</li>
<li><p class="first">Instead of depending on the <code class="docutils literal notranslate"><span class="pre">martian</span></code> package to do code scanning,
we now just use our own scanning routines.</p>
</li>
<li><p class="first">We now no longer have a dependency on <code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code> package;
instead, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package includes implementations of the
<code class="docutils literal notranslate"><span class="pre">adapter</span></code>, <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">utility</span></code> directives.</p>
</li>
<li><p class="first">Relating to the following functions:</p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.render_view</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.render_view_to_iterable</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.render_view_to_response</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.default_notfound_view</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.default_forbidden_view</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.rendered_response</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.has_permission</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.authenticated_userid</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.effective_principals</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.view_execution_permitted</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.remember</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.forget</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.static_url</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.virtual_root</span></code></p>
<p>Each of these functions now expects to be called with a request
object that has a <code class="docutils literal notranslate"><span class="pre">registry</span></code> attribute which represents the
current <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> registry.  They fall back to obtaining the
registry from the threadlocal API.</p>
</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilites">
<h3>Backwards Incompatibilites<a class="headerlink" href="#backwards-incompatibilites" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Unit tests which use <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> for the
purpose of isolating tests from one another may now begin to fail
due to lack of isolation between tests.</p>
<p>Here's why: In repoze.bfg 1.1 and prior, the registry returned by
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></code> when no other
registry had been pushed on to the threadlocal stack was the
<code class="docutils literal notranslate"><span class="pre">zope.component.globalregistry.base</span></code> global registry (aka the
result of <code class="docutils literal notranslate"><span class="pre">zope.component.getGlobalSiteManager()</span></code>).  In repoze.bfg
1.2+, however, the registry returned in this situation is the new
module-scope <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.global_registry</span></code> object.  The
<code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> function clears the
<code class="docutils literal notranslate"><span class="pre">zope.component.globalregistry.base</span></code> global registry
unconditionally.  However, it does not know about the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.global_registry</span></code> object, so it does not clear
it.</p>
<p>If you use the <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> function in the
<code class="docutils literal notranslate"><span class="pre">setUp</span></code> of test cases in your unit test suite instead of using the
(more correct as of 1.1) <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code>, you will need
to replace all calls to <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> with a call
to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code>.</p>
<p>If replacing all calls to <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> with a
call to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> is infeasible, you can put this
bit of code somewhere that is executed exactly <strong>once</strong> (<em>not</em> for
each test in a test suite; in the `` __init__.py`` of your package
or your package's <code class="docutils literal notranslate"><span class="pre">tests</span></code> subpackage would be a reasonable
place):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">zope.testing.cleanup</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.testing</span> <span class="k">import</span> <span class="n">setUp</span>
<span class="n">zope</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">cleanup</span><span class="o">.</span><span class="n">addCleanUp</span><span class="p">(</span><span class="n">setUp</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">When there is no &quot;current registry&quot; in the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.manager</span></code> threadlocal data structure (this
is the case when there is no &quot;current request&quot; or we're not in the
midst of a <code class="docutils literal notranslate"><span class="pre">r.b.testing.setUp</span></code>-bounded unit test), the <code class="docutils literal notranslate"><span class="pre">.get</span></code>
method of the manager returns a data structure containing a <em>global</em>
registry.  In previous releases, this function returned the global
Zope &quot;base&quot; registry: the result of
<code class="docutils literal notranslate"><span class="pre">zope.component.getGlobalSiteManager</span></code>, which is an instance of the
<code class="docutils literal notranslate"><span class="pre">zope.component.registry.Component</span></code> class.  In this release,
however, the global registry returns a globally importable instance
of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.Registry</span></code> class.  This registry
instance can always be imported as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.global_registry</span></code>.</p>
<p>Effectively, this means that when you call
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></code> when no request or
<code class="docutils literal notranslate"><span class="pre">setUp</span></code> bounded unit test is in effect, you will always get back
the global registry that lives in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.global_registry</span></code>.  It also means that
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> APIs that <em>call</em> <code class="docutils literal notranslate"><span class="pre">get_current_registry</span></code> will use
this registry.</p>
<p>This change was made because <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> now expects the registry
it uses to have a slightly different API than a bare instance of
<code class="docutils literal notranslate"><span class="pre">zope.component.registry.Components</span></code>.</p>
</li>
<li><p class="first">View registration no longer registers a
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IViewPermission</span></code> adapter (it is no longer
checked by the framework; since 1.1, views have been responsible for
providing their own security).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> callable no longer accepts the
<code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> nor the <code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code>
arguments.  This feature was deprecated in version 1.0 and has been
removed.</p>
</li>
<li><p class="first">Obscure: the machinery which configured views with a
<code class="docutils literal notranslate"><span class="pre">request_type</span></code> <em>and</em> a <code class="docutils literal notranslate"><span class="pre">route_name</span></code> would ignore the request
interface implied by <code class="docutils literal notranslate"><span class="pre">route_name</span></code> registering a view only for the
interface implied by <code class="docutils literal notranslate"><span class="pre">request_type</span></code>.  In the unlikely event that
you were trying to use these two features together, the symptom
would have been that views that named a <code class="docutils literal notranslate"><span class="pre">request_type</span></code> but which
were also associated with routes were not found when the route
matched.  Now if a view is configured with both a <code class="docutils literal notranslate"><span class="pre">request_type</span></code>
and a <code class="docutils literal notranslate"><span class="pre">route_name</span></code>, an error is raised.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive now no longer accepts the
<code class="docutils literal notranslate"><span class="pre">request_type</span></code> or <code class="docutils literal notranslate"><span class="pre">view_request_type</span></code> attributes.  These
attributes didn't actually work in any useful way (see entry above
this one).</p>
</li>
<li><p class="first">Because the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package now includes implementations of
the <code class="docutils literal notranslate"><span class="pre">adapter</span></code>, <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">utility</span></code> ZCML directives, it
is now an error to have <code class="docutils literal notranslate"><span class="pre">&lt;include</span> <span class="pre">package=&quot;repoze.zcml&quot;</span>
<span class="pre">file=&quot;meta.zcml&quot;/&gt;</span></code> in the ZCML of a <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application.  A
ZCML conflict error will be raised if your ZCML does so.  This
shouldn't be an issue for &quot;normal&quot; installations; it has always been
the responsibility of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.includes</span></code> ZCML to include
this file in the past; it now just doesn't.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.zcml_configure</span></code> API was removed.  Use
the <code class="docutils literal notranslate"><span class="pre">Configurator.load_zcml</span></code> API instead.</p>
</li>
</ul>
</div>
<div class="section" id="id323">
<h3>Deprecations<a class="headerlink" href="#id323" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> function is now nominally
deprecated.  Its import and usage does not throw a warning, nor will
it probably ever disappear.  However, using a
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration.Configurator</span></code> class is now the preferred
way to generate a WSGI application.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">make_app</span></code> calls
<code class="docutils literal notranslate"><span class="pre">zope.component.getSiteManager.sethook(</span>
<span class="pre">repoze.bfg.threadlocal.get_current_registry)</span></code> on the caller's
behalf, hooking ZCA global API lookups, for backwards compatibility
purposes.  If you disuse <code class="docutils literal notranslate"><span class="pre">make_app</span></code>, your calling code will need
to perform this call itself, at least if your application uses the
ZCA global API (<code class="docutils literal notranslate"><span class="pre">getSiteManager</span></code>, <code class="docutils literal notranslate"><span class="pre">getAdapter</span></code>, etc).</p>
</li>
</ul>
</div>
<div class="section" id="id324">
<h3>Dependencies<a class="headerlink" href="#id324" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A dependency on the <code class="docutils literal notranslate"><span class="pre">martian</span></code> package has been removed (its
functionality is replaced internally).</li>
<li>A dependency on the <code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code> package has been removed (its
functionality is replaced internally).</li>
</ul>
</div>
</div>
<div class="section" id="id325">
<h2>1.1.1 (2009-11-21)<a class="headerlink" href="#id325" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id326">
<h3>Bug Fixes<a class="headerlink" href="#id326" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>&quot;Hybrid mode&quot; applications (applications which explicitly used
traversal <em>after</em> url dispatch via <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> paths containing the
<code class="docutils literal notranslate"><span class="pre">*traverse</span></code> element) were broken in 1.1-final and all 1.1 alpha
and beta releases.  Views registered without a <code class="docutils literal notranslate"><span class="pre">route_name</span></code> route
shadowed views registered with a <code class="docutils literal notranslate"><span class="pre">route_name</span></code> inappropriately.</li>
</ul>
</div>
</div>
<div class="section" id="id327">
<h2>1.1 (2009-11-15)<a class="headerlink" href="#id327" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id328">
<h3>Internals<a class="headerlink" href="#id328" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove dead IRouteRequirement interface from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.zcml</span></code>
module.</li>
</ul>
</div>
<div class="section" id="id329">
<h3>Documentation<a class="headerlink" href="#id329" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Improve the &quot;Extending an Existing Application&quot; narrative chapter.</li>
<li>Add more sections to the &quot;Defending Design&quot; chapter.</li>
</ul>
</div>
</div>
<div class="section" id="b4-2009-11-12">
<h2>1.1b4 (2009-11-12)<a class="headerlink" href="#b4-2009-11-12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id330">
<h3>Bug Fixes<a class="headerlink" href="#id330" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Use <code class="docutils literal notranslate"><span class="pre">alsoProvides</span></code> in the urldispatch module to attach an
interface to the request rather than <code class="docutils literal notranslate"><span class="pre">directlyProvides</span></code> to avoid
disturbing interfaces set in a NewRequest event handler.</li>
</ul>
</div>
<div class="section" id="id331">
<h3>Documentation<a class="headerlink" href="#id331" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Move 1.0.1 and previous changelog to HISTORY.txt.</li>
<li>Add examples to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> docstring.</li>
<li>Add &quot;Defending BFG Design&quot; chapter to frontpage docs.</li>
</ul>
</div>
<div class="section" id="templates">
<h3>Templates<a class="headerlink" href="#templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">ez_setup.py</span></code> and its import from all paster templates,
samples, and tutorials for <code class="docutils literal notranslate"><span class="pre">distribute</span></code> compatibility.  The
documentation already explains how to install virtualenv (which will
include some <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> package), so these files, imports and
usages were superfluous.</li>
</ul>
</div>
<div class="section" id="id332">
<h3>Deprecations<a class="headerlink" href="#id332" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">options</span></code> kw arg to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code>
function is deprecated.  In its place is the keyword argument
<code class="docutils literal notranslate"><span class="pre">settings</span></code>.  The <code class="docutils literal notranslate"><span class="pre">options</span></code> keyword continues to work, and a
deprecation warning is not emitted when it is detected.  However,
the paster templates, code samples, and documentation now make
reference to <code class="docutils literal notranslate"><span class="pre">settings</span></code> rather than <code class="docutils literal notranslate"><span class="pre">options</span></code>.  This
change/deprecation was mainly made for purposes of clarity and
symmetry with the <code class="docutils literal notranslate"><span class="pre">get_settings()</span></code> API and dicussions of
&quot;settings&quot; in various places in the docs: we want to use the same
name to refer to the same thing everywhere.</li>
</ul>
</div>
</div>
<div class="section" id="b3-2009-11-06">
<h2>1.1b3 (2009-11-06)<a class="headerlink" href="#b3-2009-11-06" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id333">
<h3>Features<a class="headerlink" href="#id333" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerRoutesMapper</span></code> testing facility added.
This testing function registers a routes &quot;mapper&quot; object in the
registry, for tests which require its presence.  This function is
documented in the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> API documentation.</li>
</ul>
</div>
<div class="section" id="id334">
<h3>Bug Fixes<a class="headerlink" href="#id334" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Compound statements that used an assignment entered into in an
interactive IPython session invoked via <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">bfgshell</span></code> no
longer fail to mutate the shell namespace correctly.  For example,
this set of statements used to fail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span>
  <span class="o">...</span><span class="p">:</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="ne">NameError</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span>
</pre></div>
</div>
<p>In this release, the <code class="docutils literal notranslate"><span class="pre">bar</span></code> function is found and the correct
output is now sent to the console.  Thanks to Daniel Holth for the
patch.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">bfgshell</span></code> command did not function properly; it was still
expecting to be able to call the root factory with a bare
<code class="docutils literal notranslate"><span class="pre">environ</span></code> rather than a request object.</p>
</li>
</ul>
</div>
<div class="section" id="id335">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id335" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.scripting.get_root</span></code> function now expects a
<code class="docutils literal notranslate"><span class="pre">request</span></code> object as its second argument rather than an
<code class="docutils literal notranslate"><span class="pre">environ</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="b2-2009-11-02">
<h2>1.1b2 (2009-11-02)<a class="headerlink" href="#b2-2009-11-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id336">
<h3>Bug Fixes<a class="headerlink" href="#id336" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Prevent PyPI installation failure due to <code class="docutils literal notranslate"><span class="pre">easy_install</span></code> trying way
too hard to guess the best version of Paste.  When <code class="docutils literal notranslate"><span class="pre">easy_install</span></code>
pulls from PyPI it reads links off various pages to determine &quot;more
up to date&quot; versions. It incorrectly picks up a link for an ancient
version of a package named &quot;Paste-Deploy-0.1&quot; (note the dash) when
trying to find the &quot;Paste&quot; distribution and somehow believes it's
the latest version of &quot;Paste&quot;.  It also somehow &quot;helpfully&quot; decides
to check out a version of this package from SVN.  We pin the Paste
dependency version to a version greater than 1.7 to work around
this <code class="docutils literal notranslate"><span class="pre">easy_install</span></code> bug.</li>
</ul>
</div>
<div class="section" id="id337">
<h3>Documentation<a class="headerlink" href="#id337" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix &quot;Hybrid&quot; narrative chapter: stop claiming that <code class="docutils literal notranslate"><span class="pre">&lt;view&gt;</span></code>
statements that mention a route_name need to come afer (in XML
order) the <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> statement which creates the route.  This
hasn't been true since 1.1a1.</li>
<li>&quot;What's New in <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 1.1&quot; document added to narrative
documentation.</li>
</ul>
</div>
<div class="section" id="id338">
<h3>Features<a class="headerlink" href="#id338" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Add a new event type: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.AfterTraversal</span></code>.  Events
of this type will be sent after traversal is completed, but before
any view code is invoked.  Like <code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.NewRequest</span></code>,
This event will have a single attribute: <code class="docutils literal notranslate"><span class="pre">request</span></code> representing
the current request.  Unlike the request attribute of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.NewRequest</span></code> however, during an AfterTraversal
event, the request object will possess attributes set by the
traverser, most notably <code class="docutils literal notranslate"><span class="pre">context</span></code>, which will be the context used
when a view is found and invoked.  The interface
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.events.IAfterTraversal</span></code> can be used to subscribe to
the event.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">subscriber</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.IAfterTraversal&quot;</span>
            <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;my.app.handle_after_traverse&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Like any framework event, a subscriber function should expect one
parameter: <code class="docutils literal notranslate"><span class="pre">event</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id339">
<h3>Dependencies<a class="headerlink" href="#id339" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Rather than depending on <code class="docutils literal notranslate"><span class="pre">chameleon.core</span></code> and <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code>
distributions individually, depend on Malthe's repackaged
<code class="docutils literal notranslate"><span class="pre">Chameleon</span></code> distribution (which includes both <code class="docutils literal notranslate"><span class="pre">chameleon.core</span></code>
and <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code>).</li>
</ul>
</div>
</div>
<div class="section" id="b1-2009-11-01">
<h2>1.1b1 (2009-11-01)<a class="headerlink" href="#b1-2009-11-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id340">
<h3>Bug Fixes<a class="headerlink" href="#id340" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The routes root factory called route factories and the default route
factory with an environ rather than a request.  One of the symptoms
of this bug: applications generated using the <code class="docutils literal notranslate"><span class="pre">bfg_zodb</span></code> paster
template in 1.1a9 did not work properly.</li>
<li>Reinstate <code class="docutils literal notranslate"><span class="pre">renderer</span></code> alias for <code class="docutils literal notranslate"><span class="pre">view_renderer</span></code> in the
<code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> ZCML directive (in-the-wild 1.1a bw compat).</li>
<li><code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> paster template: change <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code>
declarations: rename <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">view_renderer</span></code>.</li>
<li>Header values returned by the <code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code>
<code class="docutils literal notranslate"><span class="pre">remember</span></code> and <code class="docutils literal notranslate"><span class="pre">forget</span></code> methods would be of type <code class="docutils literal notranslate"><span class="pre">unicode</span></code>.
This violated the WSGI spec, causing a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> to be raised
when these headers were used under <code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>.</li>
<li>If a BFG app that had a route matching the root URL was mounted
under a path in modwsgi, ala <code class="docutils literal notranslate"><span class="pre">WSGIScriptAlias</span> <span class="pre">/myapp</span>
<span class="pre">/Users/chrism/projects/modwsgi/env/bfg.wsgi</span></code>, the home route (a
route with the path of <code class="docutils literal notranslate"><span class="pre">'/'</span></code> or <code class="docutils literal notranslate"><span class="pre">''</span></code>) would not match when the
path <code class="docutils literal notranslate"><span class="pre">/myapp</span></code> was visited (only when the path <code class="docutils literal notranslate"><span class="pre">/myapp/</span></code> was
visited).  This is now fixed: if the urldispatch root factory notes
that the PATH_INFO is empty, it converts it to a single slash before
trying to do matching.</li>
</ul>
</div>
<div class="section" id="id341">
<h3>Documentation<a class="headerlink" href="#id341" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>In <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> declarations in tutorial ZCML, rename <code class="docutils literal notranslate"><span class="pre">renderer</span></code>
attribute to <code class="docutils literal notranslate"><span class="pre">view_renderer</span></code> (fwd compat).</li>
<li>Fix various tutorials broken by 1.1a9 <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> directive changes.</li>
</ul>
</div>
<div class="section" id="id342">
<h3>Internal<a class="headerlink" href="#id342" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deal with a potential circref in the traversal module.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-10-31">
<h2>1.1a9 (2009-10-31)<a class="headerlink" href="#a9-2009-10-31" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id343">
<h3>Bug Fixes<a class="headerlink" href="#id343" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>An incorrect ZCML conflict would be encountered when the
<code class="docutils literal notranslate"><span class="pre">request_param</span></code> predicate attribute was used on the ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code>
directive if any two otherwise same-predicated views had the
combination of a predicate value with an <code class="docutils literal notranslate"><span class="pre">=</span></code> sign and one without
(e.g. <code class="docutils literal notranslate"><span class="pre">a</span></code> vs. <code class="docutils literal notranslate"><span class="pre">a=123</span></code>).</li>
</ul>
</div>
<div class="section" id="id344">
<h3>Features<a class="headerlink" href="#id344" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>In previous versions of BFG, the &quot;root factory&quot; (the <code class="docutils literal notranslate"><span class="pre">get_root</span></code>
callable passed to <code class="docutils literal notranslate"><span class="pre">make_app</span></code> or a function pointed to by the
<code class="docutils literal notranslate"><span class="pre">factory</span></code> attribute of a route) was called with a &quot;bare&quot; WSGI
environment.  In this version, and going forward, it will be called
with a <code class="docutils literal notranslate"><span class="pre">request</span></code> object.  The request object passed to the factory
implements dictionary-like methods in such a way that existing root
factory code which expects to be passed an environ will continue to
work.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">__call__</span></code> of a plugin &quot;traverser&quot; implementation (registered
as an adapter for <code class="docutils literal notranslate"><span class="pre">ITraverser</span></code> or <code class="docutils literal notranslate"><span class="pre">ITraverserFactory</span></code>) will now
receive a <em>request</em> as the single argument to its <code class="docutils literal notranslate"><span class="pre">__call__</span></code>
method.  In previous versions it was passed a WSGI <code class="docutils literal notranslate"><span class="pre">environ</span></code>
object.  The request object passed to the factory implements
dictionary-like methods in such a way that existing traverser code
which expects to be passed an environ will continue to work.</li>
<li>The ZCML <code class="docutils literal notranslate"><span class="pre">route</span></code> directive's attributes <code class="docutils literal notranslate"><span class="pre">xhr</span></code>,
<code class="docutils literal notranslate"><span class="pre">request_method</span></code>, <code class="docutils literal notranslate"><span class="pre">path_info</span></code>, <code class="docutils literal notranslate"><span class="pre">request_param</span></code>, <code class="docutils literal notranslate"><span class="pre">header</span></code> and
<code class="docutils literal notranslate"><span class="pre">accept</span></code> are now <em>route</em> predicates rather than <em>view</em> predicates.
If one or more of these predicates is specified in the route
configuration, all of the predicates must return true for the route
to match a request.  If one or more of the route predicates
associated with a route returns <code class="docutils literal notranslate"><span class="pre">False</span></code> when checked during a
request, the route match fails, and the next match in the routelist
is tried.  This differs from the previous behavior, where no route
predicates existed and all predicates were considered view
predicates, because in that scenario, the next route was not tried.</li>
</ul>
</div>
<div class="section" id="id345">
<h3>Documentation<a class="headerlink" href="#id345" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Various changes were made to narrative and API documentation
supporting the change from passing a request rather than an environ
to root factories and traversers.</li>
</ul>
</div>
<div class="section" id="id346">
<h3>Internal<a class="headerlink" href="#id346" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The request implements dictionary-like methods that mutate and query
the WSGI environ.  This is only for the purpose of backwards
compatibility with root factories which expect an <code class="docutils literal notranslate"><span class="pre">environ</span></code> rather
than a request.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.create_route_request_factory</span></code> function,
which returned a request factory was removed in favor of a
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.route_request_interface</span></code> function, which
returns an interface.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.Request</span></code> class, which is a subclass of
<code class="docutils literal notranslate"><span class="pre">webob.Request</span></code> now defines its own <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code>,
<code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__delattr__</span></code> methods, which override the
default WebOb behavior.  The default WebOb behavior stores
attributes of the request in <code class="docutils literal notranslate"><span class="pre">self.environ['webob.adhoc_attrs']</span></code>,
and retrieves them from that dictionary during a <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code>.
This behavior was undesirable for speed and &quot;expectation&quot; reasons.
Now attributes of the <code class="docutils literal notranslate"><span class="pre">request</span></code> are stored in <code class="docutils literal notranslate"><span class="pre">request.__dict__</span></code>
(as you otherwise might expect from an object that did not override
these methods).</li>
<li>The router no longer calls <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal._traverse</span></code> and
does its work &quot;inline&quot; (speed).</li>
<li>Reverse the order in which the router calls the request factory and
the root factory.  The request factory is now called first; the
resulting request is passed to the root factory.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.request_factory</span></code> function has been
removed.  Its functionality is no longer required.</li>
<li>The &quot;routes root factory&quot; that wraps the default root factory when
there are routes mentioned in the configuration now attaches an
interface to the request via <code class="docutils literal notranslate"><span class="pre">zope.interface.directlyProvides</span></code>.
This replaces logic in the (now-gone)
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.request_factory</span></code> function.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route</span></code> and <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directives now register an interface
as a named utility (retrieved from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.route_request_interface</span></code>) rather than a
request factory (the previous return value of the now-missing
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.create_route_request_factory</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.functional</span></code> module was renamed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.compat</span></code>.</li>
</ul>
</div>
<div class="section" id="id347">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id347" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Explicitly revert the feature introduced in 1.1a8: where the name
<code class="docutils literal notranslate"><span class="pre">root</span></code> is available as an attribute of the request before a
NewRequest event is emitted.  This makes some potential future
features impossible, or at least awkward (such as grouping traversal
and view lookup into a single adapter lookup).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">containment</span></code>, <code class="docutils literal notranslate"><span class="pre">attr</span></code> and <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attributes of the
<code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive were removed.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-10-27">
<h2>1.1a8 (2009-10-27)<a class="headerlink" href="#a8-2009-10-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id348">
<h3>Features<a class="headerlink" href="#id348" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">path_info</span></code> view configuration predicate.</li>
<li><code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">bfgshell</span></code> now supports IPython if it's available for
import.  Thanks to Daniel Holth for the initial patch.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerSettings</span></code> API, which is documented
in the &quot;repoze.bfg.testing&quot; API chapter.  This allows for
registration of &quot;settings&quot; values obtained via
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_settings()</span></code> for use in unit tests.</li>
<li>The name <code class="docutils literal notranslate"><span class="pre">root</span></code> is available as an attribute of the request
slightly earlier now (before a NewRequest event is emitted).
<code class="docutils literal notranslate"><span class="pre">root</span></code> is the result of the application &quot;root factory&quot;.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">max_age</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code> ZCML
directive.  If this value is set, it must be an integer representing
the number of seconds which the auth tkt cookie will survive.
Mainly, its existence allows the auth_tkt cookie to survive across
browser sessions.</li>
</ul>
</div>
<div class="section" id="id349">
<h3>Bug Fixes<a class="headerlink" href="#id349" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix bug encountered during &quot;scan&quot; (when <code class="docutils literal notranslate"><span class="pre">&lt;scan</span> <span class="pre">..&gt;</span></code> directive is
used in ZCML) introduced in 1.1a7.  Symptom: <code class="docutils literal notranslate"><span class="pre">AttributeError:</span>
<span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">__provides__</span></code> raised at startup time.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code>
ZCML directive now actually works.  When it is set to an integer
value, an authticket set-cookie header is appended to the response
whenever a request requires authentication and 'now' minus the
authticket's timestamp is greater than <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> seconds.</li>
</ul>
</div>
<div class="section" id="id350">
<h3>Documentation<a class="headerlink" href="#id350" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a chapter titled &quot;Request and Response&quot; to the narrative
documentation, content cribbed from the WebOb documentation.</li>
<li>Call out predicate attributes of ZCML directive within &quot;Views&quot;
chapter.</li>
<li>Fix route_url documentation (<code class="docutils literal notranslate"><span class="pre">_query</span></code> argument documented as
<code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">_anchor</span></code> argument documented as <code class="docutils literal notranslate"><span class="pre">anchor</span></code>).</li>
</ul>
</div>
<div class="section" id="id351">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id351" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">authtkt</span></code> authentication policy <code class="docutils literal notranslate"><span class="pre">remember</span></code> method now no
longer honors <code class="docutils literal notranslate"><span class="pre">token</span></code> or <code class="docutils literal notranslate"><span class="pre">userdata</span></code> keyword arguments.</li>
</ul>
</div>
<div class="section" id="id352">
<h3>Internal<a class="headerlink" href="#id352" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Change how <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator works when used as a class method
decorator.  In 1.1a7, the``scan``directive actually tried to grope
every class in scanned package at startup time, calling <code class="docutils literal notranslate"><span class="pre">dir</span></code>
against each found class, and subsequently invoking <code class="docutils literal notranslate"><span class="pre">getattr</span></code>
against each thing found by <code class="docutils literal notranslate"><span class="pre">dir</span></code> to see if it was a method.  This
led to some strange symptoms (e.g. <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span>
<span class="pre">attribute</span> <span class="pre">__provides__</span></code>), and was generally just a bad idea.  Now,
instead of groping classes for methods at startup time, we just
cause the <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator itself to populate the method's
class' <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> when it is used as a method decorator.  This
also requires a nasty _getframe thing but it's slightly less nasty
than the startup time groping behavior.  This is essentially a
reversion back to 1.1a6 &quot;grokking&quot; behavior plus some special magic
for using the <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator as method decorator inside the
<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> class itself.</li>
<li>The router now checks for a <code class="docutils literal notranslate"><span class="pre">global_response_headers</span></code> attribute of
the request object before returning a response.  If this value
exists, it is presumed to be a sequence of two-tuples, representing
a set of headers to append to the 'normal' response headers.  This
feature is internal, rather than exposed externally, because it's
unclear whether it will stay around in the long term.  It was added
to support the <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> feature of the authtkt
authentication policy.</li>
<li>The interface ITraverserFactory is now just an alias for ITraverser.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-10-18">
<h2>1.1a7 (2009-10-18)<a class="headerlink" href="#a7-2009-10-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id353">
<h3>Features<a class="headerlink" href="#id353" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">More than one <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code> decorator may now be stacked on top of
any number of others.  Each invocation of the decorator registers a
single view configuration.  For instance, the following combination
of decorators and a function will register two view configurations
for the same view callable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="k">import</span> <span class="n">bfg_view</span>

<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">)</span>
<span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This makes it possible to associate more than one view configuration
with a single callable without requiring any ZCML.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code> decorator can now be used against a class method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">webob</span> <span class="k">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">repoze.bfg.view</span> <span class="k">import</span> <span class="n">bfg_view</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@bfg_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;hello from </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>When the bfg_view decorator is used against a class method, a view
is registered for the <em>class</em> (it's a &quot;class view&quot; where the &quot;attr&quot;
happens to be the name of the method it is attached to), so the
class it's defined within must have a suitable constructor: one that
accepts <code class="docutils literal notranslate"><span class="pre">context,</span> <span class="pre">request</span></code> or just <code class="docutils literal notranslate"><span class="pre">request</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id354">
<h3>Documentation<a class="headerlink" href="#id354" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added <code class="docutils literal notranslate"><span class="pre">Changing</span> <span class="pre">the</span> <span class="pre">Traverser</span></code> and <code class="docutils literal notranslate"><span class="pre">Changing</span> <span class="pre">How</span>
<span class="pre">:mod:`repoze.bfg.url.model_url`</span> <span class="pre">Generates</span> <span class="pre">a</span> <span class="pre">URL</span></code> to the &quot;Hooks&quot;
narrative chapter of the docs.</li>
</ul>
</div>
<div class="section" id="id355">
<h3>Internal<a class="headerlink" href="#id355" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">ez_setup.py</span></code> and imports of it within <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.  In
the new world, and as per virtualenv setup instructions, people will
already have either setuptools or distribute.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-10-15">
<h2>1.1a6 (2009-10-15)<a class="headerlink" href="#a6-2009-10-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id356">
<h3>Features<a class="headerlink" href="#id356" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">xhr</span></code>, <code class="docutils literal notranslate"><span class="pre">accept</span></code>, and <code class="docutils literal notranslate"><span class="pre">header</span></code> view configuration
predicates to ZCML view declaration, ZCML route declaration, and
<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator.  See the <code class="docutils literal notranslate"><span class="pre">Views</span></code> narrative documentation
chapter for more information about these predicates.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">setUp</span></code> and <code class="docutils literal notranslate"><span class="pre">tearDown</span></code> functions to the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> module.  Using <code class="docutils literal notranslate"><span class="pre">setUp</span></code> in a test setup and
<code class="docutils literal notranslate"><span class="pre">tearDown</span></code> in a test teardown is now the recommended way to do
component registry setup and teardown.  Previously, it was
recommended that a single function named
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code> be called in both the test setup and
tear down.  <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code> still exists (and will
exist &quot;forever&quot; due to its widespread use); it is now just an alias
for <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> and is nominally deprecated.</li>
<li>The BFG component registry is now available in view and event
subscriber code as an attribute of the request
ie. <code class="docutils literal notranslate"><span class="pre">request.registry</span></code>.  This fact is currently undocumented
except for this note, because BFG developers never need to interact
with the registry directly anywhere else.</li>
<li>The BFG component registry now inherits from <code class="docutils literal notranslate"><span class="pre">dict</span></code>, meaning that
it can optionally be used as a simple dictionary.  <em>Component</em>
registrations performed against it via e.g. <code class="docutils literal notranslate"><span class="pre">registerUtility</span></code>,
<code class="docutils literal notranslate"><span class="pre">registerAdapter</span></code>, and similar API methods are kept in a
completely separate namespace than its dict members, so using the
its component API methods won't effect the keys and values in the
dictionary namespace.  Likewise, though the component registry
&quot;happens to be&quot; a dictionary, use of mutating dictionary methods
such as <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> will have no influence on any component
registrations made against it.  In other words, the registry object
you obtain via e.g. <code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.get_current_registry</span></code>
or <code class="docutils literal notranslate"><span class="pre">request.registry</span></code> happens to be both a component registry and
a dictionary, but using its component-registry API won't impact data
added to it via its dictionary API and vice versa.  This is a
forward compatibility move based on the goals of &quot;marco&quot;.</li>
<li>Expose and document <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.zcml_configure</span></code> API.  This
function populates a component registry from a ZCML file for testing
purposes.  It is documented in the &quot;Unit and Integration Testing&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id357">
<h3>Documentation<a class="headerlink" href="#id357" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Virtual hosting narrative docs chapter updated with info about
<code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>.</li>
<li>Point all index URLs at the literal 1.1 index (this alpha cycle may
go on a while).</li>
<li>Various tutorial test modules updated to use
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.tearDown</span></code>
methods in order to encourage this as best practice going forward.</li>
<li>Added &quot;Creating Integration Tests&quot; section to unit testing narrative
documentation chapter.  As a result, the name of the unittesting
chapter is now &quot;Unit and Integration Testing&quot;.</li>
</ul>
</div>
<div class="section" id="id358">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id358" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Importing <code class="docutils literal notranslate"><span class="pre">getSiteManager</span></code> and <code class="docutils literal notranslate"><span class="pre">get_registry</span></code> from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry</span></code> is no longer supported.  These imports were
deprecated in repoze.bfg 1.0.  Import of <code class="docutils literal notranslate"><span class="pre">getSiteManager</span></code> should
be done as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">zope.component</span> <span class="pre">import</span> <span class="pre">getSiteManager</span></code>.  Import of
<code class="docutils literal notranslate"><span class="pre">get_registry</span></code> should be done as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">repoze.bfg.threadlocal</span>
<span class="pre">import</span> <span class="pre">get_current_registry</span></code>.  This was done to prevent a circular
import dependency.</li>
<li>Code bases which alternately invoke both
<code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code>
(treating them equivalently, using them interchangeably) in the
setUp/tearDown of unit tests will begin to experience test failures
due to lack of test isolation.  The &quot;right&quot; mechanism is
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code> (or the combination of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.tearDown</span></code>). but a good number of legacy
codebases will use <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> instead.  We
support <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> but not in combination with
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code> in the same codebase.  You should use
one or the other test cleanup function in a single codebase, but not
both.</li>
</ul>
</div>
<div class="section" id="id359">
<h3>Internal<a class="headerlink" href="#id359" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Created new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.configuration</span></code> module which assumes
responsibilities previously held by the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router</span></code> modules (avoid a circular import dependency).</li>
<li>The result of the <code class="docutils literal notranslate"><span class="pre">zope.component.getSiteManager</span></code> function in unit
tests set up with <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.cleanUp</span></code> or
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.setUp</span></code> will be an instance of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.Registry</span></code> instead of the global
<code class="docutils literal notranslate"><span class="pre">zope.component.globalregistry.base</span></code> registry.  This also means
that the threadlocal ZCA API functions such as <code class="docutils literal notranslate"><span class="pre">getAdapter</span></code> and
<code class="docutils literal notranslate"><span class="pre">getUtility</span></code> as well as internal BFG machinery (such as
<code class="docutils literal notranslate"><span class="pre">model_url</span></code> and <code class="docutils literal notranslate"><span class="pre">route_url</span></code>) will consult this registry within
unit tests. This is a forward compatibility move based on the goals
of &quot;marco&quot;.</li>
<li>Removed <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.addCleanUp</span></code> function and associated
module-scope globals.  This was never an API.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-10-10">
<h2>1.1a5 (2009-10-10)<a class="headerlink" href="#a5-2009-10-10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id360">
<h3>Documentation<a class="headerlink" href="#id360" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Change &quot;Traversal + ZODB&quot; and &quot;URL Dispatch + SQLAlchemy&quot; Wiki
tutorials to make use of the new-to-1.1 &quot;renderer&quot; feature (return
dictionaries from all views).</li>
<li>Add tests to the &quot;URL Dispatch + SQLAlchemy&quot; tutorial after the
&quot;view&quot; step.</li>
<li>Added a diagram of model graph traversal to the &quot;Traversal&quot;
narrative chapter of the documentation.</li>
<li>An <code class="docutils literal notranslate"><span class="pre">exceptions</span></code> API chapter was added, documenting the new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions</span></code> module.</li>
<li>Describe &quot;request-only&quot; view calling conventions inside the
urldispatch narrative chapter, where it's most helpful.</li>
<li>Add a diagram which explains the operation of the BFG router to the
&quot;Router&quot; narrative chapter.</li>
</ul>
</div>
<div class="section" id="id361">
<h3>Features<a class="headerlink" href="#id361" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a new <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> API: <code class="docutils literal notranslate"><span class="pre">registerRoute</span></code>, for
registering routes to satisfy calls to
e.g. <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> in unit tests.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">notfound</span></code> and <code class="docutils literal notranslate"><span class="pre">forbidden</span></code> ZCML directives now accept the
following addtional attributes: <code class="docutils literal notranslate"><span class="pre">attr</span></code>, <code class="docutils literal notranslate"><span class="pre">renderer</span></code>, and
<code class="docutils literal notranslate"><span class="pre">wrapper</span></code>.  These have the same meaning as they do in the context
of a ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive.</li>
<li>For behavior like Django's <code class="docutils literal notranslate"><span class="pre">APPEND_SLASH=True</span></code>, use the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.append_slash_notfound_view</span></code> view as the Not Found
view in your application.  When this view is the Not Found view
(indicating that no view was found), and any routes have been
defined in the configuration of your application, if the value of
<code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> does not already end in a slash, and if the value of
<code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> <em>plus</em> a slash matches any route's path, do an HTTP
redirect to the slash-appended PATH_INFO.  Note that this will
<em>lose</em> <code class="docutils literal notranslate"><span class="pre">POST</span></code> data information (turning it into a GET), so you
shouldn't rely on this to redirect POST requests.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.lineage</span></code> slightly.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.encode.urlencode</span></code> (nee'
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.urlencode</span></code>) slightly.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code>.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></code> slightly.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.traverse</span></code> slightly.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> slightly.</li>
<li>Speed up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> slightly.</li>
<li>Sped up <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.ModelGraphTraverser:__call__</span></code>
slightly.</li>
<li>Minor speedup of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.Router.__call__</span></code>.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions</span></code> module was created to house exceptions
that were previously sprinkled through various modules.</li>
</ul>
</div>
<div class="section" id="id362">
<h3>Internal<a class="headerlink" href="#id362" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Move <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal._url_quote</span></code> into <code class="docutils literal notranslate"><span class="pre">repoze.bfg.encode</span></code>
as <code class="docutils literal notranslate"><span class="pre">url_quote</span></code>.</li>
</ul>
</div>
<div class="section" id="id363">
<h3>Deprecations<a class="headerlink" href="#id363" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The import of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.NotFound</span></code> is deprecated in favor of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.NotFound</span></code>.  The old location still
functions, but emits a deprecation warning.</li>
<li>The import of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.Unauthorized</span></code> is deprecated in
favor of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.exceptions.Forbidden</span></code>.  The old location
still functions but emits a deprecation warning.  The rename from
<code class="docutils literal notranslate"><span class="pre">Unauthorized</span></code> to <code class="docutils literal notranslate"><span class="pre">Forbidden</span></code> brings parity to the name of
the exception and the system view it invokes when raised.</li>
</ul>
</div>
<div class="section" id="id364">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id364" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">We previously had a Unicode-aware wrapper for the
<code class="docutils literal notranslate"><span class="pre">urllib.urlencode</span></code> function named <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.urlencode</span></code>
which delegated to the stdlib function, but which marshalled all
unicode values to utf-8 strings before calling the stdlib version.
A newer replacement now lives in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.encode</span></code> The
replacement does not delegate to the stdlib.</p>
<p>The replacement diverges from the stdlib implementation and the
previous <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url</span></code> url implementation inasmuch as its
<code class="docutils literal notranslate"><span class="pre">doseq</span></code> argument is now a decoy: it always behaves in the
<code class="docutils literal notranslate"><span class="pre">doseq=True</span></code> way (which is the only sane behavior) for speed
purposes.</p>
<p>The old import location (<code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.urlencode</span></code>) still
functions and has not been deprecated.</p>
</li>
<li><p class="first">In 0.8a7, the return value expected from an object implementing
<code class="docutils literal notranslate"><span class="pre">ITraverserFactory</span></code> was changed from a sequence of values to a
dictionary containing the keys <code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">view_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">subpath</span></code>, <code class="docutils literal notranslate"><span class="pre">traversed</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code>,
and <code class="docutils literal notranslate"><span class="pre">root</span></code>.  Until now, old-style traversers which returned a
sequence have continued to work but have generated a deprecation
warning.  In this release, traversers which return a sequence
instead of a dictionary will no longer work.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-09-23">
<h2>1.1a4 (2009-09-23)<a class="headerlink" href="#a4-2009-09-23" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id365">
<h3>Bug Fixes<a class="headerlink" href="#id365" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>On 64-bit Linux systems, views that were members of a multiview
(orderings of views with predicates) were not evaluated in the
proper order.  Symptom: in a configuration that had two views with
the same name but one with a <code class="docutils literal notranslate"><span class="pre">request_method=POST</span></code> predicate and
one without, the one without the predicate would be called
unconditionally (even if the request was a POST request).  Thanks
much to Sebastien Douche for providing the buildbots that pointed
this out.</li>
</ul>
</div>
<div class="section" id="id366">
<h3>Documentation<a class="headerlink" href="#id366" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a tutorial which explains how to use <code class="docutils literal notranslate"><span class="pre">repoze.session</span></code>
(ZODB-based sessions) in a ZODB-based repoze.bfg app.</li>
<li>Added a tutorial which explains how to add ZEO to a ZODB-based
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> application.</li>
<li>Added a tutorial which explains how to run a <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>
application under <a class="reference external" href="http://code.google.com/p/modwsgi/">mod_wsgi</a>.
See &quot;Running a repoze.bfg Application under mod_wsgi&quot; in the
tutorials section of the documentation.</li>
</ul>
</div>
<div class="section" id="id367">
<h3>Features<a class="headerlink" href="#id367" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.static_url</span></code> API which is capable of
generating URLs to static resources defined by the <code class="docutils literal notranslate"><span class="pre">&lt;static&gt;</span></code> ZCML
directive.  See the &quot;Views&quot; narrative chapter's section titled
&quot;Generating Static Resource URLs&quot; for more information.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">string</span></code> renderer.  This renderer converts a non-Response
return value of any view callble into a string.  It is documented in
the &quot;Views&quot; narrative chapter.</li>
<li>Give the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive the <code class="docutils literal notranslate"><span class="pre">view_attr</span></code> and
<code class="docutils literal notranslate"><span class="pre">view_renderer</span></code> parameters (bring up to speed with 1.1a3
features).  These can also be spelled as <code class="docutils literal notranslate"><span class="pre">attr</span></code> and <code class="docutils literal notranslate"><span class="pre">renderer</span></code>.</li>
</ul>
</div>
<div class="section" id="id368">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id368" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>An object implementing the <code class="docutils literal notranslate"><span class="pre">IRenderer</span></code> interface (and
<code class="docutils literal notranslate"><span class="pre">ITemplateRenderer`,</span> <span class="pre">which</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">subclass</span> <span class="pre">of</span> <span class="pre">``IRenderer</span></code>) must now
accept an extra <code class="docutils literal notranslate"><span class="pre">system</span></code> argument in its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method
implementation.  Values computed by the system (as opposed to by the
view) are passed by the system in the <code class="docutils literal notranslate"><span class="pre">system</span></code> parameter, which
will always be a dictionary.  Keys in the dictionary include:
<code class="docutils literal notranslate"><span class="pre">view</span></code> (the view object that returned the value),
<code class="docutils literal notranslate"><span class="pre">renderer_name</span></code> (the template name or simple name of the
renderer), <code class="docutils literal notranslate"><span class="pre">context</span></code> (the context object passed to the view), and
<code class="docutils literal notranslate"><span class="pre">request</span></code> (the request object passed to the view).  Previously
only ITemplateRenderers received system arguments as elements inside
the main <code class="docutils literal notranslate"><span class="pre">value</span></code> dictionary.</li>
</ul>
</div>
<div class="section" id="id369">
<h3>Internal<a class="headerlink" href="#id369" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The way <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> declarations are scanned for has been modified.
This should have no external effects.</li>
<li>Speed: do not register an ITraverserFactory in configure.zcml;
instead rely on queryAdapter and a manual default to
ModelGraphTraverser.</li>
<li>Speed: do not register an IContextURL in configure.zcml; instead
rely on queryAdapter and a manual default to TraversalContextURL.</li>
<li>General speed microimprovements for helloworld benchmark: replace
try/excepts with statements which use 'in' keyword.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-09-16">
<h2>1.1a3 (2009-09-16)<a class="headerlink" href="#a3-2009-09-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id370">
<h3>Documentation<a class="headerlink" href="#id370" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The &quot;Views&quot; narrative chapter in the documentation has been updated
extensively to discuss &quot;renderers&quot;.</li>
</ul>
</div>
<div class="section" id="id371">
<h3>Features<a class="headerlink" href="#id371" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attribute has been added to view configurations,
replacing the previous (1.1a2) version's <code class="docutils literal notranslate"><span class="pre">template</span></code> attribute.  A
&quot;renderer&quot; is an object which accepts the return value of a view and
converts it to a string.  This includes, but is not limited to,
templating systems.</li>
<li>A new interface named <code class="docutils literal notranslate"><span class="pre">IRenderer</span></code> was added.  The existing
interface, <code class="docutils literal notranslate"><span class="pre">ITemplateRenderer</span></code> now derives from this new
interface.  This interface is internal.</li>
<li>A new interface named <code class="docutils literal notranslate"><span class="pre">IRendererFactory</span></code> was added.  An existing
interface named <code class="docutils literal notranslate"><span class="pre">ITemplateRendererFactory</span></code> now derives from this
interface.  This interface is internal.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">view</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive is no longer
required if the ZCML directive also has a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attribute.
This is useful when the renderer is a template renderer and no names
need be passed to the template at render time.</li>
<li>A new zcml directive <code class="docutils literal notranslate"><span class="pre">renderer</span></code> has been added.  It is documented
in the &quot;Views&quot; narrative chapter of the documentation.</li>
<li>A ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive (and the associated <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>
decorator) can now accept a &quot;wrapper&quot; value.  If a &quot;wrapper&quot; value
is supplied, it is the value of a separate view's <em>name</em> attribute.
When a view with a <code class="docutils literal notranslate"><span class="pre">wrapper</span></code> attribute is rendered, the &quot;inner&quot;
view is first rendered normally.  Its body is then attached to the
request as &quot;wrapped_body&quot;, and then a wrapper view name is looked up
and rendered (using <code class="docutils literal notranslate"><span class="pre">repoze.bfg.render_view_to_response</span></code>), passed
the request and the context.  The wrapper view is assumed to do
something sensible with <code class="docutils literal notranslate"><span class="pre">request.wrapped_body</span></code>, usually inserting
its structure into some other rendered template.  This feature makes
it possible to specify (potentially nested) &quot;owrap&quot; relationships
between views using only ZCML or decorators (as opposed always using
ZPT METAL and analogues to wrap view renderings in outer wrappers).</li>
</ul>
</div>
<div class="section" id="id372">
<h3>Dependencies<a class="headerlink" href="#id372" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>When used under Python &lt; 2.6, BFG now has an installation time
dependency on the <code class="docutils literal notranslate"><span class="pre">simplejson</span></code> package.</li>
</ul>
</div>
<div class="section" id="id373">
<h3>Deprecations<a class="headerlink" href="#id373" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></code> API has been
deprecated in favor of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerTemplateRenderer</span></code>.  A deprecation
warning is <em>not</em> issued at import time for the former name; it will
exist &quot;forever&quot;; its existence has been removed from the
documentation, however.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.templating.renderer_from_cache</span></code> function has been
moved to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.renderer.template_renderer_factory</span></code>.  This
was never an API, but code in the wild was spotted that used it.  A
deprecation warning is issued at import time for the former.</li>
</ul>
</div>
<div class="section" id="id374">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id374" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">ITemplateRenderer</span></code> interface has been changed.  Previously
its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method accepted <code class="docutils literal notranslate"><span class="pre">**kw</span></code>.  It now accepts a single
positional parameter named <code class="docutils literal notranslate"><span class="pre">kw</span></code> (REVISED: it accepts two
positional parameters as of 1.1a4: <code class="docutils literal notranslate"><span class="pre">value</span></code> and <code class="docutils literal notranslate"><span class="pre">system</span></code>).  This
is mostly an internal change, but it was exposed in APIs in one
place: if you've used the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></code> API in your tests with
a custom &quot;renderer&quot; argument with your own renderer implementation,
you will need to change that renderer implementation to accept
<code class="docutils literal notranslate"><span class="pre">kw</span></code> instead of <code class="docutils literal notranslate"><span class="pre">**kw</span></code> in its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method (REVISED: make
it accept <code class="docutils literal notranslate"><span class="pre">value</span></code> and <code class="docutils literal notranslate"><span class="pre">system</span></code> positional arguments as of 1.1a4).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">ITemplateRendererFactory</span></code> interface has been changed.
Previously its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method accepted an <code class="docutils literal notranslate"><span class="pre">auto_reload</span></code>
keyword parameter.  Now its <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method accepts no keyword
parameters.  Renderers are now themselves responsible for
determining details of auto-reload.  This is purely an internal
change.  This interface was never external.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">template_renderer</span></code> ZCML directive introduced in 1.1a2 has
been removed.  It has been replaced by the <code class="docutils literal notranslate"><span class="pre">renderer</span></code> directive.</li>
<li>The previous release (1.1a2) added a view configuration attribute
named <code class="docutils literal notranslate"><span class="pre">template</span></code>.  In this release, the attribute has been renamed
to <code class="docutils literal notranslate"><span class="pre">renderer</span></code>.  This signifies that the attribute is more generic:
it can now be not just a template name but any renderer name (ala
<code class="docutils literal notranslate"><span class="pre">json</span></code>).</li>
<li>In the previous release (1.1a2), the Chameleon text template
renderer was used if the system didn't associate the <code class="docutils literal notranslate"><span class="pre">template</span></code>
view configuration value with a filename with a &quot;known&quot; extension.
In this release, you must use a <code class="docutils literal notranslate"><span class="pre">renderer</span></code> attribute which is a
path that ends with a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> extension
(e.g. <code class="docutils literal notranslate"><span class="pre">templates/foo.txt</span></code>) to use the Chameleon text renderer.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-09-14">
<h2>1.1a2 (2009-09-14)<a class="headerlink" href="#a2-2009-09-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id375">
<h3>Features<a class="headerlink" href="#id375" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive (and the associated <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>
decorator) can now accept an &quot;attr&quot; value.  If an &quot;attr&quot; value is
supplied, it is considered a method named of the view object to be
called when the response is required.  This is typically only good
for views that are classes or instances (not so useful for
functions, as functions typically have no methods other than
<code class="docutils literal notranslate"><span class="pre">__call__</span></code>).</li>
<li>A ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive (and the associated <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code>
decorator) can now accept a &quot;template&quot; value.  If a &quot;template&quot; value
is supplied, and the view callable returns a dictionary, the
associated template is rendered with the dictionary as keyword
arguments.  See the section named &quot;Views That Have a <code class="docutils literal notranslate"><span class="pre">template</span></code>&quot;
in the &quot;Views&quot; narrative documentation chapter for more information.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-09-06">
<h2>1.1a1 (2009-09-06)<a class="headerlink" href="#a1-2009-09-06" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id376">
<h3>Bug Fixes<a class="headerlink" href="#id376" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>&quot;tests&quot; module removed from the bfg_alchemy paster template; these
tests didn't work.</li>
<li>Bugfix: the <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> for the ZCML &quot;route&quot; directive was
incorrect.  It was possible to register two routes that collided
without the system spitting out a ConfigurationConflictError at
startup time.</li>
</ul>
</div>
<div class="section" id="id377">
<h3>Features<a class="headerlink" href="#id377" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Feature addition: view predicates.  These are exposed as the
<code class="docutils literal notranslate"><span class="pre">request_method</span></code>, <code class="docutils literal notranslate"><span class="pre">request_param</span></code>, and <code class="docutils literal notranslate"><span class="pre">containment</span></code>
attributes of a ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> declaration, or the respective
arguments to a <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code> decorator.  View predicates can be used
to register a view for a more precise set of environment parameters
than was previously possible.  For example, you can register two
views with the same <code class="docutils literal notranslate"><span class="pre">name</span></code> with different <code class="docutils literal notranslate"><span class="pre">request_param</span></code>
attributes.  If the <code class="docutils literal notranslate"><span class="pre">request.params</span></code> dict contains 'foo'
(request_param=&quot;foo&quot;), one view might be called; if it contains
'bar' (request_param=&quot;bar&quot;), another view might be called.
<code class="docutils literal notranslate"><span class="pre">request_param</span></code> can also name a key/value pair ala <code class="docutils literal notranslate"><span class="pre">foo=123</span></code>.
This will match only when the <code class="docutils literal notranslate"><span class="pre">foo</span></code> key is in the request.params
dict and it has the value '123'.  This particular example makes it
possible to write separate view functions for different form
submissions.  The other predicates, <code class="docutils literal notranslate"><span class="pre">containment</span></code> and
<code class="docutils literal notranslate"><span class="pre">request_method</span></code> work similarly.  <code class="docutils literal notranslate"><span class="pre">containment</span></code> is a view
predicate that will match only when the context's graph lineage has
an object possessing a particular class or interface, for example.
<code class="docutils literal notranslate"><span class="pre">request_method</span></code> is a view predicate that will match when the HTTP
<code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code> equals some string (eg. 'POST').</li>
<li>The <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code> decorator now accepts three additional arguments:
<code class="docutils literal notranslate"><span class="pre">request_method</span></code>, <code class="docutils literal notranslate"><span class="pre">request_param</span></code>, and <code class="docutils literal notranslate"><span class="pre">containment</span></code>.
<code class="docutils literal notranslate"><span class="pre">request_method</span></code> is used when you'd like the view to match only a
request with a particular HTTP <code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code>; a string naming
the <code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code> can also be supplied as <code class="docutils literal notranslate"><span class="pre">request_type</span></code> for
backwards compatibility.  <code class="docutils literal notranslate"><span class="pre">request_param</span></code> is used when you'd like
a view to match only a request that contains a particular
<code class="docutils literal notranslate"><span class="pre">request.params</span></code> key (with or without a value).  <code class="docutils literal notranslate"><span class="pre">containment</span></code>
is used when you'd like to match a request that has a context that
has some class or interface in its graph lineage.  These are
collectively known as &quot;view predicates&quot;.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive now honors <code class="docutils literal notranslate"><span class="pre">view_request_method</span></code>,
<code class="docutils literal notranslate"><span class="pre">view_request_param</span></code> and <code class="docutils literal notranslate"><span class="pre">view_containment</span></code> attributes, which
pass along these values to the associated view if any is provided.
Additionally, the <code class="docutils literal notranslate"><span class="pre">request_type</span></code> attribute can now be spelled as
<code class="docutils literal notranslate"><span class="pre">view_request_type</span></code>, and <code class="docutils literal notranslate"><span class="pre">permission</span></code> can be spelled as
<code class="docutils literal notranslate"><span class="pre">view_permission</span></code>.  Any attribute which starts with <code class="docutils literal notranslate"><span class="pre">view_</span></code> can
now be spelled without the <code class="docutils literal notranslate"><span class="pre">view_</span></code> prefix, so <code class="docutils literal notranslate"><span class="pre">view_for</span></code> can be
spelled as <code class="docutils literal notranslate"><span class="pre">for</span></code> now, etc.  Both forms are documented in the
urldispatch narraitve documentation chapter.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">request_param</span></code> ZCML view directive attribute (and its
<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator cousin) can now specify both a key and a
value.  For example, <code class="docutils literal notranslate"><span class="pre">request_param=&quot;foo=123&quot;</span></code> means that the foo
key must have a value of <code class="docutils literal notranslate"><span class="pre">123</span></code> for the view to &quot;match&quot;.</li>
<li>Allow <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.find_interface</span></code> API to use a class
object as the argument to compare against the <code class="docutils literal notranslate"><span class="pre">model</span></code> passed in.
This means you can now do <code class="docutils literal notranslate"><span class="pre">find_interface(model,</span> <span class="pre">SomeClass)</span></code> and
the first object which is found in the lineage which has
<code class="docutils literal notranslate"><span class="pre">SomeClass</span></code> as its class (or the first object found which has
<code class="docutils literal notranslate"><span class="pre">SomeClass</span></code> as any of its superclasses) will be returned.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">static</span></code> ZCML directive which registers a route for a view
that serves up files in a directory.  See the &quot;Views&quot; narrative
documentation chapter's &quot;Serving Static Resources Using a ZCML
Directive&quot; section for more information.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.static</span></code> class now accepts a string as its
first argument (&quot;root_dir&quot;) that represents a package-relative name
e.g. <code class="docutils literal notranslate"><span class="pre">somepackage:foo/bar/static</span></code>.  This is now the preferred
mechanism for spelling package-relative static paths using this
class.  A <code class="docutils literal notranslate"><span class="pre">package_name</span></code> keyword argument has been left around for
backwards compatibility.  If it is supplied, it will be honored.</li>
<li>The API <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerView</span></code> now takes a
<code class="docutils literal notranslate"><span class="pre">permission</span></code> argument.  Use this instead of using
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerViewPermission</span></code>.</li>
<li>The ordering of route declarations vs. the ordering of view
declarations that use a &quot;route_name&quot; in ZCML no longer matters.
Previously it had been impossible to use a route_name from a route
that had not yet been defined in ZCML (order-wise) within a &quot;view&quot;
declaration.</li>
<li>The repoze.bfg router now catches both
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.Unauthorized</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.NotFound</span></code> exceptions while rendering a view.
When the router catches an <code class="docutils literal notranslate"><span class="pre">Unauthorized</span></code>, it returns the
registered forbidden view.  When the router catches a <code class="docutils literal notranslate"><span class="pre">NotFound</span></code>,
it returns the registered notfound view.</li>
</ul>
</div>
<div class="section" id="id378">
<h3>Internal<a class="headerlink" href="#id378" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Change urldispatch internals: Route object is now constructed using
a path, a name, and a factory instead of a name, a matcher, a
generator, and a factory.</li>
<li>Move (non-API) default_view, default_forbidden_view, and
default_notfound_view functions into the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code> module
(moved from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router</span></code>).</li>
<li>Removed ViewPermissionFactory from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code>.  View
permission checking is now done by registering and looking up an
ISecuredView.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">static</span></code> ZCML directive now uses a custom root factory when
constructing a route.</li>
<li>The interface <code class="docutils literal notranslate"><span class="pre">IRequestFactories</span></code> was removed from the
repoze.bfg.interfaces module.  This interface was never an API.</li>
<li>The function named <code class="docutils literal notranslate"><span class="pre">named_request_factories</span></code> and the data
structure named <code class="docutils literal notranslate"><span class="pre">DEFAULT_REQUEST_FACTORIES</span></code> have been removed from
the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request</span></code> module.  These were never APIs.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">IViewPermissionFactory</span></code> interface has been removed.  This was
never an API.</li>
</ul>
</div>
<div class="section" id="id379">
<h3>Documentation<a class="headerlink" href="#id379" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Request-only-convention examples in the &quot;Views&quot; narrative
documentation were broken.</li>
<li>Fixed documentation bugs related to forget and remember in security API
docs.</li>
<li>Fixed documentation for <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.static</span></code> (in narrative
<code class="docutils literal notranslate"><span class="pre">Views</span></code> chapter).</li>
</ul>
</div>
<div class="section" id="id380">
<h3>Deprecations<a class="headerlink" href="#id380" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The API <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerViewPermission</span></code> has been
deprecated.</li>
</ul>
</div>
<div class="section" id="id381">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id381" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The interfaces <code class="docutils literal notranslate"><span class="pre">IPOSTRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">IGETRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">IPUTRequest</span></code>,
<code class="docutils literal notranslate"><span class="pre">IDELETERequest</span></code>, and <code class="docutils literal notranslate"><span class="pre">IHEADRequest</span></code> have been removed from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code> module.  These were not documented as APIs
post-1.0.  Instead of using one of these, use a <code class="docutils literal notranslate"><span class="pre">request_method</span></code>
ZCML attribute or <code class="docutils literal notranslate"><span class="pre">request_method</span></code> bfg_view decorator parameter
containing an HTTP method name (one of <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
<code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>) instead of one of these interfaces if you were
using one explicitly.  Passing a string in the set (<code class="docutils literal notranslate"><span class="pre">GET</span></code>,
<code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>) as a <code class="docutils literal notranslate"><span class="pre">request_type</span></code>
argument will work too.  Rationale: instead of relying on interfaces
attached to the request object, BFG now uses a &quot;view predicate&quot; to
determine the request type.</p>
</li>
<li><p class="first">Views registered without the help of the ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> directive are
now responsible for performing their own authorization checking.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">registry_manager</span></code> backwards compatibility alias importable
from &quot;repoze.bfg.registry&quot;, deprecated since repoze.bfg 0.9 has been
removed.  If you are tring to use the registry manager within a
debug script of your own, use a combination of the
&quot;repoze.bfg.paster.get_app&quot; and &quot;repoze.bfg.scripting.get_root&quot; APIs
instead.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">INotFoundAppFactory</span></code> interface has been removed; it has
been deprecated since repoze.bfg 0.9.  If you have something like
the following in your <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">utility</span> <span class="n">provides</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.INotFoundAppFactory&quot;</span>
         <span class="n">component</span><span class="o">=</span><span class="s2">&quot;helloworld.factories.notfound_app_factory&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Replace it with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">notfound</span>
    <span class="n">view</span><span class="o">=</span><span class="s2">&quot;helloworld.views.notfound_view&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>See &quot;Changing the Not Found View&quot; in the &quot;Hooks&quot; chapter of the
documentation for more information.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">IUnauthorizedAppFactory</span></code> interface has been removed; it has
been deprecated since repoze.bfg 0.9.  If you have something like
the following in your <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">utility</span> <span class="n">provides</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.IUnauthorizedAppFactory&quot;</span>
         <span class="n">component</span><span class="o">=</span><span class="s2">&quot;helloworld.factories.unauthorized_app_factory&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Replace it with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">forbidden</span>
    <span class="n">view</span><span class="o">=</span><span class="s2">&quot;helloworld.views.forbidden_view&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>See &quot;Changing the Forbidden View&quot; in the &quot;Hooks&quot; chapter of the
documentation for more information.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">ISecurityPolicy</span></code>-based security policies, deprecated since
repoze.bfg 0.9, have been removed.  If you have something like this
in your <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>, it will no longer work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">utility</span>
  <span class="n">provides</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;</span>
  <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.security.RemoteUserInheritingACLSecurityPolicy&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>If ZCML like the above exists in your application, you will receive
an error at startup time.  Instead of the above, you'll need
something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">remoteuserauthenticationpolicy</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">aclauthorizationpolicy</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>This is just an example.  See the &quot;Security&quot; chapter of the
repoze.bfg documentation for more information about configuring
security policies.</p>
</li>
<li><p class="first">Custom ZCML directives which register an authentication or
authorization policy (ala &quot;authtktauthenticationpolicy&quot; or
&quot;aclauthorizationpolicy&quot;) should register the policy &quot;eagerly&quot; in
the ZCML directive instead of from within a ZCML action.  If an
authentication or authorization policy is not found in the component
registry by the view machinery during deferred ZCML processing, view
security will not work as expected.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id382">
<h2>1.0.1 (2009-07-22)<a class="headerlink" href="#id382" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Added support for <code class="docutils literal notranslate"><span class="pre">has_resource</span></code>, <code class="docutils literal notranslate"><span class="pre">resource_isdir</span></code>, and
<code class="docutils literal notranslate"><span class="pre">resource_listdir</span></code> to the resource &quot;OverrideProvider&quot;; this fixes
a bug with a symptom that a file could not be overridden in a
resource directory unless a file with the same name existed in the
original directory being overridden.</li>
<li>Fixed documentation bug showing invalid test for values from the
<code class="docutils literal notranslate"><span class="pre">matchdict</span></code>:  they are stored as attributes of the <code class="docutils literal notranslate"><span class="pre">Article</span></code>, rather
than subitems.</li>
<li>Fixed documentation bug showing wrong environment key for the <code class="docutils literal notranslate"><span class="pre">matchdict</span></code>
produced by the matching route.</li>
<li>Added a workaround for a bug in Python 2.6, 2.6.1, and 2.6.2 having
to do with a recursion error in the mimetypes module when trying to
serve static files from Paste's FileApp:
<a class="reference external" href="http://bugs.python.org/issue5853">http://bugs.python.org/issue5853</a>.  Symptom: File
&quot;/usr/lib/python2.6/mimetypes.py&quot;, line 244, in guess_type return
guess_type(url, strict) RuntimeError: maximum recursion depth
exceeded.  Thanks to Armin Ronacher for identifying the symptom and
pointing out a fix.</li>
<li>Minor edits to tutorials for accuracy based on feedback.</li>
<li>Declared Paste and PasteDeploy dependencies.</li>
</ul>
</div>
<div class="section" id="id383">
<h2>1.0 (2009-07-05)<a class="headerlink" href="#id383" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Retested and added some content to GAE tutorial.</li>
<li>Edited &quot;Extending&quot; narrative docs chapter.</li>
<li>Added &quot;Deleting the Database&quot; section to the &quot;Defining Models&quot;
chapter of the traversal wiki tutorial.</li>
<li>Spell checking of narratives and tutorials.</li>
</ul>
</div>
<div class="section" id="b2-2009-07-03">
<h2>1.0b2 (2009-07-03)<a class="headerlink" href="#b2-2009-07-03" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">remoteuserauthenticationpolicy</span></code> ZCML directive didn't work
without an <code class="docutils literal notranslate"><span class="pre">environ_key</span></code> directive (didn't match docs).</li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">configure_zcml</span></code> filespec check on Windows.  Previously if an
absolute filesystem path including a drive letter was passed as
<code class="docutils literal notranslate"><span class="pre">filename</span></code> (or as <code class="docutils literal notranslate"><span class="pre">configure_zcml</span></code> in the options dict) to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code>, it would be treated as a
package:resource_name specification.</li>
<li>Fix inaccuracies and import errors in bfgwiki (traversal+ZODB) and
bfgwiki2 (urldispatch+SA) tutorials.</li>
<li>Use bfgsite index for all tutorial setup.cfg files.</li>
<li>Full documentation grammar/style/spelling audit.</li>
</ul>
</div>
<div class="section" id="b1-2009-07-02">
<h2>1.0b1 (2009-07-02)<a class="headerlink" href="#b1-2009-07-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id384">
<h3>Features<a class="headerlink" href="#id384" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Allow a Paste config file (<code class="docutils literal notranslate"><span class="pre">configure_zcml</span></code>) value or an
environment variable (<code class="docutils literal notranslate"><span class="pre">BFG_CONFIGURE_ZCML</span></code>) to name a ZCML file
(optionally package-relative) that will be used to bootstrap the
application.  Previously, the integrator could not influence which
ZCML file was used to do the boostrapping (only the original
application developer could do so).</li>
</ul>
</div>
<div class="section" id="id385">
<h3>Documentation<a class="headerlink" href="#id385" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a &quot;Resources&quot; chapter to the narrative documentation which
explains how to override resources within one package from another
package.</li>
<li>Added an &quot;Extending&quot; chapter to the narrative documentation which
explains how to extend or modify an existing BFG application using
another Python package and ZCML.</li>
</ul>
</div>
</div>
<div class="section" id="a9-2009-07-01">
<h2>1.0a9 (2009-07-01)<a class="headerlink" href="#a9-2009-07-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id386">
<h3>Features<a class="headerlink" href="#id386" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make it possible to pass strings in the form
&quot;package_name:relative/path&quot; to APIs like <code class="docutils literal notranslate"><span class="pre">render_template</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code>, and <code class="docutils literal notranslate"><span class="pre">get_template</span></code>.  Sometimes
the package in which a caller lives is a direct namespace package,
so the module which is returned is semi-useless for navigating from.
In this way, the caller can control the horizontal and vertical of
where things get looked up from.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-07-01">
<h2>1.0a8 (2009-07-01)<a class="headerlink" href="#a8-2009-07-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id387">
<h3>Deprecations<a class="headerlink" href="#id387" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Deprecate the <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> and <code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code>
arguments to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code>.  Instead, developers
should use the various authentication policy ZCML directives
(<code class="docutils literal notranslate"><span class="pre">repozewho1authenticationpolicy</span></code>,
<code class="docutils literal notranslate"><span class="pre">remoteuserauthenticationpolicy</span></code> and
<code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code>) and the <cite>aclauthorizationpolicy`</cite>
authorization policy directive as described in the changes to the
&quot;Security&quot; narrative documenation chapter and the wiki tutorials.</li>
</ul>
</div>
<div class="section" id="id388">
<h3>Features<a class="headerlink" href="#id388" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add three new ZCML directives which configure authentication
policies:<ul>
<li><code class="docutils literal notranslate"><span class="pre">repozewho1authenticationpolicy</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">remoteuserauthenticationpolicy</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">authtktauthenticationpolicy</span></code></li>
</ul>
</li>
<li>Add a new ZCML directive which configures an ACL authorization
policy named <code class="docutils literal notranslate"><span class="pre">aclauthorizationpolicy</span></code>.</li>
</ul>
</div>
<div class="section" id="id389">
<h3>Bug Fixes<a class="headerlink" href="#id389" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Bug fix: when a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.resource.PackageOverrides</span></code> class was
instantiated, and the package it was overriding already had a
<code class="docutils literal notranslate"><span class="pre">__loader__</span></code> attribute, it would fail at startup time, even if the
<code class="docutils literal notranslate"><span class="pre">__loader__</span></code> attribute was another PackageOverrides instance.  We
now replace any <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> that is also a PackageOverrides
instance.  Symptom: <code class="docutils literal notranslate"><span class="pre">ConfigurationExecutionError:</span> <span class="pre">&lt;type</span>
<span class="pre">'exceptions.TypeError'&gt;:</span> <span class="pre">Package</span> <span class="pre">&lt;module</span> <span class="pre">'karl.views'</span> <span class="pre">from</span>
<span class="pre">'/Users/chrism/projects/osi/bfgenv/src/karl/karl/views/__init__.pyc'&gt;</span>
<span class="pre">already</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">__loader__</span> <span class="pre">(probably</span> <span class="pre">a</span> <span class="pre">module</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">zipped</span> <span class="pre">egg)</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-06-30">
<h2>1.0a7 (2009-06-30)<a class="headerlink" href="#a7-2009-06-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id390">
<h3>Features<a class="headerlink" href="#id390" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">reload_resources</span></code> configuration file setting (aka the
<code class="docutils literal notranslate"><span class="pre">BFG_RELOAD_RESOURCES</span></code> environment variable).  When this is set to
true, the server never needs to be restarted when moving files
between directory resource overrides (esp. for templates currently).</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">reload_all</span></code> configuration file setting (aka the
<code class="docutils literal notranslate"><span class="pre">BFG_RELOAD_ALL</span></code> environment variable) that implies both
<code class="docutils literal notranslate"><span class="pre">reload_resources</span></code> and <code class="docutils literal notranslate"><span class="pre">reload_templates</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">static</span></code> helper view class now uses a <code class="docutils literal notranslate"><span class="pre">PackageURLParser</span></code> in
order to allow for the overriding of static resources (CSS / logo
files, etc) using the <code class="docutils literal notranslate"><span class="pre">resource</span></code> ZCML directive.  The
<code class="docutils literal notranslate"><span class="pre">PackageURLParser</span></code> class was added to a (new) <code class="docutils literal notranslate"><span class="pre">static</span></code> module in
BFG; it is a subclass of the <code class="docutils literal notranslate"><span class="pre">StaticURLParser</span></code> class in
<code class="docutils literal notranslate"><span class="pre">paste.urlparser</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.templating.renderer_from_cache</span></code> function now
checks for the <code class="docutils literal notranslate"><span class="pre">reload_resources</span></code> setting; if it's true, it does
not register a template renderer (it won't use the registry as a
template renderer cache).</li>
</ul>
</div>
<div class="section" id="id391">
<h3>Documentation<a class="headerlink" href="#id391" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> to the glossary.</li>
<li>Update the &quot;Environment&quot; docs to note the existence of
<code class="docutils literal notranslate"><span class="pre">reload_resources</span></code> and <code class="docutils literal notranslate"><span class="pre">reload_all</span></code>.</li>
<li>Updated the <code class="docutils literal notranslate"><span class="pre">bfg_alchemy</span></code> paster template to include two views:
the view on the root shows a list of links to records;  the view on
a record shows the details for that object.</li>
</ul>
</div>
<div class="section" id="id392">
<h3>Internal<a class="headerlink" href="#id392" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Use a colon instead of a tab as the separator between package name
and relpath to form the &quot;spec&quot; when register a ITemplateRenderer.</li>
<li>Register a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.resource.OverrideProvider</span></code> as a
pkg_resources provider only for modules which are known to have
overrides, instead of globally, when a &lt;resource&gt; directive is used
(performance).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-06-29">
<h2>1.0a6 (2009-06-29)<a class="headerlink" href="#a6-2009-06-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id393">
<h3>Bug Fixes<a class="headerlink" href="#id393" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Use <code class="docutils literal notranslate"><span class="pre">caller_package</span></code> function instead of <code class="docutils literal notranslate"><span class="pre">caller_module</span></code>
function within <code class="docutils literal notranslate"><span class="pre">templating</span></code> to avoid needing to name the caller
module in resource overrides (actually match docs).</li>
<li>Make it possible to override templates stored directly in a module
with templates in a subdirectory of the same module, stored directly
within another module, or stored in a subdirectory of another module
(actually match docs).</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-06-28">
<h2>1.0a5 (2009-06-28)<a class="headerlink" href="#a5-2009-06-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id394">
<h3>Features<a class="headerlink" href="#id394" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A new ZCML directive exists named &quot;resource&quot;.  This ZCML directive
allows you to override Chameleon templates within a package (both
directories full of templates and individual template files) with
other templates in the same package or within another package.  This
allows you to &quot;fake out&quot; a view's use of a template, causing it to
retrieve a different template than the one actually named by a
relative path to a call like
<code class="docutils literal notranslate"><span class="pre">render_template_to_response('templates/mytemplate.pt')</span></code>.  For
example, you can override a template file by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">resource</span>
  <span class="n">to_override</span><span class="o">=</span><span class="s2">&quot;some.package:templates/mytemplate.pt&quot;</span>
  <span class="n">override_with</span><span class="o">=</span><span class="s2">&quot;another.package:othertemplates/anothertemplate.pt&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>The string passed to &quot;to_override&quot; and &quot;override_with&quot; is named a
&quot;specification&quot;.  The colon separator in a specification separates
the package name from a package-relative directory name.  The colon
and the following relative path are optional.  If they are not
specified, the override attempts to resolve every lookup into a
package from the directory of another package.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">resource</span>
  <span class="n">to_override</span><span class="o">=</span><span class="s2">&quot;some.package&quot;</span>
  <span class="n">override_with</span><span class="o">=</span><span class="s2">&quot;another.package&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Individual subdirectories within a package can also be overridden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">resource</span>
  <span class="n">to_override</span><span class="o">=</span><span class="s2">&quot;some.package:templates/&quot;</span>
  <span class="n">override_with</span><span class="o">=</span><span class="s2">&quot;another.package:othertemplates/&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>If you wish to override a directory with another directory, you must
make sure to attach the slash to the end of both the <code class="docutils literal notranslate"><span class="pre">to_override</span></code>
specification and the <code class="docutils literal notranslate"><span class="pre">override_with</span></code> specification.  If you fail
to attach a slash to the end of a specification that points a
directory, you will get unexpected results.  You cannot override a
directory specification with a file specification, and vice versa (a
startup error will occur if you try).</p>
<p>You cannot override a resource with itself (a startup error will
occur if you try).</p>
<p>Only individual <em>package</em> resources may be overridden.  Overrides
will not traverse through subpackages within an overridden package.
This means that if you want to override resources for both
<code class="docutils literal notranslate"><span class="pre">some.package:templates</span></code>, and <code class="docutils literal notranslate"><span class="pre">some.package.views:templates</span></code>,
you will need to register two overrides.</p>
<p>The package name in a specification may start with a dot, meaning
that the package is relative to the package in which the ZCML file
resides.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">resource</span>
  <span class="n">to_override</span><span class="o">=</span><span class="s2">&quot;.subpackage:templates/&quot;</span>
  <span class="n">override_with</span><span class="o">=</span><span class="s2">&quot;another.package:templates/&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Overrides for the same <code class="docutils literal notranslate"><span class="pre">to_overrides</span></code> specification can be named
multiple times within ZCML.  Each <code class="docutils literal notranslate"><span class="pre">override_with</span></code> path will be
consulted in the order defined within ZCML, forming an override
search path.</p>
<p>Resource overrides can actually override resources other than
templates.  Any software which uses the <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code>
<code class="docutils literal notranslate"><span class="pre">get_resource_filename</span></code>, <code class="docutils literal notranslate"><span class="pre">get_resource_stream</span></code> or
<code class="docutils literal notranslate"><span class="pre">get_resource_string</span></code> APIs will obtain an overridden file when an
override is used.  However, the only built-in facility which uses
the <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> API within BFG is the templating stuff, so we
only call out template overrides here.</p>
</li>
<li><p class="first">Use the <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> API to locate template filenames instead
of dead-reckoning using the <code class="docutils literal notranslate"><span class="pre">os.path</span></code> module.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.templating</span></code> module now uses <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> to
locate and register template files instead of using an absolute
path name.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-06-25">
<h2>1.0a4 (2009-06-25)<a class="headerlink" href="#a4-2009-06-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id395">
<h3>Features<a class="headerlink" href="#id395" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Cause <code class="docutils literal notranslate"><span class="pre">:segment</span></code> matches in route paths to put a Unicode-decoded
and URL-dequoted value in the matchdict for the value matched.
Previously a non-decoded non-URL-dequoted string was placed in the
matchdict as the value.</li>
<li>Cause <code class="docutils literal notranslate"><span class="pre">*remainder</span></code> matches in route paths to put a <em>tuple</em> in the
matchdict dictionary in order to be able to present Unicode-decoded
and URL-dequoted values for the traversal path.  Previously a
non-decoded non-URL-dequoted string was placed in the matchdict as
the value.</li>
<li>Add optional <code class="docutils literal notranslate"><span class="pre">max_age</span></code> keyword value to the <code class="docutils literal notranslate"><span class="pre">remember</span></code> method of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication.AuthTktAuthenticationPolicy</span></code>; if this
value is passed to <code class="docutils literal notranslate"><span class="pre">remember</span></code>, the generated cookie will have a
corresponding Max-Age value.</li>
</ul>
</div>
<div class="section" id="id396">
<h3>Documentation<a class="headerlink" href="#id396" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add information to the URL Dispatch narrative documentation about
path pattern matching syntax.</li>
</ul>
</div>
<div class="section" id="id397">
<h3>Bug Fixes<a class="headerlink" href="#id397" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make <code class="docutils literal notranslate"><span class="pre">route_url</span></code> URL-quote segment replacements during generation.
Remainder segments are not quoted.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-06-24">
<h2>1.0a3 (2009-06-24)<a class="headerlink" href="#a3-2009-06-24" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="implementation-changes">
<h3>Implementation Changes<a class="headerlink" href="#implementation-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> no longer relies on the Routes package to interpret
URL paths.  All known existing <code class="docutils literal notranslate"><span class="pre">path</span></code> patterns will continue to
work with the reimplemented logic, which lives in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch</span></code>.  <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> ZCML directives which use
certain attributes (uncommon ones) may not work (see &quot;Backwards
Incompatibilities&quot; below).</li>
</ul>
</div>
<div class="section" id="id398">
<h3>Bug Fixes<a class="headerlink" href="#id398" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">model_url</span></code> when passed a request that was generated as a result
of a route match would fail in a call to <code class="docutils literal notranslate"><span class="pre">route.generate</span></code>.</li>
<li>BFG-on-GAE didn't work due to a corner case bug in the fallback
Python implementation of <code class="docutils literal notranslate"><span class="pre">threading.local</span></code> (symptom:
&quot;Initialization arguments are not supported&quot;).  Thanks to Michael
Bernstein for the bug report.</li>
</ul>
</div>
<div class="section" id="id399">
<h3>Documentation<a class="headerlink" href="#id399" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a &quot;corner case&quot; explanation to the &quot;Hybrid Apps&quot; chapter
explaining what to do when &quot;the wrong&quot; view is matched.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> API in tutorials rather than Routes
<code class="docutils literal notranslate"><span class="pre">url_for</span></code> API.</li>
</ul>
</div>
<div class="section" id="id400">
<h3>Features<a class="headerlink" href="#id400" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> API.  This API allows you to
generate URLs based on <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> declarations.  See the URL
Dispatch narrative chapter and the &quot;repoze.bfg.url&quot; module API
documentation for more information.</li>
</ul>
</div>
<div class="section" id="id401">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id401" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>As a result of disusing Routes, using the Routes <code class="docutils literal notranslate"><span class="pre">url_for</span></code> API
inside a BFG application (as was suggested by previous iterations of
tutorials) will no longer work.  Use the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.route_url</span></code> method instead.</li>
<li>The following attributes on the <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> ZCML directive no longer
work: <code class="docutils literal notranslate"><span class="pre">encoding</span></code>, <code class="docutils literal notranslate"><span class="pre">static</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code>, <code class="docutils literal notranslate"><span class="pre">condition_method</span></code>,
<code class="docutils literal notranslate"><span class="pre">condition_subdomain</span></code>, <code class="docutils literal notranslate"><span class="pre">condition_function</span></code>, <code class="docutils literal notranslate"><span class="pre">explicit</span></code>, or
<code class="docutils literal notranslate"><span class="pre">subdomains</span></code>.  These were all Routes features.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> ZCML directive no longer supports the
<code class="docutils literal notranslate"><span class="pre">&lt;requirement&gt;</span></code> subdirective.  This was a Routes feature.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-06-23">
<h2>1.0a2 (2009-06-23)<a class="headerlink" href="#a2-2009-06-23" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id402">
<h3>Bug Fixes<a class="headerlink" href="#id402" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> paster template app tests failed due to a
mismatch between test and view signatures.</li>
</ul>
</div>
<div class="section" id="id403">
<h3>Features<a class="headerlink" href="#id403" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">view_for</span></code> attribute to the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive.  This
attribute should refer to an interface or a class (ala the <code class="docutils literal notranslate"><span class="pre">for</span></code>
attribute of the <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive).</li>
</ul>
</div>
<div class="section" id="id404">
<h3>Documentation<a class="headerlink" href="#id404" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Conditional documentation in installation section (&quot;how to install a
Python interpreter&quot;).</li>
</ul>
</div>
<div class="section" id="id405">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id405" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication</span></code>
authentication policies named <code class="docutils literal notranslate"><span class="pre">RepozeWho1AuthenticationPolicy</span></code>,
<code class="docutils literal notranslate"><span class="pre">RemoteUserAuthenticationPolicy</span></code>, and
<code class="docutils literal notranslate"><span class="pre">AuthTktAuthenticationPolicy</span></code> now must accept two positional
arguments: the orginal argument accepted by each (userid or
identity) plus a second argument, which will be the current request.
Apologies, this is required to service finding groups when there is
no &quot;global&quot; database connection.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-06-22">
<h2>1.0a1 (2009-06-22)<a class="headerlink" href="#a1-2009-06-22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id406">
<h3>Features<a class="headerlink" href="#id406" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A new ZCML directive was added named <code class="docutils literal notranslate"><span class="pre">notfound</span></code>.  This ZCML
directive can be used to name a view that should be invoked when the
request can't otherwise be resolved to a view callable.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">notfound</span>
    <span class="n">view</span><span class="o">=</span><span class="s2">&quot;helloworld.views.notfound_view&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">A new ZCML directive was added named <code class="docutils literal notranslate"><span class="pre">forbidden</span></code>.  This ZCML
directive can be used to name a view that should be invoked when a
view callable for a request is found, but cannot be invoked due to
an authorization failure.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">forbidden</span>
    <span class="n">view</span><span class="o">=</span><span class="s2">&quot;helloworld.views.forbidden_view&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Allow views to be <em>optionally</em> defined as callables that accept only
a request object, instead of both a context and a request (which
still works, and always will).  The following types work as views in
this style:</p>
<ul>
<li><p class="first">functions that accept a single argument <code class="docutils literal notranslate"><span class="pre">request</span></code>, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">aview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p class="first">new and old-style classes that have an <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method that
accepts <code class="docutils literal notranslate"><span class="pre">self,</span> <span class="pre">request</span></code>, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">View</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
       <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p class="first">Arbitrary callables that have a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method that accepts
<code class="docutils literal notranslate"><span class="pre">self,</span> <span class="pre">request</span></code>, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">AView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
       <span class="k">pass</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">AView</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
<p>This likely should have been the calling convention all along, as
the request has <code class="docutils literal notranslate"><span class="pre">context</span></code> as an attribute already, and with views
called as a result of URL dispatch, having the context in the
arguments is not very useful.  C'est la vie.</p>
</li>
<li><p class="first">Cache the absolute path in the caller's package globals within
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.path</span></code> to get rid of repeated (expensive) calls to
os.path.abspath.</p>
</li>
<li><p class="first">Add <code class="docutils literal notranslate"><span class="pre">reissue_time</span></code> and <code class="docutils literal notranslate"><span class="pre">timeout</span></code> parameters to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication.AuthTktAuthenticationPolicy</span></code>
constructor.  If these are passed, cookies will be reset every so
often (cadged from the same change to repoze.who lately).</p>
</li>
<li><p class="first">The matchdict related to the matching of a Routes route is available
on the request as the <code class="docutils literal notranslate"><span class="pre">matchdict</span></code> attribute:
<code class="docutils literal notranslate"><span class="pre">request.matchdict</span></code>.  If no route matched, this attribute will be
None.</p>
</li>
<li><p class="first">Make 404 responses slightly cheaper by showing
<code class="docutils literal notranslate"><span class="pre">environ[&quot;PATH_INFO&quot;]</span></code> on the notfound result page rather than the
fullly computed URL.</p>
</li>
<li><p class="first">Move LRU cache implementation into a separate package
(<code class="docutils literal notranslate"><span class="pre">repoze.lru</span></code>).</p>
</li>
<li><p class="first">The concepts of traversal and URL dispatch have been unified.  It is
now possible to use the same sort of factory as both a traversal
&quot;root factory&quot; and what used to be referred to as a urldispatch
&quot;context factory&quot;.</p>
</li>
<li><p class="first">When the root factory argument (as a first argument) passed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, a <em>default</em> root factory
is used.  This is in support of using routes as &quot;root finders&quot;; it
supplants the idea that there is a default
<code class="docutils literal notranslate"><span class="pre">IRoutesContextFactory</span></code>.</p>
</li>
<li><p class="first">The <cite>view`</cite> ZCML statement and the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.bfg_view</span></code>
decorator now accept an extra argument: <code class="docutils literal notranslate"><span class="pre">route_name</span></code>.  If a
<code class="docutils literal notranslate"><span class="pre">route_name</span></code> is specified, it must match the name of a previously
defined <code class="docutils literal notranslate"><span class="pre">route</span></code> statement.  When it is specified, the view will
only be called when that route matches during a request.</p>
</li>
<li><p class="first">It is now possible to perfom traversal <em>after</em> a route has matched.
Use the pattern <code class="docutils literal notranslate"><span class="pre">*traverse</span></code> in a <code class="docutils literal notranslate"><span class="pre">&lt;route&gt;</span></code> <code class="docutils literal notranslate"><span class="pre">path</span></code> attribute
within ZCML, and the path remainder which it matches will be used as
a traversal path.</p>
</li>
<li><p class="first">When any route defined matches, the WSGI environment will now
contain a key <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code> (the Route object which matched),
and a key <code class="docutils literal notranslate"><span class="pre">bfg.routes.matchdict</span></code> (the result of calling route.match).</p>
</li>
</ul>
</div>
<div class="section" id="id407">
<h3>Deprecations<a class="headerlink" href="#id407" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Utility registrations against
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></code> are now deprecated.  Use
the <code class="docutils literal notranslate"><span class="pre">notfound</span></code> and <code class="docutils literal notranslate"><span class="pre">forbidden</span></code> ZCML directives instead (see the
&quot;Hooks&quot; chapter for more information).  Such registrations will
continue to work, but the notfound and forbidden directives do
&quot;extra work&quot; to ensure that the callable named by the directive can
be called by the router even if it's a class or
request-argument-only view.</li>
</ul>
</div>
<div class="section" id="removals">
<h3>Removals<a class="headerlink" href="#removals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">IRoutesContext</span></code>, <code class="docutils literal notranslate"><span class="pre">IRoutesContextFactory</span></code>, and
<code class="docutils literal notranslate"><span class="pre">IContextNotFound</span></code> interfaces were removed from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code>.  These were never APIs.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesContextNotFound</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesContextURL</span></code> classes were removed.
These were also never APIs.</li>
</ul>
</div>
<div class="section" id="id408">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id408" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Moved the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.push</span></code> module, which implemented the <code class="docutils literal notranslate"><span class="pre">pushpage</span></code>
decorator, into a separate distribution, <code class="docutils literal notranslate"><span class="pre">repoze.bfg.pushpage</span></code>.
Applications which used this decorator should continue to work after
adding that distribution to their installation requirements.</li>
<li>Changing the default request factory via an IRequestFactory utility
registration (as used to be documented in the &quot;Hooks&quot; chapter's
&quot;Changing the request factory&quot; section) is no longer supported.  The
dance to manufacture a request is complicated as a result of
unifying traversal and url dispatch, making it highly unlikely for
anyone to be able to override it properly.  For those who just want
to decorate or modify a request, use a NewRequestEvent subscriber
(see the Events chapter in the documentation).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.IRequestFactory</span></code> interface was removed.  See the
bullet above for why.</li>
<li>Routes &quot;context factories&quot; (spelled as the factory argument to a
route statement in ZCML) must now expect the WSGI environ as a
single argument rather than a set of keyword arguments.  They can
obtain the match dictionary by asking for
environ['bfg.routes.matchdict'].  This is the same set of keywords
that used to be passed to urldispatch &quot;context factories&quot; in BFG 0.9
and below.</li>
<li>Using the <code class="docutils literal notranslate"><span class="pre">&#64;zope.component.adapter</span></code> decorator on a bfg view
function no longer works.  Use the <code class="docutils literal notranslate"><span class="pre">&#64;repoze.bfg.view.bfg_view</span></code>
decorator instead to mark a function (or a class) as a view.</li>
<li>The name under which the matching route object is found in the
environ was changed from <code class="docutils literal notranslate"><span class="pre">bfg.route</span></code> to <code class="docutils literal notranslate"><span class="pre">bfg.routes.route</span></code>.</li>
<li>Finding the root is now done <em>before</em> manufacturing a request object
(and sending a new request event) within the router (it used to be
performed afterwards).</li>
<li>Adding <code class="docutils literal notranslate"><span class="pre">*path_info</span></code> to a route no longer changes the PATH_INFO for
a request that matches using URL dispatch.  This feature was only
there to service the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.wsgiapp2</span></code> decorator and it
did it wrong; use <code class="docutils literal notranslate"><span class="pre">*subpath</span></code> instead now.</li>
<li>The values of <code class="docutils literal notranslate"><span class="pre">subpath</span></code>, <code class="docutils literal notranslate"><span class="pre">traversed</span></code>, and <code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code>
attached to the request object are always now tuples instead of
lists (performance).</li>
</ul>
</div>
<div class="section" id="id409">
<h3>Bug Fixes<a class="headerlink" href="#id409" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">bfg_alchemy</span></code> Paster template named &quot;repoze.tm&quot; in its
pipeline rather than &quot;repoze.tm2&quot;, causing the startup to fail.</li>
<li>Move BBB logic for registering an
IAuthenticationPolicy/IForbiddenView/INotFoundView based on older
concepts from the router module's <code class="docutils literal notranslate"><span class="pre">make_app</span></code> function into the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.zcml.zcml_configure</span></code> callable, to service
compatibility with scripts that use &quot;zope.configuration.xmlconfig&quot;
(replace with <code class="docutils literal notranslate"><span class="pre">repoze.bfg.zml.zcml_configure</span></code> as necessary to get
BBB logic)</li>
</ul>
</div>
<div class="section" id="id410">
<h3>Documentation<a class="headerlink" href="#id410" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add interface docs related to how to create authentication policies
and authorization policies to the &quot;Security&quot; narrative chapter.</li>
<li>Added a (fairly sad) &quot;Combining Traversal and URL Dispatch&quot; chapter
to the narrative documentation.  This explains the usage of
<code class="docutils literal notranslate"><span class="pre">*traverse</span></code> and <code class="docutils literal notranslate"><span class="pre">*subpath</span></code> in routes URL patters.</li>
<li>A &quot;router&quot; chapter explaining the request/response lifecycle at a
high level was added.</li>
<li>Replaced all mentions and explanations of a routes &quot;context factory&quot;
with equivalent explanations of a &quot;root factory&quot; (context factories
have been disused).</li>
<li>Updated Routes bfgwiki2 tutorial to reflect the fact that context
factories are now no longer used.</li>
</ul>
</div>
</div>
<div class="section" id="id411">
<h2>0.9.1 (2009-06-02)<a class="headerlink" href="#id411" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id412">
<h3>Features<a class="headerlink" href="#id412" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add API named <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_settings</span></code> which retrieves a
derivation of values passed as the <code class="docutils literal notranslate"><span class="pre">options</span></code> value of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code>.  This API should be preferred
instead of using getUtility(ISettings).  I added a new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings</span></code> API document as well.</li>
</ul>
</div>
<div class="section" id="id413">
<h3>Bug Fixes<a class="headerlink" href="#id413" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Restored missing entry point declaration for bfg_alchemy paster
template, which was accidentally removed in 0.9.</li>
</ul>
</div>
<div class="section" id="id414">
<h3>Documentation<a class="headerlink" href="#id414" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix a reference to <code class="docutils literal notranslate"><span class="pre">wsgiapp</span></code> in the <code class="docutils literal notranslate"><span class="pre">wsgiapp2</span></code> API documentation
within the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi</span></code> module.</li>
</ul>
</div>
<div class="section" id="api-removals">
<h3>API Removals<a class="headerlink" href="#api-removals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.locate</span></code> API was removed: it didn't do
enough to be very helpful and had a misleading name.</li>
</ul>
</div>
</div>
<div class="section" id="id415">
<h2>0.9 (2009-06-01)<a class="headerlink" href="#id415" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id416">
<h3>Bug Fixes<a class="headerlink" href="#id416" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>It was not possible to register a custom <code class="docutils literal notranslate"><span class="pre">IRoutesContextFactory</span></code>
for use as a default context factory as documented in the &quot;Hooks&quot;
chapter.</li>
</ul>
</div>
<div class="section" id="id417">
<h3>Features<a class="headerlink" href="#id417" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">request_type</span></code> argument of ZCML <code class="docutils literal notranslate"><span class="pre">view</span></code> declarations and
<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorators can now be one of the strings <code class="docutils literal notranslate"><span class="pre">GET</span></code>,
<code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, or <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> instead of a reference to
the respective interface type imported from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive now accepts <code class="docutils literal notranslate"><span class="pre">request_type</span></code> as an
alias for its <code class="docutils literal notranslate"><span class="pre">condition_method</span></code> argument for symmetry with the
<code class="docutils literal notranslate"><span class="pre">view</span></code> directive.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">bfg_routesalchemy</span></code> paster template now provides a unit test
and actually uses the database during a view rendering.</li>
</ul>
</div>
<div class="section" id="id418">
<h3>Removals<a class="headerlink" href="#id418" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">repoze.bfg.threadlocal.setManager</span></code>.  It was only used in
unit tests.</li>
<li>Remove <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.HTTPException</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.NotFound</span></code>, and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.Unauthorized</span></code>.
These classes were disused with the introduction of the
<code class="docutils literal notranslate"><span class="pre">IUnauthorizedView</span></code> and <code class="docutils literal notranslate"><span class="pre">INotFoundView</span></code> machinery.</li>
</ul>
</div>
<div class="section" id="id419">
<h3>Documentation<a class="headerlink" href="#id419" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add description to narrative templating chapter about how to use
Chameleon text templates.</li>
<li>Changed Views narrative chapter to use method strings rather than
interface types, and moved advanced interface type usage to Events
narrative chapter.</li>
<li>Added a Routes+SQLAlchemy wiki tutorial.</li>
</ul>
</div>
</div>
<div class="section" id="a8-2009-05-31">
<h2>0.9a8 (2009-05-31)<a class="headerlink" href="#a8-2009-05-31" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id420">
<h3>Features<a class="headerlink" href="#id420" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>It is now possible to register a custom
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></code> for a given application.
This feature replaces the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundAppFactory</span></code> feature previously
described in the Hooks chapter.  The INotFoundView will be called
when the framework detects that a view lookup done as a result of a
request fails; it should accept a context object and a request
object; it should return an IResponse object (a webob response,
basically).  See the Hooks narrative chapter of the BFG docs for
more info.</li>
<li>The error presented when a view invoked by the router returns a
non-response object now includes the view's name for troubleshooting
purposes.</li>
</ul>
</div>
<div class="section" id="id421">
<h3>Bug Fixes<a class="headerlink" href="#id421" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A &quot;new response&quot; event is emitted for forbidden and notfound views.</li>
</ul>
</div>
<div class="section" id="id422">
<h3>Deprecations<a class="headerlink" href="#id422" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundAppFactory</span></code> interface has been
deprecated in favor of using the new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INotFoundView</span></code> mechanism.</li>
</ul>
</div>
<div class="section" id="renames">
<h3>Renames<a class="headerlink" href="#renames" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Renamed <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></code> to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenView</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-05-30">
<h2>0.9a7 (2009-05-30)<a class="headerlink" href="#a7-2009-05-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id423">
<h3>Features<a class="headerlink" href="#id423" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove &quot;context&quot; argument from <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> and
<code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code> function APIs in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code>,
effectively a doing reversion to 0.8 and before behavior.  Both
functions now again accept only the <code class="docutils literal notranslate"><span class="pre">request</span></code> parameter.</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-05-29">
<h2>0.9a6 (2009-05-29)<a class="headerlink" href="#a6-2009-05-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id424">
<h3>Documentation<a class="headerlink" href="#id424" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Changed &quot;BFG Wiki&quot; tutorial to use AuthTktAuthenticationPolicy
rather than repoze.who.</li>
</ul>
</div>
<div class="section" id="id425">
<h3>Features<a class="headerlink" href="#id425" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add an AuthTktAuthenticationPolicy.  This policy retrieves
credentials from an auth_tkt cookie managed by the application
itself (instead of relying on an upstream data source for
authentication data).  See the Security API chapter of the
documentation for more info.</li>
<li>Allow RemoteUserAuthenticationPolicy and
RepozeWho1AuthenticationPolicy to accept various constructor
arguments.  See the Security API chapter of the documentation for
more info.</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-05-28">
<h2>0.9a5 (2009-05-28)<a class="headerlink" href="#a5-2009-05-28" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id426">
<h3>Features<a class="headerlink" href="#id426" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">get_app</span></code> API functions to the <code class="docutils literal notranslate"><span class="pre">paster</span></code> module.  This
obtains a WSGI application from a config file given a config file
name and a section name.  See the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.paster</span></code> API docs for
more information.</li>
<li>Add a new module named <code class="docutils literal notranslate"><span class="pre">scripting</span></code>.  It contains a <code class="docutils literal notranslate"><span class="pre">get_root</span></code>
API function, which, provided a Router instance, returns a traversal
root object and a &quot;closer&quot;.  See the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.scripting</span></code> API
docs for more info.</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-05-27">
<h2>0.9a4 (2009-05-27)<a class="headerlink" href="#a4-2009-05-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id427">
<h3>Bug Fixes<a class="headerlink" href="#id427" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Try checking for an &quot;old style&quot; security policy <em>after</em> we parse
ZCML (thinko).</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-05-27">
<h2>0.9a3 (2009-05-27)<a class="headerlink" href="#a3-2009-05-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id428">
<h3>Features<a class="headerlink" href="#id428" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Allow IAuthenticationPolicy and IAuthorizationPolicy to be
overridden via ZCML registrations (do ZCML parsing after
registering these in router.py).</li>
</ul>
</div>
<div class="section" id="id429">
<h3>Documentation<a class="headerlink" href="#id429" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added &quot;BFG Wiki&quot; tutorial to documentation; it describes
step-by-step how to create a traversal-based ZODB application with
authentication.</li>
</ul>
</div>
<div class="section" id="id430">
<h3>Deprecations<a class="headerlink" href="#id430" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added deprecations for imports of <code class="docutils literal notranslate"><span class="pre">ACLSecurityPolicy</span></code>,
<code class="docutils literal notranslate"><span class="pre">InheritingACLSecurityPolicy</span></code>, <code class="docutils literal notranslate"><span class="pre">RemoteUserACLSecurityPolicy</span></code>,
<code class="docutils literal notranslate"><span class="pre">RemoteUserInheritingACLSecurityPolicy</span></code>, <code class="docutils literal notranslate"><span class="pre">WhoACLSecurityPolicy</span></code>,
and <code class="docutils literal notranslate"><span class="pre">WhoInheritingACLSecurityPolicy</span></code> from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code> module; for the meantime (for backwards
compatibility purposes) these live in the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.secpols</span></code>
module.  Note however, that the entire concept of a &quot;security
policy&quot; is deprecated in BFG in favor of separate authentication and
authorization policies, so any use of a security policy will
generate additional deprecation warnings even if you do start using
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.secpols</span></code>.  <code class="docutils literal notranslate"><span class="pre">repoze.bfg.secpols</span></code> will disappear in a
future release of <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>.</li>
</ul>
</div>
<div class="section" id="deprecated-import-alias-removals">
<h3>Deprecated Import Alias Removals<a class="headerlink" href="#deprecated-import-alias-removals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">repoze.bfg.template</span></code> module.  All imports from this
package have been deprecated since 0.3.8.  Instead, import
<code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>, and
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code> from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> module.</li>
<li>Remove backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.split_path</span></code> (deprecated since 0.6.5).  This
must now be imported as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.traversal_path</span></code>).</li>
<li>Remove backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesContext</span></code> (deprecated since 0.6.5).
This must now be imported as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.DefaultRoutesContext</span></code>.</li>
<li>Removed backwards compatibility import aliases for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.get_options</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.Settings</span></code>
(deprecated since 0.6.2).  These both must now be imported from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings</span></code>.</li>
<li>Removed backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRootPolicy</span></code> (deprecated since 0.6.2).  It
must be imported as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRootFactory</span></code> now.</li>
<li>Removed backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplate</span></code> (deprecated since 0.4.4).  It
must be imported as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateRenderer</span></code> now.</li>
<li>Removed backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateFactory</span></code> (deprecated since 0.4.4).
It must be imported as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></code> now.</li>
<li>Removed backwards compatibility import alias for
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateFactory</span></code> (deprecated since
0.4.4).  This must be imported as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.ZPTTemplateRenderer</span></code>
now.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-05-27">
<h2>0.9a2 (2009-05-27)<a class="headerlink" href="#a2-2009-05-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id431">
<h3>Features<a class="headerlink" href="#id431" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">A paster command has been added named &quot;bfgshell&quot;.  This command can
be used to get an interactive prompt with your BFG root object in
the global namespace.  E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">paster</span> <span class="n">bfgshell</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">myapp</span><span class="o">.</span><span class="n">ini</span> <span class="n">myapp</span>
</pre></div>
</div>
<p>See the <code class="docutils literal notranslate"><span class="pre">Project</span></code> chapter in the BFG documentation for more
information.</p>
</li>
</ul>
</div>
<div class="section" id="id432">
<h3>Deprecations<a class="headerlink" href="#id432" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The name <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.registry_manager</span></code> was never an API,
but scripts in the wild were using it to set up an environment for
use under a debug shell.  A backwards compatibility shim has been
added for this purpose, but the feature is deprecated.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-5-27">
<h2>0.9a1 (2009-5-27)<a class="headerlink" href="#a1-2009-5-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id433">
<h3>Features<a class="headerlink" href="#id433" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">New API functions named <code class="docutils literal notranslate"><span class="pre">forget</span></code> and <code class="docutils literal notranslate"><span class="pre">remember</span></code> are available in
the <code class="docutils literal notranslate"><span class="pre">security</span></code> module.  The <code class="docutils literal notranslate"><span class="pre">forget</span></code> function returns headers
which will cause the currently authenticated user to be logged out
when set in a response.  The <code class="docutils literal notranslate"><span class="pre">remember</span></code> function (when passed the
proper arguments) will return headers which will cause a principal
to be &quot;logged in&quot; when set in a response.  See the Security API
chapter of the docs for more info.</p>
</li>
<li><p class="first">New keyword arguments to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> call
have been added: <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> and
<code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code>.  These should, respectively, be an
implementation of an authentication policy (an object implementing
the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IAuthenticationPolicy</span></code> interface) and
an implementation of an authorization policy (an object implementing
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IAuthorizationPolicy)</span></code>.  Concrete
implementations of authentication policies exist in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication</span></code>.  Concrete implementations of
authorization policies exist in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.authorization</span></code>.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> and <code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> default
to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, but
<code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> is <em>not</em> <code class="docutils literal notranslate"><span class="pre">None</span></code>, then
<code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> is ignored (the ability to do authorization
depends on authentication).</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">authentication_policy</span></code> argument is <em>not</em> <code class="docutils literal notranslate"><span class="pre">None</span></code>, and the
<code class="docutils literal notranslate"><span class="pre">authorization_policy</span></code> argument <em>is</em> <code class="docutils literal notranslate"><span class="pre">None</span></code>, the authorization
policy defaults to an authorization implementation that uses ACLs
(<code class="docutils literal notranslate"><span class="pre">repoze.bfg.authorization.ACLAuthorizationPolicy</span></code>).</p>
<p>We no longer encourage configuration of &quot;security policies&quot; using
ZCML, as previously we did for <code class="docutils literal notranslate"><span class="pre">ISecurityPolicy</span></code>.  This is because
it's not uncommon to need to configure settings for concrete
authorization or authentication policies using paste .ini
parameters; the app entry point for your application is the natural
place to do this.</p>
</li>
<li><p class="first">Two new abstractions have been added in the way of adapters used by
the system: an <code class="docutils literal notranslate"><span class="pre">IAuthorizationPolicy</span></code> and an
<code class="docutils literal notranslate"><span class="pre">IAuthenticationPolicy</span></code>.  A combination of these (as registered by
the <code class="docutils literal notranslate"><span class="pre">securitypolicy</span></code> ZCML directive) take the place of the
<code class="docutils literal notranslate"><span class="pre">ISecurityPolicy</span></code> abstraction in previous releases of repoze.who.
The API functions in <code class="docutils literal notranslate"><span class="pre">repoze.who.security</span></code> (such as
<code class="docutils literal notranslate"><span class="pre">authentication_userid</span></code>, <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code>,
<code class="docutils literal notranslate"><span class="pre">has_permission</span></code>, and so on) have been changed to try to make use
of these new adapters.  If you're using an older <code class="docutils literal notranslate"><span class="pre">ISecurityPolicy</span></code>
adapter, the system will still work, but it will print deprecation
warnings when such a policy is used.</p>
</li>
<li><p class="first">The way the (internal) IViewPermission utilities registered via ZCML
are invoked has changed.  They are purely adapters now, returning a
boolean result, rather than returning a callable. You shouldn't have
been using these anyway. ;-)</p>
</li>
<li><p class="first">New concrete implementations of IAuthenticationPolicy have been
added to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.authentication</span></code> module:
<code class="docutils literal notranslate"><span class="pre">RepozeWho1AuthenticationPolicy</span></code> which uses <code class="docutils literal notranslate"><span class="pre">repoze.who</span></code>
identity to retrieve authentication data from and
<code class="docutils literal notranslate"><span class="pre">RemoteUserAuthenticationPolicy</span></code>, which uses the <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code>
value in the WSGI environment to retrieve authentication data.</p>
</li>
<li><p class="first">A new concrete implementation of IAuthorizationPolicy has been added
to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.authorization</span></code> module:
<code class="docutils literal notranslate"><span class="pre">ACLAuthorizationPolicy</span></code> which uses ACL inheritance to do
authorization.</p>
</li>
<li><p class="first">It is now possible to register a custom
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></code> for a given
application.  This feature replaces the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IUnauthorizedAppFactory</span></code> feature previously
described in the Hooks chapter.  The IForbiddenResponseFactory will
be called when the framework detects an authorization failure; it
should accept a context object and a request object; it should
return an IResponse object (a webob response, basically).  Read the
below point for more info and see the Hooks narrative chapter of the
BFG docs for more info.</p>
</li>
</ul>
</div>
<div class="section" id="id434">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id434" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Custom NotFound and Forbidden (nee' Unauthorized) WSGI applications
(registered as a utility for INotFoundAppFactory and
IUnauthorizedAppFactory) could rely on an environment key named
<code class="docutils literal notranslate"><span class="pre">message</span></code> describing the circumstance of the response.  This key
has been renamed to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.message</span></code> (as per the WSGI spec,
which requires environment extensions to contain dots).</li>
</ul>
</div>
<div class="section" id="id435">
<h3>Deprecations<a class="headerlink" href="#id435" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IUnauthorizedAppFactory</span></code> interface has
been deprecated in favor of using the new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IForbiddenResponseFactory</span></code> mechanism.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">view_execution_permitted</span></code> API should now be imported from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code> module instead of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code>
module.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">authenticated_userid</span></code> and <code class="docutils literal notranslate"><span class="pre">effective_principals</span></code> APIs in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code> used to only take a single argument
(request).  They now accept two arguments (<code class="docutils literal notranslate"><span class="pre">context</span></code> and
<code class="docutils literal notranslate"><span class="pre">request</span></code>).  Calling them with a single argument is still
supported but issues a deprecation warning.  (NOTE: this change was
reverted in 0.9a7; meaning the 0.9 versions of these functions
again accept <code class="docutils literal notranslate"><span class="pre">request</span></code> only, just like 0.8 and before).</li>
<li>Use of &quot;old-style&quot; security policies (those base on ISecurityPolicy)
is now deprecated.  See the &quot;Security&quot; chapter of the docs for info
about activating an authorization policy and an authentication poicy.</li>
</ul>
</div>
</div>
<div class="section" id="id436">
<h2>0.8.1 (2009-05-21)<a class="headerlink" href="#id436" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id437">
<h3>Features<a class="headerlink" href="#id437" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Class objects may now be used as view callables (both via ZCML and
via use of the <code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator in Python 2.6 as a class
decorator).  The calling semantics when using a class as a view
callable is similar to that of using a class as a Zope &quot;browser
view&quot;: the class' <code class="docutils literal notranslate"><span class="pre">__init__</span></code> must accept two positional parameters
(conventionally named <code class="docutils literal notranslate"><span class="pre">context</span></code>, and <code class="docutils literal notranslate"><span class="pre">request</span></code>).  The resulting
instance must be callable (it must have a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method).
When called, the instance should return a response.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> from webob import Response

 class MyView(object):
     def __init__(self, context, request):
         self.context = context
         self.request = request

     def __call__(self):
         return Response(&#39;hello from %s!&#39; % self.context)

See the &quot;Views&quot; chapter in the documentation and the
``repoze.bfg.view`` API documentation for more information.
</pre></div>
</div>
</li>
<li><p class="first">Removed the pickling of ZCML actions (the code that wrote
<code class="docutils literal notranslate"><span class="pre">configure.zcml.cache</span></code> next to <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> files in
projects).  The code which managed writing and reading of the cache
file was a source of subtle bugs when users switched between
imperative (e.g. <code class="docutils literal notranslate"><span class="pre">&#64;bfg_view</span></code>) registrations and declarative
registrations (e.g. the <code class="docutils literal notranslate"><span class="pre">view</span></code> directive in ZCML) on the same
project. On a moderately-sized project (535 ZCML actions and 15 ZCML
files), executing actions read from the pickle was saving us only
about 200ms (2.5 sec vs 2.7 sec average). On very small projects (1
ZCML file and 4 actions), startup time was comparable, and sometimes
even slower when reading from the pickle, and both ways were so fast
that it really just didn't matter anyway.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id438">
<h2>0.8 (2009-05-18)<a class="headerlink" href="#id438" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id439">
<h3>Features<a class="headerlink" href="#id439" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">traverse</span></code> function to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code>
module.  This function may be used to retrieve certain values
computed during path resolution.  See the Traversal API chapter of
the documentation for more information about this function.</li>
</ul>
</div>
<div class="section" id="id440">
<h3>Deprecations<a class="headerlink" href="#id440" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Internal: <code class="docutils literal notranslate"><span class="pre">ITraverser</span></code> callables should now return a dictionary
rather than a tuple.  Up until 0.7.0, all ITraversers were assumed
to return a 3-tuple.  In 0.7.1, ITraversers were assumed to return a
6-tuple.  As (by evidence) it's likely we'll need to add further
information to the return value of an ITraverser callable, 0.8
assumes that an ITraverser return a dictionary with certain elements
in it.  See the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITraverser</span></code> interface for
the list of keys that should be present in the dictionary.
<code class="docutils literal notranslate"><span class="pre">ITraversers</span></code> which return tuples will still work, although a
deprecation warning will be issued.</li>
</ul>
</div>
<div class="section" id="id441">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id441" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>If your code used the ITraverser interface directly (not via an API
function such as <code class="docutils literal notranslate"><span class="pre">find_model</span></code>) via an adapter lookup, you'll need
to change your code to expect a dictionary rather than a 3- or
6-tuple if your code ever gets return values from the default
ModelGraphTraverser or RoutesModelTraverser adapters.</li>
</ul>
</div>
</div>
<div class="section" id="a7-2009-05-16">
<h2>0.8a7 (2009-05-16)<a class="headerlink" href="#a7-2009-05-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id442">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id442" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">RoutesMapper</span></code> class in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch</span></code> has been
removed, as well as its documentation.  It had been deprecated since
0.6.3.  Code in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></code>
which catered to it has also been removed.</p>
</li>
<li><p class="first">The semantics of the <code class="docutils literal notranslate"><span class="pre">route</span></code> ZCML directive have been simplified.
Previously, it was assumed that to use a route, you wanted to map a
route to an externally registered view.  The new <code class="docutils literal notranslate"><span class="pre">route</span></code> directive
instead has a <code class="docutils literal notranslate"><span class="pre">view</span></code> attribute which is required, specifying the
dotted path to a view callable.  When a route directive is
processed, a view is <em>registered</em> using the name attribute of the
route directive as its name and the callable as its value.  The
<code class="docutils literal notranslate"><span class="pre">view_name</span></code> and <code class="docutils literal notranslate"><span class="pre">provides</span></code> attributes of the <code class="docutils literal notranslate"><span class="pre">route</span></code> directive
are therefore no longer used.  Effectively, if you were previously
using the <code class="docutils literal notranslate"><span class="pre">route</span></code> directive, it means you must change a pair of
ZCML directives that look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">route</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;home&quot;</span>
   <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
   <span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;login&quot;</span>
   <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;.models.root.Root&quot;</span>
 <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="n">view</span>
   <span class="k">for</span><span class="o">=</span><span class="s2">&quot;.models.root.Root&quot;</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;login&quot;</span>
   <span class="n">view</span><span class="o">=</span><span class="s2">&quot;.views.login_view&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>To a ZCML directive that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">route</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;home&quot;</span>
   <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
   <span class="n">view</span><span class="o">=</span><span class="s2">&quot;.views.login_view&quot;</span>
   <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;.models.root.Root&quot;</span>
 <span class="o">/&gt;</span>
</pre></div>
</div>
<p>In other words, to make old code work, remove the <code class="docutils literal notranslate"><span class="pre">view</span></code>
directives that were only there to serve the purpose of backing
<code class="docutils literal notranslate"><span class="pre">route</span></code> directives, and move their <code class="docutils literal notranslate"><span class="pre">view=</span></code> attribute into the
<code class="docutils literal notranslate"><span class="pre">route</span></code> directive itself.</p>
<p>This change also necessitated that the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the
<code class="docutils literal notranslate"><span class="pre">route</span></code> directive is now required.  If you were previously using
<code class="docutils literal notranslate"><span class="pre">route</span></code> directives without a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute, you'll need to
add one (the name is arbitrary, but must be unique among all
<code class="docutils literal notranslate"><span class="pre">route</span></code> and <code class="docutils literal notranslate"><span class="pre">view</span></code> statements).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">provides</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">route</span></code> directive has also been
removed.  This directive specified a sequence of interface types
that the generated context would be decorated with.  Since route
views are always generated now for a single interface
(<code class="docutils literal notranslate"><span class="pre">repoze.bfg.IRoutesContext</span></code>) as opposed to being looked up
arbitrarily, there is no need to decorate any context to ensure a
view is found.</p>
</li>
</ul>
</div>
<div class="section" id="id443">
<h3>Documentation<a class="headerlink" href="#id443" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added API docs for the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> methods
<code class="docutils literal notranslate"><span class="pre">registerAdapter</span></code>, <code class="docutils literal notranslate"><span class="pre">registerUtiity</span></code>, <code class="docutils literal notranslate"><span class="pre">registerSubscriber</span></code>, and
<code class="docutils literal notranslate"><span class="pre">cleanUp</span></code>.</li>
<li>Added glossary entry for &quot;root factory&quot;.</li>
<li>Noted existence of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.pagetemplate</span></code> template bindings in
&quot;Available Add On Template System Bindings&quot; in Templates chapter in
narrative docs.</li>
<li>Update &quot;Templates&quot; narrative chapter in docs (expand to show a
sample template and correct macro example).</li>
</ul>
</div>
<div class="section" id="id444">
<h3>Features<a class="headerlink" href="#id444" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Courtesty Carlos de la Guardia, added an <code class="docutils literal notranslate"><span class="pre">alchemy</span></code> Paster
template.  This paster template sets up a BFG project that uses
SQAlchemy (with SQLite) and uses traversal to resolve URLs.  (no
Routes areused).  This template can be used via <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span>
<span class="pre">bfg_alchemy</span></code>.</li>
<li>The Routes <code class="docutils literal notranslate"><span class="pre">Route</span></code> object used to resolve the match is now put
into the environment as <code class="docutils literal notranslate"><span class="pre">bfg.route</span></code> when URL dispatch is used.</li>
<li>You can now change the default Routes &quot;context factory&quot; globally.
See the &quot;ZCML Hooks&quot; chapter of the documentation (in the &quot;Changing
the Default Routes Context Factory&quot; section).</li>
</ul>
</div>
</div>
<div class="section" id="a6-2009-05-11">
<h2>0.8a6 (2009-05-11)<a class="headerlink" href="#a6-2009-05-11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id445">
<h3>Features<a class="headerlink" href="#id445" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">routesalchemy</span></code> Paster template.  This paster template
sets up a BFG project that uses SQAlchemy (with SQLite) and uses
Routes exclusively to resolve URLs (no traversal root factory is
used).  This template can be used via <code class="docutils literal notranslate"><span class="pre">paster</span> <span class="pre">create</span> <span class="pre">-t</span>
<span class="pre">bfg_routesalchemy</span></code>.</li>
</ul>
</div>
<div class="section" id="id446">
<h3>Documentation<a class="headerlink" href="#id446" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added documentation to the URL Dispatch chapter about how to catch
the root URL using a ZCML <code class="docutils literal notranslate"><span class="pre">route</span></code> directive.</li>
<li>Added documentation to the URL Dispatch chapter about how to perform
a cleanup function at the end of a request (e.g. close the SQL
connection).</li>
</ul>
</div>
<div class="section" id="id447">
<h3>Bug Fixes<a class="headerlink" href="#id447" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">In version 0.6.3, passing a <code class="docutils literal notranslate"><span class="pre">get_root</span></code> callback (a &quot;root factory&quot;)
to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> became optional if any <code class="docutils literal notranslate"><span class="pre">route</span></code>
declaration was made in ZCML.  The intent was to make it possible to
disuse traversal entirely, instead relying entirely on URL dispatch
(Routes) to resolve all contexts.  However a compound set of bugs
prevented usage of a Routes-based root view (a view which responds
to &quot;/&quot;).  One bug existed in <cite>repoze.bfg.urldispatch`</cite>, another
existed in Routes itself.</p>
<p>To resolve this issue, the urldispatch module was fixed, and a fork
of the Routes trunk was put into the &quot;dev&quot; index named
<code class="docutils literal notranslate"><span class="pre">Routes-1.11dev-chrism-home</span></code>.  The source for the fork exists at
<a class="reference external" href="http://bitbucket.org/chrism/routes-home/">http://bitbucket.org/chrism/routes-home/</a> (broken link);
its contents have been merged into the Routes trunk
(what will be Routes 1.11).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="a5-2009-05-08">
<h2>0.8a5 (2009-05-08)<a class="headerlink" href="#a5-2009-05-08" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id448">
<h3>Features<a class="headerlink" href="#id448" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Two new security policies were added:
RemoteUserInheritingACLSecurityPolicy and
WhoInheritingACLSecurityPolicy.  These are security policies which
take into account <em>all</em> ACLs defined in the lineage of a context
rather than stopping at the first ACL found in a lineage.  See the
&quot;Security&quot; chapter of the API documentation for more information.</li>
<li>The API and narrative documentation dealing with security was
changed to introduce the new &quot;inheriting&quot; security policy variants.</li>
<li>Added glossary entry for &quot;lineage&quot;.</li>
</ul>
</div>
<div class="section" id="id449">
<h3>Deprecations<a class="headerlink" href="#id449" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The security policy previously named
<code class="docutils literal notranslate"><span class="pre">RepozeWhoIdentityACLSecurityPolicy</span></code> now has the slightly saner
name of <code class="docutils literal notranslate"><span class="pre">WhoACLSecurityPolicy</span></code>.  A deprecation warning is emitted
when this policy is imported under the &quot;old&quot; name; usually this is
due to its use in ZCML within your application.  If you're getting
this deprecation warning, change your ZCML to use the new name,
e.g. change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">utility</span>
  <span class="n">provides</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;</span>
  <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.security.RepozeWhoIdentityACLSecurityPolicy&quot;</span>
  <span class="o">/&gt;</span>
</pre></div>
</div>
<p>To:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">utility</span>
  <span class="n">provides</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.ISecurityPolicy&quot;</span>
  <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.security.WhoACLSecurityPolicy&quot;</span>
  <span class="o">/&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="a4-2009-05-04">
<h2>0.8a4 (2009-05-04)<a class="headerlink" href="#a4-2009-05-04" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id450">
<h3>Features<a class="headerlink" href="#id450" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">zope.testing</span></code> is no longer a direct dependency, although our
dependencies (such as <code class="docutils literal notranslate"><span class="pre">zope.interface</span></code>, <code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code>, etc)
still depend on it.</li>
<li>Tested on Google App Engine.  Added a tutorial to the documentation
explaining how to deploy a BFG app to GAE.</li>
</ul>
</div>
<div class="section" id="id451">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id451" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Applications which rely on <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup.cleanUp</span></code> in unit
tests can still use that function indefinitely.  However, for
maximum forward compatibility, they should import <code class="docutils literal notranslate"><span class="pre">cleanUp</span></code> from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> instead of from <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup</span></code>.
The BFG paster templates and docs have been changed to use this
function instead of the <code class="docutils literal notranslate"><span class="pre">zope.testing.cleanup</span></code> version.</li>
</ul>
</div>
</div>
<div class="section" id="a3-2009-05-03">
<h2>0.8a3 (2009-05-03)<a class="headerlink" href="#a3-2009-05-03" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id452">
<h3>Features<a class="headerlink" href="#id452" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Don't require a successful import of <code class="docutils literal notranslate"><span class="pre">zope.testing</span></code> at BFG
application runtime.  This allows us to get rid of <code class="docutils literal notranslate"><span class="pre">zope.testing</span></code>
on platforms like GAE which have file limits.</li>
</ul>
</div>
</div>
<div class="section" id="a2-2009-05-02">
<h2>0.8a2 (2009-05-02)<a class="headerlink" href="#a2-2009-05-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id453">
<h3>Features<a class="headerlink" href="#id453" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>We no longer include the <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> of the <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code>
package within the <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> of the &quot;repoze.bfg.includes&quot;
package.  This has been a no-op for some time now.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> package no longer imports from
<code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code> at module scope, deferring the import until later
within a method call.  The <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code> package can't be
imported on platforms like GAE.</li>
</ul>
</div>
</div>
<div class="section" id="a1-2009-05-02">
<h2>0.8a1 (2009-05-02)<a class="headerlink" href="#a1-2009-05-02" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="deprecation-warning-and-import-alias-removals">
<h3>Deprecation Warning and Import Alias Removals<a class="headerlink" href="#deprecation-warning-and-import-alias-removals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Since version 0.6.1, a deprecation warning has been emitted when the
name <code class="docutils literal notranslate"><span class="pre">model_url</span></code> is imported from the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code>
module.  This import alias (and the deprecation warning) has been
removed.  Any import of the <code class="docutils literal notranslate"><span class="pre">model_url</span></code> function will now need to
be done from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url</span></code>; any import of the name
<code class="docutils literal notranslate"><span class="pre">model_url</span></code> from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> will now fail.  This was
done to remove a dependency on zope.deferredimport.</li>
<li>Since version 0.6.5, a deprecation warning has been emitted when the
name <code class="docutils literal notranslate"><span class="pre">RoutesModelTraverser</span></code> is imported from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> module.  This import alias (and the
deprecation warning) has been removed.  Any import of the
<code class="docutils literal notranslate"><span class="pre">RoutesModelTraverser</span></code> class will now need to be done from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch</span></code>; any import of the name
<code class="docutils literal notranslate"><span class="pre">RoutesModelTraverser</span></code> from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> will now
fail.  This was done to remove a dependency on zope.deferredimport.</li>
</ul>
</div>
<div class="section" id="id454">
<h3>Features<a class="headerlink" href="#id454" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">This release of <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> is &quot;C-free&quot;.  This means it has no
hard dependencies on any software that must be compiled from C
source at installation time.  In particular, <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> no
longer depends on the <code class="docutils literal notranslate"><span class="pre">lxml</span></code> package.</p>
<p>This change has introduced some backwards incompatibilities,
described in the &quot;Backwards Incompatibilities&quot; section below.</p>
</li>
<li><p class="first">This release was tested on Windows XP.  It appears to work fine and
all the tests pass.</p>
</li>
</ul>
</div>
<div class="section" id="id455">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id455" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Incompatibilities related to making <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> &quot;C-free&quot;:</p>
<ul class="simple">
<li>Removed the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_genshi</span></code> module, and thus support
for Genshi-style chameleon templates.  Genshi-style Chameleon
templates depend upon <code class="docutils literal notranslate"><span class="pre">lxml</span></code>, which is implemented in C (as
opposed to pure Python) and the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> core is &quot;C-free&quot; as
of this release. You may get Genshi-style Chameleon support back by
installing the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_genshi</span></code> package availalable
from <a class="reference external" href="http://svn.repoze.org/repoze.bfg.chameleon_genshi">http://svn.repoze.org/repoze.bfg.chameleon_genshi</a> (also
available in the index at <a class="reference external" href="http://dist.repoze.org/bfg/0.8/simple">http://dist.repoze.org/bfg/0.8/simple</a>).
All existing code that depended on the <code class="docutils literal notranslate"><span class="pre">chameleon_genshi</span></code> module
prior to this release of <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> should work without change
after this addon is installed.</li>
<li>Removed the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code> module and thus support for XSL
templates.  The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code> module depended upon <code class="docutils literal notranslate"><span class="pre">lxml</span></code>,
which is implemented in C, and the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> core is &quot;C-free&quot;
as of this release.  You bay get XSL templating back by installing
the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code> package available from
<a class="reference external" href="http://svn.repoze.org/repoze.bfg.xslt/">http://svn.repoze.org/repoze.bfg.xslt/</a> (also available in the index
at <a class="reference external" href="http://dist.repoze.org/bfg/0.8/simple">http://dist.repoze.org/bfg/0.8/simple</a>).  All existing code that
depended upon the <code class="docutils literal notranslate"><span class="pre">xslt</span></code> module prior to this release of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> should work without modification after this addon is
installed.</li>
<li>Removed the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INodeTemplateRenderer</span></code>
interface and the an old b/w compat aliases from that interface to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INodeTemplate</span></code>.  This interface must now be
imported from the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt.interfaces</span></code> package after
installation of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code> addon package described
above as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INodeTemplateRenderer</span></code>.  This
interface was never part of any public API.</li>
</ul>
<p>Other backwards incompatibilities:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">render_template</span></code> function in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code>
returns Unicode instead of a string.  Likewise, the individual
values returned by the iterable created by the
<code class="docutils literal notranslate"><span class="pre">render_template_to_iterable</span></code> function are also each Unicode.
This is actually a backwards incompatibility inherited from our new
use of the combination of <code class="docutils literal notranslate"><span class="pre">chameleon.core</span></code> 1.0b32 (the
non-lxml-depending version) and <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code> 1.0b16+ ; the
<code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code> PageTemplateFile implementation used to return a
string, but now returns Unicode.</li>
</ul>
</div>
</div>
<div class="section" id="id456">
<h2>0.7.1 (2009-05-01)<a class="headerlink" href="#id456" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="index-related">
<h3>Index-Related<a class="headerlink" href="#index-related" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The canonical package index location for <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> has changed.
The &quot;old&quot; index (<a class="reference external" href="http://dist.repoze.org/lemonade/dev/simple">http://dist.repoze.org/lemonade/dev/simple</a>) has
been superseded by a new index location
(<a class="reference external" href="http://dist.repoze.org/bfg/current/simple">http://dist.repoze.org/bfg/current/simple</a>).  The installation
documentation has been updated as well as the <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file in
this package.  The &quot;lemonade&quot; index still exists, but it is not
guaranteed to have the latest BFG software in it, nor will it be
maintained in the future.</li>
</ul>
</div>
<div class="section" id="id457">
<h3>Features<a class="headerlink" href="#id457" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The &quot;paster create&quot; templates have been modified to use links to the
new &quot;bfg.repoze.org&quot; and &quot;docs.repoze.org&quot; websites.</p>
</li>
<li><p class="first">Added better documentation for virtual hosting at a URL prefix
within the virtual hosting docs chapter.</p>
</li>
<li><p class="first">The interface for <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITraverser</span></code> and the
built-in implementations that implement the interface
(<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.ModelGraphTraverser</span></code>, and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></code>) now expect the
<code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of an ITraverser to return 3 additional
arguments: <code class="docutils literal notranslate"><span class="pre">traversed</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code>, and
<code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code> (the old contract was that the <code class="docutils literal notranslate"><span class="pre">__call__</span></code>
method of an ITraverser returned; three arguments, the contract new
is that it returns six).  <code class="docutils literal notranslate"><span class="pre">traversed</span></code> will be a sequence of
Unicode names that were traversed (including the virtual root path,
if any) or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no traversal was performed, <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code>
will be a model object representing the virtual root (or the
physical root if traversal was not performed), and
<code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code> will be a sequence representing the virtual
root path (a sequence of Unicode names) or <code class="docutils literal notranslate"><span class="pre">None</span></code> if traversal was
not performed.</p>
<p>Six arguments are now returned from BFG ITraversers.  They are
returned in this order: <code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">view_name</span></code>, <code class="docutils literal notranslate"><span class="pre">subpath</span></code>,
<code class="docutils literal notranslate"><span class="pre">traversed</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code>, and <code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code>.</p>
<p>Places in the BFG code which called an ITraverser continue to accept
a 3-argument return value, although BFG will generate and log a
warning when one is encountered.</p>
</li>
<li><p class="first">The request object now has the following attributes: <code class="docutils literal notranslate"><span class="pre">traversed</span></code>
(the sequence of names traversed or <code class="docutils literal notranslate"><span class="pre">None</span></code> if traversal was not
performed), <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code> (the model object representing the
virtual root, including the virtual root path if any), and
<code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code> (the seuquence of names representing the
virtual root path or <code class="docutils literal notranslate"><span class="pre">None</span></code> if traversal was not performed).</p>
</li>
<li><p class="first">A new decorator named <code class="docutils literal notranslate"><span class="pre">wsgiapp2</span></code> was added to the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi</span></code> module.  This decorator performs the same
function as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.wsgiapp</span></code> except it fixes up the
<code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> environment values before
invoking the WSGI subapplication.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.DummyRequest</span></code> object now has default
attributes for <code class="docutils literal notranslate"><span class="pre">traversed</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual_root</span></code>, and
<code class="docutils literal notranslate"><span class="pre">virtual_root_path</span></code>.</p>
</li>
<li><p class="first">The RoutesModelTraverser now behaves more like the Routes
&quot;RoutesMiddleware&quot; object when an element in the match dict is named
<code class="docutils literal notranslate"><span class="pre">path_info</span></code> (usually when there's a pattern like
<code class="docutils literal notranslate"><span class="pre">http://foo/*path_info</span></code>).  When this is the case, the
<code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> environment variable is set to the value in the match
dict, and the <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> is appended to with the prefix of the
original <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> not including the value of the new variable.</p>
</li>
<li><p class="first">The notfound debug now shows the traversed path, the virtual root,
and the virtual root path too.</p>
</li>
<li><p class="first">Speed up / clarify 'traversal' module's 'model_path', 'model_path_tuple',
and '_model_path_list' functions.</p>
</li>
</ul>
</div>
<div class="section" id="id458">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id458" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">In previous releases, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></code> functions always ignored
the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> argument of the root object in a model graph (
effectively replacing it with a leading <code class="docutils literal notranslate"><span class="pre">/</span></code> in the returned value)
when a path or URL was generated.  The code required to perform this
operation was not efficient.  As of this release, the root object in
a model graph <em>must</em> have a <code class="docutils literal notranslate"><span class="pre">__name__</span></code> attribute that is either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or the empty string (<code class="docutils literal notranslate"><span class="pre">''</span></code>) for URLs and paths to be
generated properly from these APIs.  If your root model object has a
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> argument that is not one of these values, you will need
to change your code for URLs and paths to be generated properly.  If
your model graph has a root node with a string <code class="docutils literal notranslate"><span class="pre">__name__</span></code> that is
not null, the value of <code class="docutils literal notranslate"><span class="pre">__name__</span></code> will be prepended to every path
and URL generated.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.LocationProxy</span></code> class and the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.ClassAndInstanceDescr</span></code> class have both been
removed in order to be able to eventually shed a dependency on
<code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code>.  Neither of these classes was ever an API.</p>
</li>
<li><p class="first">In all previous releases, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.locate</span></code>
function worked like so: if a model did not explicitly provide the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ILocation</span></code> interface, <code class="docutils literal notranslate"><span class="pre">locate</span></code> returned a
<code class="docutils literal notranslate"><span class="pre">LocationProxy</span></code> object representing <code class="docutils literal notranslate"><span class="pre">model</span></code> with its
<code class="docutils literal notranslate"><span class="pre">__parent__</span></code> attribute assigned to <code class="docutils literal notranslate"><span class="pre">parent</span></code> and a <code class="docutils literal notranslate"><span class="pre">__name__</span></code>
attribute assigned to <code class="docutils literal notranslate"><span class="pre">__name__</span></code>.  In this release, the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.locate</span></code> function simply jams the <code class="docutils literal notranslate"><span class="pre">__name__</span></code>
and <code class="docutils literal notranslate"><span class="pre">__parent__</span></code> attributes on to the supplied model
unconditionally, no matter if the object implements ILocation or
not, and it never returns a proxy.  This was done because the
LocationProxy behavior has now moved into an add-on package
(<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversalwrapper</span></code>), in order to eventually be able to
shed a dependency on <code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code>.</p>
</li>
<li><p class="first">In all previous releases, by default, if traversal was used (as
opposed to URL-dispatch), and the root object supplied
the``repoze.bfg.interfaces.ILocation`` interface, but the children
returned via its <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> returned an object that did not
implement the same interface, <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> provided some
implicit help during traversal.  This traversal feature wrapped
subobjects from the root (and thereafter) that did not implement
<code class="docutils literal notranslate"><span class="pre">ILocation</span></code> in proxies which automatically provided them with a
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> and <code class="docutils literal notranslate"><span class="pre">__parent__</span></code> attribute based on the name being
traversed and the previous object traversed.  This feature has now
been removed from the base <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package for purposes of
eventually shedding a dependency on <code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code>.</p>
<p>In order to re-enable the wrapper behavior for older applications
which cannot be changed, register the &quot;traversalwrapper&quot;
<code class="docutils literal notranslate"><span class="pre">ModelGraphTraverser</span></code> as the traversal policy, rather than the
default <code class="docutils literal notranslate"><span class="pre">ModelGraphTraverser</span></code>. To use this feature, you will need
to install the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversalwrapper</span></code> package (an add-on
package, available at
<a class="reference external" href="http://svn.repoze.org/repoze.bfg.traversalwrapper">http://svn.repoze.org/repoze.bfg.traversalwrapper</a>) Then change your
application's <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> to include the following stanza:</p>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>&lt;adapter</dt>
<dd><p class="first last">factory=&quot;repoze.bfg.traversalwrapper.ModelGraphTraverser&quot;
provides=&quot;repoze.bfg.interfaces.ITraverserFactory&quot;
for=&quot;*&quot;
/&gt;</p>
</dd>
</dl>
</div></blockquote>
<p>When this ITraverserFactory is used instead of the default, no
object in the graph (even the root object) must supply a
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> or <code class="docutils literal notranslate"><span class="pre">__parent__</span></code> attribute.  Even if subobjects
returned from the root <em>do</em> implement the ILocation interface,
these will still be wrapped in proxies that override the object's
&quot;real&quot; <code class="docutils literal notranslate"><span class="pre">__parent__</span></code> and <code class="docutils literal notranslate"><span class="pre">__name__</span></code> attributes.</p>
<p>See also changes to the &quot;Models&quot; chapter of the documentation (in
the &quot;Location-Aware Model Instances&quot;) section.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="id459">
<h2>0.7.0 (2009-04-11)<a class="headerlink" href="#id459" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id460">
<h3>Bug Fixes<a class="headerlink" href="#id460" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix a bug in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.HTTPException</span></code>: the content length
was returned as an int rather than as a string.</li>
<li>Add explicit dependencies on <code class="docutils literal notranslate"><span class="pre">zope.deferredimport</span></code>,
<code class="docutils literal notranslate"><span class="pre">zope.deprecation</span></code>, and <code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code> for forward compatibility
reasons (<code class="docutils literal notranslate"><span class="pre">zope.component</span></code> will stop relying on
<code class="docutils literal notranslate"><span class="pre">zope.deferredimport</span></code> soon and although we use it directly, it's
only a transitive dependency, and ''zope.deprecation`` and
<code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code> are used directly even though they're only transitive
dependencies as well).</li>
<li>Using <code class="docutils literal notranslate"><span class="pre">model_url</span></code> or <code class="docutils literal notranslate"><span class="pre">model_path</span></code> against a broken model graph
(one with models that had a non-root model with a <code class="docutils literal notranslate"><span class="pre">__name__</span></code> of
<code class="docutils literal notranslate"><span class="pre">None</span></code>) caused an inscrutable error to be thrown: ( if not
<code class="docutils literal notranslate"><span class="pre">_must_quote[cachekey].search(s):</span> <span class="pre">TypeError:</span> <span class="pre">expected</span> <span class="pre">string</span> <span class="pre">or</span>
<span class="pre">buffer</span></code>).  Now URLs and paths generated against graphs that have
None names in intermediate nodes will replace the None with the
empty string, and, as a result, the error won't be raised.  Of
course the URL or path will still be bogus.</li>
</ul>
</div>
<div class="section" id="id461">
<h3>Features<a class="headerlink" href="#id461" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make it possible to have <code class="docutils literal notranslate"><span class="pre">testing.DummyTemplateRenderer</span></code> return
some nondefault string representation.</li>
<li>Added a new <code class="docutils literal notranslate"><span class="pre">anchor</span></code> keyword argument to <code class="docutils literal notranslate"><span class="pre">model_url</span></code>.  If
<code class="docutils literal notranslate"><span class="pre">anchor</span></code> is present, its string representation will be used
as a named anchor in the generated URL (e.g. if <code class="docutils literal notranslate"><span class="pre">anchor</span></code> is
passed as <code class="docutils literal notranslate"><span class="pre">foo</span></code> and the model URL is
<code class="docutils literal notranslate"><span class="pre">http://example.com/model/url</span></code>, the generated URL will be
<code class="docutils literal notranslate"><span class="pre">http://example.com/model/url#foo</span></code>).</li>
</ul>
</div>
<div class="section" id="id462">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id462" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The default request charset encoding is now <code class="docutils literal notranslate"><span class="pre">utf-8</span></code>.  As a result,
the request machinery will attempt to decode values from the utf-8
encoding to Unicode automatically when they are obtained via
<code class="docutils literal notranslate"><span class="pre">request.params</span></code>, <code class="docutils literal notranslate"><span class="pre">request.GET</span></code>, and <code class="docutils literal notranslate"><span class="pre">request.POST</span></code>.  The
previous behavior of BFG was to return a bytestring when a value was
accessed in this manner.  This change will break form handling code
in apps that rely on values from those APIs being considered
bytestrings.  If you are manually decoding values from form
submissions in your application, you'll either need to change the
code that does that to expect Unicode values from
<code class="docutils literal notranslate"><span class="pre">request.params</span></code>, <code class="docutils literal notranslate"><span class="pre">request.GET</span></code> and <code class="docutils literal notranslate"><span class="pre">request.POST</span></code>, or you'll
need to explicitly reenable the previous behavior.  To reenable the
previous behavior, add the following to your application's
<code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">subscriber</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.interfaces.INewRequest&quot;</span>
            <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;repoze.bfg.request.make_request_ascii&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>See also the documentation in the &quot;Views&quot; chapter of the BFG docs
entitled &quot;Using Views to Handle Form Submissions (Unicode and
Character Set Issues)&quot;.</p>
</li>
</ul>
</div>
<div class="section" id="id463">
<h3>Documentation<a class="headerlink" href="#id463" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a section to the narrative Views chapter entitled &quot;Using Views
to Handle Form Submissions (Unicode and Character Set Issues)&quot;
explaining implicit decoding of form data values.</li>
</ul>
</div>
</div>
<div class="section" id="id464">
<h2>0.6.9 (2009-02-16)<a class="headerlink" href="#id464" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id465">
<h3>Bug Fixes<a class="headerlink" href="#id465" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>lru cache was unstable under concurrency (big surprise!) when it
tried to redelete a key in the cache that had already been deleted.
Symptom: line 64 in put:del data[oldkey]:KeyError: '/some/path'.
Now we just ignore the key error if we can't delete the key (it has
already been deleted).</li>
<li>Empty location names in model paths when generating a URL using
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.model_url</span></code> based on a model obtained via traversal are
no longer ignored in the generated URL.  This means that if a
non-root model object has a <code class="docutils literal notranslate"><span class="pre">__name__</span></code> of <code class="docutils literal notranslate"><span class="pre">''</span></code>, the URL will
reflect it (e.g. <code class="docutils literal notranslate"><span class="pre">model_url</span></code> will generate <code class="docutils literal notranslate"><span class="pre">http://foo/bar//baz</span></code>
if an object with the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> of <code class="docutils literal notranslate"><span class="pre">''</span></code> is a child of bar and
the parent of baz).  URLs generated with empty path segments are,
however, still irresolveable by the model graph traverser on request
ingress (the traverser strips empty path segment names).</li>
</ul>
</div>
<div class="section" id="id466">
<h3>Features<a class="headerlink" href="#id466" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Microspeedups of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></code>, and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.urlencode</span></code>.</li>
<li>add zip_safe = false to setup.cfg.</li>
</ul>
</div>
<div class="section" id="id467">
<h3>Documentation<a class="headerlink" href="#id467" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add a note to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></code> API
docs about caching of computed values.</li>
</ul>
</div>
<div class="section" id="id468">
<h3>Implementation Changes<a class="headerlink" href="#id468" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Simplification of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.TraversalContextURL.__call__</span></code> (it now uses
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code> instead of rolling its own
path-generation).</li>
</ul>
</div>
</div>
<div class="section" id="id469">
<h2>0.6.8 (2009-02-05)<a class="headerlink" href="#id469" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id470">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id470" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code> API now returns a <em>quoted</em>
string rather than a string represented by series of unquoted
elements joined via <code class="docutils literal notranslate"><span class="pre">/</span></code> characters.  Previously it returned a
string or unicode object representing the model path, with each
segment name in the path joined together via <code class="docutils literal notranslate"><span class="pre">/</span></code> characters,
e.g. <code class="docutils literal notranslate"><span class="pre">/foo</span> <span class="pre">/bar</span></code>.  Now it returns a string, where each segment is
a UTF-8 encoded and URL-quoted element e.g. <code class="docutils literal notranslate"><span class="pre">/foo%20/bar</span></code>.  This
change was (as discussed briefly on the repoze-dev maillist)
necessary to accomodate model objects which themselves have
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> attributes that contain the <code class="docutils literal notranslate"><span class="pre">/</span></code> character.</p>
<p>For people that have no models that have high-order Unicode
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> attributes or <code class="docutils literal notranslate"><span class="pre">__name__</span></code> attributes with values that
require URL-quoting with in their model graphs, this won't cause any
issue.  However, if you have code that currently expects
<code class="docutils literal notranslate"><span class="pre">model_path</span></code> to return an unquoted string, or you have an existing
application with data generated via the old method, and you're too
lazy to change anything, you may wish replace the BFG-imported
<code class="docutils literal notranslate"><span class="pre">model_path</span></code> in your code with this function (this is the code of
the &quot;old&quot; <code class="docutils literal notranslate"><span class="pre">model_path</span></code> implementation):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repoze.bfg.location</span> <span class="k">import</span> <span class="n">lineage</span>

<span class="k">def</span> <span class="nf">i_am_too_lazy_to_move_to_the_new_model_path</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="o">*</span><span class="n">elements</span><span class="p">):</span>
    <span class="n">rpath</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">lineage</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span>
            <span class="n">rpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">rpath</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">elements</span><span class="p">:</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">suffix</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">path</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.find_model</span></code> API no longer implicitly
converts unicode representations of a full path passed to it as a
Unicode object into a UTF-8 string.  Callers should either use
prequoted path strings returned by
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code>, or tuple values returned by the
result of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></code> or they should
use the guidelines about passing a string <code class="docutils literal notranslate"><span class="pre">path</span></code> argument
described in the <code class="docutils literal notranslate"><span class="pre">find_model</span></code> API documentation.</p>
</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3>Bugfixes<a class="headerlink" href="#bugfixes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Each argument contained in <code class="docutils literal notranslate"><span class="pre">elements</span></code> passed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code> will now have any <code class="docutils literal notranslate"><span class="pre">/</span></code>
characters contained within quoted to <code class="docutils literal notranslate"><span class="pre">%2F</span></code> in the returned
string.  Previously, <code class="docutils literal notranslate"><span class="pre">/</span></code> characters in elements were left unquoted
(a bug).</li>
</ul>
</div>
<div class="section" id="id471">
<h3>Features<a class="headerlink" href="#id471" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path_tuple</span></code> API was added.  This API
is an alternative to <code class="docutils literal notranslate"><span class="pre">model_path</span></code> (which returns a string);
<code class="docutils literal notranslate"><span class="pre">model_path_tuple</span></code> returns a model path as a tuple (much like
Zope's <code class="docutils literal notranslate"><span class="pre">getPhysicalPath</span></code>).</li>
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.quote_path_segment</span></code> API was added.  This
API will quote an individual path segment (string or unicode
object).  See the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> API documentation for
more information.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.find_model</span></code> API now accepts &quot;path
tuples&quot; (see the above note regarding <code class="docutils literal notranslate"><span class="pre">model_path_tuple</span></code>) as well
as string path representations (from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_path</span></code>) as a <code class="docutils literal notranslate"><span class="pre">path</span></code> argument.</li>
<li>Add ` <cite>renderer`</cite> argument (defaulting to None) to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.registerDummyRenderer</span></code>.  This makes it
possible, for instance, to register a custom renderer that raises an
exception in a unit test.</li>
</ul>
</div>
<div class="section" id="id472">
<h3>Implementation Changes<a class="headerlink" href="#id472" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Moved _url_quote function back to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.url</span></code>.  This is not an API.</li>
</ul>
</div>
</div>
<div class="section" id="id473">
<h2>0.6.7 (2009-01-27)<a class="headerlink" href="#id473" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id474">
<h3>Features<a class="headerlink" href="#id474" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> API now works against contexts
derived from Routes URL dispatch (<code class="docutils literal notranslate"><span class="pre">Routes.util.url_for</span></code> is called
under the hood).</li>
<li>&quot;Virtual root&quot; support for traversal-based applications has been
added.  Virtual root support is useful when you'd like to host some
model in a <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> model graph as an application under a
URL pathname that does not include the model path itself.  For more
information, see the (new) &quot;Virtual Hosting&quot; chapter in the
documentation.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.virtual_root</span></code> API has been added.  When
called, it returns the virtual root object (or the physical root
object if no virtual root has been specified).</li>
</ul>
</div>
<div class="section" id="id475">
<h3>Implementation Changes<a class="headerlink" href="#id475" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></code> has been moved to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">model_url</span></code> URL generation is now performed via an adapter lookup
based on the context and the request.</li>
<li>ZCML which registers two adapters for the <code class="docutils literal notranslate"><span class="pre">IContextURL</span></code> interface
has been added to the configure.zcml in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.includes</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="id476">
<h2>0.6.6 (2009-01-26)<a class="headerlink" href="#id476" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id477">
<h3>Implementation Changes<a class="headerlink" href="#id477" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>There is an indirection in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> now that
consults a utility to generate the base model url (without extra
elements or a query string).  Eventually this will service virtual
hosting; for now it's undocumented and should not be hooked.</li>
</ul>
</div>
</div>
<div class="section" id="id478">
<h2>0.6.5 (2009-01-26)<a class="headerlink" href="#id478" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id479">
<h3>Features<a class="headerlink" href="#id479" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>You can now override the NotFound and Unauthorized responses that
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> generates when a view cannot be found or cannot be
invoked due to lack of permission.  See the &quot;ZCML Hooks&quot; chapter in
the docs for more information.</li>
<li>Added Routes ZCML directive attribute explanations in documentation.</li>
<li>Added a <code class="docutils literal notranslate"><span class="pre">traversal_path</span></code> API to the traversal module; see the
&quot;traversal&quot; API chapter in the docs.  This was a function previously
known as <code class="docutils literal notranslate"><span class="pre">split_path</span></code> that was not an API but people were using it
anyway.  Unlike <code class="docutils literal notranslate"><span class="pre">split_path</span></code>, it now returns a tuple instead of a
list (as its values are cached).</li>
</ul>
</div>
<div class="section" id="id480">
<h3>Behavior Changes<a class="headerlink" href="#id480" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.render_view_to_response</span></code> API will no longer
raise a ValueError if an object returned by a view function it calls
does not possess certain attributes (<code class="docutils literal notranslate"><span class="pre">headerlist</span></code>, <code class="docutils literal notranslate"><span class="pre">app_iter</span></code>,
<code class="docutils literal notranslate"><span class="pre">status</span></code>).  This API used to attempt to perform a check using the
<code class="docutils literal notranslate"><span class="pre">is_response</span></code> function in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code>, and raised a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if the <code class="docutils literal notranslate"><span class="pre">is_response</span></code> check failed.  The
responsibility is now the caller's to ensure that the return value
from a view function is a &quot;real&quot; response.</li>
<li>WSGI environ dicts passed to <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> 's Router must now
contain a REQUEST_METHOD key/value; if they do not, a KeyError will
be raised (speed).</li>
<li>It is no longer permissible to pass a &quot;nested&quot; list of principals to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.ACLAuthorizer.permits</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">['fred',</span> <span class="pre">['larry',</span>
<span class="pre">'bob']]</span></code>).  The principals list must be fully expanded.  This
feature was never documented, and was never an API, so it's not a
backwards incompatibility.</li>
<li>It is no longer permissible for a security ACE to contain a &quot;nested&quot;
list of permissions (e.g. <code class="docutils literal notranslate"><span class="pre">(Allow,</span> <span class="pre">Everyone,</span> <span class="pre">['read',</span> <span class="pre">['view',</span>
<span class="pre">['write',</span> <span class="pre">'manage']]])`)`.</span>&#160; <span class="pre">The</span> <span class="pre">list</span> <span class="pre">must</span> <span class="pre">instead</span> <span class="pre">be</span> <span class="pre">fully</span> <span class="pre">expanded</span>
<span class="pre">(e.g.</span> <span class="pre">``(Allow,</span> <span class="pre">Everyone,</span> <span class="pre">['read',</span> <span class="pre">'view',</span> <span class="pre">'write',</span> <span class="pre">'manage])</span></code>).  This
feature was never documented, and was never an API, so it's not a
backwards incompatibility.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesRootFactory</span></code> now injects the
<code class="docutils literal notranslate"><span class="pre">wsgiorg.routing_args</span></code> environment variable into the environ when
a route matches.  This is a tuple of ((), routing_args) where
routing_args is the value that comes back from the routes mapper
match (the &quot;match dict&quot;).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></code> class now wants to
obtain the <code class="docutils literal notranslate"><span class="pre">view_name</span></code> and <code class="docutils literal notranslate"><span class="pre">subpath</span></code> from the
<code class="docutils literal notranslate"><span class="pre">wsgiorgs.routing_args</span></code> environment variable.  It falls back to
obtaining these from the context for backwards compatibility.</li>
</ul>
</div>
<div class="section" id="id481">
<h3>Implementation Changes<a class="headerlink" href="#id481" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Get rid of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.ACLAuthorizer</span></code>: the
<code class="docutils literal notranslate"><span class="pre">ACLSecurityPolicy</span></code> now does what it did inline.</li>
<li>Get rid of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.NoAuthorizationInformation</span></code>
exception: it was used only by <code class="docutils literal notranslate"><span class="pre">ACLAuthorizer</span></code>.</li>
<li>Use a homegrown NotFound error instead of <code class="docutils literal notranslate"><span class="pre">webob.exc.HTTPNotFound</span></code>
(the latter is slow).</li>
<li>Use a homegrown Unauthorized error instead of
<code class="docutils literal notranslate"><span class="pre">webob.exc.Unauthorized</span></code> (the latter is slow).</li>
<li>the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.lru.lru_cached</span></code> decorator now uses functools.wraps
in order to make documentation of LRU-cached functions possible.</li>
<li>Various speed micro-tweaks.</li>
</ul>
</div>
<div class="section" id="id482">
<h3>Bug Fixes<a class="headerlink" href="#id482" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing.DummyModel</span></code> did not have a <code class="docutils literal notranslate"><span class="pre">get</span></code> method;
it now does.</li>
</ul>
</div>
</div>
<div class="section" id="id483">
<h2>0.6.4 (2009-01-23)<a class="headerlink" href="#id483" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id484">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id484" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">unicode_path_segments</span></code> configuration variable and the
<code class="docutils literal notranslate"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></code> configuration variable have been
removed.  Path segments are now always passed to model
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> methods as unicode.  &quot;True&quot; has been the default for
this setting since 0.5.4, but changing this configuration setting to
false allowed you to go back to passing raw path element strings to
model <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> methods.  Removal of this knob services a
speed goal (we get about +80 req/s by removing the check), and it's
clearer just to always expect unicode path segments in model
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> methods.</li>
</ul>
</div>
<div class="section" id="id485">
<h3>Implementation Changes<a class="headerlink" href="#id485" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.split_path</span></code> now also handles decoding
path segments to unicode (for speed, because its results are
cached).</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.step</span></code> was made a method of the</dt>
<dd>ModelGraphTraverser.</dd>
</dl>
</li>
<li>Use &quot;precooked&quot; Request subclasses
(e.g. <code class="docutils literal notranslate"><span class="pre">repoze.bfg.request.GETRequest</span></code>) that correspond to HTTP
request methods within <code class="docutils literal notranslate"><span class="pre">router.py</span></code> when constructing a request
object rather than using <code class="docutils literal notranslate"><span class="pre">alsoProvides</span></code> to attach the proper
interface to an unsubclassed <code class="docutils literal notranslate"><span class="pre">webob.Request</span></code>.  This pattern is
purely an optimization (e.g. preventing calls to <code class="docutils literal notranslate"><span class="pre">alsoProvides</span></code>
means the difference between 590 r/s and 690 r/s on a MacBook 2GHz).</li>
<li>Tease out an extra 4% performance boost by changing the Router;
instead of using imported ZCA APIs, use the same APIs directly
against the registry that is an attribute of the Router.</li>
<li>The registry used by BFG is now a subclass of
<code class="docutils literal notranslate"><span class="pre">zope.component.registry.Components</span></code> (defined as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.Registry</span></code>); it has a <code class="docutils literal notranslate"><span class="pre">notify</span></code> method, a
<code class="docutils literal notranslate"><span class="pre">registerSubscriptionAdapter</span></code> and a <code class="docutils literal notranslate"><span class="pre">registerHandler</span></code> method.
If no subscribers are registered via <code class="docutils literal notranslate"><span class="pre">registerHandler</span></code> or
<code class="docutils literal notranslate"><span class="pre">registerSubscriptionAdapter</span></code>, <code class="docutils literal notranslate"><span class="pre">notify</span></code> is a noop for speed.</li>
<li>The Allowed and Denied classes in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security</span></code> now are
lazier about constructing the representation of a reason message for
speed; <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view_execution_permitted</span></code> takes advantage of
this.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">is_response</span></code> check was sped up by about half at the expense
of making its code slightly uglier.</li>
</ul>
</div>
<div class="section" id="new-modules">
<h3>New Modules<a class="headerlink" href="#new-modules" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.lru</span></code> implements an LRU cache class and a decorator for
internal use.</li>
</ul>
</div>
</div>
<div class="section" id="id486">
<h2>0.6.3 (2009-01-19)<a class="headerlink" href="#id486" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id487">
<h3>Bug Fixes<a class="headerlink" href="#id487" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Readd <code class="docutils literal notranslate"><span class="pre">root_policy</span></code> attribute on Router object (as a property
which returns the IRootFactory utility).  It was inadvertently
removed in 0.6.2.  Code in the wild depended upon its presence
(esp. scripts and &quot;debug&quot; helpers).</li>
</ul>
</div>
<div class="section" id="id488">
<h3>Features<a class="headerlink" href="#id488" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>URL-dispatch has been overhauled: it is no longer necessary to
manually create a RoutesMapper in your application's entry point
callable in order to use URL-dispatch (aka <a class="reference external" href="http://routes.groovie.org">Routes</a>).  A new <code class="docutils literal notranslate"><span class="pre">route</span></code> directive has been
added to the available list of ZCML directives.  Each <code class="docutils literal notranslate"><span class="pre">route</span></code>
directive inserted into your application's <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>
establishes a Routes mapper connection.  If any <code class="docutils literal notranslate"><span class="pre">route</span></code>
declarations are made via ZCML within a particular application, the
<code class="docutils literal notranslate"><span class="pre">get_root</span></code> callable passed in to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code>
will automatically be wrapped in the equivalent of a RoutesMapper.
Additionally, the new <code class="docutils literal notranslate"><span class="pre">route</span></code> directive allows the specification
of a <code class="docutils literal notranslate"><span class="pre">context_interfaces</span></code> attribute for a route, this will be used
to tag the manufactured routes context with specific interfaces when
a route specifying a <code class="docutils literal notranslate"><span class="pre">context_interfaces</span></code> attribute is matched.</li>
<li>A new interface <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IContextNotFound</span></code> was
added.  This interface is attached to a &quot;dummy&quot; context generated
when Routes cannot find a match and there is no &quot;fallback&quot; get_root
callable that uses traversal.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">bfg_starter</span></code> and <code class="docutils literal notranslate"><span class="pre">bfg_zodb</span></code> &quot;paster create&quot; templates now
contain images and CSS which are displayed when the default page is
displayed after initial project generation.</li>
<li>Allow the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.static</span></code> helper to be passed a relative
<code class="docutils literal notranslate"><span class="pre">root_path</span></code> name; it will be considered relative to the file in
which it was called.</li>
<li>The functionality of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.convention</span></code> has been merged into
the core.  Applications which make use of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.convention</span></code>
will continue to work indefinitely, but it is recommended that apps
stop depending upon it.  To do so, substitute imports of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.convention.bfg_view</span></code> with imports of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.bfg_view</span></code>, and change the stanza in ZCML from
<code class="docutils literal notranslate"><span class="pre">&lt;convention</span> <span class="pre">package=&quot;.&quot;&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;scan</span> <span class="pre">package=&quot;.&quot;&gt;</span></code>.  As a result
of the merge, bfg has grown a new dependency: <code class="docutils literal notranslate"><span class="pre">martian</span></code>.</li>
<li>View functions which use the pushpage decorator are now pickleable
(meaning their use won't prevent a <code class="docutils literal notranslate"><span class="pre">configure.zcml.cache</span></code> file
from being written to disk).</li>
<li>Instead of invariably using <code class="docutils literal notranslate"><span class="pre">webob.Request</span></code> as the &quot;request
factory&quot; (e.g. in the <code class="docutils literal notranslate"><span class="pre">Router</span></code> class) and <code class="docutils literal notranslate"><span class="pre">webob.Response</span></code> and
the &quot;response factory&quot; (e.g. in <code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code>),
allow both to be overridden via a ZCML utility hook.  See the &quot;Using
ZCML Hooks&quot; chapter of the documentation for more information.</li>
</ul>
</div>
<div class="section" id="id489">
<h3>Deprecations<a class="headerlink" href="#id489" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The class <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesContext</span></code> has been renamed
to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.DefaultRoutesContext</span></code>.  The class
should be imported by the new name as necessary (although in reality
it probably shouldn't be imported from anywhere except internally
within BFG, as it's not part of the API).</li>
</ul>
</div>
<div class="section" id="id490">
<h3>Implementation Changes<a class="headerlink" href="#id490" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.wsgi.wsgiapp</span></code> decorator now uses
<code class="docutils literal notranslate"><span class="pre">webob.Request.get_response</span></code> to do its work rather than relying on
homegrown WSGI code.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view.static</span></code> helper now uses
<code class="docutils literal notranslate"><span class="pre">webob.Request.get_response</span></code> to do its work rather than relying on
homegrown WSGI code.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.urldispatch.RoutesModelTraverser</span></code> class has been
moved to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.RoutesModelTraverser</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.makeRegistry</span></code> function was renamed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.populateRegistry</span></code> and now accepts a
<code class="docutils literal notranslate"><span class="pre">registry</span></code> argument (which should be an instance of
<code class="docutils literal notranslate"><span class="pre">zope.component.registry.Components</span></code>).</li>
</ul>
</div>
<div class="section" id="documentation-additions">
<h3>Documentation Additions<a class="headerlink" href="#documentation-additions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Updated narrative urldispatch chapter with changes required by
<code class="docutils literal notranslate"><span class="pre">&lt;route..&gt;</span></code> ZCML directive.</li>
<li>Add a section on &quot;Using BFG Security With URL Dispatch&quot; into the
urldispatch chapter of the documentation.</li>
<li>Better documentation of security policy implementations that ship
with repoze.bfg.</li>
<li>Added a &quot;Using ZPT Macros in repoze.bfg&quot; section to the narrative
templating chapter.</li>
</ul>
</div>
</div>
<div class="section" id="id491">
<h2>0.6.2 (2009-01-13)<a class="headerlink" href="#id491" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id492">
<h3>Features<a class="headerlink" href="#id492" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Tests can be run with coverage output if you've got <code class="docutils literal notranslate"><span class="pre">nose</span></code>
installed in the interpreter which you use to run tests.  Using an
interpreter with <code class="docutils literal notranslate"><span class="pre">nose</span></code> installed, do <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span>
<span class="pre">nosetests</span></code> within a checkout of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package to see
test coverage output.</li>
<li>Added a <code class="docutils literal notranslate"><span class="pre">post</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing:DummyRequest</span></code>
constructor.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">__len__</span></code> and <code class="docutils literal notranslate"><span class="pre">__nonzero__</span></code> to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing:DummyModel</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.get_options</span></code> callable (now renamed to
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.setings.get_options</span></code>) used to return only
framework-specific keys and values in the dictionary it returned.
It now returns all the keys and values in the dictionary it is
passed <em>plus</em> any framework-specific settings culled from the
environment.  As a side effect, all PasteDeploy application-specific
config file settings are made available as attributes of the
<code class="docutils literal notranslate"><span class="pre">ISettings</span></code> utility from within BFG.</li>
<li>Renamed the existing BFG paster template to <code class="docutils literal notranslate"><span class="pre">bfg_starter</span></code>.  Added
another template (<code class="docutils literal notranslate"><span class="pre">bfg_zodb</span></code>) showing default ZODB setup using
<code class="docutils literal notranslate"><span class="pre">repoze.zodbconn</span></code>.</li>
<li>Add a method named <code class="docutils literal notranslate"><span class="pre">assert_</span></code> to the DummyTemplateRenderer.  This
method accepts keyword arguments.  Each key/value pair in the
keyword arguments causes an assertion to be made that the renderer
received this key with a value equal to the asserted value.</li>
<li>Projects generated by the paster templates now use the
<code class="docutils literal notranslate"><span class="pre">DummyTemplateRenderer.assert_</span></code> method in their view tests.</li>
<li>Make the (internal) thread local registry manager maintain a stack
of registries in order to make it possible to call one BFG
application from inside another.</li>
<li>An interface specific to the HTTP verb (GET/PUT/POST/DELETE/HEAD) is
attached to each request object on ingress.  The HTTP-verb-related
interfaces are defined in <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces</span></code> and are
<code class="docutils literal notranslate"><span class="pre">IGETRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">IPOSTRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">IPUTRequest</span></code>,
<code class="docutils literal notranslate"><span class="pre">IDELETERequest</span></code> and <code class="docutils literal notranslate"><span class="pre">IHEADRequest</span></code>.  These interfaces can be
specified as the <code class="docutils literal notranslate"><span class="pre">request_type</span></code> attribute of a bfg view
declaration.  A view naming a specific HTTP-verb-matching interface
will be found only if the view is defined with a request_type that
matches the HTTP verb in the incoming request.  The more general
<code class="docutils literal notranslate"><span class="pre">IRequest</span></code> interface can be used as the request_type to catch all
requests (and this is indeed the default).  All requests implement
<code class="docutils literal notranslate"><span class="pre">IRequest</span></code>. The HTTP-verb-matching idea was pioneered by
<a class="reference external" href="http://pypi.python.org/pypi/repoze.bfg.restrequest/1.0.1">repoze.bfg.restrequest</a> . That
package is no longer required, but still functions fine.</li>
</ul>
</div>
<div class="section" id="id493">
<h3>Bug Fixes<a class="headerlink" href="#id493" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Fix a bug where the Paste configuration's <code class="docutils literal notranslate"><span class="pre">unicode_path_segments</span></code>
(and os.environ's <code class="docutils literal notranslate"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></code>) may have been
defaulting to false in some circumstances.  It now always defaults
to true, matching the documentation and intent.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.find_model</span></code> API did not work properly
when passed a <code class="docutils literal notranslate"><span class="pre">path</span></code> argument which was unicode and contained
high-order bytes when the <code class="docutils literal notranslate"><span class="pre">unicode_path_segments</span></code> or
<code class="docutils literal notranslate"><span class="pre">BFG_UNICODE_PATH_SEGMENTS</span></code> configuration variables were &quot;true&quot;.</li>
<li>A new module was added: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings</span></code>.  This contains
deployment-settings-related code.</li>
</ul>
</div>
<div class="section" id="id494">
<h3>Implementation Changes<a class="headerlink" href="#id494" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">make_app</span></code> callable within <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router</span></code> now registers
the <code class="docutils literal notranslate"><span class="pre">root_policy</span></code> argument as a utility (unnamed, using the new
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRootFactory</span></code> as a provides interface)
rather than passing it as the first argument to the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.Router</span></code> class.  As a result, the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.Router</span></code> router class only accepts a single
argument: <code class="docutils literal notranslate"><span class="pre">registry</span></code>.  The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.Router</span></code> class
retrieves the root policy via a utility lookup now.  The
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router.make_app</span></code> API also now performs some important
application registrations that were previously handled inside
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.makeRegistry</span></code>.</li>
</ul>
</div>
<div class="section" id="id495">
<h3>New Modules<a class="headerlink" href="#id495" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings</span></code> module was added.  It contains code
related to deployment settings.  Most of the code it contains was
moved to it from the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry</span></code> module.</li>
</ul>
</div>
<div class="section" id="id496">
<h3>Behavior Changes<a class="headerlink" href="#id496" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.Settings</span></code> class (an instance of which is
registered as a utility providing
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ISettings</span></code> when any application is started)
now automatically calls <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_options</span></code> on the
options passed to its constructor.  This means that usage of
<code class="docutils literal notranslate"><span class="pre">get_options</span></code> within an application's <code class="docutils literal notranslate"><span class="pre">make_app</span></code> function is no
longer required (the &quot;raw&quot; <code class="docutils literal notranslate"><span class="pre">options</span></code> dict or None may be passed).</li>
<li>Remove old cold which attempts to recover from trying to unpickle a
<code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> template; Chameleon has been the templating engine for a
good long time now.  Running repoze.bfg against a sandbox that has
pickled <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> templates it will now just fail with an
unpickling error, but can be fixed by deleting the template cache
files.</li>
</ul>
</div>
<div class="section" id="id497">
<h3>Deprecations<a class="headerlink" href="#id497" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Moved the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.Settings</span></code> class.  This has been
moved to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.Settings</span></code>. A deprecation warning is
issued when it is imported from the older location.</li>
<li>Moved the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry.get_options</span></code> function This has been
moved to <code class="docutils literal notranslate"><span class="pre">repoze.bfg.settings.get_options</span></code>.  A deprecation warning
is issued when it is imported from the older location.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.IRootPolicy</span></code> interface was renamed
within the interfaces package.  It has been renamed to
<code class="docutils literal notranslate"><span class="pre">IRootFactory</span></code>.  A deprecation warning is issued when it is
imported from the older location.</li>
</ul>
</div>
</div>
<div class="section" id="id498">
<h2>0.6.1 (2009-01-06)<a class="headerlink" href="#id498" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id499">
<h3>New Modules<a class="headerlink" href="#id499" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A new module <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url</span></code> has been added.  It contains the
<code class="docutils literal notranslate"><span class="pre">model_url</span></code> API (moved from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code>) and an
implementation of <code class="docutils literal notranslate"><span class="pre">urlencode</span></code> (like Python's
<code class="docutils literal notranslate"><span class="pre">urllib.urlencode</span></code>) which can handle Unicode keys and values in
parameters to the <code class="docutils literal notranslate"><span class="pre">query</span></code> argument.</li>
</ul>
</div>
<div class="section" id="id500">
<h3>Deprecations<a class="headerlink" href="#id500" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">model_url</span></code> function has been moved from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> into <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url</span></code>.  It can still
be imported from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> but an import from
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal</span></code> will emit a DeprecationWarning.</li>
</ul>
</div>
<div class="section" id="id501">
<h3>Features<a class="headerlink" href="#id501" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">static</span></code> helper class was added to the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.views</span></code>
module.  Instances of this class are willing to act as BFG views
which return static resources using files on disk.  See the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code> docs for more info.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.url.model_url</span></code> API (nee'
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_url</span></code>) now accepts and honors a
keyword argument named <code class="docutils literal notranslate"><span class="pre">query</span></code>.  The value of this argument
will be used to compose a query string, which will be attached to
the generated URL before it is returned.  See the API docs (in
the docs directory or <a class="reference external" href="http://static.repoze.org/bfgdocs">on the web</a>) for more information.</li>
</ul>
</div>
</div>
<div class="section" id="id502">
<h2>0.6 (2008-12-26)<a class="headerlink" href="#id502" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id503">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id503" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Rather than prepare the &quot;stock&quot; implementations of the ZCML directives
from the <code class="docutils literal notranslate"><span class="pre">zope.configuration</span></code> package for use under <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> now makes available the implementations of directives
from the <code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code> package (see <a class="reference external" href="http://static.repoze.org/zcmldocs">http://static.repoze.org/zcmldocs</a>).
As a result, the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package now depends on the
<code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code> package, and no longer depends directly on the
<code class="docutils literal notranslate"><span class="pre">zope.component</span></code>, <code class="docutils literal notranslate"><span class="pre">zope.configuration</span></code>, <code class="docutils literal notranslate"><span class="pre">zope.interface</span></code>, or
<code class="docutils literal notranslate"><span class="pre">zope.proxy</span></code> packages.</p>
<p>The primary reason for this change is to enable us to eventually reduce
the number of inappropriate <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> Zope package dependencies,
as well as to shed features of dependent package directives that don't
make sense for <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>.</p>
<p>Note that currently the set of requirements necessary to use bfg has not
changed.  This is due to inappropriate Zope package requirements in
<code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code>, which will hopefully be remedied soon. NOTE: in
lemonade index a 1.0b8-repozezcml0 package exists which does away with
these requirements.</p>
</li>
<li><p class="first">BFG applications written prior to this release which expect the &quot;stock&quot;
<code class="docutils literal notranslate"><span class="pre">zope.component</span></code> ZCML directive implementations (e.g. <code class="docutils literal notranslate"><span class="pre">adapter</span></code>,
<code class="docutils literal notranslate"><span class="pre">subscriber</span></code>, or <code class="docutils literal notranslate"><span class="pre">utility</span></code>) to function now must either 1) include
the <code class="docutils literal notranslate"><span class="pre">meta.zcml</span></code> file from <code class="docutils literal notranslate"><span class="pre">zope.component</span></code> manually (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;include</span>
<span class="pre">package=&quot;zope.component&quot;</span> <span class="pre">file=&quot;meta.zcml&quot;&gt;</span></code>) and include the
<code class="docutils literal notranslate"><span class="pre">zope.security</span></code> package as an <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> dependency or 2)
change the ZCML in their applications to use the declarations from
<a class="reference external" href="http://static.repoze.org/zcmldocs/">repoze.zcml</a> instead of the stock
declarations.  <code class="docutils literal notranslate"><span class="pre">repoze.zcml</span></code> only makes available the <code class="docutils literal notranslate"><span class="pre">adapter</span></code>,
<code class="docutils literal notranslate"><span class="pre">subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">utility</span></code> directives.</p>
<p>In short, if you've got an existing BFG application, after this
update, if your application won't start due to an import error for
&quot;zope.security&quot;, the fastest way to get it working again is to add
<code class="docutils literal notranslate"><span class="pre">zope.security</span></code> to the &quot;install_requires&quot; of your BFG
application's <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, then add the following ZCML anywhere
in your application's <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">include</span> <span class="n">package</span><span class="o">=</span><span class="s2">&quot;zope.component&quot;</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;meta.zcml&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Then re-<code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">develop</span></code> or reinstall your application.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">http://namespaces.repoze.org/bfg</span></code> XML namespace is now the default
XML namespace in ZCML for paster-generated applications.  The docs have
been updated to reflect this.</p>
</li>
<li><p class="first">The copies of BFG's <code class="docutils literal notranslate"><span class="pre">meta.zcml</span></code> and <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> were removed
from the root of the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> package.  In 0.3.6, a new package
named <code class="docutils literal notranslate"><span class="pre">repoze.bfg.includes</span></code> was added, which contains the &quot;correct&quot;
copies of these ZCML files; the ones that were removed were for backwards
compatibility purposes.</p>
</li>
<li><p class="first">The BFG <code class="docutils literal notranslate"><span class="pre">view</span></code> ZCML directive no longer calls
<code class="docutils literal notranslate"><span class="pre">zope.component.interface.provideInterface</span></code> for the <code class="docutils literal notranslate"><span class="pre">for</span></code> interface.
We don't support <code class="docutils literal notranslate"><span class="pre">provideInterface</span></code> in BFG because it mutates the
global registry.</p>
</li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The minimum requirement for <code class="docutils literal notranslate"><span class="pre">chameleon.core</span></code> is now 1.0b13.  The
minimum requirement for <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code> is now 1.0b8.  The minimum
requirement for <code class="docutils literal notranslate"><span class="pre">chameleon.genshi</span></code> is now 1.0b2.</li>
<li>Updated paster template &quot;ez_setup.py&quot; to one that requires setuptools
0.6c9.</li>
<li>Turn <code class="docutils literal notranslate"><span class="pre">view_execution_permitted</span></code> from the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code> module
into a documented API.</li>
<li>Doc cleanups.</li>
<li>Documented how to create a view capable of serving static resources.</li>
</ul>
</div>
</div>
<div class="section" id="id504">
<h2>0.5.6 (2008-12-18)<a class="headerlink" href="#id504" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Speed up <code class="docutils literal notranslate"><span class="pre">traversal.model_url</span></code> execution by using a custom url quoting
function instead of Python's <code class="docutils literal notranslate"><span class="pre">urllib.quote</span></code>, by caching URL path
segment quoting and encoding results, by disusing Python's
<code class="docutils literal notranslate"><span class="pre">urlparse.urljoin</span></code> in favor of a simple string concatenation, and by
using <code class="docutils literal notranslate"><span class="pre">ob.__class__</span> <span class="pre">is</span> <span class="pre">unicode</span></code> rather than <code class="docutils literal notranslate"><span class="pre">isinstance(ob,</span> <span class="pre">unicode)</span></code>
in one strategic place.</li>
</ul>
</div>
<div class="section" id="id505">
<h2>0.5.5 (2008-12-17)<a class="headerlink" href="#id505" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id506">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id506" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">In the past, during traversal, the ModelGraphTraverser (the default
traverser) always passed each URL path segment to any <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>
method of a model object as a byte string (a <code class="docutils literal notranslate"><span class="pre">str</span></code> object).  Now, by
default the ModelGraphTraverser attempts to decode the path segment to
Unicode (a <code class="docutils literal notranslate"><span class="pre">unicode</span></code> object) using the UTF-8 encoding before passing it
to the <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> method of a model object.  This makes it possible
for model objects to be dumber in <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> when trying to resolve
a subobject, as model objects themselves no longer need to try to divine
whether or not to try to decode the path segment passed by the
traverser.</p>
<p>Note that since 0.5.4, URLs generated by repoze.bfg's <code class="docutils literal notranslate"><span class="pre">model_url</span></code> API
will contain UTF-8 encoded path segments as necessary, so any URL
generated by BFG itself will be decodeable by the traverser.  If another
application generates URLs to a BFG application, to be resolved
successully, it should generate the URL with UTF-8 encoded path segments
to be successfully resolved.  The decoder is not at all magical: if a
non-UTF-8-decodeable path segment (e.g. one encoded using UTF-16 or some
other insanity) is passed in the URL, BFG will raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> with
a message indicating it could not decode the path segment.</p>
<p>To turn on the older behavior, where path segments were not decoded to
Unicode before being passed to model object <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> by the
traverser, and were passed as a raw byte string, set the
<code class="docutils literal notranslate"><span class="pre">unicode_path_segments</span></code> configuration setting to a false value in your
BFG application's section of the paste .ini file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unicode_path_segments</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Or start the application using the <code class="docutils literal notranslate"><span class="pre">BFG_UNICODE_PATH_SEGMENT</span></code> envvar
set to a false value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BFG_UNICODE_PATH_SEGMENTS</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id507">
<h2>0.5.4 (2008-12-13)<a class="headerlink" href="#id507" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id508">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id508" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>URL-quote &quot;extra&quot; element names passed in as <code class="docutils literal notranslate"><span class="pre">**elements</span></code> to the
<code class="docutils literal notranslate"><span class="pre">traversal.model_url</span></code> API.  If any of these names is a Unicode string,
encode it to UTF-8 before URL-quoting.  This is a slight backwards
incompatibility that will impact you if you were already UTF-8 encoding
or URL-quoting the values you passed in as <code class="docutils literal notranslate"><span class="pre">elements</span></code> to this API.</li>
</ul>
</div>
<div class="section" id="id509">
<h3>Bugfixes<a class="headerlink" href="#id509" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>UTF-8 encode each segment in the model path used to generate a URL before
url-quoting it within the <code class="docutils literal notranslate"><span class="pre">traversal.model_url</span></code> API.  This is a bugfix,
as Unicode cannot always be successfully URL-quoted.</li>
</ul>
</div>
<div class="section" id="id510">
<h3>Features<a class="headerlink" href="#id510" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make it possible to run unit tests using a buildout-generated Python
&quot;interpreter&quot;.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">request.root</span></code> to <code class="docutils literal notranslate"><span class="pre">router.Router</span></code> in order to have easy access to
the application root.</li>
</ul>
</div>
</div>
<div class="section" id="id511">
<h2>0.5.3 (2008-12-07)<a class="headerlink" href="#id511" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Remove the <code class="docutils literal notranslate"><span class="pre">ITestingTemplateRenderer</span></code> interface.  When
<code class="docutils literal notranslate"><span class="pre">testing.registerDummyRenderer</span></code> is used, it instead registers a dummy
implementation using <code class="docutils literal notranslate"><span class="pre">ITemplateRenderer</span></code> interface, which is checked
for when the built-in templating facilities do rendering.  This change
also allows developers to make explcit named utility registrations in
the ZCML registry against <code class="docutils literal notranslate"><span class="pre">ITemplateRenderer</span></code>; these will be found
before any on-disk template is looked up.</li>
</ul>
</div>
<div class="section" id="id512">
<h2>0.5.2 (2008-12-05)<a class="headerlink" href="#id512" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>The component registration handler for views (functions or class
instances) now observes component adaptation annotations (see
<code class="docutils literal notranslate"><span class="pre">zope.component.adaptedBy</span></code>) and uses them before the fallback values
for <code class="docutils literal notranslate"><span class="pre">for_</span></code> and <code class="docutils literal notranslate"><span class="pre">request_type</span></code>. This change does not affect existing
code insomuch as the code does not rely on these defaults when an
annotation is set on the view (unlikely).  This means that for a
new-style class you can do <code class="docutils literal notranslate"><span class="pre">zope.component.adapts(ISomeContext,</span>
<span class="pre">ISomeRequest)</span></code> at class scope or at module scope as a decorator to a
bfg view function you can do <code class="docutils literal notranslate"><span class="pre">&#64;zope.component.adapter(ISomeContext,</span>
<span class="pre">ISomeRequest)</span></code>.  This differs from r.bfg.convention inasmuch as you
still need to put something in ZCML for the registrations to get done;
it's only the defaults that will change if these declarations exist.</li>
<li>Strip all slashes from end and beginning of path in clean_path within
traversal machinery.</li>
</ul>
</div>
<div class="section" id="id513">
<h2>0.5.1 (2008-11-25)<a class="headerlink" href="#id513" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">keys</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>, and <code class="docutils literal notranslate"><span class="pre">values</span></code> methods to
<code class="docutils literal notranslate"><span class="pre">testing.DummyModel</span></code>.</li>
<li>Add __delitem__ method to <code class="docutils literal notranslate"><span class="pre">testing.DummyModel</span></code>.</li>
</ul>
</div>
<div class="section" id="id514">
<h2>0.5.0 (2008-11-18)<a class="headerlink" href="#id514" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Fix ModelGraphTraverser; don't try to change the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> or
<code class="docutils literal notranslate"><span class="pre">__parent__</span></code> of an object that claims it implements ILocation during
traversal even if the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> or <code class="docutils literal notranslate"><span class="pre">__parent__</span></code> of the object
traversed does not match the name used in the traversal step or the or
the traversal parent .  Rationale: it was insane to do so. This bug was
only found due to a misconfiguration in an application that mistakenly
had intermediate persistent non-ILocation objects; traversal was causing
a persistent write on every request under this setup.</li>
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.location.locate</span></code> now unconditionally sets <code class="docutils literal notranslate"><span class="pre">__name__</span></code> and
<code class="docutils literal notranslate"><span class="pre">__parent__</span></code> on objects which provide ILocation (it previously only set
them conditionally if they didn't match attributes already present on the
object via equality).</li>
</ul>
</div>
<div class="section" id="id515">
<h2>0.4.9 (2008-11-17)<a class="headerlink" href="#id515" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add chameleon text template API (chameleon ${name} renderings where the
template does not need to be wrapped in any containing XML).</li>
<li>Change docs to explain install in terms of a virtualenv
(unconditionally).</li>
<li>Make pushpage decorator compatible with repoze.bfg.convention's
<code class="docutils literal notranslate"><span class="pre">bfg_view</span></code> decorator when they're stacked.</li>
<li>Add content_length attribute to testing.DummyRequest.</li>
<li>Change paster template <code class="docutils literal notranslate"><span class="pre">tests.py</span></code> to include a true unit test.  Retain
old test as an integration test.  Update documentation.</li>
<li>Document view registrations against classes and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.convention</span></code>
in context.</li>
<li>Change the default paster template to register its single view against a
class rather than an interface.</li>
<li>Document adding a request type interface to the request via a subscriber
function in the events narrative documentation.</li>
</ul>
</div>
<div class="section" id="id516">
<h2>0.4.8 (2008-11-12)<a class="headerlink" href="#id516" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id517">
<h3>Backwards Incompatibilities<a class="headerlink" href="#id517" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.model_url</span></code> now always appends a slash to all
generated URLs unless further elements are passed in as the third and
following arguments.  Rationale: views often use <code class="docutils literal notranslate"><span class="pre">model_url</span></code> without
the third-and-following arguments in order to generate a URL for a model
in order to point at the default view of a model.  The URL that points to
the default view of the <em>root</em> model is technically <code class="docutils literal notranslate"><span class="pre">http://mysite/</span></code> as
opposed to <code class="docutils literal notranslate"><span class="pre">http://mysite</span></code> (browsers happen to ask for '/' implicitly
in the GET request).  Because URLs are never automatically generated for
anything <em>except</em> models by <code class="docutils literal notranslate"><span class="pre">model_url</span></code>, and because the root model is
not really special, we continue this pattern.  The impact of this change
is minimal (at most you will have too many slashes in your URL, which BFG
deals with gracefully anyway).</li>
</ul>
</div>
</div>
<div class="section" id="id518">
<h2>0.4.7 (2008-11-11)<a class="headerlink" href="#id518" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id519">
<h3>Features<a class="headerlink" href="#id519" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Allow <code class="docutils literal notranslate"><span class="pre">testing.registerEventListener</span></code> to be used with Zope 3 style
&quot;object events&quot; (subscribers accept more than a single event argument).
We extend the list with the arguments, rather than append.</li>
</ul>
</div>
</div>
<div class="section" id="id520">
<h2>0.4.6 (2008-11-10)<a class="headerlink" href="#id520" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id521">
<h3>Bug Fixes<a class="headerlink" href="#id521" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">model_path</span></code> and <code class="docutils literal notranslate"><span class="pre">model_url</span></code> traversal APIs returned the wrong
value for the root object (e.g. <code class="docutils literal notranslate"><span class="pre">model_path</span></code> returned <code class="docutils literal notranslate"><span class="pre">''</span></code> for the
root object, while it should have been returning <code class="docutils literal notranslate"><span class="pre">'/'</span></code>).</li>
</ul>
</div>
</div>
<div class="section" id="id522">
<h2>0.4.5 (2008-11-09)<a class="headerlink" href="#id522" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id523">
<h3>Features<a class="headerlink" href="#id523" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">clone</span></code> method and a <code class="docutils literal notranslate"><span class="pre">__contains__</span></code> method to the DummyModel
testing object.</li>
<li>Allow DummyModel objects to receive extra keyword arguments, which will
be attached as attributes.</li>
<li>The DummyTemplateRenderer now returns <code class="docutils literal notranslate"><span class="pre">self</span></code> as its implementation.</li>
</ul>
</div>
</div>
<div class="section" id="id524">
<h2>0.4.4 (2008-11-08)<a class="headerlink" href="#id524" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id525">
<h3>Features<a class="headerlink" href="#id525" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code> module to attempt to make it slightly
easier to write unittest-based automated tests of BFG applications.
Information about this module is in the documentation.</li>
<li>The default template renderer now supports testing better by looking for
<code class="docutils literal notranslate"><span class="pre">ITestingTemplateRenderer</span></code> using a relative pathname.  This is exposed
indirectly through the API named <code class="docutils literal notranslate"><span class="pre">registerTemplateRenderer</span></code> in
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.testing</span></code>.</li>
</ul>
</div>
<div class="section" id="id526">
<h3>Deprecations<a class="headerlink" href="#id526" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The names <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplate</span></code> ,
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateFactory</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.INodeTemplate</span></code> have been deprecated.  These
should now be imported as <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateRenderer</span></code> and
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ITemplateRendererFactory</span></code>, and
<code class="docutils literal notranslate"><span class="pre">INodeTemplateRenderer</span></code> respectively.</li>
<li>The name <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateFactory</span></code> is deprecated.
Use <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt.ZPTTemplateRenderer</span></code>.</li>
<li>The name <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_genshi.GenshiTemplateFactory</span></code> is
deprecated.  Use <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_genshi.GenshiTemplateRenderer</span></code>.</li>
<li>The name <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt.XSLTemplateFactory</span></code> is deprecated.  Use
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt.XSLTemplateRenderer</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="id527">
<h2>0.4.3 (2008-11-02)<a class="headerlink" href="#id527" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id528">
<h3>Bug Fixes<a class="headerlink" href="#id528" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Not passing the result of &quot;get_options&quot; as the second argument of
make_app could cause attribute errors when attempting to look up settings
against the ISettings object (internal).  Fixed by giving the Settings
objects defaults for <code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code> and <code class="docutils literal notranslate"><span class="pre">debug_notfound</span></code>.</li>
<li>Return an instance of <code class="docutils literal notranslate"><span class="pre">Allowed</span></code> (rather than <code class="docutils literal notranslate"><span class="pre">True</span></code>) from
<code class="docutils literal notranslate"><span class="pre">has_permission</span></code> when no security policy is in use.</li>
<li>Fix bug where default deny in authorization check would throw a TypeError
(use <code class="docutils literal notranslate"><span class="pre">ACLDenied</span></code> instead of <code class="docutils literal notranslate"><span class="pre">Denied</span></code>).</li>
</ul>
</div>
</div>
<div class="section" id="id529">
<h2>0.4.2 (2008-11-02)<a class="headerlink" href="#id529" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id530">
<h3>Features<a class="headerlink" href="#id530" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Expose a single ILogger named &quot;repoze.bfg.debug&quot; as a utility; this
logger is registered unconditionally and is used by the authorization
debug machinery.  Applications may also make use of it as necessary
rather than inventing their own logger, for convenience.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></code> envvar and the <code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code>
config file value now only imply debugging of view-invoked security
checks.  Previously, information was printed for every call to
<code class="docutils literal notranslate"><span class="pre">has_permission</span></code> as well, which made output confusing.  To debug
<code class="docutils literal notranslate"><span class="pre">has_permission</span></code> checks and other manual permission checks, use the
debugger and print statements in your own code.</li>
<li>Authorization debugging info is now only present in the HTTP response
body oif <code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code> is true.</li>
<li>The format of authorization debug messages was improved.</li>
<li>A new <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_NOTFOUND</span></code> envvar was added and a symmetric
<code class="docutils literal notranslate"><span class="pre">debug_notfound</span></code> config file value was added.  When either is true, and
a NotFound response is returned by the BFG router (because a view could
not be found), debugging information is printed to stderr.  When this
value is set true, the body of HTTPNotFound responses will also contain
the same debugging information.</li>
<li><code class="docutils literal notranslate"><span class="pre">Allowed</span></code> and <code class="docutils literal notranslate"><span class="pre">Denied</span></code> responses from the security machinery are now
specialized into two types: ACL types, and non-ACL types.  The
ACL-related responses are instances of <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.ACLAllowed</span></code>
and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.ACLDenied</span></code>.  The non-ACL-related responses are
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.Allowed</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.security.Denied</span></code>.  The
allowed-type responses continue to evaluate equal to things that
themselves evaluate equal to the <code class="docutils literal notranslate"><span class="pre">True</span></code> boolean, while the denied-type
responses continue to evaluate equal to things that themselves evaluate
equal to the <code class="docutils literal notranslate"><span class="pre">False</span></code> boolean.  The only difference between the two
types is the information attached to them for debugging purposes.</li>
<li>Added a new <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_ALL</span></code> envvar and a symmetric <code class="docutils literal notranslate"><span class="pre">debug_all</span></code> config
file value.  When either is true, all other debug-related flags are set
true unconditionally (e.g. <code class="docutils literal notranslate"><span class="pre">debug_notfound</span></code> and
<code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code>).</li>
</ul>
</div>
<div class="section" id="id531">
<h3>Documentation<a class="headerlink" href="#id531" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Added info about debug flag changes.</li>
<li>Added a section to the security chapter named &quot;Debugging Imperative
Authorization Failures&quot; (for e.g. <code class="docutils literal notranslate"><span class="pre">has_permssion</span></code>).</li>
</ul>
</div>
<div class="section" id="id532">
<h3>Bug Fixes<a class="headerlink" href="#id532" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Change default paster template generator to use <code class="docutils literal notranslate"><span class="pre">Paste#http</span></code> server
rather than <code class="docutils literal notranslate"><span class="pre">PasteScript#cherrpy</span></code> server.  The cherrypy server has a
security risk in it when <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> is trusted by the downstream
application.</li>
</ul>
</div>
</div>
<div class="section" id="id533">
<h2>0.4.1 (2008-10-28)<a class="headerlink" href="#id533" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id534">
<h3>Bug Fixes<a class="headerlink" href="#id534" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>If the <code class="docutils literal notranslate"><span class="pre">render_view_to_response</span></code> function was called, if the view was
found and called, but it returned something that did not implement
IResponse, the error would pass by unflagged.  This was noticed when I
created a view function that essentially returned None, but received a
NotFound error rather than a ValueError when the view was rendered.  This
was fixed.</li>
</ul>
</div>
</div>
<div class="section" id="id535">
<h2>0.4.0 (2008-10-03)<a class="headerlink" href="#id535" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id536">
<h3>Docs<a class="headerlink" href="#id536" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>An &quot;Environment and Configuration&quot; chapter was added to the narrative
portion of the documentation.</li>
</ul>
</div>
<div class="section" id="id537">
<h3>Features<a class="headerlink" href="#id537" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Ensure bfg doesn't generate warnings when running under Python
2.6.</li>
<li>The environment variable <code class="docutils literal notranslate"><span class="pre">BFG_RELOAD_TEMPLATES</span></code> is now available
(serves the same purpose as <code class="docutils literal notranslate"><span class="pre">reload_templates</span></code> in the config file).</li>
<li>A new configuration file option <code class="docutils literal notranslate"><span class="pre">debug_authorization</span></code> was added.
This turns on printing of security authorization debug statements
to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.  The <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></code> environment
variable was also added; this performs the same duty.</li>
</ul>
</div>
<div class="section" id="id538">
<h3>Bug Fixes<a class="headerlink" href="#id538" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The environment variable <code class="docutils literal notranslate"><span class="pre">BFG_SECURITY_DEBUG</span></code> did not always work.
It has been renamed to <code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></code> and fixed.</li>
</ul>
</div>
<div class="section" id="id539">
<h3>Deprecations<a class="headerlink" href="#id539" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A deprecation warning is now issued when old API names from the
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.templates</span></code> module are imported.</li>
</ul>
</div>
<div class="section" id="id540">
<h3>Backwards incompatibilities<a class="headerlink" href="#id540" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">BFG_SECURITY_DEBUG</span></code> environment variable was renamed to
<code class="docutils literal notranslate"><span class="pre">BFG_DEBUG_AUTHORIZATION</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="id541">
<h2>0.3.9 (2008-08-27)<a class="headerlink" href="#id541" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id542">
<h3>Features<a class="headerlink" href="#id542" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">repoze.bfg.location</span></code> API module was added.</li>
</ul>
</div>
<div class="section" id="id543">
<h3>Backwards incompatibilities<a class="headerlink" href="#id543" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">Applications must now use the <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ILocation</span></code>
interface rather than <code class="docutils literal notranslate"><span class="pre">zope.location.interfaces.ILocation</span></code> to
represent that a model object is &quot;location-aware&quot;.  We've removed
a dependency on <code class="docutils literal notranslate"><span class="pre">zope.location</span></code> for cleanliness purposes: as
new versions of zope libraries are released which have improved
dependency information, getting rid of our dependence on
<code class="docutils literal notranslate"><span class="pre">zope.location</span></code> will prevent a newly installed repoze.bfg
application from requiring the <code class="docutils literal notranslate"><span class="pre">zope.security</span></code>, egg, which not
truly used at all in a &quot;stock&quot; repoze.bfg setup.  These
dependencies are still required by the stack at this time; this
is purely a futureproofing move.</p>
<p>The security and model documentation for previous versions of
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> recommended using the
<code class="docutils literal notranslate"><span class="pre">zope.location.interfaces.ILocation</span></code> interface to represent
that a model object is &quot;location-aware&quot;.  This documentation has
been changed to reflect that this interface should now be
imported from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.interfaces.ILocation</span></code> instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id544">
<h2>0.3.8 (2008-08-26)<a class="headerlink" href="#id544" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id545">
<h3>Docs<a class="headerlink" href="#id545" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Documented URL dispatch better in narrative form.</li>
</ul>
</div>
<div class="section" id="id546">
<h3>Bug fixes<a class="headerlink" href="#id546" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Routes URL dispatch did not have access to the WSGI environment,
so conditions such as method=GET did not work.</li>
</ul>
</div>
<div class="section" id="id547">
<h3>Features<a class="headerlink" href="#id547" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">principals_allowed_by_permission</span></code> API to security module.</li>
<li>Replace <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> support with support for <code class="docutils literal notranslate"><span class="pre">chameleon.zpt</span></code>.
Chameleon is the new name for the package that used to be named
<code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code>.  NOTE: If you update a <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> SVN checkout
that you're using for development, you will need to run &quot;setup.py
install&quot; or &quot;setup.py develop&quot; again in order to obtain the
proper Chameleon packages.  <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> is no longer supported by
<code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code>.  All API functions that used to render <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code>
templates will work fine with the new packages, and your
templates should render almost identically.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_zpt</span></code> module.  This module provides
Chameleon ZPT support.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code> module.  This module provides XSLT
support.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.chameleon_genshi</span></code> module.  This provides
direct Genshi support, which did not exist previously.</li>
</ul>
</div>
<div class="section" id="id548">
<h3>Deprecations<a class="headerlink" href="#id548" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Importing API functions directly from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.template</span></code> is
now deprecated.  The <code class="docutils literal notranslate"><span class="pre">get_template</span></code>, <code class="docutils literal notranslate"><span class="pre">render_template</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code> functions should now be imported
from <code class="docutils literal notranslate"><span class="pre">repoze.chameleon_zpt</span></code>.  The <code class="docutils literal notranslate"><span class="pre">render_transform</span></code>, and
<code class="docutils literal notranslate"><span class="pre">render_transform_to_response</span></code> functions should now be imported
from <code class="docutils literal notranslate"><span class="pre">repoze.bfg.xslt</span></code>.  The <code class="docutils literal notranslate"><span class="pre">repoze.bfg.template</span></code> module
will remain around &quot;forever&quot; to support backwards compatibility.</li>
</ul>
</div>
</div>
<div class="section" id="id549">
<h2>0.3.7 (2008-09-09)<a class="headerlink" href="#id549" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id550">
<h3>Features<a class="headerlink" href="#id550" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add compatibility with z3c.pt 1.0a7+ (z3c.pt became a namespace package).</li>
</ul>
</div>
<div class="section" id="id551">
<h3>Bug fixes<a class="headerlink" href="#id551" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">repoze.bfg.traversal.find_model</span></code> function did not function properly.</li>
</ul>
</div>
</div>
<div class="section" id="id552">
<h2>0.3.6 (2008-09-04)<a class="headerlink" href="#id552" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id553">
<h3>Features<a class="headerlink" href="#id553" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add startup process docs.</li>
<li>Allow configuration cache to be bypassed by actions which include special
&quot;uncacheable&quot; discriminators (for actions that have variable results).</li>
</ul>
</div>
<div class="section" id="id554">
<h3>Bug Fixes<a class="headerlink" href="#id554" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Move core repoze.bfg ZCML into a <code class="docutils literal notranslate"><span class="pre">repoze.bfg.includes</span></code> package so we
can use repoze.bfg better as a namespace package.  Adjust the code
generator to use it.  We've left around the <code class="docutils literal notranslate"><span class="pre">configure.zcml</span></code> in the
repoze.bfg package directly so as not to break older apps.</li>
<li>When a zcml application registry cache was unpickled, and it contained a
reference to an object that no longer existed (such as a view), bfg would
not start properly.</li>
</ul>
</div>
</div>
<div class="section" id="id555">
<h2>0.3.5 (2008-09-01)<a class="headerlink" href="#id555" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id556">
<h3>Features<a class="headerlink" href="#id556" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Event notification is issued after application is created and configured
(<code class="docutils literal notranslate"><span class="pre">IWSGIApplicationCreatedEvent</span></code>).</li>
<li>New API module: <code class="docutils literal notranslate"><span class="pre">repoze.bfg.view</span></code>.  This module contains the functions
named <code class="docutils literal notranslate"><span class="pre">render_view_to_response</span></code>, <code class="docutils literal notranslate"><span class="pre">render_view_to_iterable</span></code>,
<code class="docutils literal notranslate"><span class="pre">render_view</span></code> and <code class="docutils literal notranslate"><span class="pre">is_response</span></code>, which are documented in the API
docs.  These features aid programmatic (non-server-driven) view
execution.</li>
</ul>
</div>
</div>
<div class="section" id="id557">
<h2>0.3.4 (2008-08-28)<a class="headerlink" href="#id557" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id558">
<h3>Backwards incompatibilities<a class="headerlink" href="#id558" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Make <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> a namespace package so we can allow folks to create
subpackages (e.g. <code class="docutils literal notranslate"><span class="pre">repoze.bfg.otherthing</span></code>) within separate eggs.  This
is a backwards incompatible change which makes it impossible to import
&quot;make_app&quot; and &quot;get_options&quot; from the <code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> module directly.
This change will break all existing apps generated by the paster code
generator.  Instead, you need to import these functions as
<code class="docutils literal notranslate"><span class="pre">repoze.bfg.router:make_app</span></code> and <code class="docutils literal notranslate"><span class="pre">repoze.bfg.registry:get_options</span></code>,
respectively.  Sorry folks, it has to be done now or never, and
definitely better now.</li>
</ul>
</div>
<div class="section" id="id559">
<h3>Features<a class="headerlink" href="#id559" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">model_path</span></code> API function to traversal module.</li>
</ul>
<p>Bugfixes</p>
<ul class="simple">
<li>Normalize path returned by repoze.bfg.caller_path.</li>
</ul>
</div>
</div>
<div class="section" id="id560">
<h2>0.3.3 (2008-08-23)<a class="headerlink" href="#id560" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Fix generated test.py module to use project name rather than package
name.</li>
</ul>
</div>
<div class="section" id="id561">
<h2>0.3.2 (2008-08-23)<a class="headerlink" href="#id561" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Remove <code class="docutils literal notranslate"><span class="pre">sampleapp</span></code> sample application from bfg package itself.</li>
<li>Remove dependency on FormEncode (only needed by sampleapp).</li>
<li>Fix paster template generation so that case-sensitivity is preserved for
project vs. package name.</li>
<li>Depend on <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> version 1.0a1 (which requires the <code class="docutils literal notranslate"><span class="pre">[lxml]</span></code> extra
currently).</li>
<li>Read and write a pickled ZCML actions list, stored as
<code class="docutils literal notranslate"><span class="pre">configure.zcml.cache</span></code> next to the applications's &quot;normal&quot;
configuration file.  A given bfg app will usually start faster if it's
able to read the pickle data.  It fails gracefully to reading the real
ZCML file if it cannot read the pickle.</li>
</ul>
</div>
<div class="section" id="id562">
<h2>0.3.1 (2008-08-20)<a class="headerlink" href="#id562" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Generated application differences: <code class="docutils literal notranslate"><span class="pre">make_app</span></code> entry point renamed to
<code class="docutils literal notranslate"><span class="pre">app</span></code> in order to have a different name than the bfg function of the
same name, to prevent confusion.</li>
<li>Add &quot;options&quot; processing to bfg's <code class="docutils literal notranslate"><span class="pre">make_app</span></code> to support runtime
options.  A new API function named <code class="docutils literal notranslate"><span class="pre">get_options</span></code> was added to the
registry module.  This function is typically used in an application's
<code class="docutils literal notranslate"><span class="pre">app</span></code> entry point.  The Paste config file section for the app can now
supply the <code class="docutils literal notranslate"><span class="pre">reload_templates</span></code> option, which, if true, will prevent the
need to restart the appserver in order for <code class="docutils literal notranslate"><span class="pre">z3c.pt</span></code> or XSLT template
changes to be detected.</li>
<li>Use only the module name in generated project's &quot;test_suite&quot; (run all
tests found in the package).</li>
<li>Default port for generated apps changed from 5432 to 6543 (Postgres
default port is 6543).</li>
</ul>
</div>
<div class="section" id="id563">
<h2>0.3.0 (2008-08-16)<a class="headerlink" href="#id563" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">get_template</span></code> API to template module.</li>
</ul>
</div>
<div class="section" id="id564">
<h2>0.2.9 (2008-08-11)<a class="headerlink" href="#id564" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>0.2.8 was &quot;brown bag&quot; release.  It didn't work at all.  Symptom:
ComponentLookupError when trying to render a page.</li>
</ul>
</div>
<div class="section" id="id565">
<h2>0.2.8 (2008-08-11)<a class="headerlink" href="#id565" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">find_model</span></code> and <code class="docutils literal notranslate"><span class="pre">find_root</span></code> traversal APIs.  In the process,
make ITraverser a uni-adapter (on context) rather than a multiadapter (on
context and request).</li>
</ul>
</div>
<div class="section" id="id566">
<h2>0.2.7 (2008-08-05)<a class="headerlink" href="#id566" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">request_type</span></code> attribute to the available attributes of a
<code class="docutils literal notranslate"><span class="pre">bfg:view</span></code> configure.zcml element.  This attribute will have a value
which is a dotted Python path, pointing at an interface.  If the request
object implements this interface when the view lookup is performed, the
appropriate view will be called.  This is meant to allow for simple
&quot;skinning&quot; of sites based on request type.  An event subscriber should
attach the interface to the request on ingress to support skins.</li>
<li>Remove &quot;template only&quot; views.  These were just confusing and were never
documented.</li>
<li>Small url dispatch overhaul: the <code class="docutils literal notranslate"><span class="pre">connect</span></code> method of the
<code class="docutils literal notranslate"><span class="pre">urldispatch.RoutesMapper</span></code> object now accepts a keyword parameter named
<code class="docutils literal notranslate"><span class="pre">context_factory</span></code>.  If this parameter is supplied, it must be a
callable which returns an instance.  This instance is used as the context
for the request when a route is matched.</li>
<li>The registration of a RoutesModelTraverser no longer needs to be
performed by the application; it's in the bfg ZCML now.</li>
</ul>
</div>
<div class="section" id="id567">
<h2>0.2.6 (2008-07-31)<a class="headerlink" href="#id567" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add event sends for INewRequest and INewResponse.  See the events.rst
chapter in the documentation's <code class="docutils literal notranslate"><span class="pre">api</span></code> directory.</li>
</ul>
</div>
<div class="section" id="id568">
<h2>0.2.5 (2008-07-28)<a class="headerlink" href="#id568" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">model_url</span></code> API.</li>
</ul>
</div>
<div class="section" id="id569">
<h2>0.2.4 (2008-07-27)<a class="headerlink" href="#id569" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Added url-based dispatch.</li>
</ul>
</div>
<div class="section" id="id570">
<h2>0.2.3 (2008-07-20)<a class="headerlink" href="#id570" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add API functions for authenticated_userid and effective_principals.</li>
</ul>
</div>
<div class="section" id="id571">
<h2>0.2.2 (2008-07-20)<a class="headerlink" href="#id571" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add authenticated_userid and effective_principals API to security
policy.</li>
</ul>
</div>
<div class="section" id="id572">
<h2>0.2.1 (2008-07-20)<a class="headerlink" href="#id572" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add find_interface API.</li>
</ul>
</div>
<div class="section" id="id573">
<h2>0.2 (2008-07-19)<a class="headerlink" href="#id573" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Add wsgiapp decorator.</li>
<li>The concept of &quot;view factories&quot; was removed in favor of always calling a
view, which is a callable that returns a response directly (as opposed to
returning a view).  As a result, the <code class="docutils literal notranslate"><span class="pre">factory</span></code> attribute in the
bfg:view ZCML statement has been renamed to <code class="docutils literal notranslate"><span class="pre">view</span></code>.  Various interface
names were changed also.</li>
<li><code class="docutils literal notranslate"><span class="pre">render_template</span></code> and <code class="docutils literal notranslate"><span class="pre">render_transform</span></code> no longer return a Response
object.  Instead, these return strings.  The old behavior can be obtained
by using <code class="docutils literal notranslate"><span class="pre">render_template_to_response</span></code> and
<code class="docutils literal notranslate"><span class="pre">render_transform_to_response</span></code>.</li>
<li>Added 'repoze.bfg.push:pushpage' decorator, which creates BFG views from
callables which take (context, request) and return a mapping of top-level
names.</li>
<li>Added ACL-based security.</li>
<li>Support for XSLT templates via a render_transform method</li>
</ul>
</div>
<div class="section" id="id574">
<h2>0.1 (2008-07-08)<a class="headerlink" href="#id574" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#"><span>Pyramid</span> Change History</a><ul>
<li><a class="reference internal" href="#unreleased">1.9.3 (Unreleased)</a></li>
<li><a class="reference internal" href="#changes-1-9-2">1.9.2 (2018-04-23)</a></li>
<li><a class="reference internal" href="#changes-1-9-1">1.9.1 (2017-07-13)</a></li>
<li><a class="reference internal" href="#id3">1.9 (2017-06-26)</a></li>
<li><a class="reference internal" href="#b1-2017-06-19">1.9b1 (2017-06-19)</a></li>
<li><a class="reference internal" href="#a2-2017-05-09">1.9a2 (2017-05-09)</a><ul>
<li><a class="reference internal" href="#backward-incompatibilities">Backward Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2017-05-01">1.9a1 (2017-05-01)</a><ul>
<li><a class="reference internal" href="#major-features">Major Features</a></li>
<li><a class="reference internal" href="#minor-features">Minor Features</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#documentation-changes">Documentation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">1.8 (2017-01-21)</a></li>
<li><a class="reference internal" href="#b1-2017-01-17">1.8b1 (2017-01-17)</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#id5">Documentation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2016-12-25">1.8a1 (2016-12-25)</a><ul>
<li><a class="reference internal" href="#id6">Backward Incompatibilities</a></li>
<li><a class="reference internal" href="#id7">Features</a></li>
<li><a class="reference internal" href="#id8">Bug Fixes</a></li>
<li><a class="reference internal" href="#id9">Deprecations</a></li>
<li><a class="reference internal" href="#id10">Documentation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">1.7 (2016-05-19)</a></li>
<li><a class="reference internal" href="#b4-2016-05-12">1.7b4 (2016-05-12)</a></li>
<li><a class="reference internal" href="#b3-2016-05-10">1.7b3 (2016-05-10)</a></li>
<li><a class="reference internal" href="#b2-2016-05-01">1.7b2 (2016-05-01)</a></li>
<li><a class="reference internal" href="#b1-2016-04-25">1.7b1 (2016-04-25)</a></li>
<li><a class="reference internal" href="#a2-2016-04-19">1.7a2 (2016-04-19)</a><ul>
<li><a class="reference internal" href="#id12">Features</a></li>
<li><a class="reference internal" href="#id13">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2016-04-16">1.7a1 (2016-04-16)</a><ul>
<li><a class="reference internal" href="#id14">Backward Incompatibilities</a></li>
<li><a class="reference internal" href="#id15">Features</a></li>
<li><a class="reference internal" href="#id16">Documentation Changes</a></li>
<li><a class="reference internal" href="#id17">Bug Fixes</a></li>
<li><a class="reference internal" href="#id18">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">1.6 (2016-01-03)</a><ul>
<li><a class="reference internal" href="#id20">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2015-12-17">1.6b3 (2015-12-17)</a><ul>
<li><a class="reference internal" href="#id21">Backward Incompatibilities</a></li>
<li><a class="reference internal" href="#id22">Features</a></li>
<li><a class="reference internal" href="#id23">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2015-10-15">1.6b2 (2015-10-15)</a><ul>
<li><a class="reference internal" href="#id24">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2015-10-15">1.6b1 (2015-10-15)</a><ul>
<li><a class="reference internal" href="#id25">Backward Incompatibilities</a></li>
<li><a class="reference internal" href="#id26">Features</a></li>
<li><a class="reference internal" href="#id27">Bug Fixes</a></li>
<li><a class="reference internal" href="#id28">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2015-06-30">1.6a2 (2015-06-30)</a><ul>
<li><a class="reference internal" href="#id29">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2015-04-15">1.6a1 (2015-04-15)</a><ul>
<li><a class="reference internal" href="#id30">Features</a></li>
<li><a class="reference internal" href="#id31">Bug Fixes</a></li>
<li><a class="reference internal" href="#id32">Deprecations</a></li>
<li><a class="reference internal" href="#docs">Docs</a></li>
<li><a class="reference internal" href="#scaffolds">Scaffolds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id33">1.5 (2014-04-08)</a></li>
<li><a class="reference internal" href="#b1-2014-02-08">1.5b1 (2014-02-08)</a><ul>
<li><a class="reference internal" href="#id34">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2014-01-28">1.5a4 (2014-01-28)</a><ul>
<li><a class="reference internal" href="#id35">Features</a></li>
<li><a class="reference internal" href="#id36">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2013-12-10">1.5a3 (2013-12-10)</a><ul>
<li><a class="reference internal" href="#id37">Features</a></li>
<li><a class="reference internal" href="#id38">Bug Fixes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id39">Deprecations</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2013-09-22">1.5a2 (2013-09-22)</a><ul>
<li><a class="reference internal" href="#id40">Features</a></li>
<li><a class="reference internal" href="#id41">Bug Fixes</a></li>
<li><a class="reference internal" href="#id42">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id43">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2013-08-30">1.5a1 (2013-08-30)</a><ul>
<li><a class="reference internal" href="#id44">Features</a></li>
<li><a class="reference internal" href="#id45">Bug Fixes</a></li>
<li><a class="reference internal" href="#id46">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id47">1.4 (2012-12-18)</a><ul>
<li><a class="reference internal" href="#id48">Docs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2012-12-10">1.4b3 (2012-12-10)</a></li>
<li><a class="reference internal" href="#b2-2012-12-10">1.4b2 (2012-12-10)</a><ul>
<li><a class="reference internal" href="#id49">Docs</a></li>
<li><a class="reference internal" href="#id50">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2012-11-21">1.4b1 (2012-11-21)</a><ul>
<li><a class="reference internal" href="#id51">Features</a></li>
<li><a class="reference internal" href="#id52">Bug Fixes</a></li>
<li><a class="reference internal" href="#id53">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2012-11-14">1.4a4 (2012-11-14)</a><ul>
<li><a class="reference internal" href="#id54">Features</a></li>
<li><a class="reference internal" href="#id55">Bug Fixes</a></li>
<li><a class="reference internal" href="#id56">Deprecations</a></li>
<li><a class="reference internal" href="#id57">Documentation</a></li>
<li><a class="reference internal" href="#internals">Internals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2012-10-26">1.4a3 (2012-10-26)</a><ul>
<li><a class="reference internal" href="#id58">Bug Fixes</a></li>
<li><a class="reference internal" href="#id59">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2012-09-27">1.4a2 (2012-09-27)</a><ul>
<li><a class="reference internal" href="#id60">Bug Fixes</a></li>
<li><a class="reference internal" href="#id61">Features</a></li>
<li><a class="reference internal" href="#id62">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2012-09-16">1.4a1 (2012-09-16)</a><ul>
<li><a class="reference internal" href="#id63">Bug Fixes</a></li>
<li><a class="reference internal" href="#id64">Features</a></li>
<li><a class="reference internal" href="#id65">Deprecations</a></li>
<li><a class="reference internal" href="#id66">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id67">Documentation</a></li>
<li><a class="reference internal" href="#id68">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id69">1.3 (2012-03-21)</a><ul>
<li><a class="reference internal" href="#id70">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2012-03-17">1.3b3 (2012-03-17)</a><ul>
<li><a class="reference internal" href="#id71">Bug Fixes</a></li>
<li><a class="reference internal" href="#id72">Scaffolds</a></li>
<li><a class="reference internal" href="#id73">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2012-03-02">1.3b2 (2012-03-02)</a><ul>
<li><a class="reference internal" href="#id74">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2012-02-26">1.3b1 (2012-02-26)</a><ul>
<li><a class="reference internal" href="#id75">Bug Fixes</a></li>
<li><a class="reference internal" href="#id76">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2012-02-22">1.3a9 (2012-02-22)</a><ul>
<li><a class="reference internal" href="#id77">Features</a></li>
<li><a class="reference internal" href="#id78">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id79">Deprecations</a></li>
<li><a class="reference internal" href="#id80">Bug Fixes</a></li>
<li><a class="reference internal" href="#id81">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2012-02-19">1.3a8 (2012-02-19)</a><ul>
<li><a class="reference internal" href="#id82">Features</a></li>
<li><a class="reference internal" href="#id83">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id84">Documentation</a></li>
<li><a class="reference internal" href="#scaffolding">Scaffolding</a></li>
<li><a class="reference internal" href="#id85">Dependencies</a></li>
<li><a class="reference internal" href="#internal">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2012-02-07">1.3a7 (2012-02-07)</a><ul>
<li><a class="reference internal" href="#id86">Features</a></li>
<li><a class="reference internal" href="#id87">Bug Fixes</a></li>
<li><a class="reference internal" href="#id88">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id89">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2012-01-20">1.3a6 (2012-01-20)</a><ul>
<li><a class="reference internal" href="#id90">Features</a></li>
<li><a class="reference internal" href="#id91">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2012-01-09">1.3a5 (2012-01-09)</a><ul>
<li><a class="reference internal" href="#id92">Bug Fixes</a></li>
<li><a class="reference internal" href="#id93">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2012-01-05">1.3a4 (2012-01-05)</a><ul>
<li><a class="reference internal" href="#id94">Features</a></li>
<li><a class="reference internal" href="#id95">Bug Fixes</a></li>
<li><a class="reference internal" href="#id96">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-12-21">1.3a3 (2011-12-21)</a><ul>
<li><a class="reference internal" href="#id97">Features</a></li>
<li><a class="reference internal" href="#id98">Bug Fixes</a></li>
<li><a class="reference internal" href="#id99">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-12-14">1.3a2 (2011-12-14)</a><ul>
<li><a class="reference internal" href="#id100">Features</a></li>
<li><a class="reference internal" href="#id101">Documentation</a></li>
<li><a class="reference internal" href="#id102">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-12-09">1.3a1 (2011-12-09)</a><ul>
<li><a class="reference internal" href="#id103">Features</a></li>
<li><a class="reference internal" href="#id104">Bug Fixes</a></li>
<li><a class="reference internal" href="#id105">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id106">Dependencies</a></li>
<li><a class="reference internal" href="#id107">Documentation</a></li>
<li><a class="reference internal" href="#id108">Scaffolds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id109">1.2 (2011-09-12)</a><ul>
<li><a class="reference internal" href="#id110">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-09-11">1.2b3 (2011-09-11)</a><ul>
<li><a class="reference internal" href="#id111">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-09-08">1.2b2 (2011-09-08)</a><ul>
<li><a class="reference internal" href="#id112">Bug Fixes</a></li>
<li><a class="reference internal" href="#id113">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-09-08">1.2b1 (2011-09-08)</a><ul>
<li><a class="reference internal" href="#id114">Bug Fixes</a></li>
<li><a class="reference internal" href="#id115">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2011-09-06">1.2a6 (2011-09-06)</a><ul>
<li><a class="reference internal" href="#id116">Bug Fixes</a></li>
<li><a class="reference internal" href="#id117">Internal</a></li>
<li><a class="reference internal" href="#behavior-differences">Behavior Differences</a></li>
<li><a class="reference internal" href="#id118">Scaffolds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2011-09-04">1.2a5 (2011-09-04)</a><ul>
<li><a class="reference internal" href="#id119">Bug Fixes</a></li>
<li><a class="reference internal" href="#id120">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2011-09-02">1.2a4 (2011-09-02)</a><ul>
<li><a class="reference internal" href="#id121">Features</a></li>
<li><a class="reference internal" href="#id122">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-08-29">1.2a3 (2011-08-29)</a><ul>
<li><a class="reference internal" href="#id123">Bug Fixes</a></li>
<li><a class="reference internal" href="#id124">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-08-27">1.2a2 (2011-08-27)</a><ul>
<li><a class="reference internal" href="#id125">Bug Fixes</a></li>
<li><a class="reference internal" href="#id126">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-08-24">1.2a1 (2011-08-24)</a><ul>
<li><a class="reference internal" href="#id127">Features</a></li>
<li><a class="reference internal" href="#id128">Internal</a></li>
<li><a class="reference internal" href="#id129">Deprecations</a></li>
<li><a class="reference internal" href="#id130">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id131">Documentation</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
<li><a class="reference internal" href="#id132">Scaffolds</a></li>
<li><a class="reference internal" href="#id133">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id134">1.1 (2011-07-22)</a><ul>
<li><a class="reference internal" href="#id135">Features</a></li>
<li><a class="reference internal" href="#id136">Internals</a></li>
<li><a class="reference internal" href="#id137">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2011-07-18">1.1b4 (2011-07-18)</a><ul>
<li><a class="reference internal" href="#id138">Documentation</a></li>
<li><a class="reference internal" href="#id139">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id140">Features</a></li>
<li><a class="reference internal" href="#id141">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-07-15">1.1b3 (2011-07-15)</a><ul>
<li><a class="reference internal" href="#id142">Features</a></li>
<li><a class="reference internal" href="#id143">Deprecations</a></li>
<li><a class="reference internal" href="#id144">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-07-13">1.1b2 (2011-07-13)</a><ul>
<li><a class="reference internal" href="#id145">Features</a></li>
<li><a class="reference internal" href="#behavior-changes">Behavior Changes</a></li>
<li><a class="reference internal" href="#id146">Bug Fixes</a></li>
<li><a class="reference internal" href="#id147">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-07-10">1.1b1 (2011-07-10)</a><ul>
<li><a class="reference internal" href="#id148">Features</a></li>
<li><a class="reference internal" href="#id149">Bug Fixes</a></li>
<li><a class="reference internal" href="#id150">Documentation</a></li>
<li><a class="reference internal" href="#id151">Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2011-07-01">1.1a4 (2011-07-01)</a><ul>
<li><a class="reference internal" href="#id152">Bug Fixes</a></li>
<li><a class="reference internal" href="#id153">Features</a></li>
<li><a class="reference internal" href="#id154">Deprecations</a></li>
<li><a class="reference internal" href="#id155">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2011-06-26">1.1a3 (2011-06-26)</a><ul>
<li><a class="reference internal" href="#id156">Features</a></li>
<li><a class="reference internal" href="#id157">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2011-06-22">1.1a2 (2011-06-22)</a><ul>
<li><a class="reference internal" href="#id158">Bug Fixes</a></li>
<li><a class="reference internal" href="#id159">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2011-06-20">1.1a1 (2011-06-20)</a><ul>
<li><a class="reference internal" href="#id160">Documentation</a></li>
<li><a class="reference internal" href="#id161">Features</a></li>
<li><a class="reference internal" href="#id162">Bug Fixes</a></li>
<li><a class="reference internal" href="#id163">Deprecations</a></li>
<li><a class="reference internal" href="#id164">Behavior Changes</a></li>
<li><a class="reference internal" href="#id165">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id166">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id167">1.0 (2011-01-30)</a><ul>
<li><a class="reference internal" href="#id168">Documentation</a></li>
<li><a class="reference internal" href="#id169">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2011-01-28">1.0b3 (2011-01-28)</a><ul>
<li><a class="reference internal" href="#id170">Bug Fixes</a></li>
<li><a class="reference internal" href="#id171">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2011-01-24">1.0b2 (2011-01-24)</a><ul>
<li><a class="reference internal" href="#id172">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2011-01-21">1.0b1 (2011-01-21)</a><ul>
<li><a class="reference internal" href="#id173">Features</a></li>
<li><a class="reference internal" href="#id174">Bug Fixes</a></li>
<li><a class="reference internal" href="#id175">Documentation</a></li>
<li><a class="reference internal" href="#id176">Deprecations</a></li>
<li><a class="reference internal" href="#id177">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#paster-templates">Paster Templates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2011-01-18">1.0a10 (2011-01-18)</a><ul>
<li><a class="reference internal" href="#id178">Bug Fixes</a></li>
<li><a class="reference internal" href="#id179">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id180">Features</a></li>
<li><a class="reference internal" href="#id181">Paster Templates</a></li>
<li><a class="reference internal" href="#id182">Documentation</a></li>
<li><a class="reference internal" href="#id183">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2011-01-08">1.0a9 (2011-01-08)</a><ul>
<li><a class="reference internal" href="#id184">Bug Fixes</a></li>
<li><a class="reference internal" href="#id185">Features</a></li>
<li><a class="reference internal" href="#id186">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id187">Documentation</a></li>
<li><a class="reference internal" href="#id188">Internals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2010-12-27">1.0a8 (2010-12-27)</a><ul>
<li><a class="reference internal" href="#id189">Bug Fixes</a></li>
<li><a class="reference internal" href="#id190">Features</a></li>
<li><a class="reference internal" href="#id191">Paster Templates</a></li>
<li><a class="reference internal" href="#id192">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2010-12-20">1.0a7 (2010-12-20)</a><ul>
<li><a class="reference internal" href="#terminology-changes">Terminology Changes</a></li>
<li><a class="reference internal" href="#id193">Bug Fixes</a></li>
<li><a class="reference internal" href="#id194">Features</a></li>
<li><a class="reference internal" href="#environment">Environment</a></li>
<li><a class="reference internal" href="#id195">Documentation</a></li>
<li><a class="reference internal" href="#id196">Paster Templates</a></li>
<li><a class="reference internal" href="#id197">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2010-12-15">1.0a6 (2010-12-15)</a><ul>
<li><a class="reference internal" href="#id198">Bug Fixes</a></li>
<li><a class="reference internal" href="#id199">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2010-12-14">1.0a5 (2010-12-14)</a><ul>
<li><a class="reference internal" href="#id200">Features</a></li>
<li><a class="reference internal" href="#id201">Dependencies</a></li>
<li><a class="reference internal" href="#id202">Bug Fixes</a></li>
<li><a class="reference internal" href="#id203">Documentation</a></li>
<li><a class="reference internal" href="#id204">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2010-11-21">1.0a4 (2010-11-21)</a><ul>
<li><a class="reference internal" href="#id205">Features</a></li>
<li><a class="reference internal" href="#id206">Documentation</a></li>
<li><a class="reference internal" href="#id207">Bug Fixes</a></li>
<li><a class="reference internal" href="#id208">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id209">Deprecations</a></li>
<li><a class="reference internal" href="#id210">Documentation</a></li>
<li><a class="reference internal" href="#id211">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2010-11-16">1.0a3 (2010-11-16)</a><ul>
<li><a class="reference internal" href="#id212">Features</a></li>
<li><a class="reference internal" href="#id213">Bug Fixes</a></li>
<li><a class="reference internal" href="#id214">Documentation</a></li>
<li><a class="reference internal" href="#id215">Deprecations</a></li>
<li><a class="reference internal" href="#id216">Behavior Differences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2010-11-09">1.0a2 (2010-11-09)</a><ul>
<li><a class="reference internal" href="#id217">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2010-11-05">1.0a1 (2010-11-05)</a><ul>
<li><a class="reference internal" href="#features-delta-from-bfg-1-3">Features (delta from BFG 1.3)</a></li>
<li><a class="reference internal" href="#documentation-delta-from-bfg-1-3">Documentation (delta from BFG 1.3)</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities-with-bfg-1-3">Backwards Incompatibilities (with BFG 1.3)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#repoze-bfg-change-history-previous-name-for-pyramid"><code class="docutils literal notranslate"><span class="pre">repoze.bfg</span></code> Change History (previous name for Pyramid)</a><ul>
<li><a class="reference internal" href="#b1-2010-10-25">1.3b1 (2010-10-25)</a><ul>
<li><a class="reference internal" href="#id218">Features</a></li>
<li><a class="reference internal" href="#id219">Bug Fixes</a></li>
<li><a class="reference internal" href="#id220">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a15-2010-09-30">1.3a15 (2010-09-30)</a><ul>
<li><a class="reference internal" href="#id221">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a14-2010-09-14">1.3a14 (2010-09-14)</a><ul>
<li><a class="reference internal" href="#id222">Bug Fixes</a></li>
<li><a class="reference internal" href="#id223">Features</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#id224">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#errata">Errata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a13-2010-09-14">1.3a13 (2010-09-14)</a><ul>
<li><a class="reference internal" href="#id225">Bug Fixes</a></li>
<li><a class="reference internal" href="#id226">Features</a></li>
<li><a class="reference internal" href="#id227">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id228">Deprecations</a></li>
<li><a class="reference internal" href="#id229">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a12-2010-09-08">1.3a12 (2010-09-08)</a><ul>
<li><a class="reference internal" href="#id230">Bug Fixes</a></li>
<li><a class="reference internal" href="#id231">Features</a></li>
<li><a class="reference internal" href="#id232">Documentation</a></li>
<li><a class="reference internal" href="#id233">Paster Templates</a></li>
<li><a class="reference internal" href="#id234">Dependencies</a></li>
<li><a class="reference internal" href="#id235">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a11-2010-09-05">1.3a11 (2010-09-05)</a><ul>
<li><a class="reference internal" href="#id236">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2010-09-05">1.3a10 (2010-09-05)</a><ul>
<li><a class="reference internal" href="#id237">Features</a></li>
<li><a class="reference internal" href="#id238">Bug Fixes</a></li>
<li><a class="reference internal" href="#id239">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id240">Documentation</a></li>
<li><a class="reference internal" href="#id241">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2010-08-22">1.3a9 (2010-08-22)</a><ul>
<li><a class="reference internal" href="#id242">Features</a></li>
<li><a class="reference internal" href="#id243">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id244">Documentation</a></li>
<li><a class="reference internal" href="#id245">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2010-08-08">1.3a8 (2010-08-08)</a><ul>
<li><a class="reference internal" href="#id246">Features</a></li>
<li><a class="reference internal" href="#id247">Documentation</a></li>
<li><a class="reference internal" href="#id248">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2010-08-01">1.3a7 (2010-08-01)</a><ul>
<li><a class="reference internal" href="#id249">Features</a></li>
<li><a class="reference internal" href="#id250">Bug Fixes</a></li>
<li><a class="reference internal" href="#id251">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id252">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2010-07-25">1.3a6 (2010-07-25)</a><ul>
<li><a class="reference internal" href="#id253">Features</a></li>
<li><a class="reference internal" href="#id254">Documentation</a></li>
<li><a class="reference internal" href="#id255">Bug Fixes</a></li>
<li><a class="reference internal" href="#id256">Deprecations</a></li>
<li><a class="reference internal" href="#id257">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2010-07-14">1.3a5 (2010-07-14)</a><ul>
<li><a class="reference internal" href="#id258">Features</a></li>
<li><a class="reference internal" href="#id259">Bug Fixes</a></li>
<li><a class="reference internal" href="#id260">Documentation</a></li>
<li><a class="reference internal" href="#id261">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2010-07-03">1.3a4 (2010-07-03)</a><ul>
<li><a class="reference internal" href="#id262">Features</a></li>
<li><a class="reference internal" href="#id263">Documentation</a></li>
<li><a class="reference internal" href="#id264">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2010-05-01">1.3a3 (2010-05-01)</a><ul>
<li><a class="reference internal" href="#id265">Paster Templates</a></li>
<li><a class="reference internal" href="#id266">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2010-04-28">1.3a2 (2010-04-28)</a><ul>
<li><a class="reference internal" href="#id267">Features</a></li>
<li><a class="reference internal" href="#id268">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id269">Behavior Changes</a></li>
<li><a class="reference internal" href="#id270">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2010-04-26">1.3a1 (2010-04-26)</a><ul>
<li><a class="reference internal" href="#id271">Features</a></li>
<li><a class="reference internal" href="#zcml">ZCML</a></li>
<li><a class="reference internal" href="#id272">Deprecations</a></li>
<li><a class="reference internal" href="#id273">Dependencies</a></li>
<li><a class="reference internal" href="#id274">Internal</a></li>
<li><a class="reference internal" href="#id275">Documentation</a></li>
<li><a class="reference internal" href="#id276">Paster Templates</a></li>
<li><a class="reference internal" href="#licensing">Licensing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id277">1.2 (2010-02-10)</a></li>
<li><a class="reference internal" href="#b6-2010-02-06">1.2b6 (2010-02-06)</a><ul>
<li><a class="reference internal" href="#id278">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id279">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b5-2010-02-04">1.2b5 (2010-02-04)</a><ul>
<li><a class="reference internal" href="#id280">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2010-02-03">1.2b4 (2010-02-03)</a><ul>
<li><a class="reference internal" href="#id281">Documentation</a></li>
<li><a class="reference internal" href="#id282">Bug Fixes</a></li>
<li><a class="reference internal" href="#id283">Features</a></li>
<li><a class="reference internal" href="#id284">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id285">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2010-01-24">1.2b3 (2010-01-24)</a><ul>
<li><a class="reference internal" href="#id286">Bug Fixes</a></li>
<li><a class="reference internal" href="#id287">Features</a></li>
<li><a class="reference internal" href="#id288">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2010-01-21">1.2b2 (2010-01-21)</a><ul>
<li><a class="reference internal" href="#id289">Bug Fixes</a></li>
<li><a class="reference internal" href="#id290">Documentation</a></li>
<li><a class="reference internal" href="#id291">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2010-01-18">1.2b1 (2010-01-18)</a><ul>
<li><a class="reference internal" href="#id292">Bug Fixes</a></li>
<li><a class="reference internal" href="#id293">Features</a></li>
<li><a class="reference internal" href="#id294">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a11-2010-01-05">1.2a11 (2010-01-05)</a><ul>
<li><a class="reference internal" href="#id295">Bug Fixes</a></li>
<li><a class="reference internal" href="#id296">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a10-2010-01-04">1.2a10 (2010-01-04)</a><ul>
<li><a class="reference internal" href="#id297">Features</a></li>
<li><a class="reference internal" href="#documentation-and-paster-templates">Documentation and Paster Templates</a></li>
<li><a class="reference internal" href="#documentation-licensing">Documentation Licensing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-12-27">1.2a9 (2009-12-27)</a><ul>
<li><a class="reference internal" href="#id298">Documentation Licensing</a></li>
<li><a class="reference internal" href="#id299">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-12-24">1.2a8 (2009-12-24)</a><ul>
<li><a class="reference internal" href="#id300">Features</a></li>
<li><a class="reference internal" href="#id301">Bug Fixes</a></li>
<li><a class="reference internal" href="#id302">Documentation</a></li>
<li><a class="reference internal" href="#id303">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-12-20">1.2a7 (2009-12-20)</a><ul>
<li><a class="reference internal" href="#id304">Features</a></li>
<li><a class="reference internal" href="#id305">Internal</a></li>
<li><a class="reference internal" href="#documenation">Documenation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-12-18">1.2a6 (2009-12-18)</a><ul>
<li><a class="reference internal" href="#id306">Features</a></li>
<li><a class="reference internal" href="#id307">Documentation</a></li>
<li><a class="reference internal" href="#id308">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-12-10">1.2a5 (2009-12-10)</a><ul>
<li><a class="reference internal" href="#id309">Features</a></li>
<li><a class="reference internal" href="#id310">Internals</a></li>
<li><a class="reference internal" href="#id311">Documentation</a></li>
<li><a class="reference internal" href="#id312">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-12-07">1.2a4 (2009-12-07)</a><ul>
<li><a class="reference internal" href="#id313">Features</a></li>
<li><a class="reference internal" href="#id314">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-12-02">1.2a3 (2009-12-02)</a><ul>
<li><a class="reference internal" href="#id315">Bug Fixes</a></li>
<li><a class="reference internal" href="#id316">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-11-29">1.2a2 (2009-11-29)</a><ul>
<li><a class="reference internal" href="#id317">Bug Fixes</a></li>
<li><a class="reference internal" href="#id318">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-11-28">1.2a1 (2009-11-28)</a><ul>
<li><a class="reference internal" href="#id319">Features</a></li>
<li><a class="reference internal" href="#id320">Documentation</a></li>
<li><a class="reference internal" href="#id321">Bug Fixes</a></li>
<li><a class="reference internal" href="#id322">Internals</a></li>
<li><a class="reference internal" href="#backwards-incompatibilites">Backwards Incompatibilites</a></li>
<li><a class="reference internal" href="#id323">Deprecations</a></li>
<li><a class="reference internal" href="#id324">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id325">1.1.1 (2009-11-21)</a><ul>
<li><a class="reference internal" href="#id326">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id327">1.1 (2009-11-15)</a><ul>
<li><a class="reference internal" href="#id328">Internals</a></li>
<li><a class="reference internal" href="#id329">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b4-2009-11-12">1.1b4 (2009-11-12)</a><ul>
<li><a class="reference internal" href="#id330">Bug Fixes</a></li>
<li><a class="reference internal" href="#id331">Documentation</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#id332">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b3-2009-11-06">1.1b3 (2009-11-06)</a><ul>
<li><a class="reference internal" href="#id333">Features</a></li>
<li><a class="reference internal" href="#id334">Bug Fixes</a></li>
<li><a class="reference internal" href="#id335">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b2-2009-11-02">1.1b2 (2009-11-02)</a><ul>
<li><a class="reference internal" href="#id336">Bug Fixes</a></li>
<li><a class="reference internal" href="#id337">Documentation</a></li>
<li><a class="reference internal" href="#id338">Features</a></li>
<li><a class="reference internal" href="#id339">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#b1-2009-11-01">1.1b1 (2009-11-01)</a><ul>
<li><a class="reference internal" href="#id340">Bug Fixes</a></li>
<li><a class="reference internal" href="#id341">Documentation</a></li>
<li><a class="reference internal" href="#id342">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-10-31">1.1a9 (2009-10-31)</a><ul>
<li><a class="reference internal" href="#id343">Bug Fixes</a></li>
<li><a class="reference internal" href="#id344">Features</a></li>
<li><a class="reference internal" href="#id345">Documentation</a></li>
<li><a class="reference internal" href="#id346">Internal</a></li>
<li><a class="reference internal" href="#id347">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-10-27">1.1a8 (2009-10-27)</a><ul>
<li><a class="reference internal" href="#id348">Features</a></li>
<li><a class="reference internal" href="#id349">Bug Fixes</a></li>
<li><a class="reference internal" href="#id350">Documentation</a></li>
<li><a class="reference internal" href="#id351">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id352">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-10-18">1.1a7 (2009-10-18)</a><ul>
<li><a class="reference internal" href="#id353">Features</a></li>
<li><a class="reference internal" href="#id354">Documentation</a></li>
<li><a class="reference internal" href="#id355">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-10-15">1.1a6 (2009-10-15)</a><ul>
<li><a class="reference internal" href="#id356">Features</a></li>
<li><a class="reference internal" href="#id357">Documentation</a></li>
<li><a class="reference internal" href="#id358">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id359">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-10-10">1.1a5 (2009-10-10)</a><ul>
<li><a class="reference internal" href="#id360">Documentation</a></li>
<li><a class="reference internal" href="#id361">Features</a></li>
<li><a class="reference internal" href="#id362">Internal</a></li>
<li><a class="reference internal" href="#id363">Deprecations</a></li>
<li><a class="reference internal" href="#id364">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-09-23">1.1a4 (2009-09-23)</a><ul>
<li><a class="reference internal" href="#id365">Bug Fixes</a></li>
<li><a class="reference internal" href="#id366">Documentation</a></li>
<li><a class="reference internal" href="#id367">Features</a></li>
<li><a class="reference internal" href="#id368">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id369">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-09-16">1.1a3 (2009-09-16)</a><ul>
<li><a class="reference internal" href="#id370">Documentation</a></li>
<li><a class="reference internal" href="#id371">Features</a></li>
<li><a class="reference internal" href="#id372">Dependencies</a></li>
<li><a class="reference internal" href="#id373">Deprecations</a></li>
<li><a class="reference internal" href="#id374">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-09-14">1.1a2 (2009-09-14)</a><ul>
<li><a class="reference internal" href="#id375">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-09-06">1.1a1 (2009-09-06)</a><ul>
<li><a class="reference internal" href="#id376">Bug Fixes</a></li>
<li><a class="reference internal" href="#id377">Features</a></li>
<li><a class="reference internal" href="#id378">Internal</a></li>
<li><a class="reference internal" href="#id379">Documentation</a></li>
<li><a class="reference internal" href="#id380">Deprecations</a></li>
<li><a class="reference internal" href="#id381">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id382">1.0.1 (2009-07-22)</a></li>
<li><a class="reference internal" href="#id383">1.0 (2009-07-05)</a></li>
<li><a class="reference internal" href="#b2-2009-07-03">1.0b2 (2009-07-03)</a></li>
<li><a class="reference internal" href="#b1-2009-07-02">1.0b1 (2009-07-02)</a><ul>
<li><a class="reference internal" href="#id384">Features</a></li>
<li><a class="reference internal" href="#id385">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a9-2009-07-01">1.0a9 (2009-07-01)</a><ul>
<li><a class="reference internal" href="#id386">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-07-01">1.0a8 (2009-07-01)</a><ul>
<li><a class="reference internal" href="#id387">Deprecations</a></li>
<li><a class="reference internal" href="#id388">Features</a></li>
<li><a class="reference internal" href="#id389">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-06-30">1.0a7 (2009-06-30)</a><ul>
<li><a class="reference internal" href="#id390">Features</a></li>
<li><a class="reference internal" href="#id391">Documentation</a></li>
<li><a class="reference internal" href="#id392">Internal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-06-29">1.0a6 (2009-06-29)</a><ul>
<li><a class="reference internal" href="#id393">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-06-28">1.0a5 (2009-06-28)</a><ul>
<li><a class="reference internal" href="#id394">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-06-25">1.0a4 (2009-06-25)</a><ul>
<li><a class="reference internal" href="#id395">Features</a></li>
<li><a class="reference internal" href="#id396">Documentation</a></li>
<li><a class="reference internal" href="#id397">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-06-24">1.0a3 (2009-06-24)</a><ul>
<li><a class="reference internal" href="#implementation-changes">Implementation Changes</a></li>
<li><a class="reference internal" href="#id398">Bug Fixes</a></li>
<li><a class="reference internal" href="#id399">Documentation</a></li>
<li><a class="reference internal" href="#id400">Features</a></li>
<li><a class="reference internal" href="#id401">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-06-23">1.0a2 (2009-06-23)</a><ul>
<li><a class="reference internal" href="#id402">Bug Fixes</a></li>
<li><a class="reference internal" href="#id403">Features</a></li>
<li><a class="reference internal" href="#id404">Documentation</a></li>
<li><a class="reference internal" href="#id405">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-06-22">1.0a1 (2009-06-22)</a><ul>
<li><a class="reference internal" href="#id406">Features</a></li>
<li><a class="reference internal" href="#id407">Deprecations</a></li>
<li><a class="reference internal" href="#removals">Removals</a></li>
<li><a class="reference internal" href="#id408">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id409">Bug Fixes</a></li>
<li><a class="reference internal" href="#id410">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id411">0.9.1 (2009-06-02)</a><ul>
<li><a class="reference internal" href="#id412">Features</a></li>
<li><a class="reference internal" href="#id413">Bug Fixes</a></li>
<li><a class="reference internal" href="#id414">Documentation</a></li>
<li><a class="reference internal" href="#api-removals">API Removals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id415">0.9 (2009-06-01)</a><ul>
<li><a class="reference internal" href="#id416">Bug Fixes</a></li>
<li><a class="reference internal" href="#id417">Features</a></li>
<li><a class="reference internal" href="#id418">Removals</a></li>
<li><a class="reference internal" href="#id419">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a8-2009-05-31">0.9a8 (2009-05-31)</a><ul>
<li><a class="reference internal" href="#id420">Features</a></li>
<li><a class="reference internal" href="#id421">Bug Fixes</a></li>
<li><a class="reference internal" href="#id422">Deprecations</a></li>
<li><a class="reference internal" href="#renames">Renames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-05-30">0.9a7 (2009-05-30)</a><ul>
<li><a class="reference internal" href="#id423">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-05-29">0.9a6 (2009-05-29)</a><ul>
<li><a class="reference internal" href="#id424">Documentation</a></li>
<li><a class="reference internal" href="#id425">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-05-28">0.9a5 (2009-05-28)</a><ul>
<li><a class="reference internal" href="#id426">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-05-27">0.9a4 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id427">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-05-27">0.9a3 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id428">Features</a></li>
<li><a class="reference internal" href="#id429">Documentation</a></li>
<li><a class="reference internal" href="#id430">Deprecations</a></li>
<li><a class="reference internal" href="#deprecated-import-alias-removals">Deprecated Import Alias Removals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-05-27">0.9a2 (2009-05-27)</a><ul>
<li><a class="reference internal" href="#id431">Features</a></li>
<li><a class="reference internal" href="#id432">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-5-27">0.9a1 (2009-5-27)</a><ul>
<li><a class="reference internal" href="#id433">Features</a></li>
<li><a class="reference internal" href="#id434">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id435">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id436">0.8.1 (2009-05-21)</a><ul>
<li><a class="reference internal" href="#id437">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id438">0.8 (2009-05-18)</a><ul>
<li><a class="reference internal" href="#id439">Features</a></li>
<li><a class="reference internal" href="#id440">Deprecations</a></li>
<li><a class="reference internal" href="#id441">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a7-2009-05-16">0.8a7 (2009-05-16)</a><ul>
<li><a class="reference internal" href="#id442">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id443">Documentation</a></li>
<li><a class="reference internal" href="#id444">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a6-2009-05-11">0.8a6 (2009-05-11)</a><ul>
<li><a class="reference internal" href="#id445">Features</a></li>
<li><a class="reference internal" href="#id446">Documentation</a></li>
<li><a class="reference internal" href="#id447">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a5-2009-05-08">0.8a5 (2009-05-08)</a><ul>
<li><a class="reference internal" href="#id448">Features</a></li>
<li><a class="reference internal" href="#id449">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a4-2009-05-04">0.8a4 (2009-05-04)</a><ul>
<li><a class="reference internal" href="#id450">Features</a></li>
<li><a class="reference internal" href="#id451">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a3-2009-05-03">0.8a3 (2009-05-03)</a><ul>
<li><a class="reference internal" href="#id452">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2-2009-05-02">0.8a2 (2009-05-02)</a><ul>
<li><a class="reference internal" href="#id453">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a1-2009-05-02">0.8a1 (2009-05-02)</a><ul>
<li><a class="reference internal" href="#deprecation-warning-and-import-alias-removals">Deprecation Warning and Import Alias Removals</a></li>
<li><a class="reference internal" href="#id454">Features</a></li>
<li><a class="reference internal" href="#id455">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id456">0.7.1 (2009-05-01)</a><ul>
<li><a class="reference internal" href="#index-related">Index-Related</a></li>
<li><a class="reference internal" href="#id457">Features</a></li>
<li><a class="reference internal" href="#id458">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id459">0.7.0 (2009-04-11)</a><ul>
<li><a class="reference internal" href="#id460">Bug Fixes</a></li>
<li><a class="reference internal" href="#id461">Features</a></li>
<li><a class="reference internal" href="#id462">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id463">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id464">0.6.9 (2009-02-16)</a><ul>
<li><a class="reference internal" href="#id465">Bug Fixes</a></li>
<li><a class="reference internal" href="#id466">Features</a></li>
<li><a class="reference internal" href="#id467">Documentation</a></li>
<li><a class="reference internal" href="#id468">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id469">0.6.8 (2009-02-05)</a><ul>
<li><a class="reference internal" href="#id470">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
<li><a class="reference internal" href="#id471">Features</a></li>
<li><a class="reference internal" href="#id472">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id473">0.6.7 (2009-01-27)</a><ul>
<li><a class="reference internal" href="#id474">Features</a></li>
<li><a class="reference internal" href="#id475">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id476">0.6.6 (2009-01-26)</a><ul>
<li><a class="reference internal" href="#id477">Implementation Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id478">0.6.5 (2009-01-26)</a><ul>
<li><a class="reference internal" href="#id479">Features</a></li>
<li><a class="reference internal" href="#id480">Behavior Changes</a></li>
<li><a class="reference internal" href="#id481">Implementation Changes</a></li>
<li><a class="reference internal" href="#id482">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id483">0.6.4 (2009-01-23)</a><ul>
<li><a class="reference internal" href="#id484">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id485">Implementation Changes</a></li>
<li><a class="reference internal" href="#new-modules">New Modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id486">0.6.3 (2009-01-19)</a><ul>
<li><a class="reference internal" href="#id487">Bug Fixes</a></li>
<li><a class="reference internal" href="#id488">Features</a></li>
<li><a class="reference internal" href="#id489">Deprecations</a></li>
<li><a class="reference internal" href="#id490">Implementation Changes</a></li>
<li><a class="reference internal" href="#documentation-additions">Documentation Additions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id491">0.6.2 (2009-01-13)</a><ul>
<li><a class="reference internal" href="#id492">Features</a></li>
<li><a class="reference internal" href="#id493">Bug Fixes</a></li>
<li><a class="reference internal" href="#id494">Implementation Changes</a></li>
<li><a class="reference internal" href="#id495">New Modules</a></li>
<li><a class="reference internal" href="#id496">Behavior Changes</a></li>
<li><a class="reference internal" href="#id497">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id498">0.6.1 (2009-01-06)</a><ul>
<li><a class="reference internal" href="#id499">New Modules</a></li>
<li><a class="reference internal" href="#id500">Deprecations</a></li>
<li><a class="reference internal" href="#id501">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id502">0.6 (2008-12-26)</a><ul>
<li><a class="reference internal" href="#id503">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id504">0.5.6 (2008-12-18)</a></li>
<li><a class="reference internal" href="#id505">0.5.5 (2008-12-17)</a><ul>
<li><a class="reference internal" href="#id506">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id507">0.5.4 (2008-12-13)</a><ul>
<li><a class="reference internal" href="#id508">Backwards Incompatibilities</a></li>
<li><a class="reference internal" href="#id509">Bugfixes</a></li>
<li><a class="reference internal" href="#id510">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id511">0.5.3 (2008-12-07)</a></li>
<li><a class="reference internal" href="#id512">0.5.2 (2008-12-05)</a></li>
<li><a class="reference internal" href="#id513">0.5.1 (2008-11-25)</a></li>
<li><a class="reference internal" href="#id514">0.5.0 (2008-11-18)</a></li>
<li><a class="reference internal" href="#id515">0.4.9 (2008-11-17)</a></li>
<li><a class="reference internal" href="#id516">0.4.8 (2008-11-12)</a><ul>
<li><a class="reference internal" href="#id517">Backwards Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id518">0.4.7 (2008-11-11)</a><ul>
<li><a class="reference internal" href="#id519">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id520">0.4.6 (2008-11-10)</a><ul>
<li><a class="reference internal" href="#id521">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id522">0.4.5 (2008-11-09)</a><ul>
<li><a class="reference internal" href="#id523">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id524">0.4.4 (2008-11-08)</a><ul>
<li><a class="reference internal" href="#id525">Features</a></li>
<li><a class="reference internal" href="#id526">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id527">0.4.3 (2008-11-02)</a><ul>
<li><a class="reference internal" href="#id528">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id529">0.4.2 (2008-11-02)</a><ul>
<li><a class="reference internal" href="#id530">Features</a></li>
<li><a class="reference internal" href="#id531">Documentation</a></li>
<li><a class="reference internal" href="#id532">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id533">0.4.1 (2008-10-28)</a><ul>
<li><a class="reference internal" href="#id534">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id535">0.4.0 (2008-10-03)</a><ul>
<li><a class="reference internal" href="#id536">Docs</a></li>
<li><a class="reference internal" href="#id537">Features</a></li>
<li><a class="reference internal" href="#id538">Bug Fixes</a></li>
<li><a class="reference internal" href="#id539">Deprecations</a></li>
<li><a class="reference internal" href="#id540">Backwards incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id541">0.3.9 (2008-08-27)</a><ul>
<li><a class="reference internal" href="#id542">Features</a></li>
<li><a class="reference internal" href="#id543">Backwards incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id544">0.3.8 (2008-08-26)</a><ul>
<li><a class="reference internal" href="#id545">Docs</a></li>
<li><a class="reference internal" href="#id546">Bug fixes</a></li>
<li><a class="reference internal" href="#id547">Features</a></li>
<li><a class="reference internal" href="#id548">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id549">0.3.7 (2008-09-09)</a><ul>
<li><a class="reference internal" href="#id550">Features</a></li>
<li><a class="reference internal" href="#id551">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id552">0.3.6 (2008-09-04)</a><ul>
<li><a class="reference internal" href="#id553">Features</a></li>
<li><a class="reference internal" href="#id554">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id555">0.3.5 (2008-09-01)</a><ul>
<li><a class="reference internal" href="#id556">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id557">0.3.4 (2008-08-28)</a><ul>
<li><a class="reference internal" href="#id558">Backwards incompatibilities</a></li>
<li><a class="reference internal" href="#id559">Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id560">0.3.3 (2008-08-23)</a></li>
<li><a class="reference internal" href="#id561">0.3.2 (2008-08-23)</a></li>
<li><a class="reference internal" href="#id562">0.3.1 (2008-08-20)</a></li>
<li><a class="reference internal" href="#id563">0.3.0 (2008-08-16)</a></li>
<li><a class="reference internal" href="#id564">0.2.9 (2008-08-11)</a></li>
<li><a class="reference internal" href="#id565">0.2.8 (2008-08-11)</a></li>
<li><a class="reference internal" href="#id566">0.2.7 (2008-08-05)</a></li>
<li><a class="reference internal" href="#id567">0.2.6 (2008-07-31)</a></li>
<li><a class="reference internal" href="#id568">0.2.5 (2008-07-28)</a></li>
<li><a class="reference internal" href="#id569">0.2.4 (2008-07-27)</a></li>
<li><a class="reference internal" href="#id570">0.2.3 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id571">0.2.2 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id572">0.2.1 (2008-07-20)</a></li>
<li><a class="reference internal" href="#id573">0.2 (2008-07-19)</a></li>
<li><a class="reference internal" href="#id574">0.1 (2008-07-08)</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.0.html"
                        title="前の章へ">What's New in Pyramid 1.0</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="designdefense.html"
                        title="次の章へ">Defending Pyramid's Design</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/changes.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="designdefense.html" title="Defending Pyramid&#39;s Design"
             >次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.0.html" title="What&#39;s New in Pyramid 1.0"
             >前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 8月 04, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4 で生成しました。
    </div>
  </body>
</html>