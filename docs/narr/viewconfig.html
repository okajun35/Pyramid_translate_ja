
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>(機械翻訳) 設定を表示 &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="(機械翻訳) 静的資産" href="assets.html" />
    <link rel="prev" title="(機械翻訳) テンプレート" href="templates.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="assets.html" title="(機械翻訳) 静的資産"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="templates.html" title="(機械翻訳) テンプレート"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="view-lookup">
<span id="view-configuration"></span><span id="view-config-chapter"></span><span id="id1"></span><h1>(機械翻訳) 設定を表示<a class="headerlink" href="#view-lookup" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p id="index-0">：term： <cite>View lookup`は：app：</cite> Pyramid`サブシステムで、：term： <cite>view callable`を見つけて呼び出します。 ：term： `View configuration`は、アプリケーションでどのようにterm：</cite> view lookup`が動作するかを制御します。任意の所与の要求の間、ビュー構成情報は、ビュールックアップサブシステムによって要求データと比較され、その要求に対してコール可能な「最良の」ビューを見つける。</p>
<p>これまでの章では、あまり説明のない簡単なビュー構成宣言に慣れてきました。この章では、主題について詳しく説明します。</p>
<div class="section" id="mapping-a-resource-or-url-pattern-to-a-view-callable">
<span id="index-1"></span><h2>リソースまたはURLパターンをビュー呼び出し可能にマッピングする<a class="headerlink" href="#mapping-a-resource-or-url-pattern-to-a-view-callable" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発者は：term： <cite>view callable`を：term：</cite> view configuration`を介してa：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`アプリケーション内で利用できるようにします。ビュー構成では、呼び出し可能なビューを呼び出すために真でなければならない状況のセットを決定する一連のステートメントと、呼び出し可能なビューを関連付けます。</p>
<p>ビュー設定ステートメントは、：term： <cite>context`リソース（または例外）と：term：</cite> request`に存在する情報について行われます。</p>
<p>ビュー構成は、次の2つの方法のいずれかで実行されます。</p>
<ul class="simple">
<li>Pythonオブジェクトに：ref： <cite>mapping_views_using_a_decorator_section`として添付された：class：</cite> pyramid.view.view_config`デコレータを持つアプリケーションソースコードに対して：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>scan`を実行します。</li>
<li>：meth： <cite>pyramid.config.Configurator.add_view`メソッドを：ref：</cite> mapping_views_using_imperative_config_section`として使用します。</li>
</ul>
<div class="section" id="view-configuration-parameters">
<span id="index-2"></span><span id="id2"></span><h3>設定パラメータの表示<a class="headerlink" href="#view-configuration-parameters" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>すべての形式のビュー構成は、同じ一般的な型の引数を受け入れます。</p>
<p>ビュー設定中に提供される多くの引数は、term： <a href="#id1"><span class="problematic" id="id2">`</span></a>view述語`引数です。ビュー設定時に使用されるビュー述語引数は、term： <a href="#id3"><span class="problematic" id="id4">`</span></a>view lookup`が特定のビューを呼び出し可能にする状況のセットを絞り込むために使用されます。</p>
<p>：term： <cite>View predicate`属性は：term：</cite> view lookup`サブシステムが適切なビューを見つけて呼び出すことを可能にするビュー設定の重要な部分です。ビューの構成が保持する述部属性の数が多いほど、登録ビューの呼び出し可能性が呼び出される前に状況がより具体的になる必要があります。特定のビュー構成に供給される述部の数が少ないほど、関連するビュー呼び出し可能関数が呼び出される可能性が高くなります。 5つの述部を持つビューは、たとえば2つのビューの前に常に見つけられ、評価されます。</p>
<p>しかし、これは：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`は、一致しない述語を持つビュー登録を見つけたときに&amp;quot;探していることを止める&amp;quot;という意味ではありません。 1組のビュー述語が一致しない場合は、ビューが見つかるまで、またはビューと一致するビューが見つからなくなるまで、述語には&amp;quot;次の最も特殊な&amp;quot;ビュー（存在する場合）が参照されます。要求環境にすべて一致する一連の述部を持つ最初のビューが呼び出されます。</p>
<p>要求と一致させることができる述語を持つビューが見つからない場合、：app： <cite>Pyramid`は、ユーザのブラウザに&amp;quot;見つからない&amp;quot;（404）ページを表すエラーを返します。デフォルト：term： `Not Found View`の変更については、ref：</cite> changing_the_notfound_view`を参照してください。</p>
<p>他のビュー設定引数は、述語でない引数です。これらは、呼び出し可能なビューの応答を変更するか、または呼び出しポリシーが許可ポリシーのために呼び出されないようにします。ビュー構成内に述語でない引数が存在しても、ビュー呼び出し可能関数が呼び出される状況は限定されません。</p>
<div class="section" id="non-predicate-arguments">
<span id="nonpredicate-view-args"></span><h4>非述語引数<a class="headerlink" href="#non-predicate-arguments" title="このヘッドラインへのパーマリンク">¶</a></h4>
<dl class="docutils">
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>許可 ``</dt>
<dd><p class="first">：term： <cite>view callable`を呼び出すためにユーザが所有しなければならないa：term：</cite> permission`の名前。ビューのセキュリティと権限の詳細については、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>view_security_section`を参照してください。</p>
<p class="last">`` permission``が指定されていない場合、このビューにはアクセス権が登録されていません（呼び出し元からアクセス可能です）。</p>
</dd>
<dt>`` attr``</dt>
<dd><p class="first">ビュー機構は、デフォルトで：term： <cite>view callable`（ビュー呼び出し可能関数が関数の場合は関数自体）の</cite> <cite>__call__``メソッドを使用して応答を取得します。 `</cite> attr``値は、レスポンスを取得するために使用されるメソッド属性を変更することを可能にします。たとえば、ビューがクラスで、クラスに `` index``という名前のメソッドがあり、クラスの `` __call__``メソッドの代わりにこのメソッドを使用してレスポンスを返す場合は、 <a href="#id1"><span class="problematic" id="id2">``</span></a>ビューのビュー構成では、attr = &amp;quot;index &amp;quot; <a href="#id3"><span class="problematic" id="id4">``</span></a>これは、ビュー定義がクラスである場合に最も便利です。</p>
<p class="last">`` attr``が与えられていなければ `` None``が使われます（ビューが関数の場合は関数そのものを意味し、ビューがクラスの場合は `` __call__``の呼び出し可能な属性を意味します）。</p>
</dd>
<dt>レンダラー</dt>
<dd><p class="first">関連するビュー呼び出し可能戻り値から：term： <cite>response`を構築するために使用される：term：</cite> renderer`実装を示します。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>renderers_chapter`を参照してください。</p>
</div>
<p>これは単一の文字列（例えば `` json``）かパスを意味する文字列、または：term： <cite>資産指定`（例えば `</cite> templates / views.pt``）a：term： <cite>renderer実装。 `</cite> renderer``の値にドット（ `` .``）が含まれていない場合、指定された文字列はレンダラー実装をルックアップするために使用され、レンダラー実装はビュー戻り値。 `` renderer``の値にドット（ `` .``）が含まれている場合、指定された用語はパスとして扱われ、パスの最後の要素のファイル名拡張子はレンダラー実装をルックアップするために使われます。それは完全なパスを通過します。</p>
<p>レンダラーがパスである場合、パスは通常単純な相対パス名です（例えば `` templates / foo.pt``、&amp;quot;foo.pt &amp;quot;という名前のテンプレートは&amp;quot;templates &amp;quot;にあります）ディレクトリ：現在の：term： <cite>package`のディレクトリからの相対パス） - パスは絶対パスでもよく、UNIXの場合はスラッシュ、Windowsの場合はドライブ文字の接頭辞で始まります。代わりに、パスは `</cite> some.dotted.package_name：relative / path``の形式で：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>asset specification`とすることができ、別のパッケージにあるテンプレートアセットを扱うことができます。</p>
<p class="last">`` renderer``属性はオプションです。定義されていない場合、レンダリングは行われません（レンダリングは行われず、値は変更されずにアップストリーム：app： <cite>Pyramid`機械に戻されます）。ビュー呼び出し側が：term： `response`（：ref：</cite> the_response`を参照）を返した場合、指定されたレンダラー実装は決して呼び出されません。</p>
</dd>
<dt>`` http_cache``</dt>
<dd><p class="first">ビュー設定に `` http_cache``値を指定すると、関連するview呼び出し可能で生成されたレスポンスの `` Expires``と `` Cache-Control``ヘッダーが変更されます。 `` http_cache``の値は次のいずれかです：</p>
<ul class="simple">
<li>非ゼロの整数。ゼロ以外の整数の場合、秒数として扱われます。この秒数は、このビューを呼び出すリクエストに対するレスポンスの `` Expires``ヘッダと `` Cache-Control：max-age``パラメータを計算するために使用されます。たとえば、 `` http_cache = 3600``は、リクエストしているブラウザに「この応答を1時間キャッシュしてください」と指示します。</li>
<li>`` datetime.timedelta``インスタンスです。 `` datetime.timedelta``インスタンスの場合、秒数に変換され、その秒数が `` Expires``ヘッダーと `` Cache-Control：max-age &amp;#39;&amp;#39;を計算するために使われますこのビューを呼び出す要求への応答のパラメータ。例： `` http_cache = datetime.timedelta（days = 1） <a href="#id1"><span class="problematic" id="id2">``</span></a>は、リクエストしているブラウザに「この応答を1日キャッシュしてください」と指示します。</li>
<li>0（ `` 0``）。値がゼロの場合、このビューからのすべての応答に存在する `` Cache-Control``と `` Expires``ヘッダーは、クライアントブラウザのキャッシュ（および任意の中間キャッシュ）にレスポンスをキャッシュしないように構成されます。</li>
<li>2タプル。 2タプル（ `` http_cache =（1、{&amp;#39;public&amp;#39;：True）） <a href="#id1"><span class="problematic" id="id2">``</span></a>）の場合、タプルの最初の値は非ゼロの整数または `` datetime.timedelta``のインスタンスになります。いずれの場合も、この値はレスポンスをキャッシュする秒数として使用されます。タプルの2番目の値は辞書でなければなりません。辞書にある値は `` Cache-Control``レスポンスヘッダへの入力として使われます。例えば、 `` http_cache =（3600、{&amp;#39;public&amp;#39;：True}）は <a href="#id3"><span class="problematic" id="id4">``</span></a>キャッシュを1時間意味し、 `` public``をレスポンスのCache-Controlヘッダに追加します。 `` webob.cachecontrol.CacheControl``インターフェースでサポートされているすべてのキーと値を辞書に追加することができます。 `` {&amp;#39;public&amp;#39;：True} <a href="#id5"><span class="problematic" id="id6">``</span></a>を提供することは、 `` response.cache_control.public = True``を呼び出すことと等価です。</li>
</ul>
<p>`` http_cache``として非タプルの値を与えることは、あなたのビューのボディ内で `` response.cache_expires（value） <a href="#id1"><span class="problematic" id="id2">``</span></a>を呼び出すことと同じです。</p>
<p>`` http_cache``として2タプルの値を与えることは、あなたのビューのボディ内で `` response.cache_expires（value [0]、** value [1]） <a href="#id1"><span class="problematic" id="id2">``</span></a>を呼び出すのと同じです。</p>
<p class="last">`` Expires`ヘッダに影響を与えず、 `` Cache-Control``ヘッダーにのみ影響を与えたい場合は、 `` None``の最初の要素、 `` http_cache``としてタプルを渡します。 、 <a href="#id1"><span class="problematic" id="id2">``</span></a>（None、{&amp;#39;public&amp;#39;：True}） <a href="#id3"><span class="problematic" id="id4">``</span></a>となります。</p>
</dd>
</dl>
<p>`` require_csrf``</p>
<blockquote>
<div><p>CSRFチェックは、RFC2616で&amp;quot;安全&amp;quot;と定義されていないリクエストメソッドに影響します。これは、GET、HEAD、OPTIONS、TRACEメソッドがそのまま渡され、他のすべてのメソッドがCSRFを必要とすることを意味します。このオプションは `` pyramid.require_default_csrf``設定と組み合わせて使用​​され、CSRFトークンをチェックする要求パラメータを制御します。</p>
<p>この機能には、設定済み：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>セッションファクトリ`が必要です。</p>
<p>このオプションが `` True``に設定されている場合、CSRFチェックはこのビューに対するPOSTリクエストに対して有効になります。必要なトークンは `` pyramid.require_default_csrf``の設定で指定されたもので、 `` csrf_token``にフォールバックします。</p>
<p>このオプションが文字列に設定されている場合、CSRFチェックは有効になり、 `` pyramid.require_default_csrf``設定に関係なく、必要なトークンとして使用されます。</p>
<p>このオプションが `` False``に設定されている場合、 `` pyramid.require_default_csrf``設定に関係なく、CSRFチェックは無効になります。</p>
<p>さらに、このオプションが `` True``または文字列に設定されている場合、CSRF起点チェックが有効になります。</p>
<p>詳細は：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>auto_csrf_checking`を参照してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.7 で追加.</span></p>
</div>
</div></blockquote>
<dl class="docutils">
<dt>ラッパー</dt>
<dd><p class="first">このビューの応答本体をそれ自身の：request.wrapped_body`属性として受け取る：term： <cite>request`と： term： `response`は、このビューによって自身の要求の</cite> <cite>request.wrapped_response``属性として返されます。ラッパーを使用すると、ビューをまとめて&amp;quot;チェーン&amp;quot;して複合レスポンスを形成することができます。最も外側のラッパー・ビューの応答がユーザーに戻されます。ラッパービューは、任意のビューが見つかると見つかります。参照：ref： `view_lookup`を参照してください。 &amp;quot;ベスト&amp;quot;ラッパービューはルックアップの順序に基づいて検索されます。 &amp;quot;Under the Hood &amp;quot;このラッパービューは、 `</cite> pyramid.view.render_view_to_response（context、request、 &amp;#39;wrapper_viewname&amp;#39;） <a href="#id1"><span class="problematic" id="id2">``</span></a>で検索されます。ラッパー・ビューのコンテキストおよび要求は、同じコンテキストおよび内部ビューの要求です。</p>
<p class="last">`` wrapper``が与えられていなければ、ラッパービューは使用されません。</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>デコレータ ``</dt>
<dd><p class="first">A：term： <cite>dotted Python name`を、登録された：term：</cite> view callable`を装飾するために使用される関数（または関数自体）に追加します。デコレータ関数は、呼び出し可能なビューを単一の引数として呼び出されます。呼び出し可能なビューは <a href="#id1"><span class="problematic" id="id2">``</span></a>（context、request） <cite>&amp;#39;を受け入れます。デコレータは、 ``（context、request） `&amp;#39;を受け付ける代わりのview callableを返さなければなりません。 `</cite> decorator``は、デコレータの繰り返し可能性があります。その場合、逆順でビューに順番に適用されます。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">decorator</span><span class="o">=</span><span class="p">(</span><span class="n">decorator2</span><span class="p">,</span> <span class="n">decorator1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>ビューを直接呼び出し可能にすることと似ています:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="nd">@decorator2</span>
<span class="nd">@decorator1</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>重要な違いは、各デコレータはビュー呼び出し可能から返された生の値の代わりに：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.interfaces.IResponse`を実装する応答オブジェクトを受け取ることです。チェーン内のすべてのデコレータは、レスポンスオブジェクトを返すか、例外を送出する必要があります。</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">log_timer</span><span class="p">(</span><span class="n">wrapped</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-View-Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">duration</span><span class="p">,)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;view took </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>マッパ ``</dt>
<dd>Pythonオブジェクトまたは：term： <cite>dotted Python name</cite>：：term：` view mapper`または `` None``を参照してください。デフォルトでは `` None``です。これは、ビューがデフォルトビューマッパーを使用する必要があることを示します。このプラグインポイントはPyramid拡張開発者には便利ですが、株式ピラミッドアプリケーションを開発している&amp;quot;一般市民&amp;quot;にとってはあまり役に立ちません。カーテンの後ろの男には注意を払わないでください。</dd>
</dl>
</div>
<div class="section" id="predicate-arguments">
<h4>述語引数<a class="headerlink" href="#predicate-arguments" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>これらの引数は、ビューの参照動作を変更します。一般に、より述語的な引数が提供されるほど、設定されたビューの使用がより具体的で狭くなります。</p>
<dl class="docutils">
<dt>「名前」</dt>
<dd><p class="first">このビューを呼び出し可能にするには、：term： <cite>view name`が必要です。 `</cite> name``引数は通常、アプリケーションがterm： <a href="#id1"><span class="problematic" id="id2">`</span></a>traversal`を使用する場合にのみ使用されます。ビュー名の概念を理解するために：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>traversal_chapter`を読んでください。</p>
<p class="last">`` name``が与えられていなければ、空の文字列が使われます（デフォルトのビューを意味します）。</p>
</dd>
<dt>「文脈」</dt>
<dd><p class="first">：term： <cite>context`リソースは、：term：</cite> context`リソースがこのビューを見つけるために提供しなければならないインスタンス*または* the：term： <cite>interface`でなければならないPythonクラスを表すオブジェクトです。と呼ばれる。この述語は：term： `context`リソースが表現されたクラスのインスタンスである場合、または：term：</cite> context`リソースが表現されたインタフェースを提供する場合に真です。それ以外の場合はfalseです。</p>
<p>コンテキストが例外をサブクラス化する可能性がある場合、例外クラスをコンテキストとして渡すことは可能です。この場合、* 2つのビューが登録されます。 1つは通常の着信要求と一致し、もう1つは：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>例外ビュー &amp;#39;と一致します。これは、通常の要求処理パイプラインで例外が発生した場合にのみ発生します。</p>
<p class="last">`` context``が与えられていない場合は、任意のリソースにマッチする `` None``という値が使われます。</p>
</dd>
</dl>
<p>`` exception_only``</p>
<blockquote>
<div><p>この値が `` True``の場合、 `` context``引数は `` Exception``のサブクラスでなければなりません。このフラグは、：term： <cite>例外ビュー &amp;#39;のみを作成し、traversal：term：</cite> context`が `` context``引数と一致する場合、このビューは一致してはならないことを示します。 `` context``が `` Exception``のサブクラスで、この値が `` False``（デフォルト）の場合、トラバーサル：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>context`にもマッチするビューが登録されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.8 で追加.</span></p>
</div>
</div></blockquote>
<dl class="docutils">
<dt>`` route_name``</dt>
<dd><p class="first">`` route_name``が指定された場合、呼び出されたビューは指定されたルートが一致したときにのみ呼び出されます。</p>
<p>この値は、このビューが呼び出される前に一致しなければならない：term： <cite>ルート設定`宣言（：ref： `urldispatch_chapter`参照）の</cite> <cite>name``と一致しなければなりません。 `</cite> route_name``で参照される `` route``の設定は通常 `` traverse``トークンを `` pattern``の値に持つことに注意してください。これは、使用されるパスの一部を表します：term：ルートの結果に対する <cite>traversal</cite>：term：<a href="#id1"><span class="problematic" id="id2">`</span></a>ルートファクト <a href="#id3"><span class="problematic" id="id4">`</span></a>。</p>
<p class="last">`` route_name``が与えられていなければ、呼び出し可能なビューは他のルートが一致していなければ起動されます。これは：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>resource location`で見つかったリクエスト/コンテキストのペアが、設定されたルートと一致していることを示していないときです。</p>
</dd>
<dt>`` request_type``</dt>
<dd><p class="first">この値は、：term： <cite>request`がこのビューを見つけて呼び出すために提供しなければならない：term：</cite> interface`でなければなりません。</p>
<p>`` request_type``が指定されていない場合は、 `` None``という値が使われます。</p>
<p class="last"><a href="#id1"><span class="problematic" id="id2">*</span></a>これは高度な機能で、一般に&amp;quot;民間人&amp;quot; <a href="#id3"><span class="problematic" id="id4">*</span></a>で使用されることはありません。</p>
</dd>
<dt>`` request_method``</dt>
<dd><p class="first">この値は、文字列（ `` &amp;quot;GET &amp;quot; <code class="docutils literal notranslate"><span class="pre">、</span> <span class="pre">``</span> <span class="pre">POST</span> <span class="pre">&amp;quot;&amp;quot;、</span> <span class="pre">``</span> <span class="pre">\</span> <span class="pre">&amp;quot;PUT</span> <span class="pre">\&amp;quot;</span> <span class="pre">``、</span> <span class="pre">``</span> <span class="pre">\</span> <span class="pre">&amp;quot;DELETE</span> <span class="pre">\&amp;quot;</span> <span class="pre">``、</span> <span class="pre">``</span> <span class="pre">\</span> <span class="pre">&amp;quot;HEAD</span> <span class="pre">\&amp;quot;</span> <span class="pre">``、</span> <span class="pre">``</span> <span class="pre">\</span> <span class="pre">&amp;quot;OPTIONS</span> <span class="pre">\&amp;quot;</span> <span class="pre">``）、またはこれらの文字列の1つ以上を含むタプルを返します。この引数を持つビュー宣言は、要求の</span> <span class="pre">``</span> <span class="pre">method``属性（つまり、WSGI環境の</span> <span class="pre">``</span> <span class="pre">REQUEST_METHOD</span></code>）が指定された値と一致した場合にのみビューが呼び出されることを保証します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 1.4 で変更: </span>`` &amp;quot;GET &amp;quot; <cite>&amp;quot;の使用は、ビューが &amp;quot;&amp;quot; HEAD &amp;quot;</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>に応答することを意味します。</p>
</div>
<p class="last">`` request_method``が与えられていなければ、：term： <cite>WSGI`環境の</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>REQUEST_METHOD``に関係なくビューが呼び出されます。</p>
</dd>
<dt>`` request_param``</dt>
<dd><p class="first">この値には、任意の文字列または一連の文字列を使用できます。この引数を指定したビュー宣言は、：term： <cite>request`が</cite> <cite>request.params``ディクショナリ（HTTPの</cite> <cite>GET``または</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>POST``変数）を指定します。</p>
<p>`` request_param = &amp;quot;foo = 123 &amp;quot; <code class="docutils literal notranslate"><span class="pre">のように</span> <span class="pre">``</span> <span class="pre">=</span> <span class="pre">``という記号が与えられた場合、キー（</span> <span class="pre">``</span> <span class="pre">foo</span></code>）は <code class="docutils literal notranslate"><span class="pre">要求に存在しなければなりません。</span> <span class="pre">params``ディクショナリ、*、*の値は、現在のリクエストに一致するように、式の右側（</span> <span class="pre">``</span> <span class="pre">123</span></code>）に一致する必要があります。</p>
<p class="last">`` request_param``が与えられていない場合、ビューは `` request.params``ディクショナリのキーと値を考慮せずに呼び出されます。</p>
</dd>
<dt>`` match_param``</dt>
<dd><p class="first">このパラメータは、&amp;quot;key = value &amp;quot;という形式の単一文字列か、これらの文字列の1つ以上を含むタプルのいずれかです。</p>
<p>この引数は、：term： <cite>request`が：term：</cite> matchdict`の中に述語で与えられたものと等しいキーと値のペアを持つ場合にのみ、ビューが呼び出されることを保証します。例えば、 `` match_param = &amp;quot;action = edit &amp;quot; <code class="docutils literal notranslate"><span class="pre">は</span> <span class="pre">`：`の</span> <span class="pre">``</span> <span class="pre">action``パラメータを必要とします：term：</span> <span class="pre">`matchdict`は式の右側（`</span> <span class="pre">`edit</span></code>）現在のリクエストに&amp;quot;一致する&amp;quot;を表示します。</p>
<p>`` match_param``がタプルの場合、すべてのキーと値のペアは述語が渡すために一致しなければなりません。</p>
<p>`` match_param``が与えられていなければ、 `` request.matchdict``のキーと値を考慮せずにビューが呼び出されます。</p>
<div class="last versionadded">
<p><span class="versionmodified">バージョン 1.2 で追加.</span></p>
</div>
</dd>
<dt>「封じ込め」</dt>
<dd><p class="first">この値は、コンテキストリソースの：term： <cite>lineage`内の親オブジェクトがこのビューを見つけて呼び出すために提供しなければならないPythonクラスまたは：term：</cite> interface`への参照でなければなりません。この機能を使用するには、リソースツリーのリソースが&amp;quot;location-aware &amp;quot;である必要があります。</p>
<p>`` containment``が指定されていない場合、ビューの呼び出し可能呼び出しを呼び出すかどうかを決定する際には、系統のインターフェースとクラスは考慮されません。</p>
<p class="last">位置認識の詳細については：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>location_aware`を参照してください。</p>
</dd>
<dt>`` xhr``</dt>
<dd><p class="first">この値は `` True``または `` False``のいずれかでなければなりません。この値が指定されていて `` True``である場合、：term： <cite>WSGI`環境は</cite> <cite>XMLHttpRequest &amp;#39;&amp;#39;という値を持つ</cite> <cite>HTTP-X-REQUESTED_WITH``ヘッダー（つまり</cite> <cite>X-Requested-With`</cite>） <a href="#id1"><span class="problematic" id="id2">``</span></a>が呼び出されて呼び出され、呼び出されるようにします。これは、jQuery、Prototype、およびその他のJavascriptライブラリから発行されたAJAXリクエストを検出するのに便利です。</p>
<p class="last">`` xhr``が指定されていない場合、HTTPヘッダーは考慮されません。</p>
</dd>
<dt>「受け入れる」</dt>
<dd><p class="first">この引数の値は、 `` Accept`` HTTPリクエストヘッダ内の1つまたは複数のMIMEタイプの一致クエリを表します。この値が指定されている場合は、次の形式のいずれかでなければなりません： `` text / plain` &amp;quot;の形式のmimetypeマッチトークン、` <cite>text / *</cite> <cite>の形式のワイルドカードmimetypeマッチトークン、 -allワイルドカードmimetypeは `</cite> * / * <a href="#id1"><span class="problematic" id="id2">``</span></a>の形式でトークンにマッチします。いずれかのフォームがリクエストの `` Accept``ヘッダと一致する場合、この述語は真となります。</p>
<p class="last">`` accept``が指定されていない場合、HTTP_ACCEPT`` HTTPヘッダーは、関連するビューを呼び出し可能にするかどうかを決定する際には考慮されません。</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>ヘッダー ``</dt>
<dd><p class="first">この値は、HTTPヘッダー名またはヘッダー名/値のペアを表します。</p>
<p>`` header``が指定されている場合は、ヘッダ名または `` headername：headervalue``の組でなければなりません。</p>
<p>もし `` header``が値なしで指定されていれば（例えば、 `` If-Modified-Since``のような裸のヘッダ名のみ）、要求にHTTPヘッダーが存在すればビューが呼び出されます。</p>
<p>`` Header``が指定されていて、名前と値のペア（ `` User-Agent：Mozilla /.*``など）を持っている場合、ビューはHTTPヘッダーが存在する場合にのみ呼び出されます*要求された値と一致します。 `` headervalue``に <code class="docutils literal notranslate"><span class="pre">：</span> <span class="pre">``（コロン）が含まれていると、それは名前と値のペアとみなされます（例えば</span> <span class="pre">``</span> <span class="pre">User-Agent：Mozilla</span> <span class="pre">/.*</span> <span class="pre">``や</span> <span class="pre">``</span> <span class="pre">Host：localhost</span></code> ）。値の部分は正規表現でなければなりません。</p>
<p>値がヘッダー名またはヘッダー名/値のペアを表すかどうかに関係なく、ヘッダー名の大文字小文字は重要ではありません。</p>
<p class="last">`` header``が指定されていない場合、関連するビューを呼び出し可能にするかどうかを決定する際に、HTTPヘッダーの構成、存在または不在は考慮されません。</p>
</dd>
<dt>`` path_info``</dt>
<dd><p class="first">この値は、 `` PATH_INFO`` WSGI環境変数に対してテストされる正規表現パターンを表し、関連するビューを呼び出し可能にするかどうかを決定します。正規表現が一致する場合、この述語は `` True``になります。</p>
<p class="last">`` path_info``が指定されていない場合、WSGIの `` PATH_INFO``は、関連するビューを呼び出すかどうかを決定する際に考慮されません。</p>
</dd>
<dt>`` check_csrf``</dt>
<dd><p class="first">指定する場合、この値は `` None``、 `` True``、 `` False``、または&amp;quot;check name &amp;quot;を表す文字列のいずれかでなければなりません。値が `` True``または文字列の場合、CSRFチェックが実行されます。値が `` False``または `` None``の場合、CSRFチェックは実行されません。</p>
<p>指定された値が文字列の場合、その文字列は&amp;quot;チェック名&amp;quot;として使用されます。指定された値が `` True``の場合、 `` csrf_token``がチェック名として使用されます。</p>
<p>CSRFチェックが実行されると、チェックされた値は `` request.POST [check_name] <a href="#id1"><span class="problematic" id="id2">``</span></a>の値になります。この値は `` request.session.get_csrf_token（） <a href="#id3"><span class="problematic" id="id4">``</span></a>の値と比較され、これらの2つの値が同じ場合にチェックが合格します。チェックが合格すると、関連するビューの実行が許可されます。検査が失敗した場合、関連するビューは実行できません。</p>
<p>この機能を使用するには、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>session factory`が設定されている必要があります。</p>
<div class="last versionadded">
<p><span class="versionmodified">バージョン 1.4a2 で追加.</span></p>
</div>
</dd>
<dt>`` physical_path``</dt>
<dd><p class="first">指定された場合、この値は、この述語が真と一致するために、トラバーサルによって見つかったコンテキストの：term： <cite>物理パス &amp;#39;を表す文字列またはタプルでなければなりません。たとえば、 `</cite> physical_path = &amp;#39;/&amp;#39; <a href="#id1"><span class="problematic" id="id2">``</span></a>、 `` physical_path = &amp;#39;/ a / b / c```や `` physical_path =（&amp;#39; &amp;#39;、&amp;#39; a &amp;#39;、&amp;#39; b &amp;#39;、&amp;#39; c &amp;#39;） ` <cite>。これは、パス接頭辞の一致または正規表現ではなく、全体パスの一致です。これは、あるオブジェクトがトラバースされているときに常にビューを表示したいときに便利ですが、どのようなオブジェクトであるかを確かめることができないので、 `</cite> context``述語を使うことはできません。スラッシュ文字またはタプル要素の間の個々のパス要素は、リソース名のUnicode表現である必要があり、決してエンコードしないでください。</p>
<div class="last versionadded">
<p><span class="versionmodified">バージョン 1.4a3 で追加.</span></p>
</div>
</dd>
<dt>`` effective_principals``</dt>
<dd><p class="first">指定する場合、この値は：term： <cite>principal`識別子または一連のプリンシパル識別子でなければなりません。 ：meth： `pyramid.request.Request.effective_principals`メソッドが、引数リストに指定されたすべてのプリンシパルが現在のリクエストに存在することを示す場合、この述語はTrueを返します。それ以外の場合はFalseを返します。たとえば、 `</cite> effective_principals = pyramid.security.Authenticated``や `` effective_principals =（ &amp;#39;fred&amp;#39;、 &amp;#39;group：admins&amp;#39;） <a href="#id1"><span class="problematic" id="id2">``</span></a>などです。</p>
<div class="last versionadded">
<p><span class="versionmodified">バージョン 1.4a4 で追加.</span></p>
</div>
</dd>
<dt>`` custom_predicates``</dt>
<dd><p class="first">`` custom_predicates``が指定されていれば、それはカスタム述語呼び出し可能関数への参照のシーケンスでなければなりません。事前定義された述部のセットが必要な場合には、カスタム述部を使用します。カスタム述部は、必要に応じて事前定義された述部と組み合わせることができます。呼び出し可能な各カスタム述語は、 `` context``と `` request``という2つの引数を受け取り、コンテキストリソースや要求の任意の評価を行った後、 `` True``または `` False``を返すべきです。すべての呼び出し可能ファイルが `` True``を返す場合、呼び出し可能な関連ビューは与えられた要求に対して実行可能であると見なされます。</p>
<p class="last">`` custom_predicates``が指定されていない場合、カスタム述部は使用されません。</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>述語 ``</dt>
<dd><p class="first">ここでキー/値のペアを渡すと：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.add_view_predicate`で登録されたサードパーティの述語を使用します。複数のキーと値のペアを同時に使用できます。第三者の述語の詳細については、ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>view_and_route_predicates`を参照してください。</p>
<div class="last versionadded">
<p><span class="versionmodified">バージョン 1.4a1 で追加.</span></p>
</div>
</dd>
</dl>
</div>
<div class="section" id="inverting-predicate-values">
<h4>述語値の反転<a class="headerlink" href="#inverting-predicate-values" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>任意の述語値の意味を、class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.not_`への呼び出しでラップすることによって、その意味を逆転させることができます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">not_</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
    <span class="s1">&#39;mypackage.views.my_view&#39;</span><span class="p">,</span>
    <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;ok&#39;</span><span class="p">,</span>
    <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>上記の例では、少なくとも他のビューがより具体的でない場合、リクエストメソッドが* <cite>*</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>POST`でない場合にビューが呼び出されることを保証します。</p>
<p>述部の値を `` not_``にラップするこの手法は、述部の値が受け入れられればどこでも使用できます：</p>
<ul class="simple">
<li>：meth： <cite>pyramid.config.Configurator.add_view</cite></li>
<li>：meth： <cite>pyramid.view.view_config</cite></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.5 で追加.</span></p>
</div>
</div>
</div>
<div class="section" id="adding-view-configuration-using-the-view-config-decorator">
<span id="mapping-views-using-a-decorator-section"></span><span id="index-3"></span><h3>`` &#64; view_config``デコレータを使ったビュー設定の追加<a class="headerlink" href="#adding-view-configuration-using-the-view-config-decorator" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">この機能を使用すると、アプリケーションの起動時にビューの構成宣言をスキャンする作業が増えるため、アプリケーションの起動がわずかに遅くなりがちです。起動時のパフォーマンスを最大にするには、代わりに：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>mapping_views_using_imperative_config_section`で説明されているビュー設定方法を使用してください。</p>
</div>
<p>：class： <cite>〜pyramid.view.view_config`デコレータは：term：</cite> view configuration`情報を、：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`ビュー呼び出しとして動作する関数、メソッド、またはクラスに関連付けるのに使用できます。</p>
<p>次に、a：app： <cite>Pyramid`アプリケーションモジュール内にあるclass：</cite>〜pyramid.view.view_config`デコレータの例を示します。 `` views.py``：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">resources</span> <span class="kn">import</span> <span class="n">MyResource</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="s1">&#39;read&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>上記のようにこのデコレータを使用すると、この必須構成スタンザを追加する必要性が置き換えられます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;mypackage.views.my_view&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="s1">&#39;read&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>`` view_config``の引数はすべて省略することができます。例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My view &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>上のような登録は、ビュー名が `` my_view``であり、任意のリソースタイプと一致する `` context``引数で登録され、権限を使用せず、任意のリクエストメソッド、リクエストタイプ、要求パラメタ、ルート名、または包含。</p>
<p>`` &#64; view_config``デコレータの存在だけでは、ビューの設定を行うのに十分ではありません。デコレータが行うことは、あなたの設定宣言で関数にアノテーションを付けているだけで、それを処理しません。 ：app： <cite>Pyramid`があなたの：class：</cite> pyramid.view.view_config`宣言を処理するには、class :: <cite>pyramid.config.Configurator`の</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>scan``メソッドを使用する必要があります：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config is assumed to be an instance of the</span>
<span class="c1"># pyramid.config.Configurator class</span>
<span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>class： <cite>〜pyramid.view.view_config`のようなデコレータの使用に起因する設定宣言のために、コードがスキャンされたときの動作の詳細については、ref：</cite> decorations_and_code_scanning`を参照してください。</p>
<p>：meth： <cite>〜pyramid.config.Configurator.scan`メソッドへの追加のAPI引数については：ref：</cite> configuration_module`を参照してください。たとえば、このメソッドを使うと、コードを正確に制御するための `` package``引数を指定することができます。</p>
<p>：class： <cite>〜pyramid.view.view_config`デコレータへの引数はすべて、</cite> meth： <cite>pyramid.config.Configurator.add_view`メソッドに引数として渡された場合とまったく同じことを意味します。ビュー ``引数。 ：class： `〜pyramid.view.view_config`デコレータの使用法は：term：`宣言的な設定 `の形式です。：meth：</cite> pyramid.config.Configurator.add_view`は次の形式です：term： <cite>必須の設定</cite>。しかし、どちらも同じことをしています。</p>
<div class="section" id="view-config-placement">
<span id="index-4"></span><span id="id3"></span><h4>`` &#64; view_config``の配置<a class="headerlink" href="#view-config-placement" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.view.view_config`デコレータは、アプリケーションのさまざまな場所に置くことができます。</p>
<p>ビュー呼び出し可能関数が関数である場合、それは関数デコレータとして使用できます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;edited!&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>ビュー呼び出し可能オブジェクトがクラスである場合、デコレータはクラスデコレータとしても使用できます。デコレータに対するすべての引数は、関数に対して適用されるときと同じように、クラスに対して適用されるときと同じです。例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>2つ以上のクラス：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.view.view_config`デコレータは、いくつでも他のものの上に積み重ねられます。各デコレータは別々のビュー登録を作成します。例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">)</span>
<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;edited!&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>これにより、同じビューが2つの異なる名前で登録されます。</p>
<p>デコレータは、クラスのメソッドに対しても使用できます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>デコレータがクラスのメソッドに対して使用されると、* class <a href="#id1"><span class="problematic" id="id2">*</span></a>のビューが登録されるので、クラスコンストラクタは引数のリストを2つの形式のうちの1つで受け入れる必要があります：一つの引数、 `` request``、引数、 <a href="#id3"><span class="problematic" id="id4">``</span></a>コンテキスト、要求 ``</p>
<p>装飾されるメソッドは、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>response`を返さなければなりません。</p>
<p>デコレータをクラスの特定のメソッドに対して使用することは、クラス自体にアタッチされたデコレータで `` attr``パラメータを使うことと同じです。例えば、 &amp;quot;メソッド&amp;quot;メソッドに対してデコレータが使用している上記の登録は、以下のように等価的に書くことができます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">attr</span><span class="o">=</span><span class="s1">&#39;amethod&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">amethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="adding-view-configuration-using-add-view">
<span id="mapping-views-using-imperative-config-section"></span><span id="index-5"></span><h3>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.config.Configurator.add_view`を使ったビュー設定の追加<a class="headerlink" href="#adding-view-configuration-using-add-view" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>：ref： <cite>configuration_module`内の：meth：</cite> pyramid.config.Configurator.add_view`メソッドは、（必須ではありません：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.view.view_config`デコレータなしで）ビューを&amp;quot;必須 &amp;quot;に設定するために使用されます。このメソッドの引数は、class： <a href="#id3"><span class="problematic" id="id4">`</span></a>〜pyramid.view.view_config`デコレータに提供する引数に非常に似ています。例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;hello!&#39;</span><span class="p">)</span>

<span class="c1"># config is assumed to be an instance of the</span>
<span class="c1"># pyramid.config.Configurator class</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">hello_world</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>第1引数a：term： <cite>view callable`は唯一の必須引数です。これは、ビュー自体であるPythonオブジェクトか、そのようなオブジェクトに対する：term： `点線のPython名 &amp;#39;のいずれかでなければなりません。上の例では、 `</cite> view callable``は `` hello_world``関数です。</p>
<p>ビュー設定を追加するために：meth： <cite>〜pyramid.config.Configurator.add_view`だけを使うときは、ビュー設定を有効にするために：term：</cite> scan`を発行する必要はありません。</p>
</div>
</div>
<div class="section" id="view-defaults-class-decorator">
<span id="view-defaults"></span><span id="index-6"></span><h2>`` &#64; view_defaults``クラスデコレータ<a class="headerlink" href="#view-defaults-class-decorator" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.3 で追加.</span></p>
</div>
<p>クラスをビューとして使用する場合は、クラスの：class： <cite>pyramid.view.view_defaults`クラスデコレータを使用して、メソッドを装飾するすべての</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>&#64; view_config``デコレータによって使用されるビュー設定情報にデフォルトを提供できますそのクラスの。</p>
<p>たとえば、「RESTアクション」を表すメソッドを持つクラスがある場合、これらのクラスはすべて同じルートにマッピングされますが、リクエストメソッドは異なります。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>あなたはこれを行うことができます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_defaults</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>上記の例では、 `` &#64; view_defaults``クラスデコレータを使用していたので、個々の `` &#64; view_config``文の呼び出しから `` route_name = &amp;#39;rest&amp;#39;``引数を取ることができました。それが所有する各ビューメソッドのデフォルトとしての引数</p>
<p>`` &#64; view_config``に渡された引数は、 `` &#64; view_defaults``に渡されたデフォルトを上書きします。</p>
<p>`` view_defaults``クラスのデコレータは、修飾されたクラスが `` view``引数としてそのディレクティブに渡されたとき、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.add_view`ディレクティブにデフォルトを提供することもできます。たとえば、これの代わりに：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="s1">&#39;/rest&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span>
        <span class="n">RESTView</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>`` config.add_view``ステートメントの繰り返し回数を減らすために、 `` route_name = &amp;#39;rest&amp;#39;``引数を `` RESTView``クラスの `` &#64; view_defaults``クラスデコレータに移動できます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_defaults</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="s1">&#39;/rest&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">RESTView</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>：class： <cite>pyramid.view.view_defaults`は、class：</cite> pyramid.view.view_config`と同じ引数の集合を受け入れ、それらは同じ意味を持ちます。 `` view_defaults``に渡される各引数は、装飾するクラスのメソッドのビュー設定のデフォルトを提供します。</p>
<p>通常のPython継承規則は、 `` view_defaults``によって追加されたデフォルトに適用されます。例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p>上記の `` Bar``クラスは、 `` Foo``クラスの `` view_defaults``デコレータに渡された引数からビューのデフォルトを継承します。これを避けるには、サブクラスで引数なしで `` view_defaults``デコレータを使用してください：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@view_defaults</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p>`` view_defaults``デコレータはクラスデコレータとしてのみ動作します。それを関数またはメソッドに対して使用すると、無意味な結果が生成されます。</p>
<div class="section" id="configuring-view-security">
<span id="view-security-section"></span><span id="index-7"></span><h3>ビューセキュリティの設定<a class="headerlink" href="#configuring-view-security" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>：term： <cite>認証ポリシー`がアクティブな場合、ビュー検索中に見つかった：term： `view configuration`に付加された：term：</cite> permission`が検証されます。これにより、現在認証されているユーザが、view関数が実際に呼び出される前に、：term： <cite>context`リソースに対してそのパーミッションを持つことが保証されます。以下は、viewの設定でpermissionを指定する例です：meth： `〜pyramid.config.Configurator.add_view</cite>：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config is an instance of pyramid.config.Configurator</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;/add.html&#39;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s1">&#39;mypackage.Blog&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;myproject.views.add_entry&#39;</span><span class="p">,</span> <span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>
                <span class="n">permission</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>：term： <cite>認証ポリシー`が有効な場合、このビューは `</cite> add``パーミッションで保護されます。ユーザーは、現在の：term： <cite>context`に対して</cite> <cite>add``パーミッションを持っていない場合、ビューは呼び出されません。代わりに、：term： `禁止されたビュー &amp;#39;の結果は、：ref：</cite> protection_views&amp;#39;ごとにクライアントに返されます。</p>
</div>
<div class="section" id="notfound-errors">
<span id="debug-notfound-section"></span><span id="index-8"></span><h3>：exc： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.exceptions.NotFound`エラー<a class="headerlink" href="#notfound-errors" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>アプリケーションレジストリの設定ミスによって予期せずエラーが発生した場合、exc： <cite>〜pyramid.exceptions.NotFound`エラーをデバッグできるようにすると便利です。これらのエラーをデバッグするには、環境変数PYRAMID_DEBUG_NOTFOUND`または `</cite> pyramid.debug_notfound``設定ファイルの設定を使用します。ビューが見つからなかった理由の詳細は `` stderr``に出力され、エラーのブラウザ表現には同じ情報が含まれます。これらの値の設定方法と設定方法の詳細については、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>environment_chapter`を参照してください。</p>
</div>
</div>
<div class="section" id="influencing-http-caching">
<span id="index-9"></span><span id="id4"></span><h2>HTTPキャッシングへの影響<a class="headerlink" href="#influencing-http-caching" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.1 で追加.</span></p>
</div>
<p>非 `` No`` `` http_cache``引数がビュー設定に渡されると、Pyramidは結果のレスポンスに `` Expires``と `` Cache-Control``レスポンスヘッダを設定し、ブラウザがいくつかの時間の応答データ。許容値とその意味については、：ref： <cite>nonpredicate_view_args`の</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>http_cache``を参照してください。</p>
<p>「http_cache」を持つビュー構成デコレータでビューを飾りたい場合でも、ビューからの応答を返す結果としてこれらのヘッダーを設定することは望ましくないことがあります。おそらく、キャッシュ可能ではない応答を返すビューコード内の別のブランチがありますが、通常のブランチは常にキャッシュ可能なものを返します。このような場合は、 `` response.cache_control``オブジェクトの `` prevent_auto``属性を `` False``以外の値に設定してください。たとえば、以下の呼び出し可能ビューは、ビューからの応答が3600秒間キャッシュされるべきであることを示す `` &#64; view_config``デコレータで構成されます。しかし、 `` should_cache`` GET変数またはPOST変数がない限り、ビュー自体はキャッシングが起こらないようにします：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">http_cache</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">()</span>
    <span class="k">if</span> <span class="s1">&#39;should_cache&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">cache_control</span><span class="o">.</span><span class="n">prevent_auto</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>`` http_cache``機構は、あなたが `` prevent_auto``を使わない限り、あなた自身が設定したキャッシングヘッダに上書きしたり追加したりすることに注意してください。</p>
<p>Pyramidアプリケーションの存続期間中、 `` http_cache``の効果を完全に無効にすることもできます。そのためには、 `` PYRAMID_PREVENT_HTTP_CACHE``環境変数または `` pyramid.prevent_http_cache``設定値を真の値に設定してください。詳細については、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>prevent_http_caching`を参照してください。</p>
<p>`` pyramid.prevent_http_cache``を設定しても、アプリケーションコード自身が設定するヘッダをキャッシュすることには影響しません。 `` http_cache``引数の結果として呼び出されるPyramid HTTPキャッシングマシンによって設定されていたキャッシュヘッダは、設定を表示することのみを妨げます。</p>
</div>
<div class="section" id="debugging-view-configuration">
<span id="index-10"></span><span id="id5"></span><h2>ビュー構成のデバッグ<a class="headerlink" href="#debugging-view-configuration" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>指定されたURLに一致する可能性のあるビュー呼び出し可能コードをそれぞれ表示する方法については、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>displaying_matching_views`を参照してください。これは、呼び出されるビューの代わりに特定のビューのコール可能オブジェクトが呼び出されている理由を理解するのに効果的な方法です。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(機械翻訳) 設定を表示</a><ul>
<li><a class="reference internal" href="#mapping-a-resource-or-url-pattern-to-a-view-callable">リソースまたはURLパターンをビュー呼び出し可能にマッピングする</a><ul>
<li><a class="reference internal" href="#view-configuration-parameters">設定パラメータの表示</a><ul>
<li><a class="reference internal" href="#non-predicate-arguments">非述語引数</a></li>
<li><a class="reference internal" href="#predicate-arguments">述語引数</a></li>
<li><a class="reference internal" href="#inverting-predicate-values">述語値の反転</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-view-configuration-using-the-view-config-decorator">`` &#64; view_config``デコレータを使ったビュー設定の追加</a><ul>
<li><a class="reference internal" href="#view-config-placement">`` &#64; view_config``の配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-view-configuration-using-add-view">：meth： `〜pyramid.config.Configurator.add_view`を使ったビュー設定の追加</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-defaults-class-decorator">`` &#64; view_defaults``クラスデコレータ</a><ul>
<li><a class="reference internal" href="#configuring-view-security">ビューセキュリティの設定</a></li>
<li><a class="reference internal" href="#notfound-errors">：exc： `〜pyramid.exceptions.NotFound`エラー</a></li>
</ul>
</li>
<li><a class="reference internal" href="#influencing-http-caching">HTTPキャッシングへの影響</a></li>
<li><a class="reference internal" href="#debugging-view-configuration">ビュー構成のデバッグ</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="templates.html"
                        title="前の章へ">(機械翻訳) テンプレート</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="assets.html"
                        title="次の章へ">(機械翻訳) 静的資産</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/narr/viewconfig.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="assets.html" title="(機械翻訳) 静的資産"
             >次へ</a> |</li>
        <li class="right" >
          <a href="templates.html" title="(機械翻訳) テンプレート"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 11月 03, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>