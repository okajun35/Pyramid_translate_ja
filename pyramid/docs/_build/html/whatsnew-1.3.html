
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>(機械翻訳)Pyramid 1.3の新機能 &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="copyright" title="著作権" href="copyright.html" />
    <link rel="next" title="(機械翻訳)Pyramid 1.2の新機能" href="whatsnew-1.2.html" />
    <link rel="prev" title="(機械翻訳)Pyramid 1.4の新機能" href="whatsnew-1.4.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.2.html" title="(機械翻訳)Pyramid 1.2の新機能"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.4.html" title="(機械翻訳)Pyramid 1.4の新機能"
             accesskey="P">前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-pyramid-1-3">
<h1>(機械翻訳)Pyramid 1.3の新機能<a class="headerlink" href="#what-s-new-in-pyramid-1-3" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>この記事では、app： <cite>Pyramid`バージョン1.3の新機能を、前のバージョンの：app：</cite> Pyramid` 1.2と比較して説明します。また、app： <cite>Pyramid</cite> 1.3に追加された2つのバージョンと廃止予定の間の後方互換性も文書化されています。また、ソフトウェア依存の変更や著しいドキュメントの追加も含まれています。</p>
<div class="section" id="major-feature-additions">
<h2>主な機能の追加<a class="headerlink" href="#major-feature-additions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pyramid 1.3の主な機能の追加は以下のとおりです。</p>
<div class="section" id="python-3-compatibility">
<h3>Python 3の互換性<a class="headerlink" href="#python-3-compatibility" title="このヘッドラインへのパーマリンク">¶</a></h3>
<img alt="_images/python-3.png" src="_images/python-3.png" />
<p>PyramidはPython 2上で動作し続けますが、PyramidもPython 3と互換性があります。 Python 3でPyramidを使用するには、Python 3.3以上が必要です。</p>
<p>多くのPyramidアドオンはすでにPython 3と互換性があります。例えば、 `` pyramid_debugtoolbar``、 `` pyramid_jinja2``、 `` pyramid_exclog``、 `` pyramid_tm``、 `` pyramid_mailer``、および `` pyramid_handlers``はすべてPython 3-readyです。しかし、他のアドオンはPython 2の下でのみ動作することが知られています。また、いくつかの足場依存（特にZODB）はPython 3ではまだ動作しません。</p>
<p>Python 3の完全なエコシステムサポートが得られるまで、忍耐強くお待ちください。継続的な移植作業の詳細については、https：//github.com/Pylons/pyramid/wiki/Python-3-Portingをご覧ください。</p>
<p>Python 3との互換性では、いくつかのパッケージの依存関係を削除し、古いPythonのバージョンとプラットフォームをサポートする必要がありました。詳細については、&amp;quot;下位互換性のない&amp;quot;セクションを参照してください。</p>
</div>
<div class="section" id="the-paster-command-has-been-replaced">
<h3>`` paster``コマンドが置き換えられました<a class="headerlink" href="#the-paster-command-has-been-replaced" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` paster``コマンドをPyramid特有の類義語に置き換えました。どうして？ `` Paste``と `` PasteScript``という名前の `` paster``コマンドをサポートしていたライブラリは、Python 3の下では動作しません。その結果、私たちはいくつかの変更を加えなければなりませんでした。</p>
<p>以前は（Pyramid 1.0,1.1、および1.2）、 `` paster create``を使ってPyramidアプリケーションを作成しました：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/paster create -t pyramid_starter foo
</pre></div>
</div>
<p>1.3では、代わりに `` pcreate``を使ってアプリケーションを作成する必要があります：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/pcreate -s starter foo
</pre></div>
</div>
<p>内部ピラミッドの足場には `` pcreate``を使う必要があります。外部に分散された足場は `` pcreate``や `` paster create``の両方を可能にします。</p>
<p>以前のPyramidのバージョンでは、次のようなPyramidアプリケーションを実行しました：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/paster serve development.ini
</pre></div>
</div>
<p>代わりに、1.3で `` pserve``コマンドを使わなければなりません:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/pserve development.ini
</pre></div>
</div>
<p>Pyramidでサポートされている `` ini``設定ファイルフォーマットは変更されていません。その結果、Python 2のみのユーザはPasteScriptを手動でインストールし、好きな場合は `` paster serve``を代わりに使うことができます。しかし、 `` pserve``を使うと、Python 2とPython 3の両方で動作します。</p>
<p>`` pshell``、 `` pviews``、 `` pshs``、 `` psts``というコンソール名の下には、 `` paster pshell``、 `` paster p```、 `` paster request``、 `` 「prequest」と「ptweens」。</p>
</div>
<div class="section" id="paste-httpserver-replaced-by-waitress-in-scaffolds">
<h3>Scaffoldsで `` paste.httpserver``を `` waitress``に置き換えました<a class="headerlink" href="#paste-httpserver-replaced-by-waitress-in-scaffolds" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>これまでスカホールドで使用していた `` paste.httpserver``サーバーはPython 3と互換性がないため、Pyramidが使用するデフォルトのWSGIサーバーを：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>waitress`サーバーをスキャフォールディングしました。ウェイトレスサーバーは、Python 2とPython 3の両方に対応しています。</p>
<p>scaffoldからプロジェクトを作成すると、 `` development.ini``と `` production.ini``に次の行があります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="o">=</span> <span class="n">egg</span><span class="p">:</span><span class="n">waitress</span><span class="c1">#main</span>
</pre></div>
</div>
<p>これの代わりに（これは古いバージョンのデフォルトです）：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">use</span> <span class="o">=</span> <span class="n">egg</span><span class="p">:</span><span class="n">Paste</span><span class="c1">#http</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Unicodeのヘッダ値を文字列に変換することで `` paste.httpserver`` &amp;quot;helped &amp;quot;を作成しました。これは：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>WSGI`の仕様を覆した機能でした。一方、「ウェイトレス」サーバーは、WSGI仕様をより完全に実装しています。これは、あなたの応答でヘッダーを変更している場合に特に影響する可能性があります。 ** AssertionError：ヘッダー値は文字列でなければなりません。返されるヘッダーのタイプを確認してください。<a href="#id3"><span class="problematic" id="id4">**</span></a>よくあるケースは、文字列ヘッダーの代わりにUnicodeヘッダーを返すことです。</p>
</div>
</div>
<div class="section" id="compatibility-helper-library">
<h3>互換性ヘルパーライブラリ<a class="headerlink" href="#compatibility-helper-library" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新しい：mod： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.compat`モジュールが追加され、Pyramidアドオンと開発環境にPython 2/3の跨ぎのサポートが追加されました。</p>
</div>
<div class="section" id="introspection">
<h3>イントロスペクション<a class="headerlink" href="#introspection" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>構成イントロスペクションシステムが追加されました。イントロスペクションシステムを開発者として使用する方法の詳細は、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>using_introspection`と：ref：<a href="#id3"><span class="problematic" id="id4">`</span></a>イントロスペクション &amp;#39;を参照してください。</p>
<p>ピラミッドデバッグツールバー（0.9.7+）の最新リリースでは、イントロスペクション情報をPyramidアプリケーション開発者に公開する「イントロスペクション」パネルが提供されています。</p>
<p>attr： <cite>pyramid.registry.Introspectable</cite>、：attr：` pyramid.config.Configurator.introspector`、：attr： <cite>pyramid.config.Configurator.introspectable</cite>、：attr：<a href="#id1"><span class="problematic" id="id2">`</span></a>ピラミッド。新しいイントロスペクションをサポートするためのAPIが追加されました。レジストリ。レジストス。</p>
</div>
<div class="section" id="view-defaults-decorator">
<h3>`` &#64; view_defaults``デコレータ<a class="headerlink" href="#view-defaults-decorator" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>クラスをビューとして使用する場合は、クラスのnew：class： <cite>pyramid.view.view_defaults`デコレータを使用して、デコレータを装飾するすべての</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>&#64; view_config``デコレータによって使用されるビュー設定情報にデフォルトを提供できます。そのクラスのメソッド。</p>
<p>たとえば、「RESTアクション」を表すメソッドを持つクラスがある場合、これらのクラスはすべて同じルートにマッピングされますが、リクエストメソッドは異なります。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>あなたはこれを行うことができます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_defaults</span>
<span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">pyramid.response</span> <span class="kn">import</span> <span class="n">Response</span>

<span class="nd">@view_defaults</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RESTView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>

    <span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>これは、クラスを伴う必須のビュー構成でも機能します。</p>
<p>詳細は、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>view_defaults`を参照してください。</p>
</div>
<div class="section" id="extending-a-request-without-subclassing">
<h3>サブクラス化せずにリクエストを拡張する<a class="headerlink" href="#extending-a-request-without-subclassing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>カスタム要求ファクトリを作成することなく、：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.request.Request`オブジェクトをプロパティ記述子で拡張することが可能になりました。新しいメソッド：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>pyramid.config.Configurator.set_request_property`は、各リクエストに追加されるプロパティを登録するアドオンのエントリポイントを提供します。新しいプロパティが再定義され、インスタンスの存続期間中の戻り値が効果的にキャッシュされます。このための一般的な使用例は、要求に対するデータベース接続を取得するか、または現在のユーザーを識別することです。新しいメソッド：meth： <a href="#id5"><span class="problematic" id="id6">`</span></a>pyramid.request.Request.set_property`も追加されましたが、プロパティの存続期間中にコンフリクト検出と一貫性を提供するため、コンフィギュレータメソッドが優先されるべきです。</p>
</div>
<div class="section" id="not-found-and-forbidden-view-helpers">
<h3>ヘルパーを見る<a class="headerlink" href="#not-found-and-forbidden-view-helpers" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>見つからないヘルパー：</p>
<ul class="simple">
<li>新しいAPI :: meth： <cite>pyramid.config.Configurator.add_notfound_view`これは：meth： `pyramid.config.Configurator.add_view`のラッパーで、&amp;quot; append_slash &amp;quot;機能をサポートしています。また、パーミッションに関しては正しいことをしています（Not Found Viewは常にpublicにする必要があります） 。これまで推奨されていた `</cite> context = HTTPNotFound``で直接 `` add_view``を呼び出すのが好ましいでしょう。</li>
<li>新しいAPI :: class： <cite>pyramid.view.notfound_view_config</cite>。これは：class： <cite>pyramid.view.view_config`のようなデコレータコンストラクタです：スキャン時に：meth：</cite> pyramid.config.Configurator.add_notfound_view`を呼び出します。前に推奨したように、 `` pyramid.view.view_config``を `` context = HTTPNotFound``で使うのが好ましいでしょう。</li>
</ul>
<p>禁じられたヘルパー：</p>
<ul class="simple">
<li>新しいAPI :: meth： <cite>pyramid.config.Configurator.add_forbidden_​​view</cite>。これは：meth： <cite>pyramid.config.Configurator.add_view`のラッパーです。これはアクセス許可について正しいことです。これまで推奨されていた `</cite> context = HTTPForbidden``で直接 `` add_view``を呼び出すのが望ましいでしょう。</li>
<li>新しいAPI :: class： <cite>pyramid.view.forbidden_​​view_config`これは：class： `pyramid.view.view_config`のようなデコレータコンストラクタです：スキャン時に：meth：</cite> pyramid.config.Configurator.add_forbidden_​​view`を呼び出します。これまで推奨されていたように `` pyramid.view.view_config``を `` context = HTTPForbidden``で使うのが好ましいでしょう。</li>
</ul>
</div>
</div>
<div class="section" id="minor-feature-additions">
<h2>マイナー機能追加<a class="headerlink" href="#minor-feature-additions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>新しいAPI：：class： <cite>pyramid.path.AssetResolver`と：class：</cite> pyramid.path.DottedNameResolver`です。前者は、アセットのデータを読むために使用できるAPIに：term： <cite>asset specification &amp;#39;を解決するために使うことができます。後者は：term：</cite> dotted Python name`をモジュールまたはパッケージに解決するために使用できます。</li>
<li>Makoテンプレートを使用するための `` mako.directories``設定はもはや必要ありません。理由：Makoテンプレートレンダラーは絶対アセット仕様を使用して指定することができます。そのようなアセット仕様でアプリケーション全体を記述することができ、順序付けられた参照パスを必要としません。</li>
<li>`` pshell``での `` bpython``インタプリタの互換性。詳細は：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>ipython_or_bpython`を参照してください。</li>
<li>追加：func： <cite>pyramid.paster.get_appsettings</cite> API関数。この関数は、PasteDeployの `` ini``ファイルの `` [app：...] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションで定義された設定を返します。</li>
<li>追加：func： <cite>pyramid.paster.setup_logging</cite> API関数。この関数は、PasteDeployの `` ini``ファイルのロギング設定に従ってPythonログを設定します。</li>
<li>設定の競合の報告は、より分かりやすい方法で報告されます（&amp;quot;行11のファイル... &amp;quot;対類似の情報の組です）。</li>
<li>追加のキーワード引数を：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.action`メソッドに渡すことができます。</li>
<li>Pyramidの：class： <cite>pyramid.static.static_view`が生成する応答は、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>wsgi.file_wrapper``を使用します（<a class="reference external" href="http://www.python.org/dev/peps/pep-0333/#optional-platform">http://www.python.org/dev/peps/pep-0333/#optional-platform</a>-specificを参照）。 -file-handling）がWebサーバーによって提供されている場合に使用します。</li>
<li>：meth： <cite>pyramid.config.Configurator.scan`メソッドは、</cite> <cite>ignore``引数を渡すことができます。引数には、文字列、呼び出し可能なもの、文字列や呼び出し可能なものからなるリストを指定できます。この機能を使用すると、サブモジュール、サブパッケージ、およびグローバルオブジェクトのスキャンが許可されます。 `</cite> scan``に `` ignore``引数を使う方法の詳細については、<a class="reference external" href="http://readthedocs.org/docs/venusian/en/latest/#ignore-scan">http://readthedocs.org/docs/venusian/en/latest/#ignore-scan</a>-argumentを参照してください。</li>
<li>Add：meth： <cite>pyramid.config.Configurator.add_traverser</cite> APIメソッド。詳細はref： <a href="#id1"><span class="problematic" id="id2">`</span></a>changing_the_traverser`を参照してください。これは新機能ではなく、ZCA APIを使用せずにトラバーサを追加するためのAPIを提供するだけです。</li>
<li>Add：meth： <cite>pyramid.config.Configurator.add_resource_url_adapter</cite> APIメソッド。詳細はref： <a href="#id1"><span class="problematic" id="id2">`</span></a>changing_resource_url`を参照してください。これは新しい機能ではなく、ZCA APIを使用せずにリソースURLアダプタを追加するためのAPIを提供するだけです。</li>
<li>ビュー呼び出し可能関数が応答に変換できない値を返すとき（たとえば、ビュー呼び出し可能関数がレンダラーが定義されていないディクショナリを返すか、まったく値を返さないなど）、エラーメッセージが改善されます。エラーメッセージには、ビュー呼び出し可能なものに関する情報と呼び出し結果が含まれるようになりました。</li>
<li>.pycのみのモジュールが `` config.include``されたときのエラーメッセージが改善されました。これは、エラー報告要件のために許可されていません。試行されると、より良いエラーメッセージが表示されます。以前は、&amp;quot;AttributeError： &amp;#39;NoneType&amp;#39;オブジェクトに属性 &amp;#39;rfind&amp;#39; &amp;quot;がありません。</li>
<li>システム値 `` req``が `` request``のエイリアスとしてレンダラーに供給されるようになりました。これは、例えば、テンプレート内で、 `` request.route_url（...） <a href="#id1"><span class="problematic" id="id2">``</span></a>の代わりに `` req.route_url（...） <cite>を実行できることを意味します。これは、テンプレート内から要求メソッドと属性を使用するのに必要な型付け量を減らすための変更です。値 `</cite> request``も引き続き利用できますが、これは単なる選択肢です。</li>
<li>新しいインタフェースが追加されました：：class： <cite>pyramid.interfaces.IResourceURL`そのインタフェースを実装するアダプタを使用すると、：meth： `pyramid.request.Request.resource_url`が呼び出されたときに、リソースURLの生成を無効にすることができます。このインタフェースは、現在廃止されている `</cite> pyramid.interfaces.IContextURL``インタフェースを置き換えます。</li>
<li>リソースの `` __resource_url__``メソッド（ref： <cite>overriding_resource_url_generation`参照）に渡される辞書は、</cite> <cite>app_url``キーを含んでいます：meth：</cite> pyramid.request.Request.resource_url`の間に生成されたアプリケーションURLを表します。これは潜在的にカスタマイズされたURLプレフィックスを表し、ユーザーが `` request.resource_url``に渡す可能性のあるカスタムスキーム、ホスト、ポート情報を含みます。必要に応じて `` request.application_url``の代わりに使用してください。</li>
<li>：meth： <cite>pyramid.request.Request.resource_url</cite> APIは、` <cite>app_url`</cite>、` <cite>scheme`</cite>、` <cite>host`</cite>、` <cite>port``の引数を受け付けるようになりました。 app_url引数を使用して、URLの生成時にURL接頭辞を置き換えることができます。 `</cite> scheme``、 `` host``、 `` port``の引数は、 `` request.application_url``のデフォルト値を部分的に置き換えるために使うことができます。</li>
<li>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.request.Request.resource_path`という名前の新しいAPIが存在するようになりました。これは：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>pyramid.request.Request.resource_url`のように動作しますが、絶対URLではなく相対URLを生成します。</li>
<li>：meth： <cite>pyramid.request.Request.route_url</cite> APIは、` <cite>_app_url`</cite>、` <cite>_scheme`</cite>、` <cite>_host`</cite>、` <cite>_port``の引数を受け付けるようになりました。 `</cite> _app_url``引数は、URLの生成時にURL接頭辞を置換するために使用できます。 `` _scheme``、 `` _host``、 `` _port``の引数を使って、 `` request.application_url``のデフォルト値を部分的に置き換えることができます。</li>
<li>新しいAPI：：class： <cite>pyramid.response.FileResponse`と：class：</cite> pyramid.response.FileIter`：ファイルを &amp;quot;手動で&amp;quot;提供する必要のあるビューでの使用です。</li>
</ul>
</div>
<div class="section" id="backwards-incompatibilities">
<h2>後方の非互換性<a class="headerlink" href="#backwards-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul>
<li><p class="first">PyramidはPython 2.5で動作しなくなりました。これには、Jythonの最新リリースとGoogle App EngineのPython 2.5バージョンが含まれます。</p>
<p>理由？我々はPython 2と3のバージョンを簡単に&amp;quot;橋渡しする&amp;quot;ことができず、Python 2.6より古いPython 2のバージョンをサポートすることはできませんでした。このバージョンのPyramidを実行するには、Python 2.6以上が必要です。 Python 2.5を使用する必要がある場合は、Pyramidの最新の1.2.Xリリースを使用する必要があります。</p>
</li>
<li><p class="first">利用可能なスキャフォールドの名前が変更され、 `` pcreate``でサポートされているフラグは `` paster create``でサポートされていたフラグと異なります。例えば、 `` pyramid_alchemy``はちょうど `` alchemy``です。</p>
</li>
<li><p class="first">`` paster``コマンドは、もはやプロジェクトを作成したり、サーバを起動したり、デバッグコマンドを実行するための文書化された方法ではなくなりました。 scaffoldsからプロジェクトを作成するために、 `` paster create``は `` pcreate``コンソールスクリプトに置き換えられます。プロジェクトを提供するために、 `` paster serve``は `` pserve``コンソールスクリプトに置き換えられます。 `` pshell``、 `` pviews``、 `` proutes``、 `` ptweens``という新しいコンソールスクリプトは、 `` paster &lt;commandname&gt; <a href="#id1"><span class="problematic" id="id2">``</span></a>相当することがあった。すべての関連するナレーション文書が更新されました。根拠：PasteとPasteScriptパッケージはPython 3では動作しません。</p>
</li>
<li><p class="first">新たにレンダリングされたスキャフォールディングからの `` pserve``の結果として実行されるデフォルトのWSGIサーバは、 `` paste.httpserver``サーバの代わりに `` waitress`` WSGIサーバになりました。根拠：PasteとPasteScriptパッケージはPython 3では動作しません。</p>
</li>
<li><p class="first">`` pshell``コマンド（&amp;quot;paster pshell &amp;quot;を参照）は、 `` --disable-ipython``コマンドライン引数を受け付けません。代わりに、 `` -p``または `` --python-shell``引数を受け取ります。引数には、 `` python``、 `` ipython``、 `` bpython``のいずれかの値を指定できます。</p>
</li>
<li><p class="first">`` pyramid.renderers.renderer_from_name``関数を削除しました。これはPyramid 1.0以来廃止され、決してAPIではありませんでした。</p>
</li>
<li><p class="first">Pyramid&amp;gt; = 1.3のバージョンでZCMLを使うには、 `` pyramid_zcml``のバージョン&amp;gt; = 0.8と `` zope.configuration``のバージョン&amp;gt; = 3.8.0が必要です。 `` pyramid_zcml``パッケージのバージョン0.8は、Pyramid 1.0まで下位互換性がありますので、古いバージョンがインストールされていて、Pyramid自体を &amp;quot;インプレース&amp;quot;にアップグレードしても警告は表示されません。単にZCMLの `` includeOverrides``ディレクティブを使用している場合は、単に破損する可能性があります。</p>
</li>
<li><p class="first">&amp;quot;remainder&amp;quot;のマッチを置換するための：meth： <cite>pyramid.request.Request.route_url`または：meth：</cite> pyramid.request.Request.route_path`に渡される文字列値は、埋め込まれたスラッシュを除いてURLクォートされます。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;remain&#39;</span><span class="p">,</span> <span class="s1">&#39;/foo*remainder&#39;</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">route_path</span><span class="p">(</span><span class="s1">&#39;remain&#39;</span><span class="p">,</span> <span class="n">remainder</span><span class="o">=</span><span class="s1">&#39;abc / def&#39;</span><span class="p">)</span>
<span class="c1"># -&gt; &#39;/foo/abc%20/%20def&#39;</span>
</pre></div>
</div>
<p>以前は、残りの置換文字として渡された文字列の値は、URLクォートを付けずに変更されませんでした。しかし、渡される値がUnicode（生のUnicodeはURLまたはパスに配置することはできません）であり、値が文字列であれば残りのURL生成機構と矛盾します（これは &amp;#39;呼び出し側が指定しない限り引用符で囲まないでください）。</p>
<p>いくつかの人々は、クエリ文字列要素とURLの部分を固定するために古い動作に頼っているでしょう。申し訳ありませんが、これを行うには、 `` _query``や `` _anchor``引数を `` route_path``または `` route_url``に使用するようにコードを変更する必要があります。</p>
</li>
<li><p class="first">非ASCII文字を含むバイトストリングをパターンとして：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.add_route`に渡すと、起動時に失敗するようになりました。代わりにUnicodeを使用してください。</p>
</li>
<li><p class="first">`` path_info``ルートとビューの述語は、 `` request.path_info``（Python 3とPython 2に基づく不定値）ではなく、 `` request.upath_info``（Unicode）と一致するようになりました。これは、Python 2とPython 3のマッチングを正規化するために行う必要があります。</p>
</li>
<li><p class="first">`` match_param``のビュー述語は、もはやdictを受け付けません。これは、dictベースの引数の実装が壊れているため、悪影響はありません。</p>
</li>
<li><p class="first">`` pyramid.interfaces.IContextURL``インタフェースは非推奨です。ピラミッド1.0以来、カスタムトラバーサを介して見つかったリソースのmeth： <cite>pyramid.request.Request.resource_url</cite> URL生成に影響を及ぼすために使用するために、これを使用して&amp;quot;フック&amp;quot;章にリソースURLアダプタを登録するように指示されました。</p>
<p>インターフェイスはまだ存在しており、古いバージョンでも説明されているようにアダプタを使用してアダプタを登録することはできますが、Pyramidの主要なリリースの後にこのインターフェイスはソフトウェアから削除されます。等価な：class： <cite>pyramid.interfaces.IResourceURL`アダプタで置き換える必要があります。これはnew：meth：</cite> pyramid.config.Configurator.add_resource_url_adapter` APIを使って登録します。 `` pyramid.interquery.Request.resource_url`が呼び出されたときに、 `` pyramid.interfaces.IContextURL``アダプタが見つかったときに非推奨警告が出されました。</p>
</li>
<li><p class="first">`` pyramid.config.Configurator.with_context``クラスメソッドを削除してください。これは決してAPIではなく、 `` pyramid_zcml``だけで使用され、その機能はそのパッケージの最新リリースに移されました。つまり、Pyramidのこのリリースでは0.9.2以降のリリースの `` pyramid_zcml``を使う必要があります。</p>
</li>
<li><p class="first">廃止予定の `` set_notfound_view``コンフィグレータメソッドは、新しい `` add_notfound_view``コンフィグレータメソッドのエイリアスになりました。同様に、非推奨の `` set_forbidden_​​view``は、新しい `` add_forbidden_​​view``コンフィグレータメソッドのエイリアスになりました。 `` set_notfound_view``または `` set_forbidden_​​view``を介して登録された <a href="#id1"><span class="problematic" id="id2">``</span></a>（コンテキスト、リクエスト） <a href="#id3"><span class="problematic" id="id4">``</span></a>コールシグネチャでビューに送られた `` context``は次のような例外オブジェクトになりました。実際のリソースコンテキストが見つかりました。実際のリソースコンテキストを取得するには `` request.context``を使います。また、 `` set_notfound_view``を `` add_notfound_view``に向けて廃止し、エイリアシングにもかかわらず `` add_forbidden_​​view``を優先して `` set_forbidden_​​view``を廃止することもお勧めします。</p>
</li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>廃止<a class="headerlink" href="#deprecations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>`` pyramid.view.append_slash_notfound_view``と `` pyramid.view.AppendSlashNotFoundViewFactory``のAPIドキュメントが削除されました。これらの名前はまだ存在し、インポート可能ですが、もはやAPIではありません。同じ動作をするには、 `` pyramid.config.Configurator.add_notfound_view（append_slash = True） <a href="#id1"><span class="problematic" id="id2">``</span></a>または `` pyramid.view.notfound_view_config（append_slash = True） <a href="#id3"><span class="problematic" id="id4">``</span></a>を使用します。</li>
<li>コンフィギュレータの `` set_forbidden_​​view``メソッドと `` set_notfound_view``メソッドはドキュメントから削除されました。彼らはPyramid 1.1以来非難されています。</li>
<li>`` tmpl_context``要求変数へのすべての参照は、ドキュメントから削除されました。ピラミッドに存在することは、決してPylonsユーザーではない人々にとって混乱を招いています。それはPyramid 1.0のPylonsユーザーのための移植の便宜のために追加されましたが、PyramidレンダリングシステムがPylonsのものとは大きく異なり、Pylonsで提供するように設計された方法を実行するための方法があります。それは&amp;quot;永遠に&amp;quot;存在し続けるでしょうが、それはドキュメントで推奨されたり言及されません。</li>
<li>すべてのPyramid提供の.iniファイルで、何もしない `` pyramid.debug_templates``設定への参照を削除してください。この設定は、以前より優れた例外を表示するようにChameleonに伝えました。現在、Chameleonはこの設定の値に関係なく常に素晴らしい例外をレンダリングします。</li>
</ul>
</div>
<div class="section" id="known-issues">
<h2>既知の問題点<a class="headerlink" href="#known-issues" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>この記事（Pyramid 1.3b2のリリース）の時点で、Python 3.2で `` setup.py develop``を介して `` alchemy``足場を使ったPyramidプロジェクトをインストールしようとすると、インストールエラーで終了します`` Pygments``をインストールしようとしています。このような場合は、 `` setup.py develop``コマンドをもう一度やり直すと、正常に完了します。これは、Python 3のSQLAlchemy 0.7.5のマイナーなバグが原因で、後のSQLAlchemyリリースで修正されています。 <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket">http://www.sqlalchemy.org/trac/ticket</a>/2421を見てください。</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>ドキュメントの機能拡張<a class="headerlink" href="#documentation-enhancements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>：ref： <cite>bfg_sql_wiki_tutorial`が更新されました。これは、 `</cite> &#64; view_config``デコレータと明示的なデータベース投入スクリプトを使用します。</li>
<li>：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>bfg_wiki_tutorial`のマイナーアップデート。</li>
<li>narrative documentation chapter：ref： <cite>extconfig_narr`が追加されました。 custom：term： `設定ディレクティブ &amp;#39;を追加する方法と、カスタムディレクティブ内で：meth：</cite> pyramid.config.Configurator.action`メソッドを使用する方法について説明しています。また、term： <a href="#id1"><span class="problematic" id="id2">`</span></a>introspectable`オブジェクトを追加する方法についても説明します。</li>
<li>narrative documentation chapter：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>using_introspection`が追加されました。イントロスペクションシステムを照会する方法について説明します。</li>
<li>mod： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.scaffolds`のAPIドキュメントの章を追加しました。</li>
<li>ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>scaffolding_chapter`というナレーション文書の章を追加しました。</li>
<li>`` prequest``コマンドラインスクリプトの説明を：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>invoking_a_request`に追加しました。</li>
<li>&amp;quot;Command-Line Pyramid &amp;quot;章に：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>making_a_console_script`というセクションを追加しました。</li>
<li>メインのドキュメントから&amp;quot;Google App EngineでPyramidを実行する&amp;quot;チュートリアルを削除しました。それはPyramid Community Cookbookで、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid on GoogleのApp Engine（appengine-monkeyを使って） &lt;cookbook:appengine_tutorial&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>。理論的根拠：GAEのみのPython 2.5バージョンの正しい情報を提供します。このバージョンのPyramidはPython 2.5をサポートしていません。</li>
<li>：ref： <cite>changing_the_forbidden_​​view`セクションを更新し、</cite> <cite>add_view``または</cite> <cite>view_config``を使ってビューを</cite> <cite>add_forbidden_​​view``または</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>forbidden_​​view_config``を使って説明することを置き換えました。</li>
<li>：ref： <cite>changing_the_notfound_view`セクションを更新し、</cite> <cite>add_view``や</cite> <cite>view_config``を使ってビューを</cite> <cite>add_notfound_view``や</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>notfound_view_config``を使って説明したものに置き換えました。</li>
<li>：ref： <cite>redirecting_to_slash_appended_routes`セクションを更新し、</cite> <cite>add_view``や</cite> <cite>view_config``を使って</cite> <cite>add_notfound_view``や</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>notfound_view_config``を使ってビューを登録する説明を置き換えました</li>
<li>すべてのチュートリアルで、 `` pyramid.view.view_config``ではなく、 `` pyramid.view.forbidden_​​view_config``をHTTPForbiddenコンテキストで使用するように更新しました。</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h2>依存関係の変更<a class="headerlink" href="#dependency-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>ピラミッドは、テスト依存関係を除いて、 `` zope.component``パッケージに依存しなくなりました。</li>
<li>pyramidはPython 3との互換性のため、zope.interface&amp;gt; = 3.8.0、WebOb&amp;gt; = 1.2dev、repoze.lru&amp;gt; = 0.4、zope.deprecation&amp;gt; = 3.5.0、translationstring&amp;gt; = 0.4のパッケージバージョンに依存しています。また、テストの依存関係として、同じ理由でWebTest&amp;gt; = 1.3.1に依存します。</li>
<li>ピラミッドは `` Paste``や `` PasteScript``パッケージに依存しなくなりました。これらのパッケージは、Python 3と互換性がありません。</li>
<li>`` venusian`` = 1.0a3に依存して、スキャンの <a href="#id1"><span class="problematic" id="id2">``</span></a>無視 &amp;#39;`のサポートを提供してください。</li>
</ul>
</div>
<div class="section" id="scaffolding-changes">
<h2>足場の変更<a class="headerlink" href="#scaffolding-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>レンダリングされた足場は、よりリロケータブルに変更されました（パッケージ内のファイル内でのパッケージ名の記述が少なくなりました）。</li>
<li>`` routesalchemy``足場は、古い（トラバーサルベースの） <a href="#id1"><span class="problematic" id="id2">``</span></a>錬金術 <a href="#id3"><span class="problematic" id="id4">``</span></a>足場（引退したもの）に取って代わり、 <a href="#id5"><span class="problematic" id="id6">``</span></a>錬金術 <a href="#id7"><span class="problematic" id="id8">``</span></a>に改名されました。</li>
<li>`` alchemy``と `` starter``足場はPython 3と互換性があります。</li>
<li>`` starter``スキャフォールドはデフォルトでURLディスパッチを使用するようになりました。</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(機械翻訳)Pyramid 1.3の新機能</a><ul>
<li><a class="reference internal" href="#major-feature-additions">主な機能の追加</a><ul>
<li><a class="reference internal" href="#python-3-compatibility">Python 3の互換性</a></li>
<li><a class="reference internal" href="#the-paster-command-has-been-replaced">`` paster``コマンドが置き換えられました</a></li>
<li><a class="reference internal" href="#paste-httpserver-replaced-by-waitress-in-scaffolds">Scaffoldsで `` paste.httpserver``を `` waitress``に置き換えました</a></li>
<li><a class="reference internal" href="#compatibility-helper-library">互換性ヘルパーライブラリ</a></li>
<li><a class="reference internal" href="#introspection">イントロスペクション</a></li>
<li><a class="reference internal" href="#view-defaults-decorator">`` &#64; view_defaults``デコレータ</a></li>
<li><a class="reference internal" href="#extending-a-request-without-subclassing">サブクラス化せずにリクエストを拡張する</a></li>
<li><a class="reference internal" href="#not-found-and-forbidden-view-helpers">ヘルパーを見る</a></li>
</ul>
</li>
<li><a class="reference internal" href="#minor-feature-additions">マイナー機能追加</a></li>
<li><a class="reference internal" href="#backwards-incompatibilities">後方の非互換性</a></li>
<li><a class="reference internal" href="#deprecations">廃止</a></li>
<li><a class="reference internal" href="#known-issues">既知の問題点</a></li>
<li><a class="reference internal" href="#documentation-enhancements">ドキュメントの機能拡張</a></li>
<li><a class="reference internal" href="#dependency-changes">依存関係の変更</a></li>
<li><a class="reference internal" href="#scaffolding-changes">足場の変更</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.4.html"
                        title="前の章へ">(機械翻訳)Pyramid 1.4の新機能</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.2.html"
                        title="次の章へ">(機械翻訳)Pyramid 1.2の新機能</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/whatsnew-1.3.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.2.html" title="(機械翻訳)Pyramid 1.2の新機能"
             >次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.4.html" title="(機械翻訳)Pyramid 1.4の新機能"
             >前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 11月 13, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>