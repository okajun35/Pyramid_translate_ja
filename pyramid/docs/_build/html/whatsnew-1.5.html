
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>(機械翻訳)Pyramid 1.5の新機能 &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="copyright" title="著作権" href="copyright.html" />
    <link rel="next" title="(機械翻訳)Pyramid 1.4の新機能" href="whatsnew-1.4.html" />
    <link rel="prev" title="(機械翻訳)Pyramid 1.6の新機能" href="whatsnew-1.6.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.4.html" title="(機械翻訳)Pyramid 1.4の新機能"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.6.html" title="(機械翻訳)Pyramid 1.6の新機能"
             accesskey="P">前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-pyramid-1-5">
<h1>(機械翻訳)Pyramid 1.5の新機能<a class="headerlink" href="#what-s-new-in-pyramid-1-5" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>この記事では、app： <cite>Pyramid`バージョン1.5の新機能について説明します：app：</cite> Pyramid` 1.4。また、2つのバージョン間の非互換性と、app： <cite>Pyramid</cite> 1.5に追加されたdeprecationsと、ソフトウェアの依存関係の変更と、著しいドキュメントの追加についても説明しています。</p>
<div class="section" id="major-backwards-incompatibilities">
<h2>主要な後方互換性<a class="headerlink" href="#major-backwards-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul>
<li><p class="first">Pyramidは、デフォルトでMakoとChameleonのテンプレートシステムレンダラに依存したり、設定したりしません。デフォルトでこれらのテンプレートシステムを含めないということは、Pyramidコアの依存性が少なく、テンプレートアドオンの互換性がすぐに気になることなく将来のプラットフォームで実行できることを意味します。 Pyramidコアへのコミットアクセスを必要とせずに理解して気にするテンプレートシステムのアドオンをメンテナンスできるようになり、メンテナンスが少し効率的になります。彼らはピラミッドをインストールするときに乗るために来ることはありません。</p>
<p>つまり、Pyramid 1.5a2 +にアップグレードすると、これらのテンプレートシステムのいずれかを使用するプロジェクトで、アプリケーションがカメレオンまたはMakoテンプレートをレンダリングしようとすると、次のような終わりのトレースバックが表示されます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">pt</span>
</pre></div>
</div>
<p>または:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">mako</span>
</pre></div>
</div>
<p>または:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">renderer</span> <span class="n">factory</span> <span class="o">.</span><span class="n">mak</span>
</pre></div>
</div>
<p>Makoテンプレートのサポートは `` pyramid_mako``というアドオンパッケージに移行し、カメレオンテンプレートのサポートは `` pyramid_chameleon``というアドオンパッケージに移行しました。これらのパッケージは、これらのテンプレートランゲージの古い組み込みサポートのためのドロップイン置換です。インストールするだけで設定を有効にして、 `` .pt``や `` .mako``（または `` .mak``）のレンダラファクトリを登録してアプリケーションを再び動作させるだけです。</p>
<p>ChameleonまたはMakoテンプレートレンダラーのサポートを既存のプロジェクトに再度追加するには、以下の手順に従います。</p>
<p>Makoテンプレートに依存している場合：</p>
<ul>
<li><p class="first">`` pyramid_mako``パッケージがインストールされていることを確認してください。これを行う1つの方法は、パッケージの `` setup.py``ファイルの `` install_requires``セクションに `` pyramid_mako``を追加した後、 `` setup.py develop``を再実行することです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="c1">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;pyramid_mako&#39;</span><span class="p">,</span>         <span class="c1"># new dependency</span>
        <span class="s1">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c1">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Pyramid：class： <cite>〜pyramid.config.Configurator`（プロジェクトの</cite> <cite>__init __。py``ファイルの</cite> <cite>main（）</cite> <cite>関数であることが多い）をインスタンス化するアプリケーションの中で、Pyramidに`</cite> pyramid_mako`` includeme</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="o">.....</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_mako&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>カメレオンのテンプレートに依存している場合：</p>
<ul>
<li><p class="first">`` pyramid_chameleon``パッケージがインストールされていることを確認してください。これを行う1つの方法は、パッケージの `` setup.py``ファイルの `` install_requires``セクションに `` pyramid_chameleon``を追加し、 `` setup.py develop``を再実行することです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="c1">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">,</span>         <span class="c1"># new dependency</span>
        <span class="s1">&#39;pyramid&#39;</span><span class="p">,</span>
        <span class="c1">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Pyramid：class： <cite>〜pyramid.config.Configurator`（プロジェクトの</cite> <cite>__init __。py``ファイルの</cite> <cite>main（）</cite> <cite>関数であることが多い）をインスタンス化するアプリケーションの中で、Pyramidに`</cite> pyramid_chameleon`` includeme</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="o">.....</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>これらのパッケージを互換性のために古い*ピラミッドにインストールすることもできます。 Pyramid 1.5に直ちにアップグレードしなくても、Pyramid 1.4のインストールで上記の手順を実行すると問題はありません。Pyramid 1.5にアップグレードすると、互換性があります。</p>
<p>コアからのMakoとChameleonのサポートを削除すると、 `` pyramid.renderers.render * <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドを使用するいくつかの単体テストが失敗することがあります。あなたのユニットテストのいずれかがMakoかChameleonのいずれかのテンプレートで `` pyramid.renderers.render（） <a href="#id3"><span class="problematic" id="id4">``</span></a>または `` pyramid.renderers.render_to_response（） <a href="#id5"><span class="problematic" id="id6">``</span></a>を呼び出す場合、 `` pyramid.config.Configurator``インスタンス上記のようにアドオンを含むように更新する必要があります。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_mako&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;mypkg:templates/home.mako&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
<p>または:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ATest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_chameleon&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_it</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">renderers</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;mypkg:templates/home.pt&#39;</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
</li>
<li><p class="first">Pyramidデバッグツールバーを使用している場合は、Pyramidを1.5a2 +にアップグレードする際に、Pyramid 1.5と互換性がないため、Pyramid_debugtoolbarパッケージを少なくとも1.0.8にアップグレードする必要があります。 a2 +はコアからのMakoサポートの削除によるものです。旧バージョンのPyramidsでもこの新しいバージョンのツールバーコードを使用するのは良いことです。</p>
</li>
</ul>
</div>
<div class="section" id="feature-additions">
<h2>機能の追加<a class="headerlink" href="#feature-additions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pyramid 1.5の機能追加が続きます。</p>
<ul>
<li><p class="first">Python 3.4との互換性。</p>
</li>
<li><p class="first">使用中のPythonバージョン、使用中のPyramidバージョン、現在インストールされているすべてのPythonディストリビューションのバージョン番号と場所を表示する `` pdistreport``スクリプトを追加してください。</p>
</li>
<li><p class="first">`` not_``クラスを使用して、ビュー、ルート、またはサブスクライバの述語値の結果を逆転させる機能を追加します。例えば：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">not_</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;myroute&#39;</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>上記の例では、少なくとも他のビューがより具体的でない場合、リクエストメソッドがPOSTでない場合にビューが確実に呼び出されます。</p>
<p>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.not_`クラスは、これらのコンテキストのいずれかで渡される述語値である任意の値に対して使用できます。</p>
<ul class="simple">
<li>：meth： <cite>pyramid.config.Configurator.add_view</cite></li>
<li>：meth： <cite>pyramid.config.Configurator.add_route</cite></li>
<li>：meth： <cite>pyramid.config.Configurator.add_subscriber</cite></li>
<li>：meth： <cite>pyramid.view.view_config</cite></li>
<li>：meth： <cite>pyramid.events.subscriber</cite></li>
</ul>
</li>
<li><p class="first">ビュールックアップは、コンテキストの継承階層に基づいて有効なビューを検索します。最も具体的なコンテキストに基づいてビューを最初に見つけようとします。そして、述部の失敗時に、スーパータイプのコンテキストによって検出されたビューをテストするために継承チェーンを上げます。過去には、ビューを含む最も特定の型だけがチェックされ、一致するビューが見つからない場合には、PredicateMismatchが発生しました。今や述語の不一致は、スーパータイプに登録された有効なビューを隠さない。ここで今動作する例があります：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IResource</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">IResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>

<span class="nd">@implementer</span><span class="p">(</span><span class="n">IResource</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyResource</span><span class="p">:</span>

    <span class="o">...</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">MyResource</span><span class="p">,</span> <span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">override_post</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

    <span class="o">...</span>
</pre></div>
</div>
<p>以前は、override_postビューの登録によって、MyResourceのコンテキストでgetおよびdeleteビューが非表示になり、GETメソッドまたはDELETEメソッドを使用しようとしたときに述語の不一致エラーが発生しました。今、ビューが見つかり、述語の不一致が発生しません。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/786およびhttps://github.com/Pylons/pyramid/pull/1004およびhttps://github.com/Pylons/pyramid/pull/1046を参照してください。</p>
</li>
<li><p class="first">`` scripts / prequest.py``（別名 `` prequest``コンソールスクリプト）： `` PUT``と `` PATCH``要求を提出するサポートを追加しました。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1033を参照してください。 `` OPTIONS``と `` PROPFIND``リクエストを提出するためのサポートを追加し、ユーザがスクリプトの `` --login``引数を使って要求の中で基本認証資格を指定できるようにします。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1039を参照してください。</p>
</li>
<li><p class="first">：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.add_route`メソッドは、外部URLをパターンとして呼び出すことができるようになりました。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/611とドキュメンテーションセクション：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>external_route_narr`を参照してください。</p>
</li>
<li><p class="first">：class： <cite>pyramid.authorization.ACLAuthorizationPolicy`は</cite> <cite>__acl__``を呼び出し可能としてサポートしています。これは、プロパティが定義されていないときに `</cite> context``で生成される可能性のある `` AttributeError``と動的プロパティ内のユーザ定義コードから生成される `` AttributeError``のあいまいさを取り除きます。このあいまいさを避けるために、動的ACLを呼び出し可能として定義することをお勧めします。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/735を参照してください。</p>
</li>
<li><p class="first">プロトコル相対URL（例えば `` // example.com / images``）を：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.add_static_view`に渡すことを許可します。これにより、外部でホストされている静的URLを現在のプロトコルに基づいて生成することができます。</p>
</li>
<li><p class="first">：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.authentication.AuthTktAuthenticationPolicy`クラスには、ドメイン使用を設定するための2つの新しいオプションがあります：</p>
<ul class="simple">
<li>`` parent_domain``：もし設定されていれば、認証クッキーは親ドメイン上に設定されます。複数のサイトが同じドメインを共有している場合に便利です。</li>
<li>`` domain``：提供されていれば、いつものすべてのロジックをバイパスして、このドメインに対して常にクッキーが設定されます。</li>
</ul>
<p><a class="reference external" href="https://github.com/Pylons/pyramid/pull/1028">https://github.com/Pylons/pyramid/pull/1028</a>、<a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1072およびhttps://github.com/Pylons/pyramid/pull/1078を参照してください。</p>
</li>
<li><p class="first">：class： <cite>pyramid.authentication.AuthTktPolicy`は</cite> <cite>include_ip = True``オプションを使うときにIPv6アドレスをサポートするようになりました。これは、仕様がIPv6を適切に扱う方法を定義していないため、代替の `</cite> auth_tkt``実装とは互換性がありません。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/831を参照してください。</p>
</li>
<li><p class="first">func： <cite>pyramid.paster.get_appsettings`で可変引数を使用できるようにします。これにより、生成された `</cite> alchemy`` scaffoldの `` initialize_db``スクリプトは `` a = 1 b = 2``の形式でオプションをサポートできるようになり、パラメータ化された `` .ini <a href="#id1"><span class="problematic" id="id2">``</span></a>ファイル、例えば `` initialize_myapp_db etc / development.ini a = 1 b = 2``のようなものです。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/911を参照してください。</p>
</li>
<li><p class="first">`` request.session.check_csrf_token（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドと `` check_csrf``ビュー述語は、 `` X-CSRF-Token``という名前のHTTPヘッダーの値を考慮に入れます（ `` csrf_token彼らが常にやった <a href="#id3"><span class="problematic" id="id4">``</span></a>フォームパラメータ）。フォームパラメータが存在しない場合、ヘッダーが試されます。</p>
</li>
<li><p class="first">新しい `` route_name``、 `` route_kw``、 `` route_remainder_name``の引数をmeth： <cite>〜pyramid.request.Request.resource_urlに使うことで、より簡単に&amp;quot; hybrid &amp;quot;urldispatch / traversal URLを生成することができます`と：meth：</cite>〜pyuramid.request.Request.resource_path`となります。参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>generate_hybrid_urls`を参照してください。</p>
</li>
<li><p class="first">新しいhttp例外スーパークラスclass： <cite>〜pyramid.httpexceptions.HTTPSuccessful`が追加されました。このクラスを例外ビューの `</cite> context``として使用して、すべての200シリーズ&amp;quot;例外&amp;quot;（たとえば &amp;quot;raise HTTPOk &amp;quot;）をキャッチすることができます。これはまた：class： <cite>〜pyramid.httpexceptions.HTTPOk`例外自体を捕まえることもできます。他の多くの例外（ `</cite> HTTPNoContent``など）は `` HTTPOk``から継承されましたが、今はそうではありません。</p>
</li>
<li><p class="first">Pyramid足場で二重の括弧をエスケープすることが可能になりました（エスケープされていない、これらは置換値を表しています）。 `` {{a } } <a href="#id1"><span class="problematic" id="id2">``</span></a>を使って&amp;quot;bare &amp;quot; `` {{a}} <a href="#id3"><span class="problematic" id="id4">``</span></a>を表すことができます。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/862を参照してください。</p>
</li>
<li><p class="first"><cite>localizer`と</cite> <cite>locale_name``のプロパティ（reified）をclass：</cite> pyramid.request.Request`に追加してください。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/508を参照してください。 ：func： <cite>pyramid.i18n.get_localizer`と：func：</cite> pyramid.i18n.get_locale_name`関数は、単にリクエストでこれらのプロパティを検索するようになりました。</p>
</li>
<li><p class="first">`` pserve``コマンドは、 `` -v``（または ``  -  verbose``）フラグと `` -q``（または `` --quiet``）フラグを取るようになりました。 `` pserve``からの出力は、これらのフラグを使って制御することができます。 `` -v``を複数回指定して冗長性を増やすことができます。 `` -q``は冗長に `` 0``を無条件に設定します。デフォルトの冗長レベルは `` 1``です。</p>
</li>
<li><p class="first"><a href="#id1"><span class="problematic" id="id2">``</span></a>錬金術 <a href="#id3"><span class="problematic" id="id4">``</span></a>足場テストは、より良いカバレッジを提供するようになりました。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1029を参照してください。</p>
</li>
<li><p class="first">ユーザーは、以下のような名前のコンフィグレータメソッドを `` factory``引数として、点線のPython名を提供できるようになりました：meth： <cite>〜pyramid.config.Configurator.add_view_predicate</cite>、：meth：<cite>〜pyramid.config.Configurator.add_route_predicate`と：meth ： `〜pyramid.config.Configurator.add_subscriber_predicate</cite>。述語ファクトリを直接渡す代わりに、ファクトリを指す点線の名​​前を渡すことができます。</p>
</li>
<li><p class="first">：func： <cite>pyramid.path.package_name`は、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>__file__``属性のない名前空間パッケージのパッケージ名を解決する際に、もはや例外を表示しません。</p>
</li>
<li><p class="first">リクエストのメソッドとして承認APIが追加されました：：meth： <cite>pyramid.request.Request.has_permission</cite>。それは：func： <cite>pyramid.security.has_permission</cite> APIのメソッドベースの代替であり、まったく同じように動作します。古いAPIは廃止されました。</p>
</li>
<li><p class="first">：attr： <cite>pyramid.request.Request.authenticated_userid</cite>、：attr：` pyramid.request.Request.unauthenticated_userid`、および：attr： <cite>pyramid.requestプロパティーAPI属性が要求に追加されました。 .Request.effective_principals</cite>。これらは、それぞれ：func： <cite>pyramid.security.authenticated_userid</cite>、：func：` pyramid.security.unauthenticated_userid`、：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.security.effective_principals`のアナログです。要求を受け入れる関数ではなく、要求の属性である点を除いて、まったく同じように動作します。それらはプロパティなので、割り当てることはできません。古い関数ベースのAPIは非推奨になりました。</p>
</li>
<li><p class="first">Pyramidのコンソールスクリプト（ `` pserve``、 `` pviews``など）は、実行時にPythonインタプリタにカスタム引数を送ることができるようになりました。例えば：：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyramid</span><span class="o">.</span><span class="n">scripts</span><span class="o">.</span><span class="n">pserve</span> <span class="n">development</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
</li>
<li><p class="first">class： <cite>pyramid.httpexceptions.HTTPBadRequest</cite>：class：` pyramid.exceptions.BadCSRFToken`の特定のサブクラスを追加しました。これは `` check_csrf_token``ビュー述語の失敗に応答して呼び出されるようになりました。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1149を参照してください。</p>
</li>
<li><p class="first">`` UnencryptedCookieSessionFactoryConfig``に非常に似ていますが、署名にもっと焦点を当てた新しい `` SignedCookieSessionFactory``を追加しました。この関数のカスタムシリアライザ引数は、シリアライザにも署名を実行することを要求していた前のバージョンとは異なり、シリアライズにのみ焦点を合わせる必要があります。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1142を参照してください。 `` SignedCookieSessionFactory``を使って生成されたクッキーは `` UnencryptedCookieSessionFactory``を使って生成されたクッキーと互換性がないので、既存のユーザセッションデータはあなたがそれに切り替えると破壊されることに注意してください。</p>
</li>
<li><p class="first">独自のセッション実装を作成するためにフレームワーク実装者が使用できる汎用クッキーファクトリとして機能する新しい `` BaseCookieSessionFactory``を追加しました。これは、再利用、タイムアウト、および `` Session API`の適合性を適切に処理する辞書のようなオブジェクトを提供することに厳密に焦点を当てた、再利用可能なAPIを提供します。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1142を参照してください。</p>
</li>
<li><p class="first">我々は、もはや `` request.exception``と `` request.exc_info``を例外ビューtweenで熱心にクリアしません。これにより、完了したコールバック内の例外情報を検査することができます。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/1223を参照してください。</p>
</li>
</ul>
</div>
<div class="section" id="other-backwards-incompatibilities">
<h2>その他の後方互換性<a class="headerlink" href="#other-backwards-incompatibilities" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.request.Reuqest.current_route_url`メソッドを修正しました。このメソッドは、以前はデフォルトでクエリ文字列のないURLを返していましたが、オーバーライドされていない限りクエリ文字列を添付しています。</li>
<li>：meth： <cite>〜pyramid.request.Request.route_url`と：meth：</cite>〜pyramid.request.Request.route_path` APIは、置換値にaが含まれている場合、 `` / <code class="docutils literal notranslate"><span class="pre">を</span> <span class="pre">``％2F``に引用しません</span></code> / <a href="#id1"><span class="problematic" id="id2">``</span></a>とにかくWSGIサーバーは常にスラッシュを引用符で囲まず、Pyramidは引用された値を決して見ないため、これは無意味でした。</li>
<li>リクエストの `` locale_name``属性を設定することも、リクエストの `` localizer``属性を設定することもできません。これらは、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>i18n_chapter`に記述されている機械を使ってロケール名とローカライザをそれぞれ検索する&amp;quot; reified &amp;quot;プロパティです。</li>
<li>任意の数のスラッシュで終わる値を持つ `` X-Vhm-Root``ヘッダーを送信した場合、：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.request.Requestを使用すると、URLが生成される前に後続のスラッシュが削除されます。 resource_url`または：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>〜pyramid.request.Request.resource_path`を参照してください。以前は、仮想ルートパスに後続のスラッシュが取り除かれていなかったため、URLの生成に影響します。</li>
<li>：class： <cite>pyramid.interfaces.IResourceURL`インターフェースは、</cite> <cite>virtual_path_tuple``と</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>physical_path_tuple``という2つの新しい属性を持ちました。これらは、リソースのパス（物理的および仮想的）のタプル形式でなければなりません。</li>
<li>`` <a href="#id1"><span class="problematic" id="id2">request.response_</span></a> * <a href="#id1"><span class="problematic" id="id2">``</span></a>属性を変更しました（ <a href="#id3"><span class="problematic" id="id4">``</span></a>request.response_headers``など）。これらの属性は、Pyramid 1.1以降、廃止予定ポリシーに従って廃止されました。</li>
<li>： `` request.response``は：func： <cite>pyramid.renderers.render</cite> APIを使用してもはや変更されません。ほとんどのレンダラが `` request.response``レスポンスオブジェクトを変更します（例えば、JSONレンダラが `` application / json``に `` request.response.content_type``を設定します）が、これはレンダラが応答を生成する。 func： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.renderers.render`を呼び出す副作用として実行されたときのバグでした。</li>
<li>`` bfg2pyramid``フィーダスクリプトを削除しました。</li>
<li>：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.events.NewResponse`イベントは**応答コールバックが実行された後に**送信されます。以前は応答コールバックが実行される前に実行されていました。理論的根拠：応答コールバックが前回ではなく仕事をした後に、応答を検査できる方が便利です。</li>
<li>Pyramid 1.1以来廃止されていた `` pyramid.view.static``という名前のクラスを削除しました。代わりに、 `` use_subpath = True``引数で：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.static.static_view`を使用してください。</li>
<li>Pyramid 1.1以来廃止されていた `` pyramid.view.is_response``関数を削除しました。代わりに：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.request.Request.is_response`メソッドを使用してください。</li>
<li>meth： <cite>pyramid.config.Configurator.add_route</cite>：` <cite>view`</cite>、` <cite>view_context``に以下の引数を渡す機能を削除しました。 `</cite> view_for``、 `` view_permission``、 `` view_renderer``、 `` view_attr``です。これらの引数を使用することは、Pyramid 1.1以降では廃止されました。ビュー関連の引数を `` add_route``に渡すのではなく、 `` route_name``引数を使ってビューをルートに関連付けるために：meth： <cite>pyramid.config.Configurator.add_view`を別々に呼び出します。これは：meth： `pyramid.config.Configurator.add_static_view`関数にも影響します。なぜなら、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>add_route``に委譲するからです。</li>
<li>a：class： <cite>pyramid.request.Request`オブジェクトに影響を与え、それを辞書のように照会する機能を削除しました。以前は、 `</cite> __getitem__``、 `` get``、 `` items``などのメソッドを使用して、WSGI環境の値にアクセスするためのメソッドを使用することができました。この動作はPyramid 1.1以降では廃止されました。代わりに、 `` request.environ``（実際の辞書）のメソッドを使用してください。</li>
<li>`` pyramid.traversal.DefaultRootFactory``の古くからの互換性のあるハックを削除し、BFG 0.9との互換性のためのマッチディック値で工場の `` __dict__``を設定しました。</li>
<li>：class： <cite>pyramid.config.Configurator`コンストラクタの</cite> <cite>renderer_globals_factory``引数と：meth：</cite>〜pyramid.config.Configurator.setup_registry`の対応する引数が削除されました。 class： <cite>〜pyramid.config.Configurator`の</cite> <cite>set_renderer_globals_factory``メソッドも削除されました。 （内部の） `</cite> pyramid.interfaces.IRendererGlobals``インターフェースも削除されました。これらの引数、メソッド、およびインタフェースは、1.1以降で非難されていました。コンフィギュレータにレンダラグローバル値を提供するのではなく、ピラミッドの説明文書の&amp;quot;Hooks &amp;quot;章に書かれているように、 `` BeforeRender``イベントサブスクライバを使用してください。</li>
<li>：meth： <cite>pyramid.request.Request.route_url`の</cite> <cite>_query``パラメータと：meth：</cite> pyramid.request.Request.resource_url`（およびその変形）の `` query``パラメータのキー/ ）は `` None``の値を文字列 `` &amp;#39;None&amp;#39;``でエンコードし、結果のクエリ文字列は `` a = b＆key = None``のままにしていました。この状況では値が削除され、 `` a = b＆key = <a href="#id1"><span class="problematic" id="id2">``</span></a>というクエリ文字列が残っています。 <a class="reference external" href="https://github.com/Pylons/pyramid/issues">https://github.com/Pylons/pyramid/issues</a>/1119を参照してください。</li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>廃止<a class="headerlink" href="#deprecations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Makoレンダラーを持つビューから <a href="#id1"><span class="problematic" id="id2">``</span></a>（&amp;quot;defname &amp;quot;、dict） <a href="#id3"><span class="problematic" id="id4">``</span></a>タプルを返すことは廃止されました。その代わりに、レンダラのスペルを `` foo＃defname.mak``をビュー構成定義に使用し、dictのみを返すべきです。</li>
<li>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.set_request_property`メソッドは、使用時に非推奨警告を発行するようになりました。 1.4ではdocs-deprecatedとなっていましたが、使用すると非推奨の警告は発行されませんでした。</li>
<li>：func： <cite>pyramid.security.has_permission`は：meth：</cite> pyramid.request.Request.has_permission`を使うことになっています。</li>
<li>：func： <cite>pyramid.security.authenticated_userid</cite>、：func：` pyramid.security.unauthenticated_userid`、および：func： <cite>pyramid.security.effective_principals`関数は廃止予定です。代わりに：attr： `pyramid.request.Request.authenticated_userid</cite>、：attr：` pyramid.request.Request.unauthenticated_userid`と：attr： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.request.Request.effective_principals`を代わりに使用してください。</li>
<li>`` pyramid.interfaces.ITemplateRenderer``インタフェースを非推奨にしてください。 MakoとChameleonのテンプレートバインディングを独自のパッケージに分割すると、定義が不明瞭になり、使用されなくなりました。</li>
<li>`` pyramid.session.UnencryptedCookieSessionFactoryConfig`` APIは廃止され、 `` pyramid.session.SignedCookieSessionFactory``に置き換えられました。 `` UnencryptedCookieSessionFactoryConfig``によって生成されたクッキーは古いリリースで生成されたクッキーと互換性がありますが、SignedCookieSessionFactoryによって生成されるクッキーはそうではありません。 <a class="reference external" href="https://github.com/Pylons/pyramid/pull">https://github.com/Pylons/pyramid/pull</a>/1142を参照してください。</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>ドキュメントの機能拡張<a class="headerlink" href="#documentation-enhancements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>新しいドキュメンテーションの章：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>quick_tour`が追加されました。これは、ピラミッドを高レベルから始めることを説明しています。</li>
<li>クイックツアーに参加するための：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>quick_tutorial`を追加しました</li>
<li>その他多くの拡張機能。</li>
</ul>
</div>
<div class="section" id="scaffolding-enhancements">
<h2>足場の強化<a class="headerlink" href="#scaffolding-enhancements" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>すべての足場には新しいHTML + CSSテーマがあります。</li>
<li>ドキュメンテーションとスキャフォールドを更新し、 <a href="#id1"><span class="problematic" id="id2">``</span></a>ングワ（Lingua） <cite>の新バージョン2.0を続ける。これには、すべての `</cite> setup.cfg``ファイルを足場やドキュメント環境から削除することが含まれていました。</li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h2>依存関係の変更<a class="headerlink" href="#dependency-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>ピラミッドはもはや `` Mako``や `` Chameleon``に依存しません。</li>
<li>PyramidはWebOb&amp;gt; = 1.3（1.3+から `` webob.cookies.CookieProfile``を使います）に依存しています。</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(機械翻訳)Pyramid 1.5の新機能</a><ul>
<li><a class="reference internal" href="#major-backwards-incompatibilities">主要な後方互換性</a></li>
<li><a class="reference internal" href="#feature-additions">機能の追加</a></li>
<li><a class="reference internal" href="#other-backwards-incompatibilities">その他の後方互換性</a></li>
<li><a class="reference internal" href="#deprecations">廃止</a></li>
<li><a class="reference internal" href="#documentation-enhancements">ドキュメントの機能拡張</a></li>
<li><a class="reference internal" href="#scaffolding-enhancements">足場の強化</a></li>
<li><a class="reference internal" href="#dependency-changes">依存関係の変更</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.6.html"
                        title="前の章へ">(機械翻訳)Pyramid 1.6の新機能</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="whatsnew-1.4.html"
                        title="次の章へ">(機械翻訳)Pyramid 1.4の新機能</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/whatsnew-1.5.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.4.html" title="(機械翻訳)Pyramid 1.4の新機能"
             >次へ</a> |</li>
        <li class="right" >
          <a href="whatsnew-1.6.html" title="(機械翻訳)Pyramid 1.6の新機能"
             >前へ</a> |</li>
    	<li><a href="index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 11月 03, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>