
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>(機械翻訳) セキュリティ &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="(機械翻訳) トラバーサルとURLディスパッチの組み合わせ" href="hybrid.html" />
    <link rel="prev" title="(機械翻訳) トラバーサル" href="traversal.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="hybrid.html" title="(機械翻訳) トラバーサルとURLディスパッチの組み合わせ"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="traversal.html" title="(機械翻訳) トラバーサル"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="security">
<span id="security-chapter"></span><span id="index-0"></span><h1>(機械翻訳) セキュリティ<a class="headerlink" href="#security" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>：app： <cite>Pyramid`はオプションで宣言的なセキュリティシステムを提供します。セキュリティで：app： `Pyramid`は認証と認可に分かれています。 2つのシステムはterm： `principal`識別子で通信します。認証は単に：term： `request`で提供された資格証明が1つ以上の：term：</cite> principal`識別子に解決されるメカニズムです。これらの識別子は、要求時に有効なユーザーとグループを表します。承認は：term： <cite>principal`識別子、要求された：term：</cite> permission`、およびa：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>context`に基づいてアクセスを決定します。</p>
<p>：app： <cite>Pyramid`認可システムは：term：`認可ポリシー `に基づいてa：term：</cite> view`が呼び出されるのを防ぐことができます。ビューが呼び出される前に、認証システムは：term： <cite>context`リソースとともに、：term：</cite> request`の資格情報を使用して、アクセスが許可されるかどうかを判断することができます。どのように高いレベルで動作するかは次のとおりです。</p>
<ul class="simple">
<li>ユーザーは以前にアプリケーションを訪れていてもいなくてもかまいませんし、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>userid`を含む認証資格情報を提供しているかもしれません。もしそうなら、アプリケーションはfunc： <a href="#id3"><span class="problematic" id="id4">`</span></a>pyramid.security.remember`を呼び出してこれらを覚えているかもしれません。</li>
<li>A：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>request`は、ユーザがアプリケーションを訪れたときに生成されます。</li>
<li>この要求に基づいて、a：term： <cite>context`リソースは：term：</cite> resource location`によって配置されます。コンテキストは、アプリケーションがterm： <cite>traversal`または：term：</cite> URL dispatch`を使用するかどうかによって異なって位置付けられますが、どちらの場合でもコンテキストは最終的に見つかります。詳細は、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>urldispatch_chapter`の章を参照してください。</li>
<li>A：term： <cite>view callable`は：term：</cite> view lookup`によってコンテキストのほかにリクエストの他の属性を使用しています。</li>
<li>：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>認証ポリシー`が有効な場合、要求に渡されます。いくつかの：term： <a href="#id3"><span class="problematic" id="id4">`</span></a>principal`識別子を返します。これを行うには、ポリシーは、リクエストに存在するauthenticated：term： <a href="#id5"><span class="problematic" id="id6">`</span></a>userid`を判断する必要があります。</li>
<li>：term： <cite>認可ポリシー`が有効であり、見つかったビューcallableに関連付けられた：term： `view configuration`に：term：</cite> permission`が関連付けられている場合、認可ポリシーは次のように渡されます：term： <cite>context</cite>、認証ポリシーによって返されるterm：` principal`識別子、ビューに関連する：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>permission`です。アクセスを許可または拒否します。</li>
<li>権限ポリシーがアクセスを許可する場合、呼び出し可能なビューが呼び出されます。</li>
<li>認可ポリシーがアクセスを拒否した場合、呼び出し可能なビューは呼び出されません。代わりに：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>禁止されたビュー &amp;#39;が呼び出されます。</li>
</ul>
<p>承認は、アプリケーションを変更して：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>認証ポリシー`と：term： <a href="#id3"><span class="problematic" id="id4">`</span></a>認証ポリシー`を含むようにすることで可能になります。 ：app： <a href="#id5"><span class="problematic" id="id6">`</span></a>Pyramid`には、これらのポリシーのさまざまな実装が付属しています。最大限の柔軟性を提供するために、：app： <a href="#id7"><span class="problematic" id="id8">`</span></a>Pyramid`ではカスタム認証ポリシーと認証ポリシーを作成することもできます。</p>
<div class="section" id="enabling-an-authorization-policy">
<span id="enabling-authorization-policy"></span><span id="index-1"></span><h2>承認ポリシーの有効化<a class="headerlink" href="#enabling-an-authorization-policy" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`は、デフォルトでは、どの認可ポリシーも有効にしていません。すべてのビューには、完全に匿名のユーザーがアクセスできます。セキュリティ設定に基づいてビューを実行から保護するには、認可ポリシーを有効にする必要があります。</p>
<div class="section" id="enabling-an-authorization-policy-imperatively">
<h3>権限付きポリシーを必然的に有効にする<a class="headerlink" href="#enabling-an-authorization-policy-imperatively" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>権限ポリシーを有効にするには、：class： <cite>〜pyramid.config.Configurator`の：meth：</cite>〜pyramid.config.Configurator.set_authorization_policy`メソッドを使用します。</p>
<p>権限ポリシーを有効にするには、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>認証ポリシー &amp;#39;も有効にする必要があります。これは、認証は一般に認証に依存するためです。アプリケーション設定中に：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>〜pyramid.config.Configurator.set_authentication_policy`メソッドを使用して、認証ポリシーを指定します。</p>
<p>例えば：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>
<span class="kn">from</span> <span class="nn">pyramid.authentication</span> <span class="kn">import</span> <span class="n">AuthTktAuthenticationPolicy</span>
<span class="kn">from</span> <span class="nn">pyramid.authorization</span> <span class="kn">import</span> <span class="n">ACLAuthorizationPolicy</span>
<span class="n">authn_policy</span> <span class="o">=</span> <span class="n">AuthTktAuthenticationPolicy</span><span class="p">(</span><span class="s1">&#39;seekrit&#39;</span><span class="p">,</span> <span class="n">hashalg</span><span class="o">=</span><span class="s1">&#39;sha512&#39;</span><span class="p">)</span>
<span class="n">authz_policy</span> <span class="o">=</span> <span class="n">ACLAuthorizationPolicy</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_authentication_policy</span><span class="p">(</span><span class="n">authn_policy</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_authorization_policy</span><span class="p">(</span><span class="n">authz_policy</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">`` authentication_policy``と `` authorization_policy``引数は上記のそれぞれのメソッドに渡すこともできます：term：Pythonモジュールスコープで定義された適切な実装グローバルへの点線の名前パスを表す <a href="#id1"><span class="problematic" id="id2">`</span></a>dotted Python name`値。</p>
</div>
<p>上記の設定では、要求の環境で渡された&amp;quot;auth ticket &amp;quot;クッキーの値をsingle：term： <cite>userid`への参照を含むポリシーと比較し、そのuseridの：term：</cite> principals &lt;principal&gt; &amp;#39;：term： <cite>view`を呼び出そうとしたときに、リソースツリーに見つかったany：term：</cite> ACL`に存在するプリンシパルに対して。</p>
<p>さまざまな認証ポリシーと認証ポリシーを混在させることは可能ですが、Pyramidアプリケーションを認証ポリシーを使用して設定することはできますが、許可ポリシーは設定しないでください。これを行うと、アプリケーションの起動時にエラーが発生します。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">認証と認証ポリシーの代替実装については：mod： <cite>pyramid.authorization`と：mod：</cite> pyramid.authentication`モジュールも参照してください。</p>
</div>
</div>
</div>
<div class="section" id="protecting-views-with-permissions">
<span id="protecting-views"></span><span id="index-2"></span><h2>アクセス権によるビューの保護<a class="headerlink" href="#protecting-views-with-permissions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>特定のタイプのリソースが：term： <cite>context`になったときに、ユーザのセキュリティ設定に基づいて呼び出しから</cite> view callable`を保護するには、：term： <cite>permission`を：term：</cite> view configuration <a href="#id1"><span class="problematic" id="id2">`</span></a>。パーミッションは通常文字列であり、必要なコンポジションはありません。あなたが好きなようにパーミッションを指定することができます。</p>
<p>たとえば、次のビュー宣言は、コンテキストリソースが：meth： <cite>pyramid.config.Configuratorを使用して</cite> <cite>add``パーミッションを持つ</cite> <cite>Blog``型である場合、</cite> <cite>add_entry.html``という名前のビューを保護します。 add_view</cite> API：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config is an instance of pyramid.config.Configurator</span>

<span class="n">config</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;mypackage.views.blog_entry_add_view&#39;</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;add_entry.html&#39;</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="s1">&#39;mypackage.resources.Blog&#39;</span><span class="p">,</span>
                <span class="n">permission</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>`` add``許可名を含む等価なビューの登録は、 `` &#64; view_config``デコレータを使って行うことができます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>
<span class="kn">from</span> <span class="nn">resources</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">Blog</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;add_entry.html&#39;</span><span class="p">,</span> <span class="n">permission</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">blog_entry_add_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Add blog entry code goes here &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p>これらの様々なビュー構成ステートメントの結果、通常のアプリケーション操作中にビュー呼び出し可能なものが見つかったときに認証ポリシーが設定されている場合、要求側ユーザーは：term： <cite>に対して</cite> <cite>add``アクセス権を持っている必要があります`</cite> blog_entry_add_view``ビューを呼び出せるようにするために `` context``リソースを使います。そうでない場合、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>禁止されたビュー &amp;#39;が呼び出されます。</p>
<div class="section" id="setting-a-default-permission">
<span id="index-3"></span><span id="id1"></span><h3>既定のアクセス許可の設定<a class="headerlink" href="#setting-a-default-permission" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ビュー構成に権限が与えられていない場合、登録ビューは常に完全に匿名ユーザーによって実行可能になります。有効な権限ポリシーはすべて無視されます。</p>
<p>&amp;quot;デフォルトでセキュリティで保護されている&amp;quot;というアプリケーションを簡単に設定できるようにするため、：app： <cite>Pyramid`では*デフォルトの権限を設定することができます。指定されていれば、デフォルトの許可は、それ以外の場合は `</cite> permission``引数に名前を付けないすべてのビュー登録に対する許可文字列として使用されます。</p>
<p>：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.config.Configurator.set_default_permission`メソッドは、アプリケーションのデフォルトパーミッションの設定をサポートしています。</p>
<p>既定のアクセス許可が登録されている場合：</p>
<ul class="simple">
<li>ビュー構成が明示的に `` permission``という名前を付けると、そのビューの登録ではデフォルトの権限は無視され、view-configuration-namedの権限が使用されます。</li>
<li>ビューの設定でpermission：data： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.security.NO_PERMISSION_REQUIRED`という名前が付けられた場合、デフォルトの権限は無視され、ビューは権限なしで*登録されます（資格に関係なくすべての発信者が利用できるようになります）。</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">デフォルトのパーミッションを登録すると、* all <a href="#id1"><span class="problematic" id="id2">*</span></a>ビュー（term： <a href="#id3"><span class="problematic" id="id4">`</span></a>例外ビュー`ビュー）もパーミッションで保護されます。真に匿名でアクセスできるすべてのビューについて、ビューの設定を：data： <a href="#id5"><span class="problematic" id="id6">`</span></a>pyramid.security.NO_PERMISSION_REQUIRED`パーミッションに関連付ける必要があります。</p>
</div>
</div>
</div>
<div class="section" id="assigning-acls-to-your-resource-objects">
<span id="assigning-acls"></span><span id="index-4"></span><h2>リソースオブジェクトへのACLの割り当て<a class="headerlink" href="#assigning-acls-to-your-resource-objects" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>デフォルト：app： <cite>Pyramid</cite>：term：<cite>認可ポリシー &amp;#39;が、ユーザーがリソースに関して特定の許可を持っているかどうかを判断するとき、リソースに関連付けられた：term： `ACL`を検査します。 ACLは、リソースオブジェクトに `</cite> __acl__``属性を追加することによってリソースに関連付けられます。この属性は、インスタンスレベルのセキュリティが必要な場合はリソース*インスタンス*で定義でき、タイプレベルのセキュリティが必要な場合はリソース*クラス*で定義できます。</p>
<p>たとえば、ブログのリソースにクラスを介してACLを添付することができます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>また、リソースが永続的である場合、ACLはリソースの*インスタンス*の `` __acl__``属性で指定することができます：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">blog</span> <span class="o">=</span> <span class="n">Blog</span><span class="p">()</span>

<span class="n">blog</span><span class="o">.</span><span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>ACLがリソースのクラスにアタッチされているか、リソース自体のインスタンスにアタッチされているかにかかわらず、その効果は同じです。オブジェクト単位できめ細かなアクセスが必要なコンテンツ管理システムなどのアプリケーションでは、個々のリソースインスタンスをACLで修飾すると便利です（クラスを装飾するのではなく）。</p>
<p>動的ACLは、ACLをリソース上の呼び出し可能にすることによっても可能です。これにより、ACLはインスタンスのプロパティに基づいてルールを動的に生成できます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__acl__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">`` __acl__``をプロパティとして書くのは、 `` fget``や `` fset``で起こっている `` AttributeError``が黙って解消されるので、お勧めしません（これはPythonの `` getattr``と `` hasattr`` <a href="#id1"><span class="problematic" id="id2">`</span></a>行動）。ダイナミックACLの場合は、上記のとおり、単にコールアーブルを使用します。</p>
</div>
</div>
<div class="section" id="elements-of-an-acl">
<span id="index-5"></span><h2>ACLの要素<a class="headerlink" href="#elements-of-an-acl" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>次に、ACLの例を示します。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>ACLの例は、：data： <cite>pyramid.security.Everyone`プリンシパル（文字通り全員を示す特別なシステム定義プリンシパル）がブログを閲覧することを許可され、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>group：editors``プリンシパルがブログに追加して編集する。</p>
<p>ACLの各要素は：term： <cite>ACE`またはアクセス制御エントリです。例えば、上記のコードブロックには、 ``（許可、全員、 &amp;#39;ビュー&amp;#39;）、 ``（許可、 &amp;#39;グループ：編集者&amp;#39;、 &amp;#39;追加&amp;#39;）、 ``許可： &amp;#39;グループ：編集者&amp;#39;、 &amp;#39;編集&amp;#39;） `</cite>。</p>
<p>ACEの最初の要素は、data： <cite>pyramid.security.Allow</cite>、または：data：` pyramid.security.Deny`です。これは、ACEが一致したときに取るアクションを表します。 2番目の要素は：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>principal`です。 3番目の引数は、パーミッション名のパーミッションまたはシーケンスです。</p>
<p>プリンシパルは通常はユーザーIDですが、認証システムがグループ情報を提供し、有効：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>認証ポリシー`ポリシーがグループ情報を考慮して記述されている場合は、グループIDでもかまいません。参照：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>extend_default_authentication_policies`を参照してください。</p>
<p>ACL内の各ACEは、ACL <a href="#id1"><span class="problematic" id="id2">*</span></a>で指定された順序で認可ポリシー*によって処理されます。したがって、次のようなACLがあるとします。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Deny</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Deny</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>既定の認可ポリシーでは、後でACLにすべてのユーザーにビューのアクセス許可を拒否するACEがあっても、すべてのユーザーに表示許可が許可されます。一方、次のようなACLがある場合は、</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Deny</span>

<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">Deny</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>認可ポリシーは、後でACLにも、すべての人を許可するACEが存在するにもかかわらず、すべての人に表示許可を拒否します。</p>
<p>ACEの3番目の引数は、1つのアクセス権名の代わりに一連のアクセス権名にすることもできます。したがって、単一の `` group：editors``グループにいくつかの異なる許可許可を表す複数のACEを作成するのではなく、これを以下のように単一のACEにすることができます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Everyone</span>

<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;group:editors&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">)),</span>
    <span class="p">]</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="special-principal-names">
<span id="index-6"></span><h2>特別なプリンシパル名<a class="headerlink" href="#special-principal-names" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>特殊なプリンシパル名は：mod： <cite>pyramid.security`モジュールにあります。あなた自身のコードで使用するためにインポートすることができます（例：：data： `pyramid.security.Everyone</cite>）。</p>
<p>：データ： <cite>pyramid.security.Everyone</cite></p>
<blockquote>
<div>文字どおり、誰でも、何でも。このオブジェクトは実際にはフードの下の文字列です（ `` system.Everyone``）。すべてのユーザー*は、セキュリティポリシーが使用されていなくても、すべての要求中に&amp;quot;Everyone &amp;quot;という名前のプリンシパルです。</div></blockquote>
<p>：データ： <cite>pyramid.security.Authenticated</cite></p>
<blockquote>
<div>現在のセキュリティポリシーによって決定された資格情報を持つすべてのユーザー。あなたは&amp;quot;ログインしている&amp;quot;というユーザーと考えるかもしれません。このオブジェクトは実際にはフードの下にある文字列です（ `` system.Authenticated``）。</div></blockquote>
</div>
<div class="section" id="special-permissions">
<span id="index-7"></span><h2>特別な許可<a class="headerlink" href="#special-permissions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>特殊なパーミッション名は：mod： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.security`モジュールにあります。これらは、ACLで使用するためにインポートできます。</p>
<p id="all-permissions">：データ： <cite>pyramid.security.ALL_PERMISSIONS</cite></p>
<blockquote>
<div>文字通り* all <a href="#id1"><span class="problematic" id="id2">*</span></a>権限を表すオブジェクト。 <a href="#id3"><span class="problematic" id="id4">``</span></a>（許可、 &amp;#39;fred&amp;#39;、ALL_PERMISSIONS） <a href="#id5"><span class="problematic" id="id6">``</span></a>のようなACLで役に立ちます。 `` ALL_PERMISSIONS``オブジェクトは、実際には、常に `` True``を返す `` __contains__``メソッドを持つスタンドインオブジェクトです。既知のすべての認可ポリシーに対して、与えられたプリンシパルが持っていることを示す効果がありますシステムによって要求されたすべての許可。</div></blockquote>
</div>
<div class="section" id="special-aces">
<span id="index-8"></span><h2>特別なACE<a class="headerlink" href="#special-aces" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>便宜上、用語： <cite>ACE`は：data：</cite> pyramid.security.DENY_ALL`のすべてのパーミッションの拒否を表すように定義されています。このACEは、ACLの* last * ACEとして使用され、継承された認可ポリシーが&amp;quot;トラバーサルツリーの検索を中止する&amp;quot;（事実上すべての継承を破棄）するようにしばしば使用されます。例えば、デフォルトの認可ポリシーが有効なときに継承されたACLがどのようなことを言うかもしれないにもかかわらず、特定のリソースに対するビューのアクセス権のみを `` fred``で許可するACLは、次のようになります：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">Allow</span>
<span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">DENY_ALL</span>

<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="n">Allow</span><span class="p">,</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span> <span class="n">DENY_ALL</span> <span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>フードの下では、：data： <cite>pyramid.security.DENY_ALL</cite> ACEは以下のようになります：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.security</span> <span class="kn">import</span> <span class="n">ALL_PERMISSIONS</span>
<span class="n">__acl__</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="n">Deny</span><span class="p">,</span> <span class="n">Everyone</span><span class="p">,</span> <span class="n">ALL_PERMISSIONS</span><span class="p">)</span> <span class="p">]</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="acl-inheritance-and-location-awareness">
<span id="index-9"></span><h2>ACLの継承とロケーション認識<a class="headerlink" href="#acl-inheritance-and-location-awareness" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>default：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>authorization policy`が設定されていますが、リソースオブジェクトがコンテキストのときにACLを持たない場合は、ACLの* parent <em>が参照されます。そのオブジェクトにACLがない場合、ルートに達して親がなくなるまで</em> its * parentはACL、ad infinitumについて調べられます。</p>
<p>セキュリティ機構がACL継承を実行できるようにするには、リソースオブジェクトは* location-awareness <a href="#id1"><span class="problematic" id="id2">*</span></a>を提供する必要があります。 * location-awareness <a href="#id3"><span class="problematic" id="id4">*</span></a>を指定するとは、リソースツリーのルートオブジェクトに `` __name__``属性と `` __parent__``属性が必要です。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="vm">__name__</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">__parent__</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</td></tr></table></div>
<p>`` __parent__``属性と `` __name__``属性を持つオブジェクトは* location-aware <a href="#id1"><span class="problematic" id="id2">*</span></a>と言います。位置認識オブジェクトは親オブジェクトを指す `` __parent__``属性を定義します。ルートオブジェクトの `` __parent__``は `` None``です。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">ロケーション認識を使用する関数のドキュメントについては、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>location_module`も参照してください。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>location_aware`も参照してください。</p>
</div>
</div>
<div class="section" id="changing-the-forbidden-view">
<span id="index-10"></span><h2>禁止されたビューの変更<a class="headerlink" href="#changing-the-forbidden-view" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：app： <cite>Pyramid`が許可拒否のためにビューの呼び出しを拒否したとき、特別な</cite> <cite>禁じられた</cite> <cite>ビューが呼び出されます。箱の外では、この禁止された表示は非常に明白です。ビューの許可が拒否されたときに呼び出されるように、カスタム禁止ビューを作成する方法については、ref： `hooks_chapter`を参照してください：ref：</cite> changing_the_forbidden_​​view`：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>hooks_chapter`を参照してください。</p>
</div>
<div class="section" id="debugging-view-authorization-failures">
<span id="debug-authorization-section"></span><span id="index-11"></span><h2>ビュー認証エラーのデバッグ<a class="headerlink" href="#debugging-view-authorization-failures" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>あなたの判断でアプリケーションがビューのアクセスを不適切に許可または拒否している場合は、 `` PYRAMID_DEBUG_AUTHORIZATION``環境変数を `` 1``に設定してシェルの下でアプリケーションを起動してください。例えば：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ PYRAMID_DEBUG_AUTHORIZATION=1 $VENV/bin/pserve myproject.ini
</pre></div>
</div>
<p>トップレベルのビューレンダリング中に何らかの認可が行われると、認証情報に基づいて認可を許可または拒否されたACEのACEについてコンソール（stderr）にログが記録されます。</p>
<p>この動作は、アプリケーションの設定セクション内で `` pyramid.debug_authorization``キーを `` true``に設定することで、アプリケーションの `` .ini``ファイルで有効にすることもできます。</p>
<div class="highlight-ini notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">[app:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:MyProject</span>
<span class="na">pyramid.debug_authorization</span> <span class="o">=</span> <span class="s">true</span>
</pre></div>
</td></tr></table></div>
<p>このデバッグフラグをオンにすると、ブラウザに送信されるレスポンスにはセキュリティデバッグ情報も含まれます。</p>
</div>
<div class="section" id="debugging-imperative-authorization-failures">
<h2>強制的な認証失敗のデバッグ<a class="headerlink" href="#debugging-imperative-authorization-failures" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：meth： <cite>pyramid.request.Request.has_permission</cite> APIは、ビュー関数内のセキュリティを必須にチェックするために使用されます。実質的にブーリアンであるオブジェクトのインスタンスを返します。しかし、これらのオブジェクトは生の `` True``や <cite>False``オブジェクトではなく、許可が拒否された理由についての情報が添付されています。オブジェクトは、data： `pyramid.security.ACLAllowed</cite>、：data：` pyramid.security.ACLDenied`、：data： <cite>pyramid.security.Allowed</cite>、または：data：` pyramid.security.Denied`のいずれかです。 ：ref： <cite>security_module`に記述されています。最小限でも、これらのオブジェクトは `</cite> msg``属性を持ちます。これは、なぜパーミッションが拒否されたのかを示す文字列です。 ：meth： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.request.Request.has_permission`への呼び出しが失敗したときに、デバッガやprint文でこの情報を調べることはしばしば役に立ちます。</p>
</div>
<div class="section" id="extending-default-authentication-policies">
<span id="index-12"></span><span id="id2"></span><h2>デフォルトの認証ポリシーの拡張<a class="headerlink" href="#extending-default-authentication-policies" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pyramidには、アプリケーションで使用するためのいくつかの認証ポリシーが組み込まれています。利用可能なポリシーについては、mod： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.authentication`を参照してください。要求間で認証資格情報を追跡するメカニズムは異なりますが、アプリケーションとのインターフェイスはほとんど同じです。</p>
<p>あなたの上で学んだ：ref： <cite>assigning_acls</cite>。それぞれ：term： <cite>principal`は：term：</cite> ACL`で使用され、：meth： <cite>pyramid.interfaces.IAuthenticationPolicy.effective_principals`から返されたリストと照合されます。同様に、：meth： `pyramid.request.Request.authenticated_userid`は：meth：</cite> pyramid.interfaces.IAuthenticationPolicy.authenticated_userid`にマップします。</p>
<p>これらの値は、デフォルトの認証ポリシーをサブクラス化することで制御できます。例えば：class： <cite>pyramid.authentication.AuthTktAuthenticationPolicy`をサブクラス化し、クッキーの値を盲目的に信頼することを避けるために：term：</cite> userid`が有効であることを確認する前に、データベースに問い合わせる特別な機能を定義します。クッキーがまだ有効だが、ユーザーがアカウントを削除した場合）次に、その：term： <cite>userid`を使って、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>effective_principals``を、そのユーザのグループや他の状態に関する情報で補強します。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.authentication</span> <span class="kn">import</span> <span class="n">AuthTktAuthenticationPolicy</span>

<span class="k">class</span> <span class="nc">MyAuthenticationPolicy</span><span class="p">(</span><span class="n">AuthTktAuthenticationPolicy</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">authenticated_userid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">userid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unauthenticated_userid</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">userid</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">verify_userid_is_still_valid</span><span class="p">(</span><span class="n">userid</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">userid</span>

    <span class="k">def</span> <span class="nf">effective_principals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">principals</span> <span class="o">=</span> <span class="p">[</span><span class="n">Everyone</span><span class="p">]</span>
        <span class="n">userid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authenticated_userid</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">userid</span><span class="p">:</span>
            <span class="n">principals</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Authenticated</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">userid</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">principals</span>
</pre></div>
</td></tr></table></div>
<p>ほとんどの場合、 `` authenticated_userid``と `` effective_principals``はアプリケーション固有ですが、 `` unauthenticated_userid``、 `` remember``、 `` forget``は一般的であり、連続したリクエスト。</p>
</div>
<div class="section" id="creating-your-own-authentication-policy">
<span id="creating-an-authentication-policy"></span><span id="index-13"></span><h2>独自の認証ポリシーの作成<a class="headerlink" href="#creating-your-own-authentication-policy" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：app： <cite>Pyramid`には、いくつかの便利なセキュリティポリシーが付属しています（mod：</cite> pyramid.authentication`参照）。ただし、ユーザーの認証方法の「水平および垂直」を制御する場合は、独自の認証ポリシーを作成する必要があります。そうすることは、次のインターフェースを実装するもののインスタンスを作成することです。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IAuthenticationPolicy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; An object representing a Pyramid authentication policy. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">authenticated_userid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the authenticated :term:`userid` or ``None`` if</span>
<span class="sd">        no authenticated userid can be found. This method of the</span>
<span class="sd">        policy should ensure that a record exists in whatever</span>
<span class="sd">        persistent store is used related to the user (the user</span>
<span class="sd">        should not have been deleted); if a record associated with</span>
<span class="sd">        the current id does not exist in a persistent store, it</span>
<span class="sd">        should return ``None``.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">unauthenticated_userid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the *unauthenticated* userid.  This method</span>
<span class="sd">        performs the same duty as ``authenticated_userid`` but is</span>
<span class="sd">        permitted to return the userid based only on data present</span>
<span class="sd">        in the request; it needn&#39;t (and shouldn&#39;t) check any</span>
<span class="sd">        persistent store to ensure that the user record related to</span>
<span class="sd">        the request userid exists.</span>

<span class="sd">        This method is intended primarily a helper to assist the</span>
<span class="sd">        ``authenticated_userid`` method in pulling credentials out</span>
<span class="sd">        of the request data, abstracting away the specific headers,</span>
<span class="sd">        query strings, etc that are used to authenticate the request.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">effective_principals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a sequence representing the effective principals</span>
<span class="sd">        typically including the :term:`userid` and any groups belonged</span>
<span class="sd">        to by the current user, always including &#39;system&#39; groups such</span>
<span class="sd">        as ``pyramid.security.Everyone`` and</span>
<span class="sd">        ``pyramid.security.Authenticated``.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">remember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a set of headers suitable for &#39;remembering&#39; the</span>
<span class="sd">        :term:`userid` named ``userid`` when set in a response.  An</span>
<span class="sd">        individual authentication policy and its consumers can</span>
<span class="sd">        decide on the composition and meaning of **kw.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">forget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a set of headers suitable for &#39;forgetting&#39; the</span>
<span class="sd">        current user on subsequent requests.</span>

<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>その後、そのクラスのインスタンスを設定時に：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.config.Configurator.set_authentication_policy`メソッドに渡して使用することができます。</p>
</div>
<div class="section" id="creating-your-own-authorization-policy">
<span id="creating-an-authorization-policy"></span><span id="index-14"></span><h2>独自の認証ポリシーの作成<a class="headerlink" href="#creating-your-own-authorization-policy" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>認可ポリシーは、ユーザーが認証された後にアクセスを許可または拒否するポリシーです。 Most：app： <cite>Pyramid`アプリケーションはデフォルト：class：</cite> pyramid.authorization.ACLAuthorizationPolicy`を使用します。</p>
<p>しかし、場合によっては、デフォルト：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.authorization.ACLAuthorizationPolicy`以外の別の認証ポリシーを使用できるようにすると便利です。例えば、アプリケーションがterm： <a href="#id3"><span class="problematic" id="id4">`</span></a>ACL`オブジェクトに関係しない認証機構を使用することを可能にする代替の認証ポリシーを構築することが望ましいかもしれません。</p>
<p>：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`はデフォルトの認証ポリシーが1つしかないので、別のものを使用するには独自のものを作成する必要があります。独自の認可ポリシーを作成して使用することは、次のインターフェースを実装するオブジェクトのインスタンスを作成することです。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IAuthorizationPolicy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; An object representing a Pyramid authorization policy. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">permits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">principals</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return ``True`` if any of the ``principals`` is allowed the</span>
<span class="sd">        ``permission`` in the current ``context``, else return ``False``</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">principals_allowed_by_permission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a set of principal identifiers allowed by the</span>
<span class="sd">        ``permission`` in ``context``.  This behavior is optional; if you</span>
<span class="sd">        choose to not implement it you should define this method as</span>
<span class="sd">        something which raises a ``NotImplementedError``.  This method</span>
<span class="sd">        will only be called when the</span>
<span class="sd">        ``pyramid.security.principals_allowed_by_permission`` API is</span>
<span class="sd">        used.&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>その後、このクラスのインスタンスを構成時に：class： <a href="#id1"><span class="problematic" id="id2">`</span></a>〜pyramid.config.Configurator.set_authorization_policy`メソッドに渡して使用することができます。</p>
</div>
<div class="section" id="admonishment-against-secret-sharing">
<span id="id3"></span><h2>シークレット・シェアリングに対する警戒<a class="headerlink" href="#admonishment-against-secret-sharing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>&amp;quot;秘密&amp;quot;は、Pyramidのさまざまなコンポーネントによって必要とされます。たとえば、以下の：term： <cite>認証ポリシー`は秘密の値 `</cite> seekrit`` ::を使用します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authn_policy</span> <span class="o">=</span> <span class="n">AuthTktAuthenticationPolicy</span><span class="p">(</span><span class="s1">&#39;seekrit&#39;</span><span class="p">,</span> <span class="n">hashalg</span><span class="o">=</span><span class="s1">&#39;sha512&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>session factory`には秘密が必要です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_session_factory</span> <span class="o">=</span> <span class="n">SignedCookieSessionFactory</span><span class="p">(</span><span class="s1">&#39;itsaseekreet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>複数のPyramidサブシステムに同じ秘密を使用するのは魅力的です。たとえば、上記で定義した認証ポリシーとセッションファクトリの両方の秘密として、 `` seekrit``という値を使うことができます。どちらの場合も、これらの秘密はデータのペイロードに署名するために使用されるため、これは悪い考えです。</p>
<p>署名の目的でアプリケーションの2つの異なる部分に同じ秘密を使用すると、攻撃者が選択した平文を署名することが可能になり、攻撃者がペイロードの内容を制御できるようになります。 2つの異なるサブシステムにわたって秘密を再使用すると、署名のセキュリティがゼロになる可能性があります。鍵は、攻撃者が選択した平文を提供する可能性のある別のコンテキストで再使用しないでください。</p>
</div>
<div class="section" id="preventing-cross-site-request-forgery-attacks">
<span id="index-15"></span><h2>クロスサイトリクエスト偽造攻撃の防止<a class="headerlink" href="#preventing-cross-site-request-forgery-attacks" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a href="#id1"><span class="problematic" id="id2">`</span></a>クロスサイトリクエスト偽造&lt;<a class="reference external" href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">https://en.wikipedia.org/wiki/Cross-site_request_forgery</a>&gt;攻撃は、攻撃者のウェブサイトからリンクされているか、またはウェブサイトに埋め込まれているため、ウェブサイトにログインしているユーザーが誤ってURLを読み込んでしまう現象です。 URLがデータを変更または削除するURLである場合、その結果は致命的となる可能性があります。</p>
<p>これらの攻撃のほとんどは、ブラウザに一意のトークンを発行してから、安全でない可能性があるすべての要求にそのトークンが存在することを要求することで回避できます。 ：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`は、CSRFトークンを作成して確認するための機能を提供します。</p>
<p>デフォルトでは、app： <cite>Pyramid`には、セッションベースのCSRF実装であるclass：</cite> pyramid.csrf.SessionCSRFStoragePolicy`があります。それを使用するには、：ref： <cite>using_the_default_session_factory`または：ref：</cite> using_alternate_session_factories`で説明されているように、まず：term： <cite>session factory`を有効にする必要があります。代わりに、cookieベースの実装を使用することもできます：class： `pyramid.csrf.CookieCSRFStoragePolicy`これは、各ユーザにセッションを必要としないため、いくつかの柔軟性を提供します。独自の：class： `pyramid.interfaces.ICSRFStoragePolicy`の実装を定義し、：meth：</cite> pyramid.config.Configurator.set_csrf_storage_policy`ディレクティブで登録することもできます。</p>
<p>例えば：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_csrf_storage_policy</span><span class="p">(</span><span class="n">MyCustomCSRFPolicy</span><span class="p">())</span>
</pre></div>
</div>
<div class="section" id="using-the-csrf-get-csrf-token-method">
<span id="index-16"></span><h3>`` csrf.get_csrf_token``メソッドの使用<a class="headerlink" href="#using-the-csrf-get-csrf-token-method" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>現在のCSRFトークンを取得するには、：data： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.csrf.get_csrf_token`メソッドを使用します。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.csrf</span> <span class="kn">import</span> <span class="n">get_csrf_token</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">get_csrf_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre></div>
</div>
<p>`` get_csrf_token（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドは単一の引数、つまり要求を受け入れます。 CSRF * token <a href="#id3"><span class="problematic" id="id4">*</span></a>文字列を返します。 `` get_csrf_token（） <a href="#id5"><span class="problematic" id="id6">``</span></a>または `` new_csrf_token（） <a href="#id7"><span class="problematic" id="id8">``</span></a>が以前にこのユーザに対して呼び出された場合、既存のトークンが返されます。以前にこのユーザーに対してCSRFトークンが存在しなかった場合、新しいトークンがセッションに設定され、返されます。新しく作成されたトークンは不透明でランダム化されます。</p>
</div>
<div class="section" id="using-the-get-csrf-token-global-in-templates">
<span id="get-csrf-token-in-templates"></span><h3>テンプレートで `` get_csrf_token``グローバルを使う<a class="headerlink" href="#using-the-get-csrf-token-global-in-templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>テンプレートには、グローバルに挿入された `` get_csrf_token（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドがあり、ビューコードを変更せずに現在のトークンを取得できます。このメソッドは引数を取らず、CSRFトークン文字列を返します。返されたトークンは、昇格された特権を必要とするメソッドに投稿するフォームの隠しフィールドの値として使用することも、AJAX要求の要求ヘッダーとして供給することもできます。</p>
<p>たとえば、CSRFトークンを隠しフィールドとして含めます。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/myview&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;csrf_token&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;${get_csrf_token()}&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Delete Everything&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>または、これをjQuery AJAXリクエストのヘッダーとしてインクルードします。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">csrfToken</span> <span class="o">=</span> <span class="s2">&quot;${get_csrf_token()}&quot;</span><span class="p">;</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/myview&quot;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;X-CSRF-Token&#39;</span><span class="o">:</span> <span class="nx">csrfToken</span> <span class="p">}</span>
<span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Deleted&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>要求を受け取るURLのハンドラは、正しいCSRFトークンが供給されることを要求する必要があります。</p>
</div>
<div class="section" id="using-the-csrf-new-csrf-token-method">
<span id="index-17"></span><h3>`` csrf.new_csrf_token``メソッドの使用<a class="headerlink" href="#using-the-csrf-new-csrf-token-method" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>明示的に新しいCSRFトークンを作成するには、 `` csrf.new_csrf_token（） <a href="#id1"><span class="problematic" id="id2">``</span></a>メソッドを使用します。これは、既存のCSRFトークンをクリアし、新しいCSRFトークンを作成し、トークンをユーザに設定し、トークンを返すだけで、 `` csrf.get_csrf_token（） <a href="#id3"><span class="problematic" id="id4">``</span></a>とだけ異なります。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.csrf</span> <span class="kn">import</span> <span class="n">new_csrf_token</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">new_csrf_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">テンプレートから新しいCSRFトークンを強制することはできません。 CSRFトークンを再生成する場合は、ビューコードでそれを行い、新しいトークンをコンテキストの一部として返します。</p>
</div>
</div>
<div class="section" id="checking-csrf-tokens-manually">
<h3>CSRFトークンを手動で確認する<a class="headerlink" href="#checking-csrf-tokens-manually" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>リクエスト処理コードでは、：func： <cite>pyramid.csrf.check_csrf_token`を使用して、CSRFトークンの存在と有効性をチェックできます。トークンが有効であれば `</cite> True``を返し、そうでなければ `` HTTPBadRequest``を送出します。オプションで、 `` raises = False``を指定すると、例外を発生させる代わりにチェックが `` False``を返すようにすることができます。</p>
<p>デフォルトでは、 `` csrf_token``という名前のPOSTパラメータか `` X-CSRF-Token``というヘッダがあるかどうかを調べます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.csrf</span> <span class="kn">import</span> <span class="n">check_csrf_token</span>

<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1"># Require CSRF Token</span>
    <span class="n">check_csrf_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-csrf-tokens-automatically">
<span id="auto-csrf-checking"></span><h3>CSRFトークンの自動確認<a class="headerlink" href="#checking-csrf-tokens-automatically" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">バージョン 1.7 で追加.</span></p>
</div>
<p>：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`は、RFC2616で定義されているような安全でないメソッドで、CSRFトークンを自動的にチェックします。他の要求は手動でチェックすることができます。この機能は、：meth： <a href="#id3"><span class="problematic" id="id4">`</span></a>pyramid.config.Configurator.set_default_csrf_options`指示文を使用してアプリケーションに対してグローバルにオンにすることができます。例えば：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_default_csrf_options</span><span class="p">(</span><span class="n">require_csrf</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>CSRF検査は、 `` require_csrf``ビューオプションを使用してビュー単位で明示的に有効または無効にすることができます。 `` True``または `` False``の値は、 `` set_default_csrf_options``で設定されたデフォルトを上書きします。例えば：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">require_csrf</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>CSRFチェックがアクティブな場合、 `` set_default_csrf_options``によってオーバーライドされない限り、提供されたCSRFトークンを見つけるために使用されるトークンとヘッダは、それぞれ `` csrf_token``と `` X-CSRF-Token``です。トークンは、送信されたフォーム本体である `` request.POST``の値と照合されます。この値が存在しない場合、ヘッダーがチェックされます。</p>
<p>トークンベースのCSRFチェックに加えて、リクエストがHTTPSを使用している場合、自動CSRFチェックはリクエストのリファラーをチェックして、信頼できる発信元の1つに一致することを確認します。デフォルトでは、信頼できる唯一の原点は現在のホストですが、 `` pyramid.csrf_trusted_origins``をドメイン名のリスト（およびそれらが非標準の場合はポート）に設定することによって、追加の起点を設定することができます。ドメインのリストのホストが `` .``で始まっている場合、 `` .``のないドメインと同様に、すべてのサブドメインが許可されます。</p>
<p>CSRFチェックが失敗した場合、class： <cite>pyramid.exceptions.BadCSRFToken`または：class：</cite> pyramid.exceptions.BadCSRFOrigin`例外が送出されます。この例外は：term： <cite>exception view`によって捕捉され、処理されるかもしれませんが、デフォルトでは、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>400 Bad Request``応答がクライアントに送られます。</p>
</div>
<div class="section" id="checking-csrf-tokens-with-a-view-predicate">
<h3>ビュー・プレディケートによるCSRFトークンのチェック<a class="headerlink" href="#checking-csrf-tokens-with-a-view-predicate" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="deprecated">
<p><span class="versionmodified">バージョン 1.7 で撤廃: </span>`` require_csrf``オプションを使うか、：ref： <cite>auto_csrf_checking`を読んで：class：</cite> pyramid.exceptions.BadCSRFToken`例外を発生させてください。</p>
</div>
<p>特定のビューに対して有効なCSRFトークンを要求する便利な方法は、ビューの述語として `` check_csrf = True``を含めることです。参照：meth： <cite>pyramid.config.Configurator.add_view</cite>。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@view_config</span><span class="p">(</span><span class="n">request_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">check_csrf</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">CSRFトークンの不一致は、他の述語ミスのように扱われ、ビューを見つけられない場合、述語システムは `` HTTPBadRequest``の代わりに `` HTTPNotFound``を発生させるので、 `` check_csrf = True``振る舞いは：func： <a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid.csrf.check_csrf_token`とは異なります。</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(機械翻訳) セキュリティ</a><ul>
<li><a class="reference internal" href="#enabling-an-authorization-policy">承認ポリシーの有効化</a><ul>
<li><a class="reference internal" href="#enabling-an-authorization-policy-imperatively">権限付きポリシーを必然的に有効にする</a></li>
</ul>
</li>
<li><a class="reference internal" href="#protecting-views-with-permissions">アクセス権によるビューの保護</a><ul>
<li><a class="reference internal" href="#setting-a-default-permission">既定のアクセス許可の設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#assigning-acls-to-your-resource-objects">リソースオブジェクトへのACLの割り当て</a></li>
<li><a class="reference internal" href="#elements-of-an-acl">ACLの要素</a></li>
<li><a class="reference internal" href="#special-principal-names">特別なプリンシパル名</a></li>
<li><a class="reference internal" href="#special-permissions">特別な許可</a></li>
<li><a class="reference internal" href="#special-aces">特別なACE</a></li>
<li><a class="reference internal" href="#acl-inheritance-and-location-awareness">ACLの継承とロケーション認識</a></li>
<li><a class="reference internal" href="#changing-the-forbidden-view">禁止されたビューの変更</a></li>
<li><a class="reference internal" href="#debugging-view-authorization-failures">ビュー認証エラーのデバッグ</a></li>
<li><a class="reference internal" href="#debugging-imperative-authorization-failures">強制的な認証失敗のデバッグ</a></li>
<li><a class="reference internal" href="#extending-default-authentication-policies">デフォルトの認証ポリシーの拡張</a></li>
<li><a class="reference internal" href="#creating-your-own-authentication-policy">独自の認証ポリシーの作成</a></li>
<li><a class="reference internal" href="#creating-your-own-authorization-policy">独自の認証ポリシーの作成</a></li>
<li><a class="reference internal" href="#admonishment-against-secret-sharing">シークレット・シェアリングに対する警戒</a></li>
<li><a class="reference internal" href="#preventing-cross-site-request-forgery-attacks">クロスサイトリクエスト偽造攻撃の防止</a><ul>
<li><a class="reference internal" href="#using-the-csrf-get-csrf-token-method">`` csrf.get_csrf_token``メソッドの使用</a></li>
<li><a class="reference internal" href="#using-the-get-csrf-token-global-in-templates">テンプレートで `` get_csrf_token``グローバルを使う</a></li>
<li><a class="reference internal" href="#using-the-csrf-new-csrf-token-method">`` csrf.new_csrf_token``メソッドの使用</a></li>
<li><a class="reference internal" href="#checking-csrf-tokens-manually">CSRFトークンを手動で確認する</a></li>
<li><a class="reference internal" href="#checking-csrf-tokens-automatically">CSRFトークンの自動確認</a></li>
<li><a class="reference internal" href="#checking-csrf-tokens-with-a-view-predicate">ビュー・プレディケートによるCSRFトークンのチェック</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="traversal.html"
                        title="前の章へ">(機械翻訳) トラバーサル</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="hybrid.html"
                        title="次の章へ">(機械翻訳) トラバーサルとURLディスパッチの組み合わせ</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/narr/security.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="hybrid.html" title="(機械翻訳) トラバーサルとURLディスパッチの組み合わせ"
             >次へ</a> |</li>
        <li class="right" >
          <a href="traversal.html" title="(機械翻訳) トラバーサル"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 11月 03, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>