
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>(機械翻訳) Pyramid プロジェクトの作成 &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="(機械翻訳) 起動" href="startup.html" />
    <link rel="prev" title="(機械翻訳) アプリケーション構成" href="configuration.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../index.html">
      		<img class="logo" src="../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="startup.html" title="(機械翻訳) 起動"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="(機械翻訳) アプリケーション構成"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="creating-a-pyramid-project">
<span id="project-narr"></span><h1>(機械翻訳) <span>Pyramid</span> プロジェクトの作成<a class="headerlink" href="#creating-a-pyramid-project" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>：ref： <cite>firstapp_chapter`で見たように、：app：</cite> Pyramid`アプリケーションを完全に手動で作成することは可能です。しかし、通常、：term： <cite>cookiecutter`を使ってbasic：app：</cite> Pyramid`：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>project`を生成する方が便利です。</p>
<p>プロジェクトは少なくとも一つのPython：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>package`を含むディレクトリです。 cookiecutterを使用してプロジェクトを作成すると、プロジェクト内に存在するパッケージ内にアプリケーションロジックを作成します。アプリケーションが非常にシンプルであっても、（1）パッケージが新しいコードでより簡単に拡張され、（2）パッケージ内に存在するアプリケーションがパッケージ内に存在しないものよりも容易に配布されます。</p>
<p>Pylonsプロジェクトには、プロジェクトを生成するために使用できるいくつかの：app： <cite>Pyramid</cite> cookiecuttersがあります。各CookiCutterは、構築しようとしているアプリケーションのタイプについて、さまざまな設定を前提にしています。</p>
<p>これらのcookiecuttersは、あなたがインストールできる `` cookiecutter``コマンドを使ってレンダリングされます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last"><a href="#id1"><span class="problematic" id="id2">`</span></a>Cookiecutterのインストール&lt;<a class="reference external" href="https://cookiecutter.readthedocs.io/en/latest/installation.html">https://cookiecutter.readthedocs.io/en/latest/installation.html</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>_。</p>
</div>
<div class="section" id="pyramid-cookiecutters">
<span id="additional-cookiecutters"></span><span id="index-0"></span><h2>：app： <cite>Pyramid</cite> cookiecutters<a class="headerlink" href="#pyramid-cookiecutters" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pylonsプロジェクトの下でリリースされたピラミッドのcookiecuttersは、いくつかの軸でお互いに異なる：</p>
<ul class="simple">
<li>彼らが提供する永続化機構（永続化機構なし、term：SQLiteで <cite>SQLAlchemy</cite>、：term：` ZODB`）</li>
<li>URLをコードにマッピングするためのメカニズム（：term： <cite>URL dispatch`または：term：</cite> traversal`）</li>
<li>テンプレートライブラリ（：term： <cite>Jinja2</cite>、：term：` Chameleon`、または：term： <cite>Mako</cite>）</li>
</ul>
<ul class="simple">
<li><a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid-cookiecutter-starter &lt;<a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-starter">https://github.com/Pylons/pyramid-cookiecutter-starter</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>_</li>
<li><a href="#id1"><span class="problematic" id="id2">`</span></a>ピラミッド - クッキーカッター - 錬金術&lt;<a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-alchemy">https://github.com/Pylons/pyramid-cookiecutter-alchemy</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>_</li>
<li><a href="#id1"><span class="problematic" id="id2">`</span></a>pyramid-cookiecutter-zodb &lt;<a class="reference external" href="https://github.com/Pylons/pyramid-cookiecutter-zodb">https://github.com/Pylons/pyramid-cookiecutter-zodb</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>_</li>
</ul>
<p>これらのcookiecuttersには次のものがあります。</p>
<dl class="docutils">
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>ピラミッド - クッキーカッター - スターター ``</dt>
<dd>：term： <cite>Jinja2</cite>、：term：` Chameleon`、または：term：テンプレート用 `` Mako`：ルーティングのためのterm： <cite>URL dispatch</cite></dd>
<dt><a href="#id1"><span class="problematic" id="id2">``</span></a>ピラミッド - クッキーカッター - 錬金術 ``</dt>
<dd>永続ストレージのためのSQLite：term：ORMの場合は <cite>SQLAlchemy</cite>、ルーティングの場合はterm：` URL dispatch`、テンプレート化の場合は：term： <cite>Jinja2</cite>。</dd>
<dt>`` pyramid-cookiecutter-zodb``</dt>
<dd>：term：永続的なストレージのための <cite>ZODB</cite>、：term：ルーティングのための` traversal`、および：term：テンプレート化のための <cite>Chameleon</cite></dd>
</dl>
</div>
<div class="section" id="creating-the-project">
<span id="creating-a-project"></span><span id="index-1"></span><h2>プロジェクトの作成<a class="headerlink" href="#creating-the-project" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>：ref： <cite>installing_chapter`では、</cite> <cite>venv``コマンドで仮想的なPython環境を作成しました。仮想環境ディレクトリ `</cite> env``を呼び出し、環境変数 `` VENV``をそのパスに設定しました。</p>
<p>私たちは次のように仮定します：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>以前にインストールされたcookiecutter &lt;cookiecutters&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>をインストールの指示に従ってインストールします。</p>
<p>プロジェクトを開始するには `` pyramid-cookiecutter-starter``を選択します。 `` cookiecutter``を呼び出すと、プロジェクトを表すディレクトリが作成されます。</p>
<p>現在の作業ディレクトリは `` VENV``の値​​であると仮定します。</p>
<p>すべてのプラットフォームで、cookiecutterを使用してプロジェクトを生成します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cookiecutter gh:Pylons/pyramid-cookiecutter-starter --checkout <span class="m">1</span>.9-branch
</pre></div>
</div>
<p>最初の項目の入力を求められたら、returnキーを押してデフォルトの `` yes``を受け入れます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>You&#39;ve cloned ~/.cookiecutters/pyramid-cookiecutter-starter before.
Is it okay to delete and re-clone it? [yes]: yes
project_name [Pyramid Scaffold]: myproject
repo_name [myproject]: myproject
Select template_language:
1 - jinja2
2 - chameleon
3 - mako
Choose from 1, 2, 3 [1]: 1
</pre></div>
</div>
<p>次に、次のコマンドを実行します。</p>
<p>UNIXの場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reset our environment variable for a new virtual environment.</span>
$ <span class="nb">export</span> <span class="nv">VENV</span><span class="o">=</span>~/env/myproject/env
<span class="c1"># Change directory into your newly created project.</span>
$ <span class="nb">cd</span> myproject
<span class="c1"># Create a new virtual environment...</span>
$ python3 -m venv <span class="nv">$VENV</span>
<span class="c1"># ...where we upgrade packaging tools.</span>
$ env/bin/pip install --upgrade pip setuptools
</pre></div>
</div>
<p>またはWindowsの場合：</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="go"># Reset our environment variable for a new virtual environment.</span>
<span class="gp">c:\&gt;</span> <span class="k">set</span> <span class="nv">VENV</span><span class="p">=</span>c:\env\myproject\env
<span class="go"># Change directory into your newly created project.</span>
<span class="gp">c:\&gt;</span> <span class="k">cd</span> myproject
<span class="go"># Create a new virtual environment...</span>
<span class="gp">c:\myproject&gt;</span> python -m venv <span class="nv">%VENV%</span>
<span class="go"># ...where we upgrade packaging tools.</span>
<span class="gp">c:\myproject&gt;</span> <span class="nv">%VENV%</span>\Scripts\pip install --upgrade pip setuptools
</pre></div>
</div>
<p>`` cookiecutter``コマンドを実行すると、 `` myproject``という名前のディレクトリが作成されます。そのディレクトリは：term： <cite>project`ディレクトリです。そのディレクトリにある `</cite> setup.py``ファイルは、アプリケーションを配布したり、展開や開発のためにアプリケーションをインストールしたりするために使用できます。</p>
<p>`` .ini``という名前の `` .ini``ファイルがプロジェクトディレクトリに作成されます。この `` .ini``ファイルを使用して、サーバの設定、アプリケーションの実行、アプリケーションのデバッグを行います。インタラクティブなデバッガと開発用に最適化された設定を可能にする設定が含まれています。</p>
<p>`` production.ini``という別の `` .ini``ファイルもプロジェクトディレクトリに作成されます。これには、（不適切なアクセスと開示を防ぐための）対話型デバッガを無効にし、多くのデバッグ設定を無効にする構成が含まれています。このファイルを使用すると、アプリケーションを本番環境に置くことができます。</p>
<p>`` myproject``プロジェクトディレクトリには、非常に単純な：app： <cite>Pyramid`サンプルコードを保持するPython：term：</cite> package`を表す `` myproject``という別のサブディレクトリがあります（ケースの違いに注意してください）。ここで、アプリケーションのPythonコードとテンプレートを編集します。</p>
<p>このプロジェクトは、仮想環境ディレクトリの隣のディレクトリに作成しました。ただし、これは必須ではありません。プロジェクトディレクトリは、ファイルシステムのどこにでも置くことができます。特殊な&amp;quot;web server &amp;quot;ディレクトリに置く必要はありません。あなたは仮想環境ディレクトリ内に置くことができます。作者は主にLinuxを使い、 <a href="#id1"><span class="problematic" id="id2">``</span></a>〜/ projects``ディレクトリ内に作成したプロジェクトディレクトリを置く傾向があります。 Windowsでは、プロジェクトディレクトリを空白文字が含まれていないディレクトリに置くことをお勧めします。そのため、含まれているパス、つまり「マイドキュメント」を回避することが賢明です。結果として、作者はWindowsを使うときには、自分のプロジェクトを `` C：projects``に置くだけです。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">Pythonの標準ライブラリコンポーネントと同じ名前のプロジェクトを作成するには、 `` cookiecutter``を使わないでください。特に、これは `` site``や `` test``という名前を使わないでください。両方ともPythonの標準ライブラリパッケージと矛盾します。また、ピラミッドそのものと衝突する名前の「ピラミッド」を使わないでください。</p>
</div>
</div>
<div class="section" id="installing-your-newly-created-project-for-development">
<span id="index-2"></span><h2>新しく開発されたプロジェクトをインストールする<a class="headerlink" href="#installing-your-newly-created-project-for-development" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発のために新しく作成したプロジェクトをインストールするには、新しく作成したプロジェクトディレクトリに `` cd``を実行し、ref： <cite>installing_chapter`の中で作成したterm：</cite> virtual environment`のPythonインタプリタを使用して ` <cite>pip install -e .``は、現在のディレクトリ（</cite> <cite>.`</cite>）に開発モード（` <a href="#id1"><span class="problematic" id="id2">`</span></a>-e``は&amp;quot;編集可能&amp;quot;用）でプロジェクトをインストールします。</p>
<p>`` setup.py``という名前のファイルはcookiecutter生成のプロジェクトディレクトリのルートにあります。あなたが呼び出す `` python``は、あなたの仮想Python環境の `` bin``（または `` Scripts``）ディレクトリにあるものでなければなりません。あなたの端末の現在の作業ディレクトリ*は新しく作成されたプロジェクトディレクトリでなければなりません。</p>
<p>UNIXの場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/pip install -e .
</pre></div>
</div>
<p>またはWindowsの場合：</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">c:\env\myproject&gt;</span> <span class="nv">%VENV%</span>\Scripts\pip install -e .
</pre></div>
</div>
<p>UNIXでこのコマンドを実行したときに出力されなかったものを以下に示します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  Running setup.py develop <span class="k">for</span> myproject
Successfully installed Jinja2-2.8 Mako-1.0.6 MarkupSafe-0.23 <span class="se">\</span>
PasteDeploy-1.5.2 Pygments-2.1.3 WebOb-1.7.0 myproject pyramid-1.7.3 <span class="se">\</span>
pyramid-debugtoolbar-3.0.5 pyramid-jinja2-2.7 pyramid-mako-1.0.2 <span class="se">\</span>
repoze.lru-0.6 translationstring-1.3 venusian-1.0 waitress-1.0.1 <span class="se">\</span>
zope.deprecation-4.2.0 zope.interface-4.3.3
</pre></div>
</div>
<p>これは仮想環境インタプリタのライブラリセットにプロジェクトを表す：term： <cite>distribution`をインストールし、</cite> <cite>import``文や</cite> <cite>pserve`</cite>、` <cite>pshell``などの他のコンソールスクリプトで見つけることができます、 `</cite> proutes``、 `` pviews``などがあります。</p>
</div>
<div class="section" id="running-the-tests-for-your-application">
<span id="index-3"></span><h2>アプリケーションのテストの実行<a class="headerlink" href="#running-the-tests-for-your-application" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>アプリケーションの単体テストを実行するには、まずテストの依存関係をインストールする必要があります。</p>
<p>UNIXの場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/pip install -e <span class="s2">&quot;.[testing]&quot;</span>
</pre></div>
</div>
<p>Windowsの場合：</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">c:\env\myproject&gt;</span> <span class="nv">%VENV%</span>\Scripts\pip install -e <span class="s2">&quot;.[testing]&quot;</span>
</pre></div>
</div>
<p>テスト要件がインストールされたら、あなたの仮想環境の `` bin``ディレクトリにインストールされた `` py.test``コマンドを使ってテストを実行することができます。</p>
<p>UNIXの場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/py.test -q
</pre></div>
</div>
<p>Windowsの場合：</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">c:\env\myproject&gt;</span> <span class="nv">%VENV%</span>\Scripts\py.test -q
</pre></div>
</div>
<p>次に、UNIXでのテスト実行の出力例を示します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/py.test -q
..
<span class="m">2</span> passed in <span class="m">0</span>.47 seconds
</pre></div>
</div>
<p>テスト自体は `` cookiecutter``生成プロジェクトの `` tests.py``モジュールにあります。 `` pyramid-cookiecutter-starter`` cookiecutterによって生成されたプロジェクトでは、2つのサンプルテストしか存在しません。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">`` -q``オプションは `` py.test``コマンドに渡され、出力をドットのストリームに制限します。 `` -q``を渡さないと、冗長なテスト結果出力が表示されます（通常はそれほど役に立ちません）。</p>
</div>
<p>あるいは、テストカバレッジを表示する場合は、 `` --cov``オプションを `` py.test``に渡します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/py.test --cov -q
</pre></div>
</div>
<p>Cookiecuttersには、 `` py.test``とテストカバレッジのデフォルト設定が含まれています。これらの設定ファイルはパッケージのルートにある `` pytest.ini``と `` .coveragerc``です。これらのデフォルトがなければ、テストとカバレッジを実行するモジュールへのパスを指定する必要があります。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/py.test --cov<span class="o">=</span>myproject myproject/tests.py -q
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <cite>pytest：usage`のpy.testのドキュメントを参照するか、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>py.test -h``を呼び出してその完全なオプションセットを見てください。</p>
</div>
</div>
<div class="section" id="running-the-project-application">
<span id="index-4"></span><span id="id1"></span><h2>プロジェクトアプリケーションの実行<a class="headerlink" href="#running-the-project-application" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>pserve --helpの出力も参照してください。 &lt;pserve_script&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>。</p>
</div>
<p>プロジェクトを開発用にインストールしたら、生成された設定ファイルに対して `` pserve``コマンドを使って表すアプリケーションを実行できます。私たちの場合、このファイルの名前は `` development.ini``です。</p>
<p>UNIXの場合：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/pserve development.ini
</pre></div>
</div>
<p>Windowsの場合：</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">c:\env\myproject&gt;</span> <span class="nv">%VENV%</span>\Scripts\pserve development.ini
</pre></div>
</div>
<p>UNIXでの `` pserve``の実行結果のサンプルを以下に示します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">$VENV</span>/bin/pserve development.ini
Starting server in PID <span class="m">77171</span>.
Serving on http://localhost:6543
Serving on http://localhost:6543
</pre></div>
</div>
<p>Pyramidと同じマシン上で動作するブラウザのみがPyramidアプリケーションにアクセスできるようにアクセスが制限されています。しかし、同じネットワーク上の他のマシンへのアクセスを開きたい場合は、 `` development.ini``ファイルを編集し、 `` [server：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションの `` listen``値を置き換えてください。 `` localhost：6543``から `` <a href="#id3"><span class="problematic" id="id4">*</span></a>：6543``に変更します（これは `` 0.0.0.0:6543 [::]：6543``と同じです）。例えば：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[server:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:waitress#main</span>
<span class="na">listen</span> <span class="o">=</span> <span class="s">*:6543</span>
</pre></div>
</div>
<p>これで、アプリケーションを起動するために `` pserve``を使うと、 `` localhost``へのリクエストだけでなく、あなたのシステムが所有するすべての* IPアドレスに対するリクエストに応答します。これは `` http：//0.0.0.0：6543で提供する `` 0.0.0.0``を意味します。サーバは `` 127.0.0.1``と任意の外部IPアドレスに対する要求に応答します。たとえば、システムが外部IPアドレス「192.168.1.50」を持つように設定されている可能性があります。そうであれば、Pyramidと同じシステム上で動作しているブラウザを使うと、 `` http：//127.0.0.1：6543 / <a href="#id1"><span class="problematic" id="id2">``</span></a>と `` http： /192.168.1.50：6543 / <a href="#id3"><span class="problematic" id="id4">``</span></a>しかし、同じネットワーク上の他のコンピュータの*他の人も、http：//192.168.1.50：6543 / <a href="#id5"><span class="problematic" id="id6">``</span></a>にアクセスして、ブラウザのPyramidアプリケーションにアクセスすることができます。 IPv6を使用している場合も同様です。 `` [::] <a href="#id7"><span class="problematic" id="id8">``</span></a>は `` 0.0.0.0``と同じですが、IPv6プロトコルの場合と同じです。</p>
<p>`` development.ini``ファイルの同じ部分を変更することで、サーバが動作するポートを変更することができます。たとえば、 `` development.ini``ファイルの `` [server：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションを `` listen = localhost：8080``に変更すると、 `` listen = localhost：ポート6543の代わりにポート8080に接続します。</p>
<p>`` Ctrl-C``（またはWindowsでは `` Ctrl-Break``）を押すことで、このように起動したサーバをシャットダウンすることができます。</p>
<p>プロジェクトがcookiecutterから作成されたときにPyramidアプリケーションを実行するために使用されるデフォルトのサーバーの名前はterm： <cite>Waitress`です。このサーバは `</cite> pserve``を実行するときに `` Serving on ... <a href="#id1"><span class="problematic" id="id2">``</span></a>行を表示します。これは非常に簡単なので、開発中にこのサーバーを使用することをお勧めします。軽量生産にも使用できます。アプリケーションを別のサーバーの下に置くことは、特にPython Web開発にまだ慣れていない場合には、デフォルトサーバーで開発作業を行うまではお勧めしません。 Python Webサーバーの設定は複雑になる可能性があります。アプリケーションをデフォルト環境で動作させる前に、アプリケーションを最適化しようとするか、「生産のように」するという確信を得てください。実際に開発を始めることなく、何時間もデフォルト以外のサーバーを設定しようとしたら、横行することは非常に簡単です。 Python Webサーバーに関する優れた点の1つは、互換性がほとんどないため、アプリケーションがデフォルトのサーバーで動作する場合、最終的に別のサーバーを使用するように選択すると、他のサーバー上で動作することがほぼ確実になります。今は心配しないでください。</p>
<p>起動プロセスの詳細については、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>startup_chapter`を参照してください。起動と実行時の動作に影響する環境変数と設定ファイルの設定の詳細については、：ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>environment_chapter`を参照してください。</p>
<div class="section" id="reloading-code">
<span id="id2"></span><h3>コードのリロード<a class="headerlink" href="#reloading-code" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>開発中、 `` --reload``オプションを使って `` pserve``を実行すると便利なことがよくあります。 `` --reload``が `` pserve``に渡されると、あなたのプロジェクトが使用するPythonモジュールの変更により、サーバが再起動します。これは、一般的には、：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`アプリケーション内で作られたPythonコードの変更が、サーバが再起動されるまで有効にならないため、開発が容易になります。</p>
<p>たとえば、UNIXの場合：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/pserve development.ini --reload
Starting subprocess with file monitor
Starting server in PID 16601.
Serving on http://localhost:6543
Serving on http://localhost:6543
</pre></div>
</div>
<p>プロジェクトの `` .py``ファイルや `` .ini``ファイルのいずれかを変更すると、自動的にサーバが再起動します：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>development.ini changed; reloading...
-------------------- Restarting --------------------
Starting server in PID 16602.
Serving on http://localhost:6543
Serving on http://localhost:6543
</pre></div>
</div>
<p>テンプレートファイル（ `` .pt`や `` .mak``ファイルなど）を変更しても、サーバは再起動しません。テンプレートファイルの変更は、 `` development.ini``ファイルの `` pyramid.reload_templates``の設定が `` true``である限り、サーバを再起動する必要はありません。この設定が `` true``のときにテンプレートファイルに加えられた変更は、サーバを再起動しなくてもすぐに有効になります。</p>
</div>
</div>
<div class="section" id="viewing-the-application">
<span id="index-5"></span><h2>アプリケーションの表示<a class="headerlink" href="#viewing-the-application" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>アプリケーションが `` pserve``で実行されると、あなたのブラウザの `` http：// localhost：6543 / <a href="#id1"><span class="problematic" id="id2">``</span></a>にアクセスすることができます。次の画像に表示されているようなものがブラウザに表示されます。</p>
<img alt="../_images/project.png" src="../_images/project.png" />
<p>これは、ブラウザで修正された `` cookiecutter``の `` pyramid-cookiecutter-starter``アプリケーションを訪れたときにデフォルトで表示されるページです。</p>
<div class="section" id="the-debug-toolbar">
<span id="debug-toolbar"></span><span id="index-6"></span><h3>デバッグツールバー<a class="headerlink" href="#the-debug-toolbar" title="このヘッドラインへのパーマリンク">¶</a></h3>
<img alt="../_images/project-show-toolbar.png" src="../_images/project-show-toolbar.png" />
<p>ページの右上に：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`ロゴをクリックすると、新しいターゲットウィンドウが開き、開発中にさまざまな細かい点を提供するデバッグツールバーが表示されます。このロゴは、アプリケーション開発中に：app： <a href="#id3"><span class="problematic" id="id4">`</span></a>Pyramid`によって提供されるすべてのHTMLページの上に浮動表示され、必要に応じてツールバーを表示することができます。</p>
<img alt="../_images/project-debug.png" src="../_images/project-debug.png" />
<p>ページの右上にピラミッドのロゴが表示されない場合は、デバッグアクセスのないシステムからブラウズしていることを意味します。デフォルトでは、セキュリティ上の理由から、 `` localhost``（ `` 127.0.0.1``）に由来するブラウザだけがデバッグツールバーを見ることができます。リモートシステム上のブラウザがサーバにアクセスできるようにするには、 `` development.ini``ファイルの `` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションに `` debugtoolbar.hosts = X .XXX <a href="#id3"><span class="problematic" id="id4">``</span></a>。たとえば、あなたのPyramidアプリケーションがリモートシステム上で動作していて、IPアドレスが `` 192.168.1.1``のホストからブラウズしている場合は、システムがピラミッドに接続しているときにツールバーを有効にするために、 ：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[app:main]</span>
<span class="c1"># .. other settings ...</span>
<span class="na">debugtoolbar.hosts</span> <span class="o">=</span> <span class="s">192.168.1.1</span>
</pre></div>
</div>
<p>デバッグツールバーでできることの詳細については、pyramid_debugtoolbarの：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>ドキュメントを参照してください。 &lt;toolbar:overview&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>。</p>
<p>アプリケーションを実行するために `` development.ini`` iniファイルの代わりに `` production.ini``ファイルを使用すると、デバッグツールバーは表示されません（また、すべてのデバッグはオフになります）。</p>
<p>`` development.ini``を編集して行をコメントアウトすることで、デバッグツールバーをオフにすることもできます。たとえば、次の代わりに：</p>
<div class="highlight-ini notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">[app:main]</span>
<span class="c1"># ... elided configuration</span>
<span class="na">pyramid.includes</span> <span class="o">=</span><span class="s"></span>
<span class="s">    pyramid_debugtoolbar</span>
</pre></div>
</td></tr></table></div>
<p>`` pyramid_debugtoolbar``行の先頭にハッシュマークをつけます：</p>
<div class="highlight-ini notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">[app:main]</span>
<span class="c1"># ... elided configuration</span>
<span class="na">pyramid.includes</span> <span class="o">=</span>
<span class="c1">#    pyramid_debugtoolbar</span>
</pre></div>
</td></tr></table></div>
<p>次に、アプリケーションを再起動して、ツールバーがオフになっていることを確認します。</p>
<p>`` pyramid_debugtoolbar``行をコメントアウトすると、 <a href="#id1"><span class="problematic" id="id2">``</span></a>＃ `` <a href="#id3"><span class="problematic" id="id4">*</span></a>は最初の列になければなりません。他の場所に置いて、アプリケーションを再起動しようとすると、次のようなエラーが返されます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ImportError: No module named #pyramid_debugtoolbar
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-project-structure">
<span id="index-7"></span><h2>プロジェクトの構造<a class="headerlink" href="#the-project-structure" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>`` pyramid-cookiecutter-starter`` cookiecutterは、：term： <cite>project`（</cite> <cite>myproject``という名前）を生成しました。これはPython：term：</cite> package`を含みます。パッケージは `` myproject``とも呼ばれます。 cookiecutterは、その名前を共有するパッケージを含むプロジェクトを生成します。</p>
<p>All：app： <cite>Pyramid</cite> `` cookiecutter``で生成されたプロジェクトは、同様の構造を共有しています。生成された `` myproject``プロジェクトは以下のディレクトリ構造を持っています：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>myproject/
├── .coveragerc
├── CHANGES.txt
├── MANIFEST.in
├── myproject
│   ├── __init__.py
│   ├── static
│   │   ├── pyramid-16x16.png
│   │   ├── pyramid.png
│   │   └── theme.css
│   ├── templates
│   │   ├── layout.jinja2
│   │   └── mytemplate.jinja2
│   ├── tests.py
│   └── views.py
├── README.txt
├── development.ini
├── production.ini
├── pytest.ini
└── setup.py
</pre></div>
</div>
</div>
<div class="section" id="the-myproject-project">
<h2>`` myproject``：term： <cite>Project</cite><a class="headerlink" href="#the-myproject-project" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>`` myproject``：term： <cite>project`ディレクトリは、あなたのアプリケーションの配布と展開ラッパーです。これはアプリケーションを表す `</cite> myproject`：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>package`とアプリケーションの記述、実行、テストに使用されるファイルの両方を含みます。</p>
<ol class="arabic simple">
<li>`` .coveragerc``はテストを実行するときにカバレッジを設定します。</li>
<li>`` CHANGES.txt``はあなたがアプリケーションに加えた変更を記述します。これは通常：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>reStructuredText`形式で書かれています。</li>
<li>`` MANIFEST.in``は：term： <cite>distutils</cite> &amp;quot;マニフェスト&amp;quot;ファイルで、` <a href="#id1"><span class="problematic" id="id2">`</span></a>python setup.py sdist``が実行されたときにパッケージのソース配布物に含まれるファイル名を指定します。</li>
<li>`` README.txt``は一般的なアプリケーションを記述します。これは通常：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>reStructuredText`形式で書かれています。</li>
<li>`` development.ini``は、開発中にアプリケーションを実行するために使用できる：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>PasteDeploy`設定ファイルです。</li>
<li>`` production.ini``は、プロダクション設定でアプリケーションを実行するために使用できる：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>PasteDeploy`設定ファイルです。</li>
<li>`` pytest.ini``はテストを実行するための設定ファイルです。</li>
<li>`` setup.py``は、アプリケーションのテストと配布に使用するファイルです。 term： <cite>setuptools`</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>setup.py``ファイルです。</li>
</ol>
<div class="section" id="development-ini">
<span id="myproject-ini"></span><span id="index-8"></span><h3>`` development.ini``<a class="headerlink" href="#development-ini" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` development.ini``ファイルは：term： <cite>PasteDeploy`設定ファイルです。その目的は、 `</cite> pserve``を起動したときに実行するアプリケーションと、そのアプリケーションに提供されるデプロイメント設定を指定することです。</p>
<p>生成された `` development.ini``ファイルは次のようになります：</p>
<div class="highlight-ini notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># app configuration</span>
<span class="c1"># https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html</span>
<span class="c1">###</span>

<span class="k">[app:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:myproject</span>

<span class="na">pyramid.reload_templates</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">pyramid.debug_authorization</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.debug_notfound</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.debug_routematch</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">pyramid.default_locale_name</span> <span class="o">=</span> <span class="s">en</span>
<span class="na">pyramid.includes</span> <span class="o">=</span><span class="s"></span>
<span class="s">    pyramid_debugtoolbar</span>

<span class="c1"># By default, the toolbar only appears for clients from IP addresses</span>
<span class="c1"># &#39;127.0.0.1&#39; and &#39;::1&#39;.</span>
<span class="c1"># debugtoolbar.hosts = 127.0.0.1 ::1</span>

<span class="c1">###</span>
<span class="c1"># wsgi server configuration</span>
<span class="c1">###</span>

<span class="k">[server:main]</span>
<span class="na">use</span> <span class="o">=</span> <span class="s">egg:waitress#main</span>
<span class="na">listen</span> <span class="o">=</span> <span class="s">localhost:6543</span>

<span class="c1">###</span>
<span class="c1"># logging configuration</span>
<span class="c1"># https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/logging.html</span>
<span class="c1">###</span>

<span class="k">[loggers]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">root, myproject</span>

<span class="k">[handlers]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">console</span>

<span class="k">[formatters]</span>
<span class="na">keys</span> <span class="o">=</span> <span class="s">generic</span>

<span class="k">[logger_root]</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">INFO</span>
<span class="na">handlers</span> <span class="o">=</span> <span class="s">console</span>

<span class="k">[logger_myproject]</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">DEBUG</span>
<span class="na">handlers</span> <span class="o">=</span>
<span class="na">qualname</span> <span class="o">=</span> <span class="s">myproject</span>

<span class="k">[handler_console]</span>
<span class="na">class</span> <span class="o">=</span> <span class="s">StreamHandler</span>
<span class="na">args</span> <span class="o">=</span> <span class="s">(sys.stderr,)</span>
<span class="na">level</span> <span class="o">=</span> <span class="s">NOTSET</span>
<span class="na">formatter</span> <span class="o">=</span> <span class="s">generic</span>

<span class="k">[formatter_generic]</span>
<span class="na">format</span> <span class="o">=</span> <span class="s">%(asctime)s %(levelname)-5.5s [%(name)s:%(lineno)s][%(threadName)s] %(message)s</span>
</pre></div>
</td></tr></table></div>
<p>このファイルには、 `` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>、 `` [server：main] <a href="#id3"><span class="problematic" id="id4">``</span></a>、その他のロギング設定に関連するセクションが含まれています。</p>
<p>`` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションは：app： <cite>Pyramid`アプリケーションの設定を表します。 `</cite> use``設定は、 `` [app：main] <a href="#id3"><span class="problematic" id="id4">``</span></a>セクションに存在する唯一の設定です。デフォルト値の `` egg：myproject``は、私たちのmyprojectプロジェクトが提供されるべきアプリケーションを含んでいることを示します。このセクションに追加された他の設定は、パッケージの `` __init __。py``モジュールの `` main``という名前の関数にキーワード引数として渡されます。このセクションにさらに設定を追加することで、アプリケーションに起動時の構成パラメータを提供できます。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">このセクションの `` use = egg：myproject``値の意味については、ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>pastedeploy_entry_points`を参照してください。</p>
</div>
<p>`` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションの `` pyramid.reload_templates``の設定は、：app： <cite>Pyramid`固有の設定で、フレームワークに渡されます。存在し、その値が `</cite> true``の場合、サポートされているテンプレートの変更では、アプリケーションの再起動を検出する必要はありません。詳細は、ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>reload_templates_section`を参照してください。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">`` pyramid.reload_templates``オプションは、実稼働アプリケーションではオフにする必要があります。これは、テンプレートレンダリングが有効になっているときに遅くなるためです。</p>
</div>
<p>`` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションの `` pyramid.includes`の設定は、Pyramidに別のパッケージの設定を &amp;quot;含める&amp;quot;ように指示します。この場合、 `` pyramid.includes = pyramid_debugtoolbar``はPyramidに `` pyramid_debugtoolbar``パッケージの設定を含めるように指示します。これは、開発モードのデバッグパネルをオンにします。これは、画面の右上に：app： <a href="#id3"><span class="problematic" id="id4">`</span></a>Pyramid`ロゴをクリックすることで開くことができます。デバッグツールバーを含めることで、エラーが発生したときに対話的に例外をデバッグすることも可能になります。</p>
<p>このセクションには、app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`アプリケーションの実行時動作をデバッグしたり影響を与えたりするためのさまざまな設定があります。これらの設定の詳細については、ref： <a href="#id3"><span class="problematic" id="id4">`</span></a>environment_chapter`を参照してください。</p>
<p>`` [app：main] <a href="#id1"><span class="problematic" id="id2">``</span></a>の中の `` main``という名前は、これがこの設定ファイルに対して呼び出されたときに `` pserve``が実行するデフォルトのアプリケーションであることを示します。 `` main``という名前は、PasteDeployがデフォルトのアプリケーションであることを示すために使用される規約です。</p>
<p>設定ファイルの `` [server：main] <code class="docutils literal notranslate"><span class="pre">セクションは、TCPポート6543をリッスンするWSGIサーバを設定します。ローカルホストのみ（</span> <span class="pre">``</span> <span class="pre">127.0.0.1</span></code>）でリッスンするように設定されています。</p>
<p id="myproject-ini-logging"><a href="#id1"><span class="problematic" id="id2">``</span></a>＃logging configuration``の後のセクションはPythonの標準ライブラリを表しています：アプリケーションのmod： <cite>logging`モジュール設定。これらのセクションは `ロギングモジュールの設定ファイル設定エンジン&lt;https://docs.python.org/2/howto/logging.html#configuring-logging&gt; `</cite> pserve``や `` pshell``コマンドが実行されたときに <a href="#id3"><span class="problematic" id="id4">`</span></a>_ &amp;#39;を返します。デフォルト設定では、アプリケーションログ出力が端末の標準エラー出力に送信されます。ロギング設定の詳細については、：ref： <a href="#id5"><span class="problematic" id="id6">`</span></a>logging_chapter`を参照してください。</p>
<p>：term： <cite>ミドルウェア</cite>、alternate：term： <cite>WSGI`など、この</cite> <cite>.ini``ファイルに入れることができる他のタイプのものの詳細については、：term：</cite> PasteDeploy`のドキュメントを参照してください。サーバー実装。</p>
</div>
<div class="section" id="production-ini">
<span id="index-9"></span><h3><cite>production.ini</cite><a class="headerlink" href="#production-ini" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` production.ini``ファイルは：term： <cite>PasteDeploy`設定ファイルで、</cite> <cite>development.ini``によく似ています。ただし、デバッグツールバーを無効にし、WARNレベルを超えるすべてのログメッセージをフィルタリングします。また、テンプレートが変更されたときに自動的にリロードされないように、またすべてのデバッグオプションをオフにするようなテンプレート開発オプションもオフにします。このファイルは、アプリケーションを実稼働環境に置くときに `</cite> development.ini``の代わりに使うのに適しています。</p>
<p>アプリケーションをベンチマークしてプロダクションに入れるには、 `` production.ini``（そして `` development.ini``ではなく*）を使うことが重要です。 `` development.ini``は開発に役立つデバッグツールバーを使ってシステムを設定しますが、このツールバーを組み込むことでページレンダリング時間が一桁以上遅くなります。デバッグツールバーは、正しく構成されていないと、セキュリティリスクの可能性もあります。</p>
</div>
<div class="section" id="manifest-in">
<span id="index-10"></span><h3>`` MANIFEST.in``<a class="headerlink" href="#manifest-in" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` MANIFEST.in``ファイルは：term： <cite>distutils`設定ファイルで、pythonプロジェクトの：term：</cite> distribution`が `` pythonを実行するときに作成されるときに含めるべき非Pythonファイルを指定します。 setup.py sdist``を実行します。デフォルトの `` MANIFEST.in``に​​含まれている情報のため、Pyramidプロジェクトのsdistには `` .txt``ファイル、 `` .ini``ファイル、 `` .rst``ファイル、グラフィックファイル、テンプレートファイル、 `` .py``ファイルなどがあります。 `` MANIFEST.in``の構文と使い方の詳細については、<a class="reference external" href="https://docs.python.org/2/distutils/sourcedist.html#the-manifest-in">https://docs.python.org/2/distutils/sourcedist.html#the-manifest-in</a>-templateを参照してください。</p>
<p>`` MANIFEST.in``ファイルがないか、ソースコードをバージョン管理リポジトリにチェックしなくても、 `` setup.py sdist``は* Pythonソースファイル*（ `` .py``で終わるファイルのみ） `` python setup.py sdist`で生成されたtarballに変換します。たとえば、プロジェクトがsetuptools互換のソース管理システムにチェックインされておらず、プロジェクトディレクトリに `` MANIFEST.in``ファイルが含まれていない場合、 `` sdist``マシンに ` <cite>* .pt``ファイルの場合、</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>myproject / templates / mytemplate.pt``ファイルは生成されたtarballに含まれません。</p>
<p>Pyramid cookiecuttersによって生成されるプロジェクトには、デフォルトの `` MANIFEST.in``ファイルが含まれています。 `` MANIFEST.in``ファイルは生成されたtarballに `` * .pt``、 `` * .css``、 `` * .js``のようなファイルを含めるように宣言しています。プロジェクトの `` MANIFEST.in``に​​指定されたファイル以外の拡張子を持つファイルをインクルードし、setuptoolsと互換性のあるバージョン管理システムを使用していない場合は、 `` MANIFEST.in` <a href="#id1"><span class="problematic" id="id2">`</span></a>ファイルを開き、新しいファイルをインクルードするのに必要なステートメントを含めます。これを行う方法の詳細については、<a class="reference external" href="https://docs.python.org/2/distutils/sourcedist">https://docs.python.org/2/distutils/sourcedist</a>.html#principleをご覧ください。</p>
<p>あなたのプロジェクトから `` MANIFEST.in``を削除して、バージョン管理システムにチェックインされたすべてのファイルを生成されたtarballに入れさせるsetuptools機能に依存することもできます。これを可能にするには、アプリケーションのPythonファイルと共に配布するすべてのファイルをSubversionにチェックインしてください。これを実行した後、 `` setup.py sdist``を再実行すると、バージョン管理システムにチェックインされたすべてのファイルがtarballに含まれます。 Subversionを使用せず、代わりに別のバージョン管理システムを使用する場合は、この動作が適切に動作するように `` setuptools-git``や `` setuptools-hg``などのsetuptoolsアドオンをインストールする必要があります。</p>
</div>
<div class="section" id="setup-py">
<span id="index-11"></span><h3>`` setup.py``<a class="headerlink" href="#setup-py" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` setup.py``ファイルは：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>setuptools`セットアップファイルです。これは、パッケージの依存関係をインストールするための要件を定義したり、アプリケーションを配布したりテストしたりするために使用されます。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">`` setup.py``は、Python開発者が再利用可能なコードを配布するために使用する事実上の標準です。 `` setup.py``ファイルとその使い方については、 `` Python Packaging User Guide」を参照してください。 &lt;<a class="reference external" href="https://packaging.python.org/">https://packaging.python.org/</a>&gt; <cite>_と</cite> Setuptoolsのドキュメント&lt;<a class="reference external" href="http://pythonhosted.org/setuptools/">http://pythonhosted.org/setuptools/</a>&gt; <a href="#id1"><span class="problematic" id="id2">`</span></a>_。</p>
</div>
<p>生成された `` setup.py``は次のようになります：</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s1">&#39;README.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">README</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s1">&#39;CHANGES.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">CHANGES</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;plaster_pastedeploy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyramid&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyramid_jinja2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyramid_debugtoolbar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;waitress&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">tests_require</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;WebTest &gt;= 1.3.1&#39;</span><span class="p">,</span>  <span class="c1"># py3 compat</span>
    <span class="s1">&#39;pytest&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pytest-cov&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;myproject&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;MyProject&#39;</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="n">README</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">CHANGES</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;Programming Language :: Python&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Framework :: Pyramid&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Topic :: Internet :: WWW/HTTP&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Topic :: Internet :: WWW/HTTP :: WSGI :: Application&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">keywords</span><span class="o">=</span><span class="s1">&#39;web pyramid pylons&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">extras_require</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;testing&#39;</span><span class="p">:</span> <span class="n">tests_require</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="n">requires</span><span class="p">,</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;paste.app_factory&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;main = myproject:main&#39;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>`` setup.py``ファイルはsetuptoolsの `` setup``関数を呼び出します。これは、コマンドラインで `` pip``に渡される引数に応じて様々なことを行います。</p>
<p>この関数呼び出しの引数の中に、アプリケーションに関する情報が保持されます。 setuptoolsのセットアップファイルに関するすべてのことを説明するのは、このドキュメントの範囲を超えていますが、このセクションでは、このファイルに存在するものについての旋風のツアーを提供します。</p>
<p>アプリケーションの名前には任意の文字列を使用できます。 `` name``フィールドに指定されています。バージョン番号は `` version``値で指定されます。 `` description``フィールドに簡単な説明があります。 `` long_description``は、従来、一緒に追加された `` README``と `` CHANGES``ファイルの内容です。 `` classifiers``フィールドは、 `` Trove分類子のリストです&lt;<a class="reference external" href="https://pypi.org/pypi?%3Aaction=list_classifiers">https://pypi.org/pypi?%3Aaction=list_classifiers</a>&gt;あなたのアプリケーションを記述する。 `` author``と `` author_email``は、おそらく何も記述する必要のないテキストフィールドです。 `` url``はアプリケーションプロジェクトのURLを指すフィールドです（存在する場合）。 `` packages = find_packages（） <a href="#id1"><span class="problematic" id="id2">``</span></a>は、アプリケーションをパッケージ化するときに、プロジェクト内のすべてのパッケージが見つかるようにします。 `` include_package_data``には、バージョンコントロールにチェックインされているアプリケーションがパッケージされている場合、非Pythonファイルが含まれます。 `` zip_safe = False``は、このパッケージが圧縮された卵として安全に使用できないことを示します。代わりに、常にディレクトリとして解凍されます。これはより便利です。 `` install_requires``は、このパッケージが `` pyramid``パッケージに依存していることを示します。 `` extras_require``は、テストの実行に必要なものを定義するPython辞書です。 `` development.ini``ファイルの議論で `` entry_points``を調べました。このファイルはプロジェクトのアプリケーションを表す `` main``エントリーポイントを定義します。</p>
<p>通常は、アプリケーションを他の人に配布するとき、Pythonパッケージの依存関係を追加するとき、またはあなたのアプリケーションをバージョン管理するときに `` setup.py``ファイルの内容について考えるだけです。楽しみのために、今すぐこのコマンドを試すことができます：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ $VENV/bin/python setup.py sdist
</pre></div>
</div>
<p>これは `` myproject-0.0.tar.gz``という名前の `` dist``サブディレクトリにアプリケーションのtarballを作成します。アプリケーションをインストールして使用したい他の人にこのtarballを送ることができます。</p>
</div>
</div>
<div class="section" id="the-myproject-package">
<span id="index-12"></span><h2>`` myproject``：term： <cite>Package</cite><a class="headerlink" href="#the-myproject-package" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>`` myproject``：term： <cite>package`は</cite> <cite>myproject`</cite>：term：` project`の中にあります。を含む：</p>
<ol class="arabic simple">
<li>`` __init __。py``ファイルは、これがPython：term： <cite>package`であることを示します。また、 `</cite> pserve``、 `` pshell``、 `` pviews``などのコマンドのエントリポイントとして使用される `` main``関数を含む、ユーザがアプリケーションを動かせるようにするコードも含まれています。</li>
<li>`` templates``ディレクトリ：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>Jinja2`（または他のタイプの）テンプレートを含んでいます。</li>
<li>アプリケーション用のユニットテストコードを含む `` tests.py``モジュールです。</li>
<li>アプリケーションのビューコードを含む `` views.py``モジュールです。</li>
</ol>
<p>これらは純粋にcookiecutterによって確立された慣例です。 ：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`はあなたが何か特別な方法で物事の名前を書いていると主張していません。しかし、Pyramidの標準に従って名前を付けることは、一般的には良い考えです。そのため、他のPyramid開発者は、ヘルプが必要なときに素早くコードをスピードアップできます。</p>
<div class="section" id="init-py">
<span id="index-13"></span><span id="id3"></span><h3>`` __init __。py``<a class="headerlink" href="#init-py" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>アプリケーションを設定し、term： <cite>PasteDeploy`</cite> <cite>.ini``ファイルで使用するエントリポイントを宣言する小さなPythonモジュールが必要です。これは `</cite> __init __。py``という名前のファイルです。 `` __init __。py``の存在は、それを含むディレクトリが* package <a href="#id1"><span class="problematic" id="id2">*</span></a>であることをPythonに知らせます。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This function returns a Pyramid WSGI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">include</span><span class="p">(</span><span class="s1">&#39;pyramid_jinja2&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_static_view</span><span class="p">(</span><span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="s1">&#39;static&#39;</span><span class="p">,</span> <span class="n">cache_max_age</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic">
<li><p class="first">1行目は：term： <cite>Configurator`クラスを：mod：</cite> pyramid.config`からインポートします。</p>
</li>
<li><p class="first">4-12行目では：app： <cite>Pyramid</cite> WSGIアプリケーションを返す` <cite>main``という名前の関数を定義しています。この関数は、 `</cite> pserve``を実行した結果、：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>PasteDeploy`フレームワークによって呼び出されるようになっています。</p>
<p>この機能では、アプリケーション構成が実行されます。</p>
<p>7行目は：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>Configurator`のインスタンスを作成します。</p>
<p>8行目は、Jinja2テンプレートバインディングのサポートを追加し、レンダラーを `` .jinja2``拡張子で指定できるようにします。</p>
<p>9行目はstaticビューを登録します。これは、 `` myproject：static``：term： <cite>asset specification`（</cite> <cite>myproject``パッケージの</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>static``ディレクトリ）のファイルを提供します。</p>
<p>10行目は：term： <cite>route`を設定に追加します。このルートは後で `</cite> views``モジュールのビューで使用されます。</p>
<p>11行目は `` config.scan（） <a href="#id1"><span class="problematic" id="id2">``</span></a>を呼び出します。これは、パッケージ内の他の場所で宣言されたビュー登録を受け取ります（この場合、 `` views.py``モジュール内にあります）。</p>
<p>12行目は：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>WSGI`アプリケーションを関数の呼び出し側（Pyramidのpserve）に返します。</p>
</li>
</ol>
</div>
<div class="section" id="views-py">
<span id="index-14"></span><h3>`` views.py``<a class="headerlink" href="#views-py" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>a：app： <cite>Pyramid`アプリケーションの大部分は、* view callables *によって行われます。 A：term： `view callable`は、app：</cite> Pyramid`ウェブアプリケーション開発者の主なツールです。 ：term： <cite>request`を受け取り、：term：</cite> response`を返すコードです。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyramid.view</span> <span class="kn">import</span> <span class="n">view_config</span>


<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;templates/mytemplate.jinja2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;project&#39;</span><span class="p">:</span> <span class="s1">&#39;MyProject&#39;</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>4行目〜6行目は、 `` my_view``という名前の `` callable``を定義して登録します。 `` my_view``という名前の関数は、 `` __init __。py``の `` config.scan（） <code class="docutils literal notranslate"><span class="pre">行によって処理される</span> <span class="pre">``</span> <span class="pre">view_config``デコレータで装飾されています。</span> <span class="pre">view_configデコレータは、</span> <span class="pre">``</span> <span class="pre">home``という名前のa：term：</span> <span class="pre">`ルート`がマッチしたときに、このビューが見つかると主張します。私たちの場合、私たちの</span> <span class="pre">``</span> <span class="pre">__init</span> <span class="pre">__。py``は</span> <span class="pre">``</span> <span class="pre">home``という名前のルートをURLパターン</span> <span class="pre">``</span> <span class="pre">/</span> <span class="pre">``にマップするので、訪問者がルートURLを訪れるとこのルートが一致します。</span> <span class="pre">view_configデコレータは、レンダラーの名前を指定します。この場合、ビューの結果をレンダリングするために使用されるテンプレートです。この特定のビュー宣言は</span> <span class="pre">``</span> <span class="pre">templates</span> <span class="pre">/</span> <span class="pre">mytemplate.pt``を指しています。これは</span> <span class="pre">``</span> <span class="pre">myproject``の</span> <span class="pre">``</span> <span class="pre">templates``ディレクトリ内の</span> <span class="pre">``</span> <span class="pre">mytemplate.pt``ファイルを指定する</span> <span class="pre">``</span> <span class="pre">asset</span> <span class="pre">specification``です：</span> <span class="pre">``パッケージ。資産仕様は、</span> <span class="pre">``</span> <span class="pre">myproject：templates</span> <span class="pre">/</span> <span class="pre">mytemplate.pt``として指定されている可能性もあります。先頭のパッケージ名とコロンはオプションです。指されるテンプレートファイルはa：term：</span> <span class="pre">`Jinja2`テンプレートファイル（`</span> <span class="pre">`templates</span> <span class="pre">/</span> <span class="pre">my_template.jinja2</span></code>）です。</p>
<p>このビュー呼び出し可能関数は、：term： <cite>request`という単一の情報を渡します。 * request *は、サーバーへのブラウザーの要求を表す：term： `WebOb`</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>Request``クラスのインスタンスです。</p>
<p>このビューは、テンプレート上で：term： <a href="#id1"><span class="problematic" id="id2">`</span></a>renderer`を呼び出すように設定されています。ビューが返す辞書（6行目）は、レンダラーがHTMLを生成するときにテンプレートに代入する値を提供します。次に、レンダラーは：term： <a href="#id3"><span class="problematic" id="id4">`</span></a>response`でHTMLを返します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">辞書は値を：term： <cite>template</cite> sに提供します。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">アプリケーションがcookiecutterの：ref： <cite>default development.iniで実行されているとき&lt;myproject_ini&gt; `configuration、：ref：`ロギングが設定されています&lt;myproject_ini_logging&gt; `デバッグを助ける。例外が発生した場合、起動メッセージの後にキャッチされないトレースバックが表示されます：ref： `サーバを実行しているコンソール&lt;running_the_project_application&gt; `。また、 `</cite> print（） <a href="#id1"><span class="problematic" id="id2">``</span></a>文をデバッグのためにアプリケーションに挿入して、このコンソールに出力を送ることもできます。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p>`` development.ini``には、テンプレートがどのように再ロードされるかを制御する設定があります。 `` pyramid.reload_templates``です。</p>
<ul class="last simple">
<li>CookieCutterの `` development.ini``のように `` True``に設定すると、変更されたテンプレートはサーバを再起動せずに自動的にリロードされます。開発中は便利ですが、テンプレートのレンダリング速度が遅くなります。</li>
<li>`` False``（デフォルト値）に設定されている場合、テンプレートを変更するには、テンプレートをリロードするためにサーバを再起動する必要があります。プロダクションアプリケーションは、 `` pyramid.reload_templates = False``を使うべきです。</li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">ビュー、レンダラー、およびテンプレートがどのように関係し協力するかについての詳細は、：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>views_which_use_a_renderer`を参照してください。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">Pyramidは、変更されたPythonファイルを動的にリロードすることもできます。参照：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>reloading_code`を参照してください。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">：ref： <a href="#id1"><span class="problematic" id="id2">`</span></a>debug_toolbar`も参照してください。これは、アプリケーション内部へのインタラクティブなアクセスを提供し、例外が発生した場合、Pythonインタプリタからのトレースバック実行スタックフレームへのインタラクティブなアクセスを可能にします。</p>
</div>
</div>
<div class="section" id="static">
<span id="index-15"></span><h3>「静的」<a class="headerlink" href="#static" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>このディレクトリには、 `` layout.jinja2``テンプレートをサポートする静的資産が含まれています。それはCSSと画像を含んでいます。</p>
</div>
<div class="section" id="templates-layout-jinja2">
<h3>`` templates / layout.jinja2``<a class="headerlink" href="#templates-layout-jinja2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>これが基本レイアウトの内容です。これは、コンテンツブロックのための単一のマーカーを含んでいます。他のテンプレートはコンテンツを継承し、Webアプリケーションのレイアウトを提供します。その内容はここに表示するには長すぎますが、ここに抜粋があります：</p>
<div class="highlight-jinja notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="x">          &lt;div class=&quot;col-md-10&quot;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;p&gt;No content&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">          &lt;/div&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="templates-mytemplate-jinja2">
<h3>`` templates / mytemplate.jinja2``<a class="headerlink" href="#templates-mytemplate-jinja2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>これはプロジェクトに存在するcontent：term： <cite>Jinja2`テンプレートです。これは、 `</cite> views.py``ファイルで呼び出し可能な `` my_view``ビューの `` renderer``として `` &#64; view_config``を呼び出すことによって参照されます。レンダラの詳細については：ref： <cite>views_which_use_a_renderer`を参照してください。 `</cite> layout.jinja2``が提供するHTMLを継承（&amp;quot;extend &amp;quot;）し、コンテンツブロックを独自のコンテンツに置き換えます。</p>
<div class="highlight-jinja notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.jinja2&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;div class=&quot;content&quot;&gt;</span>
<span class="x">  &lt;h1&gt;&lt;span class=&quot;font-semi-bold&quot;&gt;Pyramid&lt;/span&gt; &lt;span class=&quot;smaller&quot;&gt;Starter project&lt;/span&gt;&lt;/h1&gt;</span>
<span class="x">  &lt;p class=&quot;lead&quot;&gt;Welcome to &lt;span class=&quot;font-normal&quot;&gt;MyProject&lt;/span&gt;, a&amp;nbsp;Pyramid application generated&amp;nbsp;by&lt;br&gt;&lt;span class=&quot;font-normal&quot;&gt;Cookiecutter&lt;/span&gt;.&lt;/p&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
<p>テンプレートは、ビュー設定によってアクセスされ、使用されることがあります。 ref： <cite>templates_used_directly`と：ref：</cite> templates_used_as_renderers`を参照してください。</p>
</div>
<div class="section" id="tests-py">
<span id="index-16"></span><h3>`` tests.py``<a class="headerlink" href="#tests-py" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>`` tests.py``モジュールにはアプリケーションのテストが含まれています。</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pyramid</span> <span class="kn">import</span> <span class="n">testing</span>


<span class="k">class</span> <span class="nc">ViewTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">testing</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">my_view</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">testing</span><span class="o">.</span><span class="n">DummyRequest</span><span class="p">()</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;project&#39;</span><span class="p">],</span> <span class="s1">&#39;MyProject&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">FunctionalTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">myproject</span> <span class="kn">import</span> <span class="n">main</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">main</span><span class="p">({})</span>
        <span class="kn">from</span> <span class="nn">webtest</span> <span class="kn">import</span> <span class="n">TestApp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span> <span class="o">=</span> <span class="n">TestApp</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testapp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Pyramid&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>このサンプルの `` tests.py``ファイルには、ユニットテストと機能テストが1つずつあります。これらのテストは `` py.test -q``を実行すると実行されます。アプリケーションをビルドするときに、ここでさらにテストを追加することができます。 app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`を使うテストを書く必要はありません。このファイルは、便宜と例のために提供されています。</p>
<p>app： <cite>Pyramid`単体テストの記述については、ref：</cite> testing_chapter`を参照してください。</p>
</div>
</div>
<div class="section" id="modifying-package-structure">
<span id="index-17"></span><span id="id4"></span><h2>パッケージ構造の変更<a class="headerlink" href="#modifying-package-structure" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>受け入れられたPyramid cookiecutterのデフォルトからあまり大きく外れないように、アプリケーションのコードレイアウトを調整することをお勧めします。あなたが物事を非常に変えることを控えると、他のピラミッドのコーダーがあなたのアプリケーションをより迅速に理解することができます。ただし、cookiecutterによって作成されたコードレイアウトの選択肢は決して魔法でも必要でもありません。任意のcookiecutterによって選択されたにもかかわらず、コードがどのように見えるか決めることができます。</p>
<p>たとえば、：meth： <cite>〜pyramid.config.Configurator.add_view`という名前の設定メソッドは、：term：`点線のPython名 `または直接のオブジェクト参照をビューとして使用するクラスまたは関数として渡す必要があります。デフォルトでは、 `</cite> starter`` cookiecutterはあなたのパッケージ内の `` views.py``モジュールにビュー関数を追加します。しかし、 `` views`` <a href="#id1"><span class="problematic" id="id2">*</span></a>ディレクトリ*を作成し、それぞれのビューに1つのファイルを追加するほうが快適かもしれません。</p>
<p>もしあなたのプロジェクトパッケージ名が `` myproject``で、あなたのビューを単一の `` views &amp;#39;の代わりに `` myproject`：term： <cite>package`という名前の</cite> <a href="#id1"><span class="problematic" id="id2">`</span></a>views``というPythonサブパッケージに配置したいなら、 .py``ファイルを作成するには、次のようにします。</p>
<ul class="simple">
<li>`` myproject``パッケージディレクトリ（ `` views.py``を保持するのと同じディレクトリ）の中に `` views``ディレクトリを作成します。</li>
<li>`` __init __。py``という名前の新しい `` views``ディレクトリ内にファイルを作成します。 （これは空でもかまいません。これは単に `` views``ディレクトリが* package <a href="#id1"><span class="problematic" id="id2">*</span></a>であることをPythonに伝えます）。</li>
<li><a href="#id1"><span class="problematic" id="id2">*</span></a>コンテンツを既存の `` views.py``ファイルから `` blog.py``という名前の新しい `` views``ディレクトリ内のファイルに移動します。 `` templates``ディレクトリは `` myproject``パッケージに残っているので、 `` blog.py``のテンプレート：term： <cite>asset specification`の値は、プロジェクトのパッケージ名（</cite> <cite>myproject ：templates / blog.pt`</cite>）。</li>
</ul>
<p>ビュー呼び出し可能関数を `` blog.py``モジュールに追加することもできますが、ビュー呼び出し可能関数を含む `` .py``ファイルを `` views``ディレクトリに追加することもできます。 `` &#64; view_config``ディレクティブを使用して `` config.scan（） <a href="#id1"><span class="problematic" id="id2">``</span></a>と一緒にビューを登録する限り、それらはアプリケーションの再起動時に自動的に取得されます。</p>
</div>
<div class="section" id="using-the-interactive-shell">
<h2>インタラクティブシェルの使用<a class="headerlink" href="#using-the-interactive-shell" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>`` pshell``コマンドを使って、 `` pserve``でPyramidアプリケーションを実行していた場合に読み込まれるのと同じ設定のPythonインタプリタプロンプトを読み込むことができます。これは便利なデバッグツールです。詳細はref： <a href="#id1"><span class="problematic" id="id2">`</span></a>interactive_shell`を参照してください。</p>
</div>
<div class="section" id="what-is-this-pserve-thing">
<span id="id5"></span><h2>この「pserve」は何ですか？<a class="headerlink" href="#what-is-this-pserve-thing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>a：app： <cite>Pyramid</cite> cookiecutterによって生成されたコードは、開発中にアプリケーションを起動するために` <cite>pserve``コマンドを使用することを前提としています。 `</cite> pserve``は：term： <cite>PasteDeploy`</cite> <cite>.ini``ファイル（例えば</cite> <cite>development.ini`</cite>）を読み込んで、：app：` Pyramid`アプリケーションを提供するようにサーバを設定するコマンドですファイル内のデータに基づいて</p>
<p>`` pserve``は決して：app： <cite>Pyramid`アプリケーションを起動して提供する唯一の方法ではありません。 ：ref： `firstapp_chapter`で見たように、：app：</cite> Pyramid`アプリケーションを実行するために `` pserve``を全く呼び出す必要はありません。 app： <cite>Pyramid`アプリケーションを実行するための</cite> <cite>pserve``の使用は純粋にcookiecutterの出力に基づいて行われます。しかし、他の便利なイントロスペクションコマンド（ `</cite> pviews``、 `` prequest``、 `` proutes`など）の多くは、以下の点で実装されているので、アプリケーションを開発する際に `` pserve``を使うことを強くお勧めします。この `` .ini``ファイル形式の設定可否Pyramidのロギングを設定し、コードが変更されたときにサーバを再起動するための `` --reload``スイッチも提供します。</p>
</div>
<div class="section" id="using-an-alternate-wsgi-server">
<span id="alternate-wsgi-server"></span><h2>代替WSGIサーバーの使用<a class="headerlink" href="#using-an-alternate-wsgi-server" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pyramid cookiecuttersは、：term： <cite>Waitress</cite> WSGIサーバーを使用するプロジェクトを生成します。ウェイトレスは、開発や軽量生産に適したサーバーです。これは、最も高速で機能的なWSGIサーバーでもありません。その代わりに、Pyramidの開発者の視点から、Pyramidを実行する必要があるすべてのプラットフォーム上で動作するため、デフォルトサーバーとして最適です。</p>
<p>どのWSGIサーバーでも、：app： <a href="#id1"><span class="problematic" id="id2">`</span></a>Pyramid`アプリケーションを実行することができます。しかし、開発のためにデフォルトのサーバーを使用することをお勧めします。アプリケーションを本番環境に展開する準備が整うまで、他のサーバーオプションの調査を待つことをお勧めします。なんらかの理由で非ローカルシステムで開発する必要がある場合を除き、代替サーバーオプションを調べることは通常、展開の準備が整うまでは気をそらすものです。しかし、完全に制御できるローカルシステム上のデフォルト設定を使用して開発することをお勧めします。最高の開発経験を提供します。</p>
<p>デフォルトのWaitressサーバの代用として、term： <a href="#id1"><span class="problematic" id="id2">`</span></a>mod_wsgi`があります。 mod_wsgi``を使って、Waitressのような&amp;quot;純粋なPython &amp;quot;サーバではなく、Apache Webサーバを使って：app： <a href="#id3"><span class="problematic" id="id4">`</span></a>Pyramid`アプリケーションを提供することができます。それは速く、特徴的です。詳細はref： <a href="#id5"><span class="problematic" id="id6">`</span></a>modwsgi_tutorial`を参照してください。</p>
<p>もう一つの優れた生産方法は、用語：「グリーンユニコーン」（別名「ガンコーン」）です。これはWaitressよりも速く、 `` mod_wsgi``より少し構成が簡単ですが、デフォルトの設定では、HTTPプロキシをバッファリングすることに依存しています。この執筆時点では、Windows上では動作しません。</p>
</div>
<div class="section" id="automatically-reloading-your-code">
<h2>コードの自動リロード<a class="headerlink" href="#automatically-reloading-your-code" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発時には、変更を加えたときにウェブサーバーを自動的に再起動させるのが本当に便利です。 `` pserve``にはこれを有効にする `` --reload``スイッチがあります。これは <cite>hupper &lt;https://docs.pylonsproject.org/projects/hupper/en/latest/&gt; `_ packageこの動作を有効にします。コードがクラッシュすると、 `</cite> hupper``は別の変更や `` SIGHUP``シグナルを待ってから再起動します。</p>
<div class="section" id="inotify-support">
<h3>inotifyサポート<a class="headerlink" href="#inotify-support" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>デフォルトで `` hupper``はすべてのPythonコードの変更をファイルシステムにポーリングします。これは、大規模なプロジェクトでは非常に非効率的です。あなたのハードドライブにもっと良くなるためには、 <cite>watchdog &lt;http://pythonhosted.org/watchdog/&gt; `開発中のパッケージ。 `</cite> hupper``は自動的に `` watchdog``を使ってより効率的にファイルシステムをポーリングします。</p>
</div>
<div class="section" id="monitoring-custom-files">
<h3>カスタムファイルの監視<a class="headerlink" href="#monitoring-custom-files" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>デフォルトでは、 `` pserve --reload``は全てのインポートされたPythonコード（ `` sys.modules``のすべて）と `` pserve``に渡される設定ファイルを監視します（例えば、 `` development.ini`` <cite>）。あなたの設定ファイルに `</cite> [pserve] <a href="#id1"><span class="problematic" id="id2">``</span></a>セクションを定義することによって、 `` pserve``に変更のための他のファイルを見るように指示することができます。たとえば、起動時にアプリケーションが `` favicon.ico``ファイルを読み込んでメモリに格納して、何度も効率的にサービスを提供しているとします。あなたがそれを変更すると、 `` pserve``を再起動します：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pserve]</span>
<span class="na">watch_files</span> <span class="o">=</span><span class="s"></span>
<span class="s">    myproject/static/favicon.ico</span>
</pre></div>
</div>
<p>パスはコンフィグレーションファイルに対して絶対パスでも相対パスでもかまいません。彼らはまた、用語：資産仕様書でもよい。これらのパスは `` hupper``に渡されます。 `` hupper``はglobbingの基本的なサポートをしています。許容されるglobパターンは、使用されているPythonのバージョンに依存します。</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(機械翻訳) <span>Pyramid</span> プロジェクトの作成</a><ul>
<li><a class="reference internal" href="#pyramid-cookiecutters">：app： <cite>Pyramid</cite> cookiecutters</a></li>
<li><a class="reference internal" href="#creating-the-project">プロジェクトの作成</a></li>
<li><a class="reference internal" href="#installing-your-newly-created-project-for-development">新しく開発されたプロジェクトをインストールする</a></li>
<li><a class="reference internal" href="#running-the-tests-for-your-application">アプリケーションのテストの実行</a></li>
<li><a class="reference internal" href="#running-the-project-application">プロジェクトアプリケーションの実行</a><ul>
<li><a class="reference internal" href="#reloading-code">コードのリロード</a></li>
</ul>
</li>
<li><a class="reference internal" href="#viewing-the-application">アプリケーションの表示</a><ul>
<li><a class="reference internal" href="#the-debug-toolbar">デバッグツールバー</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-project-structure">プロジェクトの構造</a></li>
<li><a class="reference internal" href="#the-myproject-project">`` myproject``：term： <cite>Project</cite></a><ul>
<li><a class="reference internal" href="#development-ini">`` development.ini``</a></li>
<li><a class="reference internal" href="#production-ini"><cite>production.ini</cite></a></li>
<li><a class="reference internal" href="#manifest-in">`` MANIFEST.in``</a></li>
<li><a class="reference internal" href="#setup-py">`` setup.py``</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-myproject-package">`` myproject``：term： <cite>Package</cite></a><ul>
<li><a class="reference internal" href="#init-py">`` __init __。py``</a></li>
<li><a class="reference internal" href="#views-py">`` views.py``</a></li>
<li><a class="reference internal" href="#static">「静的」</a></li>
<li><a class="reference internal" href="#templates-layout-jinja2">`` templates / layout.jinja2``</a></li>
<li><a class="reference internal" href="#templates-mytemplate-jinja2">`` templates / mytemplate.jinja2``</a></li>
<li><a class="reference internal" href="#tests-py">`` tests.py``</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modifying-package-structure">パッケージ構造の変更</a></li>
<li><a class="reference internal" href="#using-the-interactive-shell">インタラクティブシェルの使用</a></li>
<li><a class="reference internal" href="#what-is-this-pserve-thing">この「pserve」は何ですか？</a></li>
<li><a class="reference internal" href="#using-an-alternate-wsgi-server">代替WSGIサーバーの使用</a></li>
<li><a class="reference internal" href="#automatically-reloading-your-code">コードの自動リロード</a><ul>
<li><a class="reference internal" href="#inotify-support">inotifyサポート</a></li>
<li><a class="reference internal" href="#monitoring-custom-files">カスタムファイルの監視</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="configuration.html"
                        title="前の章へ">(機械翻訳) アプリケーション構成</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="startup.html"
                        title="次の章へ">(機械翻訳) 起動</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/narr/project.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="startup.html" title="(機械翻訳) 起動"
             >次へ</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="(機械翻訳) アプリケーション構成"
             >前へ</a> |</li>
    	<li><a href="../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 11月 03, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>