
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Design &#8212; The Pyramid Web Framework v1.9.2</title>
    <link rel="stylesheet" href="../../_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="copyright" title="著作権" href="../../copyright.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Background" href="background.html" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/nobile/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="//static.pylonsproject.org/fonts/neuton/stylesheet.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="../../_static/pyramid.ico"/>

  </head><body>







<div class="header-small">
	
	<div class="logo-small">
		<a href="../../index.html">
      		<img class="logo" src="../../_static/pyramid-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="background.html" title="Background"
             accesskey="P">前へ</a> |</li>
    	<li><a href="../../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">ZODB + Traversal Wiki Tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="design">
<span id="wiki-design"></span><h1>Design<a class="headerlink" href="#design" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Following is a quick overview of the design of our wiki application, to help
us understand the changes that we will be making as we work through the
tutorial.</p>
<div class="section" id="overall">
<h2>Overall<a class="headerlink" href="#overall" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>We choose to use <a class="reference internal" href="../../glossary.html#term-restructuredtext"><span class="xref std std-term">reStructuredText</span></a> markup in the wiki text. Translation
from reStructuredText to HTML is provided by the widely used <code class="docutils literal notranslate"><span class="pre">docutils</span></code>
Python module.  We will add this module in the dependency list on the project
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file.</p>
</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The root resource named <code class="docutils literal notranslate"><span class="pre">Wiki</span></code> will be a mapping of wiki page
names to page resources.  The page resources will be instances
of a <em>Page</em> class and they store the text content.</p>
<p>URLs like <code class="docutils literal notranslate"><span class="pre">/PageName</span></code> will be traversed using  Wiki[
<em>PageName</em> ] =&gt; page, and the context that results is the page
resource of an existing page.</p>
<p>To add a page to the wiki, a new instance of the page resource
is created and its name and reference are added to the Wiki
mapping.</p>
<p>A page named <code class="docutils literal notranslate"><span class="pre">FrontPage</span></code> containing the text <em>This is the front page</em>, will
be created when the storage is initialized, and will be used as the wiki home
page.</p>
</div>
<div class="section" id="views">
<h2>Views<a class="headerlink" href="#views" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>There will be three views to handle the normal operations of adding,
editing, and viewing wiki pages, plus one view for the wiki front page.
Two templates will be used, one for viewing, and one for both adding
and editing wiki pages.</p>
<p>As of version 1.5 <span>Pyramid</span> no longer ships with templating systems.  In this tutorial, we will use <a class="reference internal" href="../../glossary.html#term-chameleon"><span class="xref std std-term">Chameleon</span></a>.  Chameleon is a variant of <a class="reference internal" href="../../glossary.html#term-zpt"><span class="xref std std-term">ZPT</span></a>, which is an XML-based templating language.</p>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>We'll eventually be adding security to our application.  The components we'll
use to do this are below.</p>
<ul>
<li><p class="first">USERS, a dictionary mapping <a class="reference internal" href="../../glossary.html#term-userid"><span class="xref std std-term">userids</span></a> to their
corresponding passwords.</p>
</li>
<li><p class="first">GROUPS, a dictionary mapping <a class="reference internal" href="../../glossary.html#term-userid"><span class="xref std std-term">userids</span></a> to a
list of groups to which they belong.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">groupfinder</span></code>, an <em>authorization callback</em> that looks up USERS and
GROUPS.  It will be provided in a new <code class="docutils literal notranslate"><span class="pre">security.py</span></code> file.</p>
</li>
<li><p class="first">An <a class="reference internal" href="../../glossary.html#term-acl"><span class="xref std std-term">ACL</span></a> is attached to the root <a class="reference internal" href="../../glossary.html#term-resource"><span class="xref std std-term">resource</span></a>.  Each row below
details an <a class="reference internal" href="../../glossary.html#term-ace"><span class="xref std std-term">ACE</span></a>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="38%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Action</th>
<th class="head">Principal</th>
<th class="head">Permission</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Allow</td>
<td>Everyone</td>
<td>View</td>
</tr>
<tr class="row-odd"><td>Allow</td>
<td>group:editors</td>
<td>Edit</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Permission declarations are added to the views to assert the security
policies as each request is handled.</p>
</li>
</ul>
<p>Two additional views and one template will handle the login and
logout tasks.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The URL, context, actions, template and permission associated to each view are
listed in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="13%" />
<col width="17%" />
<col width="23%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">View</th>
<th class="head">Context</th>
<th class="head">Action</th>
<th class="head">Template</th>
<th class="head">Permission</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/</td>
<td>view_wiki</td>
<td>Wiki</td>
<td>Redirect to
/FrontPage</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>/PageName</td>
<td>view_page
<a class="footnote-reference" href="#id4" id="id1">[1]</a></td>
<td>Page</td>
<td>Display existing
page <a class="footnote-reference" href="#id5" id="id2">[2]</a></td>
<td>view.pt</td>
<td>view</td>
</tr>
<tr class="row-even"><td>/PageName/edit_page</td>
<td>edit_page</td>
<td>Page</td>
<td><p class="first">Display edit form
with existing
content.</p>
<p class="last">If the form was
submitted, redirect
to /PageName</p>
</td>
<td>edit.pt</td>
<td>edit</td>
</tr>
<tr class="row-odd"><td>/add_page/PageName</td>
<td>add_page</td>
<td>Wiki</td>
<td><p class="first">Create the page
<em>PageName</em> in
storage,  display
the edit form
without content.</p>
<p class="last">If the form was
submitted,
redirect to
/PageName</p>
</td>
<td>edit.pt</td>
<td>edit</td>
</tr>
<tr class="row-even"><td>/login</td>
<td>login</td>
<td>Wiki,
Forbidden <a class="footnote-reference" href="#id6" id="id3">[3]</a></td>
<td><p class="first">Display login form.</p>
<p>If the form was
submitted,
authenticate.</p>
<ul class="last simple">
<li>If authentication
succeeds,
redirect to the
page that we
came from.</li>
<li>If authentication
fails, display
login form with
&quot;login failed&quot;
message.</li>
</ul>
</td>
<td>login.pt</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>/logout</td>
<td>logout</td>
<td>Wiki</td>
<td>Redirect to
/FrontPage</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>This is the default view for a Page context
when there is no view name.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Pyramid will return a default 404 Not Found page
if the page <em>PageName</em> does not exist yet.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><code class="docutils literal notranslate"><span class="pre">pyramid.exceptions.Forbidden</span></code> is reached when a
user tries to invoke a view that is
not authorized by the authorization policy.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Design</a><ul>
<li><a class="reference internal" href="#overall">Overall</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#views">Views</a></li>
<li><a class="reference internal" href="#security">Security</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="background.html"
                        title="前の章へ">Background</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="installation.html"
                        title="次の章へ">Installation</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/tutorials/wiki/design.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >次へ</a> |</li>
        <li class="right" >
          <a href="background.html" title="Background"
             >前へ</a> |</li>
    	<li><a href="../../index.html">The Pyramid Web Framework v1.9.2</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >ZODB + Traversal Wiki Tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../../copyright.html">Copyright</a> 2008-2018, Agendaless Consulting.
      最終更新: 10月 28, 2018
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1 で生成しました。
    </div>
  </body>
</html>